if (self.CavalryLogger) { CavalryLogger.start_js(["Kxa83NX"]); }

__d("useOzImplementationData_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useOzImplementationData_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_use_oz",storageKey:null},{alias:"playable_url_dash",args:[{kind:"Literal",name:"scrubbing_preference",value:"MPEG_DASH"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(scrubbing_preference:"MPEG_DASH")'},{alias:null,args:null,kind:"ScalarField",name:"dash_manifest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_quality_preference",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useProgressiveImplementationData_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useProgressiveImplementationData_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_rss_podcast_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_quality_preference",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"playable_url",storageKey:null},{alias:"playable_url_quality_hd",args:[{kind:"Literal",name:"quality",value:"HD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"HD")'},{alias:null,args:null,concreteType:"SphericalVideoFallbackUrls",kind:"LinkedField",name:"spherical_video_fallback_urls",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sd",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useShakaImplementationData_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useShakaImplementationData_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_rss_podcast_video",storageKey:null},{alias:null,args:null,concreteType:"VideoPlayerShakaLiveP2PInit",kind:"LinkedField",name:"video_player_shaka_live_p2p_init",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"json_encoded_video_data",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_init",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"VideoPlayerShakaPerformanceLoggerInit",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video",selections:[{alias:null,args:null,concreteType:"VideoPlayerShakaPerformanceLoggerInit",kind:"LinkedField",name:"video_player_shaka_performance_logger_init",plural:!1,selections:[{args:null,documentName:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video",fragmentName:"useVideoPlayerShakaPerformanceLoggerRelayImpl_init",fragmentPropName:"init",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_player_shaka_performance_logger_should_sample",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useCometRelayExpiredVideoUrlRefreshHandlerQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"expiredURL"},b={defaultValue:null,kind:"LocalArgument",name:"videoID"},c=[{kind:"Variable",name:"id",variableName:"videoID"}],d={alias:null,args:[{kind:"Variable",name:"expired_url",variableName:"expiredURL"}],concreteType:"RMDRefreshedUrl",kind:"LinkedField",name:"rmd_refreshed_url",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"new_url",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[a,b],kind:"Fragment",metadata:null,name:"useCometRelayExpiredVideoUrlRefreshHandlerQuery",selections:[{alias:null,args:c,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[d],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[b,a],kind:"Operation",name:"useCometRelayExpiredVideoUrlRefreshHandlerQuery",selections:[{alias:null,args:c,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"4268667373184908",metadata:{},name:"useCometRelayExpiredVideoUrlRefreshHandlerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useVideoImplementationsImpl_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoImplementationsImpl_video",selections:[{args:null,kind:"FragmentSpread",name:"useOzImplementationData_video"},{args:null,kind:"FragmentSpread",name:"useShakaImplementationData_video"},{args:null,kind:"FragmentSpread",name:"useProgressiveImplementationData_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaConfig_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaConfig_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_gaming_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_latency_menu_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_streaming",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fbls_tier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_latency_sensitive_broadcast",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"selected_latency_setting",storageKey:null}]}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useSEOLoggedOutWebCrawler",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("1779508")}g["default"]=a}),98);
__d("OzOneSemanticHandlerUtils",["ConstUriUtils","qex","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){b!=null&&(b.indexOf("+RE")>=0&&a.retry()),c!=null&&c()}function a(a,b){var d=b.error;d=d.getExtra();var e=d.code;d=d.headers;var f=null;e==null&&c("recoverableViolation")("A ONE Semantic error response must have an error code.","comet_video_player");d==null&&c("recoverableViolation")("A ONE Semantic error response must contain response Headers.","comet_video_player");if(d!=null){d=d.get("x-fb-one-variant");f=(d=d)!=null?d:null}d=JSON.parse(a.getString("network_retry_intervals_json","{}"));a=d[e];switch(e){case"410":b.endStream();break;case"404":h(b,f,function(){var a=c("qex")._("560")||!1;a&&b.retry({behavior:"recover_failed_request"})});break;case"429":b.retry(a);break;case"403":default:}}function i(a){if(a!=null){a=parseInt(a,10);var b=c("qex")._("2048866");if(b!=null&&b>0)return!isNaN(a)&&a>0&&a<=b}return!1}function j(a,b){if(a!=null&&b!=null){a=parseInt(a,10);b=parseInt(b,10);return!isNaN(a)&&!isNaN(b)&&a>0&&a<=b}return!1}function k(a){if(a!=null){a=d("ConstUriUtils").getUri(a);if(a){a=a.getQueryParam("os_param");return a?String(a).toString():null}}return null}function l(a,b){var d=a!=null;return i(b)||(d||!!c("qex")._("1959789"))&&j(b,a)}function b(a){var b=a.getExtra();b=b.headers;b=m(b);a=a.getExtra();var d=a.code;a=a.url;if(b!=null&&d==null){c("recoverableViolation")("A ONE Semantic error response must have an error code.","comet_video_player");return!1}d=k(a);return l(d,b)}function m(a){if(a){a=a.get("x-fb-one");if(a!=null)return parseInt(a,10)>0?a:null}return null}function e(a,b,c){var d=null,e=null;b!=null&&(d=k(b),d!=null&&a.setOneReqWave(parseInt(d,10)));b=c==null?void 0:c.headers;b&&(e=m(b),e!=null&&a.setOneResWave(parseInt(e,10)));a.setOneObserved(l(d,e))}g.maybeRetryForVariant=h;g.evaluateOneSemanticsResponse=a;g.isOneSemanticsForcedForResponseWave=i;g.isOneSemanticsEnabledForWave=j;g.getOneSemanticRequestWave=k;g.shouldRespondWithOneSemantics=b;g.getOneSemanticResponseWave=m;g.setOneSemanticFetchStreamLoggingAttributes=e}),98);
__d("handleOzManifestFetchErrorEvent",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=a.getNumber("initial_manifest_request_retry_count",0),d=JSON.parse(a.getString("network_retry_intervals_json","{}")),e=a.getNumber("live_max_try_attempts_on_404",1),f=["404","503"];a.getBool("live_gracefully_handle_no_network",!1)&&f.push("0");a.getBool("live_gracefully_handle_410",!1)&&f.push("410");a.getBool("live_gracefully_handle_502",!1)&&f.push("502");a.getBool("live_gracefully_handle_429",!1)&&f.push("429");a.getBool("live_gracefully_handle_504",!1)&&f.push("504");var g=b.error.getExtra().code;a.getBool("handle_mpd_null_error_codes",!1)&&(g=g!=null?g:null);d=d[g];if(b.isInitialRequest)typeof d==="number"&&d>0&&b.retryAttemptCount<c&&b.retry({waitMs:d});else if(g!=null&&f.indexOf(g)>-1)switch(g){case"410":b.endStream();break;case"404":e<b.consecutiveFailuresForErrorCode&&b.retry();break;case"504":case"502":case"503":case"0":b.retry();break;case"429":typeof d==="number"&&d>0&&b.retry({waitMs:d});break;default:break}else g===null&&a.getBool("handle_mpd_null_error_codes",!1)&&b.retry()}f["default"]=a}),66);
__d("handleOzStreamErrorEvent",[],(function(a,b,c,d,e,f){"use strict";var g=[0,1,1,2,3,5,8,13,21,34];function a(a,b){var c=b.error.getExtra().code;if(a.getBool("retry_null_error_code_in_stream",!1)&&c==null){b.retry();return}var d=JSON.parse(a.getString("network_end_broadcasts_json","[]"));if(d.includes(c)){b.endStream();return}d=JSON.parse(a.getString("network_skip_json","[]"));if(d.includes(c)){b.retry();return}d=a.getBool("back_off_pdash_504_retry",!0)?g[b.retryAttemptCount]:0;var e=JSON.parse(a.getString("network_reload_mpd_json","[]")),f=a.getBool("fix_reload_manifest_retry",!1);if(a.getBool("back_off_pdash_504_retry",!0)&&d==null&&(!f||e.includes(c)))return;if(d!=null&&e.includes(c)){a.getBool("network_reload_mpd_json_retry",!1)?b.retry({behavior:"recover_failed_request",waitMs:d*1e3}):b.retry({waitMs:d*1e3});return}f=JSON.parse(a.getString("network_retry_intervals_json",'{"0": 1000, "404": 2000, "502": 1000, "503": 1000, "504": 1000}'));e=c!=null?f[c]:null;if(e!=null){a.getBool("network_retry_intervals_json_retry",!1)?b.retry({behavior:"retry_failed_request",waitMs:e}):b.retry({waitMs:e});return}}f["default"]=a}),66);
__d("OzOneSemanticHandler",["OzOneSemanticHandlerUtils","handleOzManifestFetchErrorEvent","handleOzStreamErrorEvent","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=b.error;!!c("qex")._("1959788")&&d("OzOneSemanticHandlerUtils").shouldRespondWithOneSemantics(e)?d("OzOneSemanticHandlerUtils").evaluateOneSemanticsResponse(a,b):c("handleOzManifestFetchErrorEvent")(a,b)}function b(a,b){var e=b.error;!!c("qex")._("1959788")&&d("OzOneSemanticHandlerUtils").shouldRespondWithOneSemantics(e)?d("OzOneSemanticHandlerUtils").evaluateOneSemanticsResponse(a,b):c("handleOzStreamErrorEvent")(a,b)}g.handleManifestFetchErrorEvent=a;g.handleStreamErrorEvent=b}),98);
__d("OzCDNSignedQueryParams",["ConstUriUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1={}}var b=a.prototype;b.$2=function(a,b,c){this.$1[a]==null&&(this.$1[a]={}),this.$1[a][b]=c};b.get=function(a){a=this.$1[a];return a==null?null:a};b.update=function(a){a=d("ConstUriUtils").getUri(a);if(a!=null){var b=a.getQueryParams();a=a.getDomain()+a.getPath();var c=b.get("oe");c!=null&&this.$2(a,"oe",String(b.get("oe")));b.get("oh")!=null&&this.$2(a,"oh",String(b.get("oh")))}};return a}();g["default"]=a}),98);
__d("SphericalMediaGyroOverlay.react",["cx","CSS","joinClasses","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=800,k=function(a,b,c){b===void 0&&(b=!0);c===void 0&&(c=!1);return{gyroRoot:"_1zvy"+(a?" _2dz7":"")+(b?" _4z8s":"")+(c?" _4z8p":""),gyroOuter:"_4z8q",gyroInner:"_4z8r",gyroMeridian:"_4z8t",gyroEquator:"_4z8u",gyroTextShell:"_4z8v",gyroText:"_4z8w"}};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.rootRef=i.createRef(),b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidUpdate=function(a){var b=this;if(a.isActive&&!this.props.isActive)setTimeout(function(){var a=b.rootRef.current;a instanceof Element&&d("CSS").hide(a)},j);else if(!this.props.isActive){a=this.rootRef.current;a instanceof Element&&d("CSS").hide(a)}};e.componentDidMount=function(){if(!this.props.isActive){var a=this.rootRef.current;a instanceof Element&&d("CSS").hide(a)}};e.render=function(){var a=this.props,b=a.className,d=a.isActive,e=a.isInfinite;a=a.isPaused;d=k(d,e,a);return i.jsx("div",{className:c("joinClasses")(b,d.gyroRoot),ref:this.rootRef,children:i.jsxs("div",{className:d.gyroOuter,children:[i.jsxs("div",{className:d.gyroInner,children:[i.jsx("div",{className:d.gyroMeridian}),i.jsx("div",{className:d.gyroEquator})]}),i.jsx("div",{className:d.gyroTextShell,children:i.jsx("span",{className:d.gyroText,children:"360"})})]})})};return b}(i.PureComponent);g["default"]=a}),98);
__d("VideoPlayerSphericalFallbackCover.react",["fbt","SphericalMediaGyroOverlay.react","TetraText.react","react","unrecoverableViolation","useCometRouterDispatcher","useFeedClickEventHandler"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useState;function a(a){var b=a.videoTahoeUrl,d=c("useCometRouterDispatcher")();a=j(!1);var e=a[0],f=a[1];if(d==null)throw c("unrecoverableViolation")("Missing CometRouterDispatcher","comet_video_player");a=c("useFeedClickEventHandler")(function(){d.go(b,{})});return i.jsxs("div",{className:"bkfpd7mw cbu4d94t j83agx80 nhd2j8a9 bp9cbjyn kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 rq0escxv i09qtzwb",onClick:a,onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},role:"link",tabIndex:0,children:[i.jsx(c("SphericalMediaGyroOverlay.react"),{isActive:!0}),i.jsx("div",{className:"l9j0dhe7 i7orit0i",children:e?i.jsx(c("TetraText.react"),{color:"white",type:"bodyLink3",children:h._("Click to expand")}):null})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useVideoPlayerClickToPlayInteraction",["fbt","VideoPlayerHooks","react","useFeedClickEventHandler"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react").useCallback;function a(a){a=a===void 0?{}:a;var b=a.shouldUnmute;a=d("VideoPlayerHooks").usePaused();var e=d("VideoPlayerHooks").useController(),f=d("VideoPlayerHooks").useLastMuteReason(),g=i(function(){e.play("user_initiated"),b===!0&&f!=="user_initiated"&&e.setMuted(!1,"product_initiated")},[e,f,b]);g=c("useFeedClickEventHandler")(g);a=a;return a?{ariaLabel:h._("Play video"),handler:g,overlayLabel:""}:null}g["default"]=a}),98);
__d("MosUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a,b){if(a===0||b===0)return 0;if(a<b){var c=a;a=b;b=c}c=a/b;return c>16/9?Math.round(a/(16/9)):b}function h(a,b){var c=null,d=null,e=null,f=null;for(var g=0;g<a.length;g++){var h=a[g].qualityLabel;if(h<=b)e=a[g].mosValue,c=h;else{f=a[g].mosValue;d=h;break}}if(c===null&&d===null)return 0;else if(c===null&&f!==null)return f;else if(d===null&&e!==null)return e;else if(f!==null&&e!==null&&c!==null&&d!==null){h=e+(b-c)*(f-e)/(d-c);return h<0?0:h>100?100:h}return 0}function a(a){a=a.split(",");var b=[];for(var c=0;c<a.length;c++){var d=a[c].split(":");if(d.length!==2)return null;var e=Number(d[0]);d=Number(d[1]);if(isNaN(e)||isNaN(d))return null;b.push({qualityLabel:e,mosValue:d})}return b}function b(a,b,c,d,e,f){if(a.length<2)return a;var i=a.map(function(a){return{track:a,mosValue:a.playbackResolutionMos?h(a.playbackResolutionMos,g(b,c)):-1}}),j=[],k=e;for(var l=i.length-1;l>0;l--){if(i[l].mosValue===-1||i[l-1].mosValue===-1)return a;var m=i[l].track.bandwidth||-1,n=i[l-1].track.bandwidth||-1;if(m===-1||n===-1)return a;if(i[l].mosValue<i[l-1].mosValue&&m>=n)continue;m=i[l-1].track.bandwidth!==null?i[l].mosValue-i[l-1].mosValue:Infinity;if(m<=k&&i[l].track.bandwidth&&d/i[l].track.bandwidth<=f){k-=m;continue}else k=e;j.push(i[l].track)}j.push(i[0].track);j.reverse();return j}f.getQualityLabel=g;f.getMosValue=h;f.parsePlaybackMos=a;f.filterTracksWithExpensiveMos=b}),66);
__d("oz-player/utils/OzAbrUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b,c,d){var e=a.getNumber("resolution_constraint_factor");if(e===0)return b;a=b.filter(function(a){return a.getWidth()<=c.width*d*e||a.getHeight()<=c.height*d*e});return!a.length?[b[0]]:a};b=function(a,b,c,d,e,f){b=b?a.getNumber("min_switch_interval"):a.getNumber("initial_switch_interval");d=d>=a.getNumber("abr_min_bandwidth_samples");var g=a.getNumber("abr_eval_buffer_threshold");c=!g||c>=g;g=null;e+a.getNumber("min_eval_interval")>Date.now()?g="min_eval_interval":f+b>Date.now()?g="min_switch_interval":!d?g="min_bandwidth_samples":c||(g="buffer_threshold_not_satisfied");return g};f.excludeLargeRepresentations=a;f.getReasonToPreventEvaluation=b}),66);
__d("oz-player/utils/OzBufferingUtils",[],(function(a,b,c,d,e,f){"use strict";e=.1;var g=1,h=.2;function a(a,b,c){if(i(a,c))return!0;c=a.currentTime;var d=0;for(var e=0;e<a.buffered.length;e++){var f=a.buffered.start(e),g=a.buffered.end(e);if(f<=c&&g>=c){d=g;break}}return d-c>b}function i(a,b){var c=a.currentTime,d=0;for(var e=0;e<a.buffered.length;e++){var f=a.buffered.start(e),g=a.buffered.end(e);if(f<=c&&g>=c){d=g;break}}return Math.abs(d-b)<=h||Math.abs(c-b)<=h}function b(a,b){a=a?a.getSourceBufferState():null;if(!a)return 0;b=b.getCurrentTime();return j(b,a.getBufferedRanges())}function j(a,b){var c=null;for(var d=0;d<b.length;d++){var e=b[d];e.startTime<=a&&e.endTime>a&&(c=e)}return!c?0:c.endTime-a}function c(a){var b=[];for(var c=0;c<a.buffered.length;c++)b.push({rangeStart:a.buffered.start(c),rangeEnd:a.buffered.end(c)});return b}function d(a,b,c,d){if(c.length===0||b.size===0)return!1;var e=null;for(var f=0;f<c.length;f++){var g=c[f],h=b.get(g);if(l(a,0,h)){e=g;break}}if(e==null)return!1;var i=!0;b.forEach(function(c,b){if(e===b)return;b=c.getBufferedRanges();b.forEach(function(b){i=k(a,b,d,i)})});return!i}function k(a,b,c,d){return a>=b.startTime&&a<b.endTime+c?!1:d}function l(a,b,c){b===void 0&&(b=0);if(c){c=c.getBufferedRanges();for(var d=0;d<c.length;d++)if(c[d].startTime<=a&&c[d].endTime>a&&c[d].endTime-a>b)return!0}return!1}f.BUFFER_UNDERFLOW_THRESHOLD=e;f.BUFFER_OVERFLOW_THRESHOLD=g;f.BUFFER_FUDGE_FACTOR=h;f.hasEnoughBuffer=a;f.hasBufferedToOrReachedEnd=i;f.getBufferAheadFromPlaybackStates=b;f.getBufferAheadFromCurrentTime=j;f.getNumericalRangesFromSourceBuffer=c;f.hasEnoughPartialBuffer=d;f.hasBuffer=l}),66);
__d("oz-player/utils/OzPlaybackRestrictionsUtils",[],(function(a,b,c,d,e,f){"use strict";var g=function(a,b){return a.getBandwidth()-b.getBandwidth()};a=function(a,b,c,d,e){if(d.length===0)return[];d.sort(g);b=b.reduce(function(a,b){return b.applyRestriction(a,c)},d);if(e!=null&&e.length>0){var f=d.filter(function(a){return e.indexOf(a.getID())>-1});b=b.concat(f).sort(g)}return a.getBool("ignore_restrictions_when_all_representations_restricted")?b.length>0?b:d:b};f.applyVideoPlaybackRestrictions=a}),66);
__d("OzSystemicRiskABRManager",["MosUtils","oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzBandwidthUtils","oz-player/utils/OzAbrUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzPlaybackRestrictionsUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=6e4,i=2e3,j=50,k={BANDWIDTH:"br",BUFFER:"vb",ENCODING:"er",LOW_MOS:"lm",MULTIPLIER:"m",PREVIOUS_MOS:"pm",PREVIOUS_RESOLUTION:"pr"};a=function(){function a(a,b,c,d,e,f,g,h){this.$11=!1,this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$7=f,this.$8=g,this.$9=h}var b=a.prototype;b.setSourceBuffer=function(a){this.$6=a};b.updateRepresentations=function(a){var b=this;this.$3=a;a=this.$3.find(function(a){return a.getQualityLabel()===b.$2.getQualityLabel()});this.$2=(a=a)!=null?a:this.$3[0]};b.getBestRepresentation=function(a){var b=this.$1.getLegacyConfig(),e=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromPlaybackStates(this.$6,this.$5),f=this.$5.getDuration();f=isNaN(f)?h:f;if(this.$3.length===0){this.$10="no available representations";return this.$2}var g=this.$5.getCurrentTime();f=this.$9==="static"?(f-g)*1e3:h;g=this.$8();a=b.getBool("systemic_risk_use_fetch_range_duration",!1)?this.$12(a):i;var j=b.getBool("use_bandwidth_estimate_from_headers_in_abr",!1)?c("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnosticsFromHeaders(b):c("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnostics(b);if(j==null){this.$10="missing bandwidth diagnostics";return this.$2}var k=this.$13(this.$3).sort(function(a,b){return a.getBandwidth()-b.getBandwidth()}),l=null,m=null,n=null;for(var o=0;o<k.length;o++){m=this.$14(k[o],k[Math.max(o-1,0)],j,g,a,e,f);var p=m;p=p.multiplier;if(isNaN(p)){n=m;l=this.$2;break}p=this.$15(k[o],m.multiplier,a,j);if(p)n=m,l=k[o];else break}l==null?this.$2=b.getBool("respect_playback_restrictions_in_abr_fallback",!1)&&k.length>0?k[0]:this.$3[0]:this.$2=l;this.$16((p=n)!=null?p:m,{isSystemicRiskABREnabled:b.getBool("use_systemic_risk_abr",!1),noRepresentationSelected:l==null,representationCount:k.length});this.$11||(this.$11=!0);return this.$2};b.$15=function(a,b,c,d){a=a.getBandwidth()*b;b=a*c/8e3;c=this.$17(d,b,j);return a<c};b.$17=function(a,b,c){a=d("oz-player/networks/OzBandwidthUtils").getEstimatedRequestTimeToLastByteMs(a,b,c);return b/a*8e3};b.$12=function(a){var b=i;if(a!=null&&a.length>0){var c=a[0].getTimeRange().startTime;a=a[a.length-1].getTimeRange().endTime;a-c>0&&(b=(a-c)*1e3)}return b};b.$14=function(a,b,c,d,e,f,g){var h=this.$1.getLegacyConfig();a=a.getBandwidth();a=a*e/8e3;e=this.$17(c,a,h.getNumber("systemic_risk_abr_high_estimate_confidence",75));c=this.$17(c,a,j);a=this.$18(b,d);d=Math.min(b.getHeight(),b.getWidth());b=this.$19(a,d);var i=1;b||(i=c/e);c=b?h.getNumber("systemic_risk_abr_low_mos_risk_factor",1):h.getNumber("systemic_risk_abr_risk_factor",1);e=this.$11||b?1:h.getNumber("systemic_risk_abr_initial_risk_factor",1);c*=e;h=(g-f*1e3)/g;e=c*i;f=e*h;g=Math.max(f,1);return{bandwidth:i,buffer:h,encoding:c,lowMos:b,multiplier:g,previousMos:a,previousResolution:d}};b.$19=function(a,b){var c=this.$1.getLegacyConfig(),d=c.getNumber("systemic_risk_abr_low_mos_resolution",0);if(d>0)return b<=c.getNumber("systemic_risk_abr_low_mos_resolution",0);return a!=null&&a>0?a<=c.getNumber("systemic_risk_abr_min_watchable_mos",0):!1};b.$18=function(a,b){a=a.getCustomField("playbackResolutionMos");a=d("MosUtils").parsePlaybackMos(String(a));return a!=null?d("MosUtils").getMosValue(a,d("MosUtils").getQualityLabel(b.width,b.height)):null};b.$13=function(a){var b=this;if(!this.$1.getLegacyConfig().getBool("systemic_risk_abr_apply_representation_restrictions",!1))return a;var c=this.$1.getLegacyConfig().getBool("exclude_large_representations_after_restrictions",!1),e=a;a=function(){e=d("oz-player/utils/OzAbrUtils").excludeLargeRepresentations(b.$1,e,b.$8(),b.$7)};var f=function(){e=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(b.$1,b.$4,b.$8(),e)};c||(a(),f());c&&(f(),a());return e};b.$16=function(a,b){if(a==null)return;var c=b.isSystemicRiskABREnabled,d=b.noRepresentationSelected;b=b.representationCount;this.$10=[[k.LOW_MOS,a.lowMos],[k.ENCODING,a.encoding],[k.BANDWIDTH,a.bandwidth],[k.MULTIPLIER,a.multiplier],[k.BUFFER,a.buffer],[k.PREVIOUS_MOS,a.previousMos],[k.PREVIOUS_RESOLUTION,a.previousResolution]].reduce(function(a,b){var c=b[1],d="";switch(typeof c){case"number":d=c.toFixed(1);break;case"boolean":d=c?"1":"0";break;default:d="null"}return a+(b[0]+": "+d+";")},"");c||(this.$10+="disabled;");d&&(this.$10+="none-selected-of-"+b+";")};b.getLastEvaluationReason=function(){return this.$10};return a}();g["default"]=a}),98);
__d("VideoPlayerImplementationErrorNormalization",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.getType();switch(b){case"OZ_NETWORK":a=(b=a.getExtra())==null?void 0:b.code;return a==null||a==="0"?"NetworkError":"HTTPError"}return null}f.getVideoPlayerNormalizedErrorTypeFromOzError=a}),66);
__d("VideoPlayerImplementationLoadSequenceManager",["setTimeout"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=[],this.$2=[]}var b=a.prototype;b.schedule=function(a,b,d){var e=this,f={load:d,maximumBlockTimeMs:a.getNumber("load_sequence_max_delay_ms",0),sequence:b},g=a.getNumber("load_sequence_only_prioritize_first_count",0);g>0?d=!this.$2.find(function(a){return a.sequence<g}):d=!this.$2.find(function(a){return a.sequence<b});d?this.$3(f):(this.$1.push(f),c("setTimeout")(function(){return e.$4(f)},f.maximumBlockTimeMs));return function(){return e.$5(f)}};b.$4=function(a){var b=this.$1.find(function(b){return b===a});b&&(this.$1=this.$1.filter(function(b){return b!==a}),this.$3(b))};b.$3=function(a){var b=this;this.$2.push(a);a.load().then(function(){return b.$6(a)})["catch"](function(c){b.$6(a);throw c});c("setTimeout")(function(){return b.$6(a)},a.maximumBlockTimeMs)};b.$7=function(){var a=this,b=Math.min.apply(Math,this.$1.map(function(a){return a.sequence})),c=this.$1.filter(function(a){return a.sequence===b});c.forEach(function(b){return a.$4(b)})};b.$5=function(a){this.$1=this.$1.filter(function(b){return b!==a})};b.$6=function(a){if(!this.$2.find(function(b){return b===a}))return;this.$2=this.$2.filter(function(b){return b!==a});var b=!!this.$2.find(function(b){return b.sequence===a.sequence});b&&this.$7()};return a}();b=new a();d=b;g["default"]=d}),98);
__d("VideoPlayerOzImplementationData",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.canUseOz,c=a.dashManifest,d=a.dashUrl,e=a.experimentationConfig,f=a.minQualityPreference,g=a.ozQuickStarterData;a=a.videoFBID;if(b!==!0||a==null)return null;b=c==null||c===""?null:c;a=d==null||d===""?null:d;if(b==null&&a==null)return null;return e==null?null:{experimentationConfig:e,manifest:b,manifestUrl:a,minQualityPreference:(c=f)!=null?c:null,ozQuickStarterData:(d=g)!=null?d:null}}f.makeOzImplementationData=a}),66);
__d("handleVideoPlayerLatencyLevelChange",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){if(a&&b&&c){var e=a.getAllContexts().latency_level;c=[];try{c=JSON.parse(a.getString("seek_on_latency_level_change_allowed","[]"))}catch(a){}c=c.some(function(a){return a.length===2&&a[0]===e&&a[1]===d});a.setContext("latency_level",d);if(!c)return;c=b.getDuration();c=c!=null?c+a.getNumber("live_initial_playback_position",0):null;c!=null&&b.setPlayheadPosition(c)}}f["default"]=a}),66);
__d("VideoPlayerOzImplementationEngineExtrasAPI",["VideoPlayerOzWWWGlobalConfig","emptyFunction","gkx","handleVideoPlayerLatencyLevelChange","orEmptyArray","oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";b=c("emptyFunction");function h(a){return a.getSelectedVideoQuality()}function i(a){a=a.getCurrentVideoRepresentation();return a==null?"":a.getQualityLabel()}function j(a){a=a.getIsVideoQualityAdaptationEnabled()?"auto":a.getSelectedVideoQuality();return a}function k(a){return(a=(a=a.getMpd())==null?void 0:a.getCustomField("fbProjection"))!=null?a:null}function l(a,b){var c=j(a);if(b==="notselected"||b===c)return!1;else if(b==="auto"){a.enableVideoQualityAdaptation();return!0}else if(b!==a.getSelectedVideoQuality()){c=b;a.switchToVideoQuality(c);return!0}else return!1}function a(a){var b=a.getConfig,d=a.getOzPlayer,e=a.getOzQuickStarter,f=a.getVideoElementAPI;a={getApproximateFBLSToPlayerDisplayLatency:function(){var a;return(a=(a=d())==null?void 0:a.getApproximateFBLSToPlayerDisplayLatency())!=null?a:null},getAudioRepresentationIDAtTime:function(a){var b,c;b=(b=d())==null?void 0:b.getAudioRepresentationIDAtTime(a);c=(c=e())==null?void 0:c.getAudioRepresentationIDAtTime(a);return(b=(a=b)!=null?a:c)!=null?b:null},getAvailableVideoQualities:function(){var a;return c("orEmptyArray")((a=d())==null?void 0:a.getVideoQualities())},getCurrentAudioRepresentation:function(){var a;return(a=(a=d())==null?void 0:a.getCurrentAudioRepresentation())!=null?a:null},getCurrentPlayingVideoQuality:function(){var a=d();return a?i(a):""},getCurrentTargetVideoQuality:function(){var a=d();return a?h(a):""},getCurrentVideoRepresentation:function(){var a;return(a=(a=d())==null?void 0:a.getCurrentVideoRepresentation())!=null?a:null},getEstimatedBandwidth:function(){return c("oz-player/networks/OzBandwidthEstimator").getBandwidth(c("VideoPlayerOzWWWGlobalConfig"))},getInbandCaptionsAutogeneratedFromManifest:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))},getInbandCaptionsExpectedFromManifest:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))||Boolean(a==null?void 0:a.getCustomField("hasInbandCaptionsFromAccessibility"))},getPerfLoggerProvider:function(){var a=d();return a?a.getPerfLoggerProvider():null},getStreamType:function(){return"dash"},getUserSelectedVideoQuality:function(){var a=d();return a?j(a):""},getVideoProjectionType:function(){var a=d();return a!=null?k(a):null},getVideoRepresentationIDAtTime:function(a){var b,c;b=(b=d())==null?void 0:b.getVideoRepresentationIDAtTime(a);c=(c=e())==null?void 0:c.getVideoRepresentationIDAtTime(a);return(b=(a=b)!=null?a:c)!=null?b:null},getVideoRepresentations:function(){var a;return(a=(a=d())==null?void 0:(a=a.getMpd())==null?void 0:a.getVideoRepresentations())!=null?a:null},isDrm:function(){var a;return Boolean((a=d())==null?void 0:a.isDrm())},isFBIsLiveTemplated:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("isLiveTemplated"))},isFBMS:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("isFBMS"))},isFBWasLive:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("isFBWasLive"))},isPredictiveDash:function(){var a;a=(a=(a=d())==null?void 0:(a=a.getMpd())==null?void 0:a.getVideoRepresentations()[0])!=null?a:null;return a!==null&&a.canPredict()},setDimensions:function(a){},setEnableLiveheadCatchup:function(a){var b=d();b!=null&&b.setEnableLiveheadCatchup(a)},setLatencyLevel:function(a){c("handleVideoPlayerLatencyLevelChange")(b(),f(),d(),a)},setUserSelectedVideoQuality:function(a){var b=d();b!=null&&l(b,a)}};return a}g.createVideoPlayerOzImplementationEngineExtrasAPI=a}),98);
__d("OzActiveActiveFailoverNetworkRequestStreamHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.onResponse=function(a,b){var c=a.headers;c&&c.has("x-fb-video-replica")&&this.$1(a,b);return null};b.onError=function(a,b){return null};return a}();f["default"]=a}),66);
__d("OzCustomParsers",[],(function(a,b,c,d,e,f){function a(){return new Map([["fbProjection",function(a){try{return a.Period[0].AdaptationSet[0].$.FBProjection||null}catch(a){return null}}],["hasInbandCaptionsFromAccessibility",function(a){a=a.Period[0];a=a&&a.AdaptationSet[0].Accessibility;return a&&a[0]?a[0].$.schemeIdUri==="urn:scte:dash:cc:cea-608:2015":!1}],["hasInbandCaptionsFromUsingASRCaptions",function(a){a=Number.parseInt(a.$.usingASRCaptions,0);return!isNaN(a)&&a!=0}],["hasInbandCaptionsFromIsUsingAsrCaptionsEmployeeDogfooding",function(a){a=Number.parseInt(a.$.isUsingAsrCaptionsEmployeeDogfooding,0);return!isNaN(a)&&a!=0}],["isLiveTemplated",function(a){return a.$.FBIsLiveTemplated==="true"}],["isFBMS",function(a){return a.$.FBMS==="true"}],["isFBWasLive",function(a){return a.$.FBWasLive==="true"}],["loapStreamType",function(a){return a.$.loapStreamType?parseInt(a.$.loapStreamType,10):0}],["fbManifestIdentifier",function(a){return(a=a.$.FBManifestIdentifier)!=null?a:""}],["lastVideoFrameTs",function(a){return a.$.lastVideoFrameTs?Number.parseInt(a.$.lastVideoFrameTs,10):null}],["currentServerTimeMs",function(a){return a.$.currentServerTimeMs?Number.parseInt(a.$.currentServerTimeMs,10):null}]])}f.createOzCustomParser=a}),66);
__d("oz-player/shims/www/OzURIWWW",["URI"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=new(c("URI"))(a)}var b=a.prototype;b.addQueryData=function(a,b){this.$1.addQueryData(a,b)};b.getQueryData=function(){return this.$1.getQueryData()};b.getDomain=function(){return this.$1.getDomain()};b.toString=function(){return this.$1.toString()};b.getPath=function(){return this.$1.getPath()};return a}();g["default"]=a}),98);
__d("oz-player/shims/OzURI",["oz-player/shims/www/OzURIWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzURIWWW")}),98);
__d("oz-player/utils/ozConcatUint8Arrays",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=0;for(var c=0;c<a.length;++c)b+=a[c].byteLength;c=new ArrayBuffer(b);b=new Uint8Array(c);var d=0;for(var e=0;e<a.length;++e){var f=a[e];b.set(f,d);d+=f.byteLength}return{buffer:c,view:b}}f["default"]=a}),66);
__d("oz-player/utils/OzReadableStreamUtils",["oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof TextDecoder!=="undefined"?function(a){return new TextDecoder("utf-8").decode(new Uint8Array(a))}:function(a){return String.fromCharCode.apply(null,a)};function i(a){var b=[],d=function c(){return a.read().then(function(a){var d=a.value;a=a.done;if(a)return null;if(!d)return null;b.push(d);return c()})};return d().then(function(){var a=c("oz-player/utils/ozConcatUint8Arrays")(b);a=a.view;return a})}function a(a){return i(a).then(function(a){return h(a)})}function b(a){var b=new Uint8Array(a.length);return b.map(function(b,c){return a.charCodeAt(c)})}g.pumpAllData=i;g.pumpString=a;g.stringToUint8Array=b}),98);
__d("OzCustomRepresentationParsers",["oz-player/shims/OzURI","oz-player/utils/OzReadableStreamUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.ozConfig,e=a.startTimestamp;a={timescale:function(a){a=a.SegmentTemplate;if(a&&a.length>0){a=a[0].$;if(a)return Number.parseInt(a.timescale,0)||null}return null}};b.getBool("parse_initialization_binary",!1)&&(a.initializationBinary=function(a){try{a=window.atob(a.FBInitializationBinary[0]._);return d("oz-player/utils/OzReadableStreamUtils").stringToUint8Array(a)}catch(a){return null}});a.playbackResolutionMos=function(a){try{return a.$.FBPlaybackResolutionMos}catch(a){return null}};a.qualityLabel=function(a){try{return a.$.FBQualityLabel}catch(a){return null}};b.getBool("parse_first_segment",!1)&&(a.firstSegmentParser=function(a){if(e!=null&&e>0)return null;try{var b=a.SegmentBase[0].$.FBFirstSegmentRange.split("-").map(Number),d={startByte:b[0],endByte:b[1]};b=a.BaseURL[0]._;var f=new(c("oz-player/shims/OzURI"))(b);return{getData:function(){return null},getURI:function(){return f},getByteRange:function(){return d},getTimeRange:function(){return{startTime:0,endTime:2}},getSequenceNumber:function(){return null},setOptions:function(){return void 0}}}catch(a){return null}});return a}g.createOzCustomRepresentationParsers=a}),98);
__d("OzDashPrefetchCache",["VideoDashPrefetchCache"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.hasCacheValue=function(a){return c("VideoDashPrefetchCache").hasCacheValue(a)};b.getCacheValue=function(a){return c("VideoDashPrefetchCache").getCacheValue(a)};b.getCachedRepresentations=function(){return null};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/ozvariantWWW",["invariant"],(function(a,b,c,d,e,f,g,h){a=h;g["default"]=a}),98);
__d("oz-player/shims/ozvariant",["oz-player/shims/www/ozvariantWWW"],(function(a,b,c,d,e,f,g){g["default"]=c("oz-player/shims/www/ozvariantWWW")}),98);
__d("oz-player/utils/OzNumericalHelper",[],(function(a,b,c,d,e,f){"use strict";var g=1e-5;function h(a,b,c){c===void 0&&(c=g);return Math.abs(b-a)<=c}function i(a,b,c){c===void 0&&(c=g);return a>b&&!h(a,b,c)}function j(a,b,c){c===void 0&&(c=g);return a<b&&!h(a,b,c)}function a(a,b,c){c===void 0&&(c=g);return j(a,b,c)||h(a,b,c)}function b(a,b,c){c===void 0&&(c=g);return i(a,b,c)||h(a,b,c)}f.equalTo=h;f.greaterThan=i;f.lessThan=j;f.lessThanOrEqual=a;f.greaterThanOrEqual=b}),66);
__d("oz-player/utils/OzNumericalRangeUtil",["oz-player/utils/OzNumericalHelper"],(function(a,b,c,d,e,f,g){"use strict";var h=.01;function i(a,b){b=b.rangeEnd;return b===null||b===void 0?!1:Math.abs(a.rangeStart-b)>h&&a.rangeStart>b}function j(a,b){a=a.rangeEnd;b=b.rangeEnd;if(a===null||a===void 0)return!0;return b===null||b===void 0?!1:Math.abs(a-b)>h&&a>b}function k(a,b,c,d){c=c.rangeEnd;return c===null||c===void 0?!1:a.getBool("numerical_range_utils_is_after_range_exclusive")&&b===c||Math.abs(b-c)>((a=d)!=null?a:h)&&b>c}function a(a,b,c){var d=b.rangeEnd;if(d===null||d===void 0)return!1;c=(c=c)!=null?c:h;return a-b.rangeStart>=c&&d-a>=c}function l(a,b){return a>b-h}function b(a){if(!a.length)return[];var b=[],c=a[0];b.push(c);for(var d=1;d<a.length;d++){var e=a[d];if(!j(e,c))continue;else i(e,c)?(c={rangeStart:e.rangeStart,rangeEnd:e.rangeEnd},b.push(c)):c.rangeEnd=e.rangeEnd}return b}function c(a,b,c){return b.reduceRight(function(b,d){k(a,d.rangeStart,c)||k(a,c.rangeStart,d)?b.push(d):(c.rangeEnd!=null&&(d.rangeEnd==null||k(a,d.rangeEnd,c))&&b.push({rangeStart:c.rangeEnd,rangeEnd:d.rangeEnd}),l(c.rangeStart,d.rangeStart)&&b.push({rangeStart:d.rangeStart,rangeEnd:c.rangeStart}));return b},[]).filter(function(a){return a.rangeEnd==null||a.rangeStart<a.rangeEnd}).reverse()}function e(a,b,c,d){d===void 0&&(d=h);for(var e=0;e<c.length;e++){var f=c[e],g=f.rangeStart;if(l(b,g)&&!k(a,b,f,d))return e}return-1}function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d=d.rangeStart;if(!l(a,d))return c}return-1}function m(a,b,c){return a>=b?0:c.reduceRight(function(c,d){var e=d.rangeStart;d=d.rangeEnd;if(b<e||d!=null&&a>d)return c;else if(d==null||b<=d)return Math.min(b-e,b-a)+c;else if(a>=e)return Math.min(d-a,b-a)+c;else return d-e+c},0)}function n(a,b){var c;c=a.length==0?(c=b[b.length-1])!=null?c:null:null;for(var e=0;e<a.length;e++){var f=a[e];for(var g=e;g<b.length;g++){var h=b[g];if(d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)&&f.rangeEnd!=null&&h.rangeEnd!=null&&d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeEnd,h.rangeEnd))break;else if(h.rangeEnd!=null&&f.rangeEnd!=null&&!d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)){c={rangeStart:h.rangeStart,rangeEnd:h.rangeEnd};break}else if(h.rangeEnd!=null&&f.rangeEnd!=null&&d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)&&!d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeEnd,h.rangeEnd)){c={rangeStart:f.rangeEnd,rangeEnd:h.rangeEnd};break}}if(c!==null)break}return c}function o(a){var b=[];for(var c=0;c<a.length;c++)b.push({rangeStart:a[c].startTime,rangeEnd:a[c].endTime});return b}g.isAfter=k;g.isWithin=a;g.isLargerThan=l;g.mergeSortedRanges=b;g.diffSortedRanges=c;g.findCurrentRangeIndex=e;g.findNextRangeIndex=f;g.findDiffCoveredByRanges=m;g.firstAddedInSortedRanges=n;g.convertFromTimeRanges=o}),98);
__d("oz-player/manifests/SegmentTemplateSegmentsContainer",["oz-player/shims/OzEventEmitter","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzError","oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=1e-4;a=function(){function a(a,b,d,e,f,g){g===void 0&&(g=!1),this.$7=new(c("oz-player/shims/OzEventEmitter"))(),this.$10=null,this.$8=a,this.$2=b,this.$3=d,this.$1=f,this.$4=e,this.$5=this.$11(this.$4),this.$6=g,this.$9=this.$8.getNumber("live_numerical_error_epsilon")}var b=a.prototype;b.getSegmentByTime=function(a){a=this.$8.getBool("live_query_time_in_range")?this.$12(a):a;a=a*this.$3;var b=null;for(var c=this.$4.length-1;c>=0;c--){var e=this.$4[c];if(d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(e.t+e.d*(e.r+1),a,this.$9))break;b=e}if(b===null)return null;if(this.$8.getBool("live_no_segment_when_playhead_is_before_first_segment")&&d("oz-player/utils/OzNumericalHelper").greaterThan(b.t,a,this.$9))return null;e=Math.max(0,Math.floor((a-b.t+this.$9)/b.d));return this.$13(b,e)};b.getSegment=function(a){var b=0;a=a;while(a>=0&&b<this.$4.length){var c=this.$4[b];c=c.r;c=c+1;if(a>=c){a-=c;b++;continue}break}c=this.$4[b];return!c?null:this.$13(c,a)};b.getSegmentAfter=function(a){a=a.getTimeRange().endTime;return this.getSegmentByTime(a)};b.getPredictedSegmentAfter=function(a){return null};b.canPredict=function(){return!1};b.canApproximateId=function(){return!1};b.isEndingSegment=function(a){if(!this.$4||!this.$4.length||!this.$6)return!1;var b=this.$4[this.$4.length-1],c=b.r;b=this.$13(b,c);return Math.abs(b.getTimeRange().startTime-a.getTimeRange().startTime)+Math.abs(b.getTimeRange().endTime-a.getTimeRange().endTime)<h};b.updateWith=function(b){b instanceof a||c("oz-player/shims/ozvariant")(0,646),this.$6=b.$6,this.$14(b.$4),this.$15(b.$4),this.$7.emit("segment_updated")};b.getTimeRanges=function(){return this.$10?this.$16(this.$5,this.$10):this.$5};b.blockTimeRange=function(a){this.$10=a};b.$16=function(a,b){return d("oz-player/utils/OzNumericalRangeUtil").diffSortedRanges(this.$8,a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),{rangeStart:b.startTime,rangeEnd:b.endTime}).map(function(a){return{startTime:a.rangeStart,endTime:a.rangeEnd===null||a.rangeEnd===void 0?Infinity:a.rangeEnd}})};b.addUpdateListener=function(a){return this.$7.addListener("segment_updated",a)};b.$12=function(a){var b=a,c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$8,a,this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));if(c===-1){c=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(a,this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));c!==-1&&(b=this.getTimeRanges()[c].startTime)}return b};b.$17=function(a,b){if(a.d!==b.d)return!1;var c=a.t+a.d*a.r,e=b.t+b.d*b.r;return d("oz-player/utils/OzNumericalHelper").greaterThanOrEqual(a.t,e,this.$9)||d("oz-player/utils/OzNumericalHelper").greaterThanOrEqual(b.t,c,this.$9)?!1:Number.isInteger((a.t-b.t)/a.d)};b.$14=function(a){if(this.$8.getBool("copy_new_manifest")){var b;(b=this.$4).splice.apply(b,[0,this.$4.length].concat(a));return}if(this.$8.getBool("use_loose_manifest_updates")){(b=this.$4).splice.apply(b,[this.$4.length,0].concat(a));this.$4.sort(function(a,b){if(a.t<b.t)return-1;else if(a.t>b.t)return 1;return a.d===b.d?a.r-b.r:0});b=[];for(var e=0,f=e+1;f<this.$4.length;){var g=this.$4[e],h=this.$4[f];if(g.t===h.t){if(g.d>h.d)throw new(c("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Previous segment group duration greater than new.",extra:{code:"OZ_RP-1"}});g.d=h.d;g.r=Math.max(g.r,h.r);g.id=h.id;f++;continue}else b.push(this.$4[e]),e=f,f++}this.$4.length>0&&b.push(this.$4[this.$4.length-1]);(g=this.$4).splice.apply(g,[0,this.$4.length].concat(b));return}h=this.$4.length-1;e=a.length-1;f=h;g=e;b=JSON.stringify(this.$4);while(h>=0&&e>=0){var i=this.$4[h],j=a[e];if(d("oz-player/utils/OzNumericalHelper").equalTo(i.t,j.t,this.$9)){var k=h===f||e===g,l=k&&(h!==f&&j.r>i.r||e!==g&&i.r>j.r);k=!k&&i.r!==j.r||l;if(k)throw new(c("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:'Segment group "R" field mismatch. Old groups: '+b+"\n            , new groups: "+JSON.stringify(a),extra:{code:"OZ_RP-2"}});if(this.$8.getBool("throw_on_non_zero_r_d_mismatch")&&i.r>0&&i.d!==j.d)throw new(c("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Duration mismatch between non-zero repeat tag and new.",extra:{code:"OZ_RP-3"}});i.r=Math.max(i.r,j.r);i.id!=null&&j.id!=null&&(i.id=Math.max(i.id,j.id));if(this.$8.getBool("fix_template_duration_artifact_in_manifest")){if(i.d>j.d)throw new(c("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Previous segment group duration greater than new.",extra:{code:"OZ_RP-4"}});i.d=j.d}h--;e--}else if(d("oz-player/utils/OzNumericalHelper").greaterThan(j.t,i.t,this.$9))this.$4.splice(h+1,0,j),e--;else{if(this.$17(i,j))throw new(c("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Segment group misalinged",extra:{code:"OZ_RP-5"}});h--}}if(e>=0){(l=this.$4).unshift.apply(l,a.slice(0,e+1))}};b.$15=function(a){a=this.$11(a);a=d("oz-player/utils/OzNumericalRangeUtil").mergeSortedRanges(this.$5.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}).concat(a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}})));this.$5=a.map(function(a){return{startTime:a.rangeStart,endTime:a.rangeEnd===null||a.rangeEnd===void 0?Infinity:a.rangeEnd}})};b.$11=function(a){var b=this;a=d("oz-player/utils/OzNumericalRangeUtil").mergeSortedRanges(this.$4.map(function(a){var c=b.$13(a,0).getTimeRange().startTime;a=b.$13(a,a.r).getTimeRange().endTime;return{rangeStart:c,rangeEnd:a}}));return a.map(function(a){var b=a.rangeStart;a=a.rangeEnd;a=a===null||a===void 0?Infinity:a;return{startTime:b,endTime:a}})};b.$13=function(a,b){var d=this;b===void 0&&(b=0);var e=a.t,f=a.d,g=a.r;a=a.id;var h=e+f*b,i=this.$8.getBool("use_sc_timebased_segments"),j=this.$8.getBool("use_scf_timebased_segments"),k=this.$8.getBool("touch_cb_key"),l=a!=null?a-(g-b):null;return{getData:function(){return null},getURI:function(){var a=d.$8.getBool("use_templated_pdash_segments")&&d.$1!=null&&l!=null?d.$1.replace("$Number$",l.toString()):d.$2.replace("$Time$",h.toString());a=new(c("oz-player/shims/OzURI"))(a);i&&a.addQueryData("_nc_sc",1);j&&a.addQueryData("_nc_scf",1);var b=a.getQueryData().cb;k&&b!=null&&a.addQueryData("cb",b+"_oz");return a},getTimeRange:function(){return{startTime:h/d.$3,endTime:(h+f)/d.$3}},getByteRange:function(){return null},getSequenceNumber:function(){return null},setOptions:function(a){}}};b.getSegmentGroups=function(){return this.$4};b.getEndingSegment=function(){if(this.$4.length==0)return null;var a=this.$4[this.$4.length-1],b=a.r;return this.$13(a,b)};b.forceParseIfNotParsed=function(){};b.getMaxGopSec=function(){return null};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzUrlHelper",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a;var b=a.indexOf("://"),c=a.indexOf("/",b+3);c>b&&(a=a.substring(c));return a}function g(a){a=a;var b=a.lastIndexOf("/"),c=a.lastIndexOf("://");b>c+2&&(a=a.substring(0,b+1));return a}function h(a){a=a;a=g(a);return a.endsWith("/")?g(a.substring(0,a.length-1)):a}function i(a,b){a=g(a);b=b;while(b.length)if(b.startsWith("./"))b=b.substring(2);else if(b.startsWith("../"))b=b.substring(3),a=h(a),a.endsWith("/")&&(a=a.substring(0,a.length-1));else if(b.startsWith(".."))b=b.substring(2),a=h(a);else if(b.startsWith("."))b=b.substring(1);else break;b&&b.length&&(a.endsWith("/")||(a+="/"),a+=b);return a}function j(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];if(!b||!b.length)return"";if(b.length===1)return b[0];var d=b.shift();while(b.length>0)d=i(d,b.shift());return d}function b(a,b){return k(b)?b:j(a,b)}function k(a){var b=/^https?:\/\//i;return b.test(a)}f.stripToPathAndQueryOnly=a;f.joinRelativeUrlPaths=j;f.joinUrlPaths=b}),66);
__d("PredictedSegmentTemplateSegmentsContainer",["oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k){k===void 0&&(k=!1);c=a.call(this,b,c,e,f,null,k)||this;c.$PredictedSegmentTemplateSegmentsContainer9=0;c.$PredictedSegmentTemplateSegmentsContainer11=null;c.$PredictedSegmentTemplateSegmentsContainer10=d;c.$PredictedSegmentTemplateSegmentsContainer8=k;c.$PredictedSegmentTemplateSegmentsContainer12=f;c.$PredictedSegmentTemplateSegmentsContainer7=b;c.$PredictedSegmentTemplateSegmentsContainer5=e;c.$PredictedSegmentTemplateSegmentsContainer1=g;c.$PredictedSegmentTemplateSegmentsContainer3=i;c.$PredictedSegmentTemplateSegmentsContainer2=h;c.$PredictedSegmentTemplateSegmentsContainer4=j;c.$PredictedSegmentTemplateSegmentsContainer6=b.getNumber("live_numerical_error_epsilon");for(var d=0;d<c.$PredictedSegmentTemplateSegmentsContainer12.length;d++)c.$PredictedSegmentTemplateSegmentsContainer9=Math.max(c.$PredictedSegmentTemplateSegmentsContainer12[d].d,c.$PredictedSegmentTemplateSegmentsContainer9);return c}var e=b.prototype;e.$PredictedSegmentTemplateSegmentsContainer13=function(){if(this.$PredictedSegmentTemplateSegmentsContainer2!=null&&this.$PredictedSegmentTemplateSegmentsContainer4!=null)return{predictedAverageDuration:this.$PredictedSegmentTemplateSegmentsContainer4,predictedMediaStartNumber:this.$PredictedSegmentTemplateSegmentsContainer2};else return null};e.$PredictedSegmentTemplateSegmentsContainer14=function(a,b,e){var f=this,g=this.$PredictedSegmentTemplateSegmentsContainer1.replace("$Number$",e.toString()),h=this.$PredictedSegmentTemplateSegmentsContainer7.getBool("touch_cb_key"),i=this.$PredictedSegmentTemplateSegmentsContainer7.getLegacyConfig().getString("cdn_experiment_id",""),j=this.$PredictedSegmentTemplateSegmentsContainer7.getLegacyConfig().getNumber("use_dvl_with_timeout_ms",0),k=null;return{getByteRange:function(){return null},getData:function(){return null},getSequenceNumber:function(){return e},getTimeRange:function(){return{endTime:b,startTime:a}},getURI:function(){var a=new(c("oz-player/shims/OzURI"))(g),b=a.getQueryData().cb;h&&b!=null&&a.addQueryData("cb",b+"_oz");i.length!==0&&a.addQueryData("_nc_expid",i);((b=k)==null?void 0:b.enableDvl)&&j>0&&f.$PredictedSegmentTemplateSegmentsContainer10!=null&&(a.addQueryData("_nc_dinfo-manifest-url",d("oz-player/utils/OzUrlHelper").stripToPathAndQueryOnly(f.$PredictedSegmentTemplateSegmentsContainer10)),a.addQueryData("_nc_dinfo-timeout",j));return a},setOptions:function(a){k=a}}};e.updateWith=function(d){d instanceof b||c("oz-player/shims/ozvariant")(0,646);this.$PredictedSegmentTemplateSegmentsContainer3=d.$PredictedSegmentTemplateSegmentsContainer3;this.$PredictedSegmentTemplateSegmentsContainer1=d.$PredictedSegmentTemplateSegmentsContainer1;a.prototype.updateWith.call(this,d);this.$PredictedSegmentTemplateSegmentsContainer12=d.$PredictedSegmentTemplateSegmentsContainer12;this.$PredictedSegmentTemplateSegmentsContainer8=d.$PredictedSegmentTemplateSegmentsContainer8;for(var d=0;d<this.$PredictedSegmentTemplateSegmentsContainer12.length;d++)this.$PredictedSegmentTemplateSegmentsContainer9=Math.max(this.$PredictedSegmentTemplateSegmentsContainer12[d].d,this.$PredictedSegmentTemplateSegmentsContainer9)};e.getSegmentByTime=function(a){return this.canApproximateId()?this.$PredictedSegmentTemplateSegmentsContainer15(a):this.$PredictedSegmentTemplateSegmentsContainer16(a)};e.getPredictedSegmentAfter=function(a){return a!=null&&a.getSequenceNumber()!=null&&this.canPredict()?this.$PredictedSegmentTemplateSegmentsContainer14(0,0,a.getSequenceNumber()+1):null};e.blockTimeRange=function(b){this.$PredictedSegmentTemplateSegmentsContainer11=b,a.prototype.blockTimeRange.call(this,b)};e.getTimeRanges=function(){var b=this.$PredictedSegmentTemplateSegmentsContainer13();if(b){b=[{endTime:(this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1].d)/this.$PredictedSegmentTemplateSegmentsContainer5,startTime:(this.$PredictedSegmentTemplateSegmentsContainer12[0].t-b.predictedAverageDuration-(this.$PredictedSegmentTemplateSegmentsContainer3-this.$PredictedSegmentTemplateSegmentsContainer12.length-Number(this.$PredictedSegmentTemplateSegmentsContainer2))*Number(b.predictedAverageDuration))/this.$PredictedSegmentTemplateSegmentsContainer5}];var c=this.$PredictedSegmentTemplateSegmentsContainer11;return c==null?b:d("oz-player/utils/OzNumericalRangeUtil").diffSortedRanges(this.$PredictedSegmentTemplateSegmentsContainer7,b.map(function(a){return{rangeEnd:a.endTime,rangeStart:a.startTime}}),{rangeEnd:c.endTime,rangeStart:c.startTime}).map(function(a){return{endTime:a.rangeEnd===null||a.rangeEnd===void 0?Infinity:a.rangeEnd,startTime:a.rangeStart}})}else return a.prototype.getTimeRanges.call(this)};e.canPredict=function(){var a=this.$PredictedSegmentTemplateSegmentsContainer7.getLegacyConfig().getNumber("num_predictive_segments",0);return a>0};e.canApproximateId=function(){var a=this.$PredictedSegmentTemplateSegmentsContainer13();return a!=null};e.$PredictedSegmentTemplateSegmentsContainer16=function(a){var b=null;a=a*this.$PredictedSegmentTemplateSegmentsContainer5;var e=this.$PredictedSegmentTemplateSegmentsContainer12.length>0?this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1].d:null,f=this.$PredictedSegmentTemplateSegmentsContainer7.getLegacyConfig().getNumber("pdash_future_edgelatency_gops",0);if(e!=null&&e<=a&&f!==0&&a<e+this.$PredictedSegmentTemplateSegmentsContainer9*f){e=a-(this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1].d);e=this.$PredictedSegmentTemplateSegmentsContainer9?0:Math.floor(e/this.$PredictedSegmentTemplateSegmentsContainer9);return this.$PredictedSegmentTemplateSegmentsContainer14(0,0,this.$PredictedSegmentTemplateSegmentsContainer3+1+e)}e=0;for(var g=0;this.$PredictedSegmentTemplateSegmentsContainer12.length-1-g>=0;g++){var h=this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1-g];h.r===0||c("oz-player/shims/ozvariant")(0,18769);if(d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(h.t+h.d*(h.r+1),a,this.$PredictedSegmentTemplateSegmentsContainer6))break;b=h;e=g}if(b===null||f>0&&a<b.t)return null;else return this.$PredictedSegmentTemplateSegmentsContainer14(b.t/this.$PredictedSegmentTemplateSegmentsContainer5,(b.t+b.d)/this.$PredictedSegmentTemplateSegmentsContainer5,this.$PredictedSegmentTemplateSegmentsContainer3-e)};e.$PredictedSegmentTemplateSegmentsContainer15=function(a){var b=a*this.$PredictedSegmentTemplateSegmentsContainer5,c=this.getTimeRanges();if(d("oz-player/utils/OzNumericalHelper").greaterThan(c[0].startTime,a))return null;else if(d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(this.$PredictedSegmentTemplateSegmentsContainer12[0].t,b))return this.$PredictedSegmentTemplateSegmentsContainer16(a);else{c=Math.ceil((this.$PredictedSegmentTemplateSegmentsContainer12[0].t-b)/Number(this.$PredictedSegmentTemplateSegmentsContainer4));b=Math.max(Number(this.$PredictedSegmentTemplateSegmentsContainer2),this.$PredictedSegmentTemplateSegmentsContainer3-this.$PredictedSegmentTemplateSegmentsContainer12.length+1-c);return this.$PredictedSegmentTemplateSegmentsContainer14(a,a+Number(this.$PredictedSegmentTemplateSegmentsContainer4)/this.$PredictedSegmentTemplateSegmentsContainer5,b)}};e.isEndingSegment=function(b){if(!this.$PredictedSegmentTemplateSegmentsContainer8)return!1;var c=b.getSequenceNumber();return c!=null?c>=this.$PredictedSegmentTemplateSegmentsContainer3:a.prototype.isEndingSegment.call(this,b)};e.getEndingSegment=function(){if(this.$PredictedSegmentTemplateSegmentsContainer12.length===0)return null;var a=this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1];return this.$PredictedSegmentTemplateSegmentsContainer14(a.t/this.$PredictedSegmentTemplateSegmentsContainer5,(a.t+a.d)/this.$PredictedSegmentTemplateSegmentsContainer5,this.$PredictedSegmentTemplateSegmentsContainer3)};e.getMaxGopSec=function(){return this.$PredictedSegmentTemplateSegmentsContainer9/this.$PredictedSegmentTemplateSegmentsContainer5};return b}(c("oz-player/manifests/SegmentTemplateSegmentsContainer"));g["default"]=a}),98);
__d("oz-player/parsers/OzDefaultSegmentTimelineParser",["oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}a.parseSegments=function(a,b){a=[];b.SegmentTimeline[0].S&&(a=b.SegmentTimeline[0].S.map(function(a){return{t:Number.parseInt(a.$.t,10),d:Number.parseInt(a.$.d,10),r:Number.parseInt(a.$.r||"0",10),id:a.$.id?Number.parseInt(a.$.id,10):void 0}}));return a};var b=a.prototype;b.parseSegmentsContainer=function(b,e,f){return new(c("oz-player/manifests/SegmentTemplateSegmentsContainer"))(b,d("oz-player/utils/OzUrlHelper").joinUrlPaths(e.baseUrl,f.$.media),Number.parseInt(f.$.timescale,10),a.parseSegments(b,f),null,e.isStaticMpd)};return a}();g["default"]=a}),98);
__d("OzPredictedSegmentTimelineParser",["PredictedSegmentTemplateSegmentsContainer","oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/parsers/OzDefaultSegmentTimelineParser","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.parseSegmentsContainer=function(a,b,e){var f;if(e.SegmentTimeline[0].$.FBPredictedMedia){f=d("oz-player/utils/OzUrlHelper").joinUrlPaths(b.baseUrl,e.SegmentTimeline[0].$.FBPredictedMedia);var g=new(c("oz-player/shims/OzURI"))(f);g.addQueryData("_nc_sc",1);f=g.toString()}var h;e.SegmentTimeline[0].$.FBPredictedMediaStartNumber&&(h=Number.parseInt(e.SegmentTimeline[0].$.FBPredictedMediaStartNumber,0));var i;e.SegmentTimeline[0].$.FBPredictedMediaEndNumber&&(i=Number.parseInt(e.SegmentTimeline[0].$.FBPredictedMediaEndNumber,0));var j;e.SegmentTimeline[0].$.FBAverageDuration&&(j=Number.parseInt(e.SegmentTimeline[0].$.FBAverageDuration,0));g=c("oz-player/parsers/OzDefaultSegmentTimelineParser").parseSegments(a,e);return(b.isTemplatedMpd&&h!=null&&j!=null||!b.isTemplatedMpd)&&f!=null&&i!=null?new(c("PredictedSegmentTemplateSegmentsContainer"))(a,d("oz-player/utils/OzUrlHelper").joinUrlPaths(b.baseUrl,e.$.media),b.mpdUrl,Number.parseInt(e.$.timescale,10),g,f,h,i,j,b.isStaticMpd):new(c("oz-player/manifests/SegmentTemplateSegmentsContainer"))(a,d("oz-player/utils/OzUrlHelper").joinUrlPaths(b.baseUrl,e.$.media),Number.parseInt(e.$.timescale,10),g,f,b.isStaticMpd)};return a}();g["default"]=a}),98);
__d("OzVideoLiveTraceNetworkRequestStreamHandler",["oz-player/networks/OzTransformStream","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){b===void 0&&(b=!1),this.$2=!1,this.$1=a,this.$2=b}var b=a.prototype;b.onResponse=function(a,b){var e=this,f=a.headers,g=null;if(!this.$1)return null;a=new(c("oz-player/networks/OzTransformStream"))();a.addListener("writableClose",function(){var a={},c=d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(b);c&&(a.lat=Math.round(c.responseStart-c.requestStart).toString());e.$1&&f&&e.$1(f,g,a)});this.$2&&a.addListener("writableWrite",function(a){g===null?g=[a]:g.push(a)});return a};b.onError=function(a,b){return null};return a}();g["default"]=a}),98);
__d("TimeRanges",["invariant"],(function(a,b,c,d,e,f,g,h){a=function(){function a(a){this.$1=[],this.$1=a}var b=a.prototype;b.start=function(a){this.$1[a]||h(0,2205);return this.$1[a].startTime};b.end=function(a){this.$1[a]||h(0,2205);return this.$1[a].endTime};b.length=function(){return this.$1.length};return a}();g["default"]=a}),98);
__d("oz-player/drm/OzDrmUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return Uint8Array.from(window.atob(a),function(a){return a.charCodeAt(0)})};b=function(a){return window.btoa(String.fromCharCode.apply(null,new Uint8Array(a)))};f.base64ToUint8Array=a;f.arrayBufferToBase64=b}),66);
__d("OzWidevineDrmProvider",["ConstUriUtils","FBLogger","oz-player/drm/OzDrmUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e,f,g){this.$2=[];this.$4=!0;this.$5=!1;g!=null&&g!==""&&(this.$1=d("oz-player/drm/OzDrmUtils").base64ToUint8Array(g));if(b!=null&&f!=null){b=(g=d("ConstUriUtils").getUri(b))==null?void 0:g.addQueryParam("access_token",f);if(b==null)throw c("FBLogger")("comet_video_player").mustfixThrow("Invalid Graph API license uri for video: %s",a);this.$3=b.toString();this.$5=!0;this.$4=!1}else{g=e["0"];if(g==null){g="/video/drm/getlicense";b=(f=d("ConstUriUtils").getUri(g))==null?void 0:f.addQueryParam("video_id",a);if(b==null)throw c("FBLogger")("comet_video_player").mustfixThrow("Invalid server license uri for video: %s",a);this.$3=b.toString()}else this.$3=g}}var b=a.prototype;b.getKeySystem=function(){return"com.widevine.alpha"};b.getSchemeId=function(){return"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};b.getInitDatas=function(){return this.$2};b.setInitDatas=function(a){this.$2=a};b.getRequireDistinctiveIdentifier=function(){return"optional"};b.getRequirePersistentState=function(){return"optional"};b.getInitDataTypes=function(){return};b.getDrmSessionTypes=function(){return["temporary"]};b.getAudioRobustness=function(){return""};b.getVideoRobustness=function(){return""};b.getServerCertificate=function(){return this.$1};b.getLicenseRequestInfo=function(a){var b={url:this.$3,method:"POST",body:"",headers:{},credentials:void 0};this.$4&&(b.credentials="include");a=d("oz-player/drm/OzDrmUtils").arrayBufferToBase64(a);if(this.$5){var c={request:a};b.body=JSON.stringify(c);b.headers["Content-Type"]="application/json"}else b.body=a,b.headers["Content-Type"]="application/text";return b};b.parseLicenseResponse=function(a){a=String.fromCharCode.apply(null,a);var b;try{b=JSON.parse(a)}catch(a){b=void 0}var c;if(b!==void 0&&b.data!==void 0&&b.data.length===1){b=b.data[0];b.error!==null&&b.error!==void 0||(c=b.license)}else c=a;return c!==void 0&&c!==null&&c!==""?d("oz-player/drm/OzDrmUtils").base64ToUint8Array(c):null};return a}();g["default"]=a}),98);
__d("OzDOMEventListenerImpl",["cr:1351686"],(function(a,b,c,d,e,f,g){"use strict";a={listenDOMEvent:b("cr:1351686").listen,captureDOMEvent:b("cr:1351686").capture,suppressDOMEvent:b("cr:1351686").suppress};c=a;g["default"]=c}),98);
__d("oz-player/shims/www/OzDOMEventListenerWWW",["OzDOMEventListenerImpl"],(function(a,b,c,d,e,f){"use strict";a=b("OzDOMEventListenerImpl");f["default"]=a}),66);
__d("oz-player/shims/OzDOMEventListener",["oz-player/shims/www/OzDOMEventListenerWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDOMEventListenerWWW")}),98);
__d("oz-player/shims/www/OzSubscriptionsHandlerWWW",["SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("SubscriptionsHandler")}),98);
__d("oz-player/shims/OzSubscriptionsHandler",["oz-player/shims/www/OzSubscriptionsHandlerWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzSubscriptionsHandlerWWW")}),98);
__d("oz-player/shims/www/ozThrottleWWW",["throttle"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("throttle")}),98);
__d("oz-player/shims/ozThrottle",["oz-player/shims/www/ozThrottleWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozThrottleWWW")}),98);
__d("oz-player/strategies/OzBufferingDetectorStates",["oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.handleEvent=function(a,b,c){if(a.type==="pause"||b.paused)return new i(this.$1,this.$2);a=this.$3 instanceof j?this.$1.getInPlayBufferOverflowTarget():this.$1.getStartBufferUnderflowTarget();return d("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(b,a,c)?new j(this.$1,this.$2):this};return a}(),i=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.handleEvent=function(a,b,c){return a.type==="play"||a.type==="playing"||!b.paused?d("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(b,this.$1.getStartBufferUnderflowTarget(),c)?new j(this.$1,this.$2):new h(this.$1,this.$2,this):this};return a}(),j=function(){function a(a,b){this.$1=a,this.$2=b,this.$3=b.getString("stream_types_eligible_for_partial_playback","").split(",")}var b=a.prototype;b.handleEvent=function(a,b,c,e){e===void 0&&(e=new Map());if(a.type==="pause"||b.paused)return new i(this.$1,this.$2);return this.$2.getBool("buffer_when_waiting",!1)&&a.type==="waiting"||!d("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(b,this.$1.getInPlayBufferUnderflowTarget(),c)&&!this.$4(a,b.currentTime,e)?new h(this.$1,this.$2,this):this};b.$4=function(a,b,c){return this.$2.getBool("buffer_when_waiting_in_partial_buffer",!1)&&a.type==="waiting"?!1:d("oz-player/utils/OzBufferingUtils").hasEnoughPartialBuffer(b,c,this.$3,this.$2.getNumber("partial_playback_buffer_overflow",0))};return a}();g.OzVideoBufferingState=h;g.OzVideoPausedState=i;g.OzVideoPlayingState=j}),98);
__d("oz-player/strategies/OzBufferingStateThresholdManager",["oz-player/shims/OzPerformance","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$2=!1,this.$3=-Infinity,this.$4=-Infinity,this.$1=a}var b=a.prototype;b.getInPlayBufferUnderflowTarget=function(){return this.$1.getNumber("in_play_buffer_underflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD)};b.getInPlayBufferOverflowTarget=function(){if(this.$5())return this.$1.getNumber("stream_interrupt_in_play_buffer_overflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD);return c("oz-player/shims/OzPerformance").now()-this.$4<this.$1.getNumber("recent_buffer_timeout_ms",0)?this.$1.getNumber("recent_buffer_in_play_buffer_overflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD):this.$1.getNumber("in_play_buffer_overflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_OVERFLOW_THRESHOLD)};b.getStartBufferUnderflowTarget=function(){return this.$1.getNumber("start_buffer_underflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD)};b.notifyBufferingEnd=function(){this.$4=c("oz-player/shims/OzPerformance").now()};b.notifyStreamInterrupted=function(){this.$2=!0};b.notifyStreamResumed=function(){this.$2=!1,this.$3=c("oz-player/shims/OzPerformance").now()};b.$5=function(){var a=this.$1.getNumber("stream_interrupt_buffer_target_timeout_ms",0);return a===0?!1:this.$2||c("oz-player/shims/OzPerformance").now()-this.$3<a};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzDomEventCapturer",["oz-player/shims/OzDOMEventListener"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$2=new Map(),this.$1=a}var b=a.prototype;b.capture=function(a,b){var d=this,e=this.$1.parentNode;return!e?{remove:function(){}}:c("oz-player/shims/OzDOMEventListener").captureDOMEvent(e,a,function(a){if(a.target!==d.$1)return;var c=b(a);c&&d.$3(a)})};b.dispatchIfSuppressed=function(a){var b=this.$2.get(a);b&&this.$1.dispatchEvent(b);this.$2["delete"](a)};b.$3=function(a){c("oz-player/shims/OzDOMEventListener").suppressDOMEvent(a),this.$2.set(a.type,a)};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBufferingDetector",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/strategies/OzBufferingDetectorStates","oz-player/strategies/OzBufferingStateThresholdManager","oz-player/utils/OzBufferingUtils","oz-player/utils/OzDomEventCapturer"],(function(a,b,c,d,e,f,g){"use strict";var h=150;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f){var g;g=a.call(this)||this;g.$OzBufferingDetector3=new(c("oz-player/shims/OzSubscriptionsHandler"))();g.$OzBufferingDetector7=new Map();g.$OzBufferingDetector9=null;g.$OzBufferingDetector10=function(a){g.$OzBufferingDetector13(a)};g.$OzBufferingDetector11=function(a){a=g.$OzBufferingDetector13(a)instanceof d("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState;return g.$OzBufferingDetector5.getBool("suppress_playing_event_while_buffering",!1)?a:!1};g.$OzBufferingDetector2=b;g.$OzBufferingDetector5=e;g.$OzBufferingDetector6=f;g.$OzBufferingDetector8=new(c("oz-player/strategies/OzBufferingStateThresholdManager"))(e);g.$OzBufferingDetector2.paused?g.$OzBufferingDetector1=new(d("oz-player/strategies/OzBufferingDetectorStates").OzVideoPausedState)(g.$OzBufferingDetector8,g.$OzBufferingDetector5):g.$OzBufferingDetector1=d("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(g.$OzBufferingDetector2,g.$OzBufferingDetector8.getInPlayBufferUnderflowTarget(),g.$OzBufferingDetector6())?new(d("oz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState)(g.$OzBufferingDetector8,g.$OzBufferingDetector5):new(d("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState)(g.$OzBufferingDetector8,g.$OzBufferingDetector5,null);g.$OzBufferingDetector4=new(c("oz-player/utils/OzDomEventCapturer"))(g.$OzBufferingDetector2);g.$OzBufferingDetector3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"pause",g.$OzBufferingDetector10),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"play",g.$OzBufferingDetector10),g.$OzBufferingDetector4.capture("playing",g.$OzBufferingDetector11),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"progress",c("oz-player/shims/ozThrottle")(g.$OzBufferingDetector10,h)),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"timeupdate",c("oz-player/shims/ozThrottle")(g.$OzBufferingDetector10,h)),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"seeked",g.$OzBufferingDetector10),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"seeking",g.$OzBufferingDetector10),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"waiting",g.$OzBufferingDetector10));g.$OzBufferingDetector5.getBool("listen_for_canplay_in_buffering_detector",!1)&&g.$OzBufferingDetector3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"canplay",g.$OzBufferingDetector10),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"canplaythrough",g.$OzBufferingDetector10));return g}var e=b.prototype;e.$OzBufferingDetector12=function(){var a=this,b="unavailable",c=this.$OzBufferingDetector8.getInPlayBufferUnderflowTarget();this.$OzBufferingDetector7.forEach(function(e,f){var g=a.$OzBufferingDetector2.currentTime;d("oz-player/utils/OzBufferingUtils").hasBuffer(g,c,e)||(b=b==="unavailable"?f:"audio/video")});return b};e.setSourceBufferState=function(a,b){this.$OzBufferingDetector7.set(a,b)};e.$OzBufferingDetector13=function(a){var b=this.$OzBufferingDetector1.handleEvent(a,this.$OzBufferingDetector2,this.$OzBufferingDetector6(),this.$OzBufferingDetector7),c=this.$OzBufferingDetector1;this.$OzBufferingDetector1=b;var e=b instanceof d("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState,f=c instanceof d("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState;if(b===c){e&&this.$OzBufferingDetector9&&this.$OzBufferingDetector9.cloneContext().getOperationLogger("buffering_handle_event").setInitiator(a.type).log();return b}if(e){e=c instanceof d("oz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState?"in_play":"start/unpause";this.$OzBufferingDetector9&&this.$OzBufferingDetector9.cloneContext().getOperationLogger("enter_buffering").setType(e).setReason(this.$OzBufferingDetector12()).setInitiator(a.type).log();this.emit("enterBuffering",e)}else f&&(this.$OzBufferingDetector9&&this.$OzBufferingDetector9.cloneContext().getOperationLogger("leave_buffering").setInitiator(a.type).log(),this.$OzBufferingDetector8.notifyBufferingEnd(),this.emit("leaveBuffering"));b instanceof d("oz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState&&this.$OzBufferingDetector4.dispatchIfSuppressed("playing");return b};e.notifyStreamInterrupted=function(){this.$OzBufferingDetector8.notifyStreamInterrupted()};e.notifyStreamResumed=function(){this.$OzBufferingDetector8.notifyStreamResumed()};e.attachPerfLoggerProvider=function(a){this.$OzBufferingDetector9=a};e.destroy=function(){this.$OzBufferingDetector3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("VideoPlayerOzImplementationEnginePartsImplUtils",["OzSystemicRiskABRManager","OzWidevineDrmProvider","gkx","guid","oz-player/strategies/OzBufferingDetector","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=/(livestream-)?lookaside\.(facebook|workplace)\.com$/,i=c("qex")._("1959790"),j=c("qex")._("207"),k=c("qex")._("208"),l=c("qex")._("21");function a(a){return i!==null&&i!==void 0&&i!==""?i:null}function b(a){return h.test(a.getDomain())}function d(a,b,d,e,f){if(f.current!=null)return;var g=!0,h=function(){if(g)return!1;var a=f.current!==i;return a&&c("gkx")("1508440")?!0:!1},i=new(c("oz-player/strategies/OzBufferingDetector"))(a,d,function(){var a=e.getCurrentState();a=a.controlledState;return a.streamEnded?b.getDuration():Infinity});f.current=i;g=!1;a=function(a){if(h())return;if(c("gkx")("1235655"))return;e.dispatch({payload:{bufferingType:a},type:"buffering_begin_requested"})};d=function(){if(h())return;e.dispatch({type:"buffering_end_requested"})};i.addListener("enterBuffering",a);i.addListener("leaveBuffering",d)}function e(a){var b=a.accessToken,d=a.graphQLVideoDRMInfo;a=a.videoFBID;var e=[];d&&a!=null&&e.push(new(c("OzWidevineDrmProvider"))(a,d.graphApiVideoLicenseUri,d.videoLicenseUriMap,b,null));return e}function f(a){var b=a.VideoPlayerShakaPerformanceLoggerClass,c=a.accessToken,d=a.disableLogging,e=a.getApproximateFBLSToPlayerDisplayLatency,f=a.getBandwidthEstimate,g=a.getPlayerDimensions,h=a.playbackIsLiveStreaming,i=a.playerInstanceCount,j=a.playerInstanceKey,k=a.playerSuborigin,l=a.playerVersion,m=a.videoElement;a=a.videoFBID;if(d||!b||!b.shouldInitialize())return[];c={accessToken:c,getApproximateFBLSToPlayerDisplayLatency:e,getBandwidthEstimate:f,getPlayerDimensions:g,isLive:h,isServableViaFbms:!1,playerInstanceCount:i,playerOrigin:null,playerSuborigin:k,playerVersion:l,representationId:null,uniqueID:j,video:m,videoID:(d=a)!=null?d:""};return[new b(c)]}function m(a,b){return b>0?b/1e3*-1:a.getNumber("live_initial_playback_position",0)}function n(a,b,c){return b>0&&c>0?(b+c)/1e3:a.getNumber("livehead_fall_behind_block_threshold",0)}function o(a,b){return b>0?b/2/1e3:a.getNumber("live_time_range_block_margin",0)}function p(){return function(a,b,d,e,f,g,h,i){return a.getLegacyConfig().getBool("use_systemic_risk_abr",!1)?new(c("OzSystemicRiskABRManager"))(a,b,d,e,f,g,h,i):null}}function q(a){return j!==null&&j!==void 0&&j!==""&&k!==null&&k!==void 0&&k!==""?{paramName:j,paramValue:k}:null}function r(a){return l!==null&&l!==void 0&&l!==""?l+c("guid")():null}g.getOsParamValue=a;g.checkShouldIncludeCredentials=b;g.createOzBufferingDetector=d;g.createOzDrmProviders=e;g.createOzPerfLoggerProviders=f;g.calculateInitialPlaybackPositionForDynamicMpd=m;g.calculateLiveheadFallBehindBlockThreshold=n;g.calculateLiveheadFallBehindBlockMargin=o;g.getVideoAbrManagerFactory=p;g.getTestQueryParam=q;g.getTestRndQueryParamValue=r}),98);
__d("OzMinimumSmallestDimensionRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.applyRestriction=function(a,b){var c=this;if(a.length===0)return[];b=a.filter(function(a){var b=a.getWidth();a=a.getHeight();b=b<a?b:a;return b>=c.$1});return b.length>0?b:[a[a.length-1]]};return a}();f["default"]=a}),66);
__d("OzMosThresholdRestriction",["MosUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$3=new Map(),this.$4=a,this.$1=a.getNumber("mos_upper_threshold",0),this.$2=a.getNumber("mos_lower_threshold",0)}var b=a.prototype;b.$5=function(){return this.$4.getBool("cache_mos_threshold",!1)?{mosUpperThreshold:this.$1,mosLowerThreshold:this.$2}:{mosUpperThreshold:this.$4.getNumber("mos_upper_threshold",0),mosLowerThreshold:this.$4.getNumber("mos_lower_threshold",0)}};b.$6=function(a,b){var c=null;if(this.$3.get(a))c=this.$3.get(a);else{var e=a.getCustomField("playbackResolutionMos");e!=null&&(c=d("MosUtils").parsePlaybackMos(String(e)),c&&this.$3.set(a,c))}return c!=null?d("MosUtils").getMosValue(c,d("MosUtils").getQualityLabel(b.width,b.height)):null};b.$7=function(a,b){var c=this,d=null,e=this.$5(),f=e.mosUpperThreshold;a.forEach(function(a){a=c.$6(a,b);a!=null&&a>f&&(d==null||d>a)&&(d=a)});return d==null?a:a.filter(function(a){a=c.$6(a,b);return a==null?!0:a<=f||a===d})};b.$8=function(a,b){var c=this,d=[],e=this.$5(),f=e.mosLowerThreshold;a.forEach(function(a){var e=c.$6(a,b);e!=null&&e>f&&d.push(a)});d.length===0&&d.push(a[a.length-1]);return d};b.applyRestriction=function(a,b){if(a.length===0)return[];a=a;var c=this.$5(),d=c.mosLowerThreshold;c=c.mosUpperThreshold;c>0&&(a=this.$7(a,b));d>0&&(a=this.$8(a,b));return a};return a}();g["default"]=a}),98);
__d("getOzPlaybackRestrictions",["OzMinimumSmallestDimensionRestriction","OzMosThresholdRestriction","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=720,i=2160;function a(a,b){var d=[];switch(a){case"HD":d.push(new(c("OzMinimumSmallestDimensionRestriction"))(h));break;case"UHD":c("gkx")("1488288")&&d.push(new(c("OzMinimumSmallestDimensionRestriction"))(i));break;default:break}a=b.getNumber("mos_upper_threshold",0);var e=b.getNumber("mos_lower_threshold",0);(a>0||e>0)&&d.push(new(c("OzMosThresholdRestriction"))(b));return d}g["default"]=a}),98);
__d("oz-player/configs/OzPlayerConfigDefaults",[],(function(a,b,c,d,e,f){a={abort_clear_video_node_on_detach:!1,abr_use_download_time:!1,accept_external_buffering_detector:!0,allow_queueing_end_of_stream_when_update:!1,always_use_current_time_in_playback_state:!0,append_retry_quota_exceeded_error:!0,async_clear_on_quality_upgrade:!1,bandwidth_ignore_on_stream_write_samples:!1,bandwidth_use_chunk_response_size:!1,bandwidth_use_response_time_adjustment:!1,buffer_when_waiting:!1,buffer_when_waiting_in_partial_buffer:!0,call_end_of_stream_in_quick_starter:!0,catchup_use_timeline_range_end_time_as_end:!1,check_buffer_range_once_for_playhead_update:!1,check_mediasource_readystate_before_end_of_stream:!0,cleanup_video_node_on_destroy:!0,clear_buffer_on_quota_exceeded_error:!0,clear_buffer_on_seek_into_unbuffered_range:!0,clear_sbm_buffer_on_byte_threshold:!1,convert_dom_exception_to_oz_error:!0,copy_new_manifest:!0,create_new_media_source_on_node_reset:!1,debug_live_replay:!1,delay_stream_end_for_sourceended:!0,detach_media_source_manager:!0,disable_audio_scheduler:!1,download_cursor_1st_run_set_skipped_segment_on:!0,download_cursor_disable_buffer_ahead_rule_on:!0,dvl_update_interval_reset_on_err:!0,emit_destroyed_after_media_keys_clear:!1,enable_abr_for_first_request:!1,enable_adaptation:!0,enable_appends_on_wait_update_end_failure:!1,enable_dvl:!0,enable_immediate_down_switch:!1,enable_network_manager_error:!1,estimate_video_bandwidth_only:!0,exclude_prefetch_bandwidth_samples:!0,fallback_on_append_error:!1,fix_buffer_ahead_priority_strategy:!0,fix_initial_segment_non_zero_start_time:!0,fix_operation_deferred_promise_lifecycle:!1,fix_quick_starter_overhead:!0,fix_seek_performance:!1,fix_segment_updated_subscription_leak:!1,fix_setup_video_duration_on_representation_switch:!0,fix_template_duration_artifact_in_manifest:!0,generate_mos_segment_buffer_diff:!1,get_fetch_body_text_when_response_not_ok:!0,get_mpd_least_last_time_range:!0,handle_buffered_timerange_update_on_ratechange:!1,handle_invalid_webm_duration:!1,handle_mpd_retries_outside_oz_mpd_updater:!0,ignore_reset_after_seek_if_bufferahead:!1,ignore_reset_after_seek_if_bufferahead_liverewind:!1,ignore_restrictions_when_all_representations_restricted:!1,ignore_time_to_response_start:!1,latencymanager_stalempd_edgelatency_sec_on:!1,latencymanager_stalled_edgelatency_sec_on:!1,lazy_parse_sidx:!1,listen_for_canplay_in_buffering_detector:!0,live_audio_ibr:!0,live_catch_up_only_when_paused:!1,live_disable_mpd_updates_when_paused:!0,live_gracefully_handle_410:!0,live_gracefully_handle_mpd_errors:!0,live_gracefully_handle_no_network:!0,live_no_segment_when_playhead_is_before_first_segment:!0,live_playhead_catch_up:!1,live_query_time_in_range:!0,load_video_node_on_unload:!0,log_appended_segment_info:!1,log_extra_events:!1,mpd_update_cancel_current_request_tracker:!0,ms_promise_for_null:!1,no_representation_error_detailed_message:!1,null_segment_for_no_buffer_target:!0,numerical_range_utils_is_after_range_exclusive:!0,overwrite_video_current_time_property:!0,pausable_stream_throws_error_when_aborted:!0,pdash_download_cursor_catchup_skip_totalbufer:!0,pdash_download_cursor_use_totalbuffer:!0,pdash_use_pdash_segmentlocator:!1,pdash_wait_on_mpd_refresh_when_error:!0,playback_speed_latency_adjustment_user_rate_disable:!0,player_emit_mpdparsed_early:!1,playhead_manager_buffered_timerange_update_on_timeupdate:!1,playhead_manager_buffer_gaps_skip_reverse:!1,playhead_manager_clamp_initial_playback_position:!1,playhead_manager_handle_buffered_timerange_update_on_timeupdate:!0,playhead_manager_handle_timerange_update_on_timeupdate:!0,playhead_manager_handle_time_range_update_on_waiting:!1,playhead_manager_initial_playback_position_lat_mgr:!0,prevent_multiple_successive_representation_switch:!0,prevent_unnecessary_seek_stream_anchor_reset:!1,proceed_on_representation_change_in_init_append_fail:!0,remove_src_attr_on_unload:!0,reset_catchup_timeout_after_play_sec_on_overwrite:!0,respect_initial_representation_on_setup:!1,restart_media_streams_on_stream_resumed:!1,retry_fetch_on_prefetch_error:!1,retry_video_element_error:!0,revoke_object_url_on_detach:!1,sbm_abort_on_append_new_readable_stream:!1,sbm_recursively_waits_for_update_end:!1,sbm_wait_for_abort_on_reject:!1,sbm_waits_for_update_end:!0,seek_ahead_use_native_current_time:!0,seek_to_start_quick_starter:!0,segment_end_410_response:!0,segment_end_410_response_loop_end:!1,set_source_buffer_append_window_end:!1,should_check_that_source_buffer_attached:!1,sidx_parser_memory_optimization:!1,skip_playhead_adjustment_before_initial_playback_position:!1,skip_timerange_gaps:!0,skip_videobuffer_gaps:!1,skip_videobuffer_gaps_on_buffer_updated:!0,stable_buffered_timeranges_in_observedsourcebufferstate:!0,stop_loop_driver_immediately_on_cleanup:!1,stop_manifest_update_when_static:!0,streaming_task_reject_current_stream_deferred:!0,stream_interrupted_fuzzy_equals:!1,stub_safari_source_buffer_abort:!1,suppress_playing_event_while_buffering:!1,throw_cancel_operation_abort_failed:!1,throw_error_on_clear_buffer_on_seek_failed:!0,throw_network_error_during_stream:!1,throw_on_non_zero_r_d_mismatch:!0,touch_cb_key:!1,treat_inline_mpd_xml_empty_string_as_null:!1,update_bandwidth_cache_on_sample:!1,update_duration_when_init_appended:!0,update_live_video_config_on_representation_switch:!0,update_media_source_duration:!0,use_abr_for_missing_default_representation:!0,use_buffering_detector_for_playhead_interruption:!0,use_ending_duration_for_gop_multiplier:!0,use_live_latency_manager:!1,use_loose_manifest_updates:!1,use_performance_entry_on_stream_close:!1,use_scf_timebased_segments:!1,use_scheduler:!0,use_sc_timebased_segments:!1,use_segment_request_cache:!1,use_simple_moving_average_estimator:!1,use_stream_end_time_in_segment_locator:!1,use_templated_pdash_segments:!0,use_ttfb_from_headers:!1,xmlparser_use_domparser:!1};b={abr_confidence_threshold:.9,abr_eval_buffer_threshold:0,abr_min_bandwidth_samples:0,abr_prevent_down_switch_buffer_threshold:11,abr_restrict_from_index:0,abr_restrict_to_index:0,append_byte_target_without_range:1e5,appends_per_segment:6,audio_byte_threshold_to_clear_buffer:0,auto_seek_playhead_slack:.5,bandwidth_boundary_standard_deviation_factor:1,bandwidth_estimator_half_life:6,bandwidth_estimator_outlier_exclusion_factor:50,bandwidth_estimator_std_dev_penalty_factor:0,bandwidth_estimator_variance_penalty_down_factor:0,bandwidth_estimator_variance_penalty_half_life:0,bandwidth_estimator_variance_penalty_up_factor:0,bandwidth_penalty_additional_video_start:0,bandwidth_penalty_per_additional_video:0,bandwidth_response_time_handicap:0,bandwidth_ttfb_samples_to_save:5,buffer_ahead_target:22,buffer_target_constraint_append_succeeded_reward:.2,buffer_target_constraint_minimum_sec:2,buffer_target_constraint_quota_exceeded_penalty:.3,byte_count_per_sample:2e5,catchup_timeout_after_buffering_sec:0,catchup_timeout_after_play_sec:0,clear_buffer_on_seek_epsilon_s:0,clear_buffer_on_seek_nudge_s:0,default_bandwidth_estimate:1e6,download_time_buffer_delta_penalty_factor:0,dvl_initial_segment_ignore_count:1,dvl_update_interval_ms:0,dynamic_mpd_initial_playback_position_offset_modifier:4,initial_manifest_request_retry_count:3,initial_switch_interval:0,in_play_buffer_overflow_target:1,in_play_buffer_underflow_target:.1,latencymanager_stalempd_edgelatency_sec:0,latencymanager_stalled_edgelatency_sec:0,live_audio_ibr_bandwidth_percentage:.05,live_catch_up_fall_behind_threshold:20,live_catch_up_live_head_delta:6,live_max_try_attempts_on_404:2,live_numerical_error_epsilon:1e-4,loop_body_handle_error_interval_ms:1,low_buffer_bandwidth_target_increase_factor:0,low_buffer_bandwidth_target_threshold:10,low_segment_stream_playhead_threshold:0,manifest_update_frequency_ms:0,max_bandwidth_sample_count:30,maximum_bandwidth_sample_bandwidth:1e8,max_start_eme_attempts:3,min_buffer_behind_playhead:10,min_eval_interval:100,minimum_bandwidth_sample_duration:10,minimum_bytes_to_sample_on_close:25e3,minimum_download_additional_buffer_ms:0,min_switch_interval:100,mpd_updater_network_request_timeout_ms:2e4,ms_promise_for_null_ms:0,network_seg_timeout_ms:0,overwrite_livehead_fall_behind_block_threshold:0,overwrite_live_time_range_block_margin:0,partial_playback_buffer_overflow:.75,paused_stream_segments_count:2,pdash_download_cursor_between_catchups_seg:0,pdash_download_cursor_catchup_threshold_gop_multiplier:0,pdash_download_cursor_catchup_threshold_sec:0,pdash_download_cursor_catchup_tolerance_sec:0,per_stream_duration_target:0,pixels_above_viewport_to_observe:0,pixels_below_viewport_to_observe:0,playback_speed_enabled_delay_sec:4,playback_speed_latency_adjustment_rate:0,playback_speed_latency_slowdown_adjustment_rate:0,playback_speed_latency_speedup_adjustment_rate:0,playback_speed_min_buffer_sec:1,playback_speed_min_duration_sec:2,playback_speed_min_sharpness_factor:3,playback_speed_restore_min_duration_sec:1,playhead_manager_buffered_auto_seek_playhead_slack:.5,playhead_manager_buffered_is_near_gap_threshold:1.5,playhead_manager_buffered_numerical_error:.01,playhead_manager_timeupdate_throttle_ms:1e3,playhead_nudge_slack:.1,pre_start_buffer_ahead_target:16.924449682236,prioritize_by_viewport_static_penalty:0,recent_buffer_in_play_buffer_overflow_target:3,recent_buffer_timeout_ms:1e4,resolution_constraint_factor:2,sbm_read_timeout_ms:0,seconds_to_stream:10,seconds_to_stream_near_bandwidth_boundary:10,seek_ahead_epsilon:.05,segments_to_stream:5,segments_to_stream_near_bandwidth_boundary:5,segments_to_stream_under_playhead_threshold:0,skip_videobuffer_gaps_max_gap_size_sec:0,stale_mpd_buffer_ahead_target:0,start_buffer_underflow_target:.1,stream_interrupt_buffer_target_timeout_ms:1e4,stream_interrupt_check_mpd_stale_count_threshold:3,stream_interrupt_in_play_buffer_overflow_target:1,tagged_time_range_per_append_throttle:0,timeline_offset_threshold:10,time_to_first_byte_estimate_half_life_ms:500,time_to_first_byte_ignore_above_threshold_ms:0,video_byte_threshold_to_clear_buffer:0};c={block_representation_status_codes_json:"[500]",cdn_experiment_id:"",stream_types_eligible_for_partial_playback:""};e.exports={defaultBools:a,defaultNumbers:b,defaultStrings:c}}),null);
__d("oz-player/configs/OzPlayerConfig",["oz-player/configs/OzPlayerConfigDefaults"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){a===void 0&&(a={}),this.$1=a}var b=a.prototype;b.getBool=function(a){return typeof this.$1[a]==="boolean"?this.$1[a]:d("oz-player/configs/OzPlayerConfigDefaults").defaultBools[a]};b.getNumber=function(a){return typeof this.$1[a]==="number"?this.$1[a]:d("oz-player/configs/OzPlayerConfigDefaults").defaultNumbers[a]};b.getString=function(a){return typeof this.$1[a]==="string"?this.$1[a]:d("oz-player/configs/OzPlayerConfigDefaults").defaultStrings[a]};b.getLegacyConfig=function(){var a=this;return{getBool:function(b,c){return typeof a.$1[b]==="boolean"?a.$1[b]:(b=d("oz-player/configs/OzPlayerConfigDefaults").defaultBools[b])!=null?b:c},getNumber:function(b,c){return typeof a.$1[b]==="number"?a.$1[b]:(b=d("oz-player/configs/OzPlayerConfigDefaults").defaultNumbers[b])!=null?b:c},getString:function(b,c){return typeof a.$1[b]==="string"?a.$1[b]:(b=d("oz-player/configs/OzPlayerConfigDefaults").defaultStrings[b])!=null?b:c}}};return a}();g["default"]=a}),98);
__d("oz-player/configs/OzConfigUtils",["oz-player/configs/OzPlayerConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("oz-player/configs/OzPlayerConfig"))();a=function(a){return{getBool:function(b){return a.getBool(b,h.getBool(b))},getNumber:function(b){return a.getNumber(b,h.getNumber(b))},getString:function(b){return a.getString(b,h.getString(b))},getLegacyConfig:function(){return a}}};g.provideConfigWithDefaults=a}),98);
__d("VideoPlayerOzImplementationEnginePartsImplFunction",["CometThrottle","ConstUriUtils","NetworkStatus","OzActiveActiveFailoverNetworkRequestStreamHandler","OzCDNSignedQueryParams","OzCustomParsers","OzCustomRepresentationParsers","OzDashPrefetchCache","OzOneSemanticHandler","OzOneSemanticHandlerUtils","OzPredictedSegmentTimelineParser","OzVideoLiveTraceNetworkRequestStreamHandler","Promise","TimeRanges","VideoPlayerConnectionQuality","VideoPlayerOzImplementationEnginePartsImplUtils","cr:1836099","cr:1871597","cr:1947728","cr:1993377","cr:72","cr:9958","getOzPlaybackRestrictions","gkx","orEmptyArray","oz-player/configs/OzConfigUtils","oz-player/networks/OzBandwidthEstimator","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=null;b("cr:1836099")&&(h=b("cr:1836099").getHiveConfig(),i=b("cr:1836099").HiveOz);function a(a){var e=a.OzPlayerClass,f=a.callChain,g=a.destroyOzPlayerPartsRef,j=a.engineDebugAPI,k=a.engineExtrasAPI,l=a.getCaptionsInfo,m=a.getLatencyLevelManager,n=a.getOzQuickStarter,o=a.getVideoLiveTrace,p=a.handleCaptionsInfoChange,q=a.handleFatalImplementationError,r=a.hivePluginRef,s=a.initialProps,t=a.logger,u=a.machine,v=a.overrideOzRequestImplementationRef,w=a.ozBufferingDetectorRef,x=a.ozPlayerRef,y=a.p2pSessionLoggerRef,z=a.playerVersion,A=a.resolvedVideoInfo,B=a.videoElement;a=a.videoElementAPI;var C={current:!1},D={current:null},E={current:null};g.current=function(a){var b=w.current;b&&(w.current=null,b.destroy());b=x.current;b&&(j&&j.handleOzPlayerChanged(null),x.current=null,b.destroy([].concat(a,["destroyOzPlayerParts"]).join(":")));b=D.current;b&&(D.current=null,b());E.current&&(E.current=null);$();r.current&&(r.current=null);y.current&&(y.current=null);v.current&&(v.current=null)};g=A.accessToken;var F=A.audioOnly,G=A.experimentationConfig,H=A.graphQLVideoDRMInfo,I=A.graphQLVideoP2PSettings,J=A.manifestUrl,K=A.manifestXmlStringResolved,L=A.minQualityPreference,M=A.videoFBID,N=s.disableLogging?null:A.VideoPlayerShakaPerformanceLoggerClass;A=n();var O=Boolean(s.loggingMetaData.coreVideoPlayerMetaData.isLiveStreaming),P=function(a){return k.getEstimatedBandwidth()};n=function(){return k.getApproximateFBLSToPlayerDisplayLatency()};var Q=function(){G.setContext("connection_quality",d("VideoPlayerConnectionQuality").evaluate(function(){return P(O)}))},R=function(){var a=G.getNumber("connection_quality_context_throttle_frequency",0);if(a===0)return null;var b=c("CometThrottle")(Q,a),d=c("oz-player/networks/OzBandwidthEstimator").addListener("bandwidth_sampled",b);return function(){d.remove(),b.cancel()}};D.current=R();R=d("VideoPlayerOzImplementationEnginePartsImplUtils").createOzDrmProviders({accessToken:g,graphQLVideoDRMInfo:H,videoFBID:M});H=function(){return u.getCurrentState().controlledState.dimensions};g=d("VideoPlayerOzImplementationEnginePartsImplUtils").createOzPerfLoggerProviders({VideoPlayerShakaPerformanceLoggerClass:N,accessToken:g,disableLogging:s.disableLogging,getApproximateFBLSToPlayerDisplayLatency:n,getBandwidthEstimate:P,getPlayerDimensions:H,playbackIsLiveStreaming:O,playerInstanceCount:s.loggingMetaData.playerImplementationInstanceCountRef.current,playerInstanceKey:s.loggingMetaData.instanceKey,playerSuborigin:s.loggingMetaData.coreVideoPlayerMetaData.subOrigin,playerVersion:z,videoElement:B,videoFBID:M});E.current==null&&(E.current=new(c("OzCDNSignedQueryParams"))());if(I&&M!=null){var S;n=I.config;z=I.hive_initialization_options;S=y.current=(S=y.current)!=null?S:b("cr:1871597")?new(b("cr:1871597"))(M):null;try{if(!r.current){S&&S.logEnableP2P();M=function(a){y.current&&y.current.logHiveError(a)};var T=function(b){var a=x.current;a&&a.injectExternalDebugEvent("P2PTech",b.tech);y.current&&y.current.logSessionActive(b.tech)},U=function(b){var a=x.current;a&&a.injectExternalDebugEvent("P2PStats",b);y.current&&y.current.setCurrentHiveStats(b)},V=function(a){a=a.state;var b=u.getCurrentState();b=b.controlledState;b=b.playbackState;r.current&&a==="CLOSED"&&($(),Z&&b!=="ended"&&(C.current&&J!=null?Z.updatePlayerRunTimeConfig({manifestUrl:J}):Z.load(J)))};U={HiveJS:{maximumTrimming:{dash:void 0,hls:void 0},renderStatsCallback:U},HiveJava:{},debugLevel:"off",hiveTechOrder:["HiveJS","StatsJS","HiveJava"],onActiveSession:T,onError:M,onSessionStateChange:V,telemetryId:S?S.getSessionID():0};T=G.getNumber("hive_maximum_trimming_seconds",0);T>0&&(U.HiveJS.maximumTrimming={dash:T,hls:T});if(z){M=z.HiveJava;V=z.debugLevel;T=z.hiveTechOrder;U.hiveTechOrder=T.slice();U.HiveJava=M?{minVersion:M.minVersion}:{};U.debugLevel=(z=V)!=null?z:U.debugLevel}c("gkx")("2047688")&&(U=babelHelpers["extends"]({},U,{testId:"fb_video_player_p2p_jest_e2e"}));if(n.disable_hivejava_for_livevc===!0&&J!=null&&J.startsWith("https://livestream-lookaside")){T=U.hiveTechOrder.indexOf("HiveJava");T>=0&&U.hiveTechOrder.splice(T,1)}if(h)h.SensitiveInfo.restrictedConnectivityInfo=!0;else throw c("unrecoverableViolation")("HiveConfig does not exist","comet_video_player");if(i)r.current=new i(U);else throw c("unrecoverableViolation")("HiveOz does not exist","comet_video_player");if(r.current){if(!b("cr:1947728"))throw c("unrecoverableViolation")("OzConfigurableRequestImplementation does not exist","comet_video_player");v.current=b("cr:1947728")(r.current.getRequestImplementation())}}}catch(a){S&&S.logError(a),$()}}M=[new(c("OzVideoLiveTraceNetworkRequestStreamHandler"))(function(a,b,c){var d=o();d!=null&&d.handleHeadersAndBody(a,b,c)},G.getBool("live_trace_parse_emsg",!1))];c("OzActiveActiveFailoverNetworkRequestStreamHandler")&&M.push(new(c("OzActiveActiveFailoverNetworkRequestStreamHandler"))(function(a,b){if(c("gkx")("1664503")){var e=x.current,f=a.headers;if(e&&f){f=parseInt(f.get("x-fb-video-replica"),10);t.logVPLEvent({eventType:"replica_switch",logDataOverrides:{error_code:a.status.toString(),error_user_info:JSON.stringify({failover_response_code:a.status.toString(),replica:f,url:b})},state:u.getCurrentState()});a=e.getMpdUrl();if(a!=null){b=d("ConstUriUtils").getUri(a);if(b){a=b.addQueryParam("replica",f);a&&($(),e.updatePlayerRunTimeConfig({manifestUrl:a.toString()}))}}}}}));var W=s.expiredVideoUrlRefreshHandler,X=s.loggingMetaData.instanceKey;V=c("gkx")("221");z=c("gkx")("1836350")||c("gkx")("1993562");var Y=O?V:z;n={audioOnly:(n=F)!=null?n:!1,bufferEndLimit:s.bufferEndLimit!=null?s.bufferEndLimit:null,bufferingDetector:(T=w.current)!=null?T:void 0,config:d("oz-player/configs/OzConfigUtils").provideConfigWithDefaults(G),customParsers:d("OzCustomParsers").createOzCustomParser(),customRepresentationParsers:d("OzCustomRepresentationParsers").createOzCustomRepresentationParsers({ozConfig:G}),customSegmentTimelineParser:G.getBool("enable_predictive_dash",!1)?new(c("OzPredictedSegmentTimelineParser"))():void 0,debugCreateInitiator:[].concat(f,["proceedWithOzPlayerCreation"]).join(":"),drmProviders:R,getCustomRequestParametersForURI:function(a){var b=a.getQueryData(),e;if(O){e={};var f=d("VideoPlayerOzImplementationEnginePartsImplUtils").getOsParamValue(a);f!==null&&f!==""&&(e=babelHelpers["extends"]({},e,{os_param:f}));if(a.getPath().includes(".m4v")){f=d("VideoPlayerOzImplementationEnginePartsImplUtils").getTestQueryParam(a);if(f!==null&&f&&f.paramName!==""&&f.paramValue!==""){var g;e=babelHelpers["extends"]({},e,(g={},g[f.paramName]=f.paramValue,g))}f=d("VideoPlayerOzImplementationEnginePartsImplUtils").getTestRndQueryParamValue(a);f!==null&&f!==""&&(e=babelHelpers["extends"]({},e,{_nc_rnd:f}));G.getBool("live_video_send_player_id_in_requests",!1)&&(e=babelHelpers["extends"]({},e,{_nc_psid:X}));if(G.getBool("server_side_abr_send_client_estimates",!1)){g=c("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnostics(G);g&&(e=babelHelpers["extends"]({},e,{_nc_bwe:String(g.bandwidthEstimate),_nc_bwe_std:String(g.bandwidthStandardDeviation),_nc_ttfb:String(g.timeToFirstByteMsEstimate),_nc_ttfb_std:String(g.timeToFirstByteMsStandardDeviation)}));f=x.current;g=f==null?void 0:f.getCurrentVideoRepresentation();g&&(e=babelHelpers["extends"]({},e,{_nc_abr_bitrate:String(g.getBandwidth()),_nc_abr_qlabel:g.getQualityLabel()}))}}c("gkx")("2047")&&(e=babelHelpers["extends"]({},e,{_nc_wclk_ms:String(Date.now())}))}O&&c("gkx")("1998922")&&(e=babelHelpers["extends"]({},e,{_nc_nc:"1"}));c("gkx")("1836350")&&(b.uss!=null&&b.odm!=null&&(e=babelHelpers["extends"]({},e,{manual_redirect:"1"})));if(Y){f=E.current;if(f!=null){g=a.getDomain()+a.getPath();b=f.get(g);if(b!=null)for(var h in b){e=babelHelpers["extends"]({},e,(a={},a[h]=b[h],a))}}}return e},getOverrideOzRequestImplementation:function(){return v.current},getShouldIncludeCredentials:G.getBool("use_oz_credentials_provider",!1)?d("VideoPlayerOzImplementationEnginePartsImplUtils").checkShouldIncludeCredentials:null,getVideoDimensions:H,initialPlaybackPositionForDynamicMpd:d("VideoPlayerOzImplementationEnginePartsImplUtils").calculateInitialPlaybackPositionForDynamicMpd(G,(U=s.initialDesiredLatencyMs)!=null?U:0),initialRepresentationIDs:c("orEmptyArray")(s.initialRepresentationIds),liveheadFallBehindBlockMargin:d("VideoPlayerOzImplementationEnginePartsImplUtils").calculateLiveheadFallBehindBlockMargin(G,(S=s.initialDesiredLatencyMs)!=null?S:0),liveheadFallBehindBlockThreshold:d("VideoPlayerOzImplementationEnginePartsImplUtils").calculateLiveheadFallBehindBlockThreshold(G,(V=s.initialDesiredLatencyMs)!=null?V:0,(z=s.initialLatencyToleranceMs)!=null?z:0),loggerConfig:{isOzDevConsoleEnabled:c("gkx")("722076"),observedOperationLoggers:A&&N&&N.shouldInitialize()?A.getObservedOperationLoggers():[],perfLoggerProviders:g},mpdUrl:J,networkRequestStreamHandlers:M,networkRequestStreamRetryHandler:Y?function(a,d,e){var f=a.headers,g=f==null?void 0:f.get("x-fb-url-refresh"),h=E.current;if(a.status===403&&h!=null){t.logVPLEvent({eventType:"video_cdn_url_expired",logDataOverrides:{error_user_info:JSON.stringify({expired_url:e})},state:u.getCurrentState()});f=null;g!=null&&b("cr:1993377")!=null?f=b("cr:1993377")(g):W!=null&&(f=W(e));if(f!=null)return f.then(function(a){var b;b=(b=a.refreshedUrl)!=null?b:null;a=(a=a.reason)!=null?a:null;if(b!=null){t.logVPLEvent({eventType:"video_cdn_url_refreshed",logDataOverrides:{error_user_info:JSON.stringify({refreshed_url:b})},state:u.getCurrentState()});h.update(b);return d()}else{throw c("unrecoverableViolation")("expiredVideoUrlRefreshHandler refreshed url should not be "+((b==null?void 0:b.length)===0?"an empty string":"null")+", reason: "+((b=a)!=null?b:"null"),"comet_video_player")}})["catch"](function(a){t.logVPLEvent({eventType:"video_cdn_url_refresh_error",logDataOverrides:{error_description:a.message,error_user_info:JSON.stringify({expired_url:e,refresh_url:g})},state:u.getCurrentState()});throw a})}return b("Promise").resolve(a)}:null,prefetchCache:G.getBool("use_prefetch_cache",!1)?new(c("OzDashPrefetchCache"))():null,rawMpdXml:r.current?void 0:K,seekHandler:c("gkx")("1482680")?function(a){var b=B.currentTime;u.dispatch({payload:{seekSourcePosition:b},type:"implementation_seek_requested"});B.currentTime=a}:null,setCustomFetchStreamLoggingAttributes:function(a,b,e){a.setIsOnline(c("NetworkStatus").isOnline());if(c("gkx")("951")){var f=e==null?void 0:e.headers;if(f)try{a.setProxyStatusHeader(f.get("proxy-status")),a.setDynamicStatusHeader(f.get("x-fb-dynamic-status"))}catch(a){}}d("OzOneSemanticHandlerUtils").setOneSemanticFetchStreamLoggingAttributes(a,b,e)},startTimeStamp:G.getBool("fix_start_timestamp",!1)?s.startTimestamp:0,videoAbrManagerFactory:d("VideoPlayerOzImplementationEnginePartsImplUtils").getVideoAbrManagerFactory(),videoNodeOrQuickStarter:(F=A)!=null?F:B,videoPlaybackRestrictions:c("getOzPlaybackRestrictions")(L,G)};var Z=new e(n);x.current=Z;w.current&&w.current.attachPerfLoggerProvider(Z.getPerfLoggerProvider());T=s.loggingMetaData.playerImplementationInstanceCountRef;T.current++;Z.onError(function(a){N&&N.flushQueuedLogs(),q(a,"oz_player_error")});Z.addListener("switchVideoRepresentation",function(){u.dispatch({payload:{targetVideoQuality:k.getCurrentTargetVideoQuality()},type:"representation_changed"})});Z.addListener("manifestFetchError",function(a){d("OzOneSemanticHandler").handleManifestFetchErrorEvent(G,a)});Z.addListener("streamError",function(a){return d("OzOneSemanticHandler").handleStreamErrorEvent(G,a)});Z.addListener("streamInterruptAt",function(){u.dispatch({type:"stream_interrupted"})});Z.addListener("streamResumedAt",function(){u.dispatch({type:"stream_resumed"})});Z.addListener("streamEnd",function(){$(),u.dispatch({type:"stream_ended"})});A==null?(Z.addListener("enterBuffering",function(a){if(c("gkx")("1235655"))return;u.dispatch({payload:{bufferingType:a},type:"buffering_begin_requested"})}),Z.addListener("leaveBuffering",function(){u.dispatch({type:"buffering_end_requested"})})):d("VideoPlayerOzImplementationEnginePartsImplUtils").createOzBufferingDetector(B,a,G,u,w);j&&j.handleOzPlayerChanged(Z);var aa=function(){var a=l();a={inbandCaptionsAutogeneratedFromManifest:k.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:k.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:a==null?void 0:a.inbandCaptionsExpectedFromProps,sideLoadCaptionsExpectedFromProps:a==null?void 0:a.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:a==null?void 0:a.sideLoadCaptionsUrlFromProps};var b=u.getCurrentState();b=b.controlledState;(a.inbandCaptionsExpectedFromManifest!==b.captionsLoaded||a.inbandCaptionsAutogeneratedFromManifest!==b.inbandCaptionsAutogenerated)&&p(a)},ba=function(a,b){a=a.getCustomField("timescale");a=typeof a==="number"?a:0;u.dispatch({payload:{timescale:a,videoBytes:b},type:"cea608_bytes_received"})},ca=function(){var a=k.getVideoRepresentations();if(a!=null&&a.length>0){a=a[0].getTimeRanges();if(a!=null&&a.length>0){var b=a[0].startTime;a=Math.max(a[a.length-1].endTime-G.getNumber("live_rewind_seek_to_live_delta",8),b);u.dispatch({payload:{seekableRanges:new(c("TimeRanges"))([{endTime:a,startTime:b}])},type:"seekable_ranges_changed"})}}},da=function(){var a=Z.getMpd();if(!a)return;a=a.getCustomField("loapStreamType");var b=o();typeof a==="number"&&b!=null&&b.setStreamType(a)},ea=function(a){var d=function(){ca(),aa(),da()};a.addListener("updated",d);c("gkx")("1656434")&&d();a=b("cr:9958")!=null?b("cr:9958")(u):null;Z.updatePlayerRunTimeConfig({audioStreamDataHandler:a,videoStreamDataHandler:ba});if(k.isPredictiveDash()){G.setContext("streaming_implementation","pdash");d=m();d&&d.maybeUpdateLatencyLevel()}a=l();p({inbandCaptionsAutogeneratedFromManifest:k.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:k.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:a==null?void 0:a.inbandCaptionsExpectedFromProps,sideLoadCaptionsExpectedFromProps:a==null?void 0:a.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:a==null?void 0:a.sideLoadCaptionsUrlFromProps})};Z.addListener("mpdParsed",function(a){k.isPredictiveDash()&&G.setContext("streaming_implementation","pdash")});Z.addListener("mpdReady",function(a){C.current=!0;ea(a);u.dispatch({payload:{availableQualities:k.getAvailableVideoQualities(),selectedVideoQuality:k.getUserSelectedVideoQuality(),targetVideoQuality:k.getCurrentTargetVideoQuality(),videoProjection:(a=k.getVideoProjectionType())!=null?a:null},type:"implementation_engine_initialized"})});Z.addListener("availableQualitiesChanged",function(){u.dispatch({payload:{availableQualities:k.getAvailableVideoQualities()},type:"implementation_engine_available_qualities_changed"})});function $(){var a=r.current,b=y.current;if(a!=null){r.current=null;y.current=null;v.current=null;try{a&&a.closeHiveSession(),b&&b.logEndSession()}catch(a){b&&b.logHiveError(a)}}}f=r.current;R=I==null?void 0:I.ticket;if(J!=null&&I&&f&&R!=null){H=Z.getPerfLoggerProvider();H&&H.setIsP2pPlayback(!0);U=J.substring(J.indexOf("?"));S=f.initSession(R+U,Z,B);S.then(function(a){var b=a.manifest;a=a.tech;var c=y.current;b!==J&&c&&c.logManifestMismatch(b,J);c&&c.logSessionInit(a,b);t.setAdditionalLogData("is_p2p_playback",!0);Z.load(b)})["catch"](function(a){var b=y.current;b&&b.logError(a);$();Z.load(J)})}else t.setAdditionalLogData("is_p2p_playback",!1),Z.load(J)}g.proceedWithOzPlayerCreation=a}),98);
__d("VideoPlayerOzImplementationLatencyLevelManager",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$2="normal",this.$4=null,this.$1=a,this.$3=b}var b=a.prototype;b.updatePlayerFormat=function(a){this.$4!==a&&(this.$4=a,this.maybeUpdateLatencyLevel())};b.maybeUpdateLatencyLevel=function(){var a=this.$5();a!==this.$2&&(this.$2=a,this.$3.dispatch({payload:{latencyLevel:a},type:"implementation_set_latency_level_requested"}))};b.$5=function(){var a=[];try{a=JSON.parse(this.$1.getString("player_formats_for_low_latency","[]"))}catch(a){}return a.includes(this.$4)?"low":"normal"};return a}();f["default"]=a}),66);
__d("VideoPlayerOzQuickStarterUtils",["VideoDashPrefetchCache"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,d){b=c("VideoDashPrefetchCache").createQueryStringURL(b);b=c("VideoDashPrefetchCache").getCacheValue(b);if(!b){a.push(d);return null}return b}function i(a,b){return a.find(function(a){return a.segmentType===b})}function a(a,b,c){var d=i(b,"init");b=i(b,"data");if(d){var e=h(a,d,c+" init");if(!e)return null;var f;b&&(f=h(a,b,c+" data"));return{initializationPromise:e,mimeCodec:d.mimeCodec,representationID:d.representationID,segmentPromise:f}}return null}g.createPrefetchDataForTrack=a}),98);
__d("VideoPlayerOzImplementationEngine",["VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrorNormalization","VideoPlayerImplementationErrors","VideoPlayerImplementationLoadSequenceManager","VideoPlayerODS","VideoPlayerOzImplementationEngineExtrasAPI","VideoPlayerOzImplementationEnginePartsImplFunction","VideoPlayerOzImplementationEnginePartsImplUtils","VideoPlayerOzImplementationLatencyLevelManager","VideoPlayerOzQuickStarterUtils","cr:10753","cr:1473549","cr:1494460","cr:1534629","cr:72","emptyFunction","gkx","oz-player/utils/OzError","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";e=!1;var h=c("emptyFunction");function i(a,b){if(a instanceof c("oz-player/utils/OzError")){var e=a,f=e.getExtra();e={createdTimestamp:Date.now(),errorCode:f.code,errorDescription:e.getDescription(),errorLocation:b,errorName:e.getType(),errorType:d("VideoPlayerImplementationErrorNormalization").getVideoPlayerNormalizedErrorTypeFromOzError(e),stack:e.stack,url:f.url};return e}else return d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError("OZ_JAVASCRIPT_NATIVE",a,b)}function a(a){var e=a.debugLogId,f=a.handleFatalError,g=a.initialProps;a=a.setExposedStateInReact;var j={current:null},k={current:null},l={current:null},m={current:null},n={current:null},o={current:null},p={current:null},q={current:null},r={current:null},s={current:null},t={current:null},u={current:null},v={current:null},w={current:null};function x(){var a;return(a=q.current)!=null?a:null}function y(){var a;return(a=p.current)!=null?a:null}function z(){return o.current}function A(){var a;return(a=(a=k.current)==null?void 0:a.experimentationConfig)!=null?a:null}function B(){var a;return(a=Z.current)!=null?a:null}function C(){var a;return(a=w.current)!=null?a:null}var D;b("cr:1473549")&&(D=new(b("cr:1473549"))());var E="comet_oz",F=function(a,b){return b.manifestXmlStringInitial!==null?a.manifestXmlStringInitial!==b.manifestXmlStringInitial:a.manifestUrl!==b.manifestUrl},G=function(a,b){return a.videoFBID!==b.videoFBID},H=function(a){return a.getBool("use_full_player_if_cached",!1)&&b("cr:1534629")?b("cr:1534629")().getModuleIfRequireable():null},I=function(a,b,c){b!=null?k.current=babelHelpers["extends"]({},a,{manifestXmlStringResolved:b}):k.current=a,Y.dispatch({type:"implementation_engine_oz_manifest_downloading"}),n.current=H(a.experimentationConfig),M(n.current,[].concat(c,["proceedWithOzManifestDownloading"]))},J=function(a){var b,e=a.manifestUrl,f=a.manifest;b={VideoPlayerShakaPerformanceLoggerClass:a.VideoPlayerShakaPerformanceLoggerClass,accessToken:a.loggingMetaData.accessToken,audioOnly:a.audioOnly,experimentationConfig:a.experimentationConfig,graphQLVideoDRMInfo:a.graphQLVideoDRMInfo,graphQLVideoP2PSettings:a.graphQLVideoP2PSettings,manifestUrl:(b=e)!=null?b:null,manifestXmlStringInitial:(b=f)!=null?b:null,minQualityPreference:a.minQualityPreference,ozQuickStarterData:a.ozQuickStarterData,videoFBID:a.videoFBID};var g=j.current;w.current==null&&(w.current=new(c("VideoPlayerOzImplementationLatencyLevelManager"))(a.experimentationConfig,Y));w.current.updatePlayerFormat((a=a.loggingMetaData.coreVideoPlayerMetaData.playerFormat)!=null?a:null);a=!1;if(g==null)a=!0;else if(g!=null&&!G(b,g)&&F(b,g)){var h=14;d("VideoPlayerODS").bumpEntityKey("OzImplementation","manifest_reloaded",h);a=!1}else if(g!=null&&G(b,g))throw c("unrecoverableViolation")("videoFBID changed after player initialization","comet_video_player");if(!a)return!1;e=b.manifestUrl;f=b.manifestXmlStringInitial;if(f==null&&e==null)throw c("unrecoverableViolation")("Empty manifestXmlStringInitial and manifestUrl","comet_video_player");j.current=b;I(b,f,["handleVideoInfoChangeForOzImplementation","downloadManifestInOz"]);return!0},K=function(a,b,e,f,g){var h=function(b){if(m.current!==a)return;n.current=b;M(b,[].concat(g,["handleOzPlayerModuleLoadSuccess"]))},i=function(b){if(m.current!==a)return;W(b,"oz_player_module_load_failed")};m.current=a;var j=f.experimentationConfig,k=f.ozQuickStarterData;if(o.current==null&&b!=null&&f!=null&&(!j.getBool("prevent_unnecessary_quickstarter_instance",!1)||k!=null)){j=new b(e,f.experimentationConfig);c("gkx")("1494163")&&(o.current=j);if(k!=null){b=[];e=d("VideoPlayerOzQuickStarterUtils").createPrefetchDataForTrack(b,k.video,"video");if(e){j.addPrefetchTrack(e);f=d("VideoPlayerOzQuickStarterUtils").createPrefetchDataForTrack(b,k.audio,"audio");f&&j.addPrefetchTrack(f)}}j.addListener("streamEnd",function(){Y.dispatch({type:"stream_ended"})});c("gkx")("1494163")||(o.current=j)}c("promiseDone")(a,h,i)},L=function(a){a=d("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(a);Z.current=a;return a},M=function(a,c){var e=T(),f=k.current;if(e==null||f==null)return;var g=L(e),h=f.experimentationConfig;a?N(a,e,g,f,[].concat(c,["proceedWithResolvedVideoInfo","OzPlayerModuleFromRef"])):b("cr:1494460")?N(b("cr:1494460")(),e,g,f,[].concat(c,["proceedWithResolvedVideoInfo","VideoPlayerOzPlayerModuleLoaderSync"])):b("cr:1534629")?(h.getBool("instantiate_buffering_detector_before_quick_starter",!1)&&d("VideoPlayerOzImplementationEnginePartsImplUtils").createOzBufferingDetector(e,g,f.experimentationConfig,Y,q),K(b("cr:1534629")().load(),b("cr:10753"),e,f,[].concat(c,["proceedWithResolvedVideoInfo","VideoPlayerOzPlayerModuleLoaderAsync"]))):W(new Error("Neither of OzPlayerModuleLoader is available."),"oz_player_module_loaders_missing")},N=function(a,b,e,f,h){try{var i={OzPlayerClass:a,callChain:[].concat(h,["proceedWithResolvedVideoInfoAndOzPlayerModuleSync"]),destroyOzPlayerPartsRef:v,engineDebugAPI:D,engineExtrasAPI:R,getCaptionsInfo:S,getLatencyLevelManager:C,getOzQuickStarter:z,getVideoLiveTrace:U,handleCaptionsInfoChange:V,handleFatalImplementationError:W,initialProps:g,logger:X,machine:Y,ozBufferingDetectorRef:q,playerVersion:E,resolvedVideoInfo:f,videoElement:b,videoElementAPI:e};a=A();h=g.loadSequence;a&&a.getNumber("load_sequence_max_delay_ms",0)>0&&h!=null?u.current=c("VideoPlayerImplementationLoadSequenceManager").schedule(a,h,function(){d("VideoPlayerOzImplementationEnginePartsImplFunction").proceedWithOzPlayerCreation(babelHelpers["extends"]({},i,{hivePluginRef:r,overrideOzRequestImplementationRef:t,ozPlayerRef:p,p2pSessionLoggerRef:s}));return e.getCanPlayPromise()}):d("VideoPlayerOzImplementationEnginePartsImplFunction").proceedWithOzPlayerCreation(babelHelpers["extends"]({},i,{hivePluginRef:r,overrideOzRequestImplementationRef:t,ozPlayerRef:p,p2pSessionLoggerRef:s}));l.current=f}catch(a){W(a,"oz_player_create_exception")}};function O(a){c("gkx")("1494163")&&(l.current=null);var b=v.current;b!=null&&(v.current=null,b(a));u.current!=null&&(u.current(),u.current=null);b=o.current;b&&(o.current=null);c("gkx")("1494163")&&(o.current=null)}function P(){if(c("gkx")("1494163"))j.current=null,k.current=null,l.current=null;else return}function Q(){m.current=null,n.current=null}var R=d("VideoPlayerOzImplementationEngineExtrasAPI").createVideoPlayerOzImplementationEngineExtrasAPI({getConfig:A,getOzPlayer:y,getOzQuickStarter:z,getVideoElementAPI:B});B=d("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({createDebugAPI:function(b){var a=b.getVideoElementAPI;b=b.logger;return D?D.createDebugAPI({engineExtrasAPI:R,getConfig:function(){var a;return(a=(a=l.current)==null?void 0:a.experimentationConfig)!=null?a:null},getManifest:function(){var a;return(a=(a=l.current)==null?void 0:a.manifestXmlStringResolved)!=null?a:null},getManifestUrl:function(){var a;return(a=(a=l.current)==null?void 0:a.manifestUrl)!=null?a:null},getOzBufferingDetector:x,getOzPlayer:y,getVideoElementAPI:a,logger:b}):null},createVideoPlayerError:i,debugLog:h,debugLogId:e,destroyEngineParts:function(a){O([].concat(a,["destroyEngineParts"])),P(),Q()},engineExtrasAPI:R,engineMetadata:{isAbrEnabled:!0,isExternalMedia:!1,playerImplementationName:"oz_v2",playerVersion:E,streamingFormat:"dash"},handleFatalError:f,handleVideoElementMounted:function(a){var b=T();M(n.current,[].concat(a,["handleVideoElementMounted"]))},handleVideoElementUnmounted:function(a){(c("gkx")("1494163")||c("gkx")("1380112"))&&O([].concat(a,["handleVideoElementUnmounted"]))},handleVideoInfoChange:J,initialProps:g,setExposedStateInReact:a});e=B.engine;var S=B.getCaptionsInfo,T=B.getVideoElement,U=B.getVideoLiveTrace,V=B.handleCaptionsInfoChange,W=B.handleFatalImplementationError,X=B.logger,Y=B.machine,Z=B.videoElementAPIRef;return e}g.createVideoPlayerOzImplementationEngine=a}),98);
__d("VideoPlayerOzImplementationV2.react",["VideoPlayerImplementationEngineAPI","VideoPlayerImplementationReactVideoElement.react","VideoPlayerOzImplementationEngine","react","useSEOLoggedOutWebCrawler"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=d("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(a,d("VideoPlayerOzImplementationEngine").createVideoPlayerOzImplementationEngine),e=b[0];b=b[1];var f=c("useSEOLoggedOutWebCrawler")(),g={src:null,videoElementCallbacks:b.videoElementCallbacks,videoElementRefCallback:b.videoElementRefCallback};f&&(g={src:a.manifestUrl,videoElementCallbacks:null,videoElementRefCallback:null});return h.jsx(c("VideoPlayerImplementationReactVideoElement.react"),{alt:a.alt,implementationController:b.implementationController,implementationExposedState:e,renderWithVideoImplementationStates:a.renderWithVideoImplementationStates,src:g.src,videoElementCallbacks:g.videoElementCallbacks,videoElementRefCallback:g.videoElementRefCallback})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay",["requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferredForDisplay")("oz-player").__setRef("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay");function a(){return{getModuleIfRequireable:function(){return h.getModuleIfRequireable()||null},load:function(){return h.load()}}}g["default"]=a}),98);
__d("VideoPlayerShakaImplementationData",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.videoData;a=a.videoPlayerShakaConfig;return b==null?null:{videoData:b,videoPlayerShakaConfig:a}}f.makeShakaImplementationData=a}),66);
__d("VideoPlayerOzWWWConfig",[],(function(a,b,c,d,e,f){"use strict";var g="oz_www_";a=function(){function a(a){this.$1=a}var b=a.prototype;b.getBool=function(a,b){return this.$1.getBool(g+a,b)};b.getNumber=function(a,b){return this.$1.getNumber(g+a,b)};b.getString=function(a,b){return this.$1.getString(g+a,b)};b.setContext=function(a,b){this.$1.setContext(a,b)};b.getAllContexts=function(){return this.$1.getAllContexts()};return a}();f["default"]=a}),66);
__d("useOzImplementationData",["CometRelay","VideoPlayerOzImplementationData","VideoPlayerOzWWWConfig","react","useOzImplementationData_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react").useMemo;function a(a,e){var f=e.manifestURL_DO_NOT_USE,g=e.ozQuickStarterData,j=e.videoPlayerShakaConfig,k=i(function(){return j==null?null:new(c("VideoPlayerOzWWWConfig"))(j)},[j]),l=d("CometRelay").useFragment(h!==void 0?h:h=b("useOzImplementationData_video.graphql"),a);return i(function(){return d("VideoPlayerOzImplementationData").makeOzImplementationData({canUseOz:l.can_use_oz,dashManifest:f!=null?null:l.dash_manifest,dashUrl:f!=null?f:l.playable_url_dash,experimentationConfig:k,minQualityPreference:l.min_quality_preference,ozQuickStarterData:f!=null?null:g,videoFBID:l.id})},[l,f,k,g])}g["default"]=a}),98);
__d("useProgressiveImplementationData",["CometRelay","VideoPlayerProgressiveImplementationData","useProgressiveImplementationData_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c){var e,f;c=c.initialForceHD;c=c===void 0?!1:c;a=d("CometRelay").useFragment(h!==void 0?h:h=b("useProgressiveImplementationData_video.graphql"),a);e=a.is_spherical===!0?(e=(e=a.spherical_video_fallback_urls)==null?void 0:e.hd)!=null?e:a.playable_url_quality_hd:a.playable_url_quality_hd;f=a.is_spherical===!0?(f=(f=a.spherical_video_fallback_urls)==null?void 0:f.sd)!=null?f:a.playable_url:a.playable_url;var g=a.is_rss_podcast_video===!0;return d("VideoPlayerProgressiveImplementationData").makeProgressiveImplementationData({hdSrc:e,hdSrcPreferred:c===!0||a.min_quality_preference==="HD"||a.min_quality_preference==="UHD",isExternalMedia:g,sdSrc:f})}g["default"]=a}),98);
__d("useShakaImplementationData",["CometRelay","VideoPlayerShakaImplementationData","cr:1604324","react","recoverableViolation","useShakaImplementationData_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react").useMemo;function a(a,e){var f=e.videoPlayerShakaConfig,g=d("CometRelay").useFragment(h!==void 0?h:h=b("useShakaImplementationData_video.graphql"),a);return i(function(){var a;if(g.is_rss_podcast_video===!0)return null;a=(a=g.video_player_shaka_live_p2p_init)==null?void 0:a.json_encoded_video_data;if(a==null)return null;if(b("cr:1604324")==null)return c("recoverableViolation")("VideoData is not supported","comet_video_player");var e=null;try{e=new(b("cr:1604324"))(JSON.parse(a))}catch(a){c("recoverableViolation")("VideoData JSON is broken","comet_video_player")}return d("VideoPlayerShakaImplementationData").makeShakaImplementationData({videoData:e,videoPlayerShakaConfig:f})},[g,f])}g["default"]=a}),98);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl",["CometRelay","useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql","useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;h!==void 0?h:h=b("useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql");function a(a){a=d("CometRelay").useFragment(i!==void 0?i:i=b("useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql"),a);var c=a.video_player_shaka_performance_logger_init?d("CometRelay").ModuleResource.read(a.video_player_shaka_performance_logger_init):null;c!=null&&a.video_player_shaka_performance_logger_should_sample===!0&&c.forceShouldSample();return c}g["default"]=a}),98);
__d("useVideoPlayerShakaPerformanceLoggerRelay",["useVideoPlayerShakaPerformanceLoggerRelayImpl"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("useVideoPlayerShakaPerformanceLoggerRelayImpl")}),98);
__d("useCometRelayExpiredVideoUrlRefreshHandler",["CometRelay","react","unrecoverableViolation","useCometRelayExpiredVideoUrlRefreshHandlerQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react").useCallback;function a(a){var e=d("CometRelay").useRelayEnvironment();if(a==null||a.length===0)throw c("unrecoverableViolation")("refreshCometRelayVideoPlayerExpiredUrl videoFBID cannot be "+((a==null?void 0:a.length)===0?"an empty string":"null"),"comet_video_player");var f=i(function(c){var f=h!==void 0?h:h=b("useCometRelayExpiredVideoUrlRefreshHandlerQuery.graphql");return d("CometRelay").fetchQuery(e,f,{expiredURL:btoa(c),videoID:a}).toPromise().then(function(a){var b;b=(b=a==null?void 0:(b=a.video)==null?void 0:(b=b.rmd_refreshed_url)==null?void 0:b.new_url)!=null?b:null;a=(a=a==null?void 0:(a=a.video)==null?void 0:(a=a.rmd_refreshed_url)==null?void 0:a.reason)!=null?a:null;return{reason:a,refreshedUrl:b}})},[e,a]);return f}g["default"]=a}),98);
__d("manifestHasUnsupportedCodecs",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(!c("gkx")("1917833")||window.MediaSource==null||a==null||typeof a!=="string")return!1;var b=/mimeType=\"([^\"]*)\"\s*codecs=\"([^\"]*)\"/g,d;while(d=b.exec(a)){d=d[1]+'; codecs="'+d[2]+'"';if(!window.MediaSource.isTypeSupported(d))return!0}return!1}g["default"]=a}),98);
__d("useVideoImplementationsImpl",["CometRelay","ErrorMetadata","VideoPlayerOzImplementationV2.react","VideoPlayerProgressiveImplementationV2.react","cr:1604325","err","gkx","manifestHasUnsupportedCodecs","recoverableViolation","useOzImplementationData","useProgressiveImplementationData","useShakaImplementationData","useVideoImplementationsImpl_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){var f=[],g=e.forceProgressiveImpl;g=g===void 0?!1:g;var i=e.initialForceHD;i=i===void 0?!1:i;var j=e.manifestURL_DO_NOT_USE,k=e.ozQuickStarterData,l=e.videoFBID;e=e.videoPlayerShakaConfig;a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoImplementationsImpl_video.graphql"),a);var m=c("useShakaImplementationData")(a,{videoPlayerShakaConfig:e});m!=null&&(b("cr:1604325")==null?c("recoverableViolation")("VideoPlayerShakaImplementation is not supported","comet_video_player"):f.push({Component:b("cr:1604325"),data:m,typename:"VideoPlayerShakaImplementation"}));m=c("useOzImplementationData")(a,{manifestURL_DO_NOT_USE:j,ozQuickStarterData:k,videoPlayerShakaConfig:e});j=m!=null&&c("manifestHasUnsupportedCodecs")(m.manifest);!g&&m!=null&&(m.manifest!=null&&!j||m.manifestUrl!=null)&&f.push({Component:c("VideoPlayerOzImplementationV2.react"),data:m,typename:"VideoPlayerOzImplementation"});k=c("useProgressiveImplementationData")(a,{initialForceHD:i});c("VideoPlayerProgressiveImplementationV2.react")!=null&&k!=null&&f.push({Component:c("VideoPlayerProgressiveImplementationV2.react"),data:k,typename:"VideoPlayerProgressiveImplementation"});if(f.length===0&&c("gkx")("1611172")){e=c("err")("Cannot play video: No matching video player implementations");a={forced_progressive:g,has_oz_data:m!=null,has_oz_manifest:(m==null?void 0:m.manifest)!=null,has_oz_manifest_url:(m==null?void 0:m.manifestUrl)!=null,has_oz_unsupported_codecs:j,has_progressive_data:k!=null};e.metadata=new(c("ErrorMetadata"))();e.metadata.addEntries(["COMET_VIDEO","VIDEO_ID",String(l)],["COMET_VIDEO","VIDEO_IMPLEMENTATION_DEBUG_DATA",JSON.stringify(a)]);c("recoverableViolation")("useVideoImplementations: No matching video player implementations","comet_video_player",{error:e})}return f}g["default"]=a}),98);
__d("useVideoImplementations",["useVideoImplementationsImpl"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("useVideoImplementationsImpl")}),98);
__d("VideoPlayerShakaBandwidthEstimator",["CacheStorage","Run","requireWeak"],(function(a,b,c,d,e,f,g){var h;c("requireWeak")("Shaka",function(a){h=a.util.EWMACacheBandwidthEstimator});var i=null,j=!1,k=30,l=2e6,m=25e4,n=123034;a=function(){function a(){var a=this,b=new(c("CacheStorage"))("localstorage","_video_"),e=b.get("bandwidthEstimate");this.$1={isMockObject:!0,getBandwidth:function(a){return e},getFastMovingBandwidth:function(){return e}};h&&(this.$1=new h(k,l,function(){},e),this.$1.isMockObject=!1);d("Run").onUnload(function(){b.set("bandwidthEstimate",a.$1.getBandwidth())})}var b=a.prototype;b.getEstimator=function(){return this.$1};a.getInstance=function(){(i===null||i.getEstimator().isMockObject&&h)&&(i=new a());return i};a.getEstimator=function(){return a.getInstance().getEstimator()};a.getBandwidth=function(b){var c=a.getEstimator();return c.getBandwidth(b)};a.getBandwidthByVideoType=function(b){return a.getBandwidth(a.getBandwidthModel(b))};a.getBandwidthModel=function(a){return a?"aggressive":"conservative"};a.isAutoplayBandwidthRestrained=function(b){var c=a.getEstimator(),d;j?d=c.getFastMovingBandwidth():d=c.getBandwidth();c=b?m:n;d===null||d>=c?j=!1:j=!0;return j};return a}();g["default"]=a}),98);
__d("VideoPlayerShakaConfigContextProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var b=a.prototype;b.setContext=function(a,b){if(this.$1[a]!==b){var c;this.$1=babelHelpers["extends"]({},this.$1,(c={},c[a]=b,c))}};b.setAllContexts=function(a){this.$1=a};b.getAllContexts=function(){return this.$1};return a}();f["default"]=a}),66);
__d("VideoPlayerShakaConfig",["VideoPlayerContextSensitiveConfigResolver","VideoPlayerShakaConfigContextProvider"],(function(a,b,c,d,e,f,g){var h={};a=function(){function a(a,b,d){this.$1=new(c("VideoPlayerShakaConfigContextProvider"))(),this.$2=b||null,this.$3=new(c("VideoPlayerContextSensitiveConfigResolver"))(d),this.$3.setContexts(a||{}),a&&this.$1.setAllContexts(a)}a.setGlobalOverrideConfig=function(a){h=a};var b=a.prototype;b.setContext=function(a,b){var c=this.$1.getAllContexts();this.$1.setContext(a,b);a=this.$1.getAllContexts();c!==a&&this.$3.setContexts(a)};b.setOverrideConfig=function(a){this.$2=a};b.getBool=function(a,b){a=this.$4(a,b);return typeof a==="boolean"?a:b};b.getNumber=function(a,b){a=this.$4(a,b);return typeof a==="number"?a:b};b.getString=function(a,b){a=this.$4(a,b);return typeof a==="string"?a:b};b.getAllContexts=function(){return this.$1.getAllContexts()};b.$4=function(a,b){if(!!h&&typeof h[a]===typeof b)return h[a];if(typeof this.$3.getValue(a)===typeof b)return this.$3.getValue(a);return!!this.$2&&typeof this.$2[a]===typeof b?this.$2[a]:null};return a}();g["default"]=a}),98);
__d("useVideoPlayerShakaConfig",["CometRelay","VideoPlayerConnectionQuality","VideoPlayerOzWWWGlobalConfig","VideoPlayerShakaBandwidthEstimator","VideoPlayerShakaConfig","cr:1990345","react","useSelectedLatencySetting","useVideoPlayerShakaConfig_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("react");var i=e.useEffect,j=e.useState;function a(a,e){e=e.adClientToken;var f=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerShakaConfig_video.graphql"),a),g=e!=null,k=f.is_spherical===!0,l=f.is_gaming_video===!0;e=c("useSelectedLatencySetting")((a=f.id)!=null?a:"null",f.selected_latency_setting);var m=e[0];a=j(function(){var a;return new(c("VideoPlayerShakaConfig"))({connection_quality:d("VideoPlayerConnectionQuality").evaluate(b("cr:1990345")!=null?function(){return b("cr:1990345").getBandwidth(c("VideoPlayerOzWWWGlobalConfig"))}:c("VideoPlayerShakaBandwidthEstimator").getBandwidth),content_category:l?"gaming":"general",fbls_tier:((a=f.fbls_tier)==null?void 0:a.startsWith("user"))?"user":"general",is_ad:g,is_latency_sensitive_broadcast:f.is_latency_sensitive_broadcast===!0,is_live:f.is_live_streaming===!0,is_spherical:k,latency_level:f.is_latency_menu_enabled===!0?m:"normal",player_format:"inline",servable_via_fmbs:!1,streaming_implementation:"default"})});var n=a[0];i(function(){n.setContext("is_ad",g)},[n,g]);i(function(){n.setContext("is_spherical",k)},[n,k]);return n}g["default"]=a}),98);
__d("oz-player/loggings/OzLoggingUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){a=a.getOperationLogger(b).start();try{b=c(a);return b}catch(b){a.setError(b);throw b}finally{a.log()}}function b(a,b,c,d,e){d===void 0&&(d=function(){});e===void 0&&(e=function(){});var f=b.getOperationLogger(c).start();d(f);return a.then(function(a){e(f);f.log();return a})["catch"](function(a){e(f);f.setError(a);f.log();throw a})}f.executeOperationAndLog=a;f.monitorPromiseAndLogOperation=b}),66);
__d("oz-player/loggings/OzOperationLoggerBase",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.start=function(){var a=Date.now();this.setClientTimeBegin(a);this.setClientTimeEnd(null);this.setClientTimeDuration(null);return this};b.log=function(){var a=Date.now(),b=this.getClientTimeBegin(),c=this.getClientTimeEnd();(b==null||b===0)&&(b=a,this.setClientTimeBegin(b));(c==null||c===0)&&(c=a,this.setClientTimeEnd(c));this.setClientTimeDuration(c-b)};b.setError=function(a){this.$2=a;return this};b.setAppendTarget=function(a){this.$41=a;return this};b.setOneObserved=function(a){this.$38=a;return this};b.setOneReqWave=function(a){this.$39=a;return this};b.setOneResWave=function(a){this.$40=a;return this};b.setIsP2pPlayback=function(a){this.$37=a;return this};b.setResult=function(a){this.$3=a;return this};b.setType=function(a){this.$4=a;return this};b.setClientTimeBegin=function(a){this.$5=a;return this};b.setClientTimeDuration=function(a){this.$6=a;return this};b.setClientTimeEnd=function(a){this.$7=a;return this};b.setSegmentCount=function(a){this.$14=a;return this};b.setTimeToFirstByte=function(a){this.$8=a;return this};b.setTimeToLastByte=function(a){this.$9=a;return this};b.setTimeToRequestStart=function(a){this.$10=a;return this};b.setTimeToRequestSent=function(a){this.$11=a;return this};b.setReason=function(a){this.$12=a;return this};b.setResource=function(a){this.$13=a;return this};b.setSegmentStartTime=function(a){this.$15=a;return this};b.setSegmentEndTime=function(a){this.$16=a;return this};b.setLength=function(a){this.$17=a;return this};b.setLiveheadPosition=function(a){this.$18=a;return this};b.setLiveheadSeqNumHeader=function(a){this.$19=a;return this};b.setLiveheadSeqNumMpd=function(a){this.$20=a;return this};b.setManifestType=function(a){this.$21=a;return this};b.setPriorityFloat=function(a){this.$22=a;return this};b.setAppendedBufferMs=function(a){this.$23=a;return this};b.setInitiator=function(a){this.$24=a;return this};b.setPreloadTime=function(a){this.$25=a;return this};b.setConcluder=function(a){this.$26=a;return this};b.setPreviousRepresentationID=function(a){this.$27=a;return this};b.setRepresentationID=function(a){this.$28=a;return this};b.setStreamSwitchReason=function(a){this.$29=a;return this};b.setState=function(a){this.$30=a;return this};b.setContentLengthHeader=function(a){this.$31=a;return this};b.setOriginHitHeader=function(a){this.$33=a;return this};b.setEdgeHitHeader=function(a){this.$34=a;return this};b.setCode=function(a){this.$32=a;return this};b.setResponseTimeMsHeader=function(a){this.$35=a;return this};b.setIsTemplatedManifest=function(a){this.$36=a;return this};b.setIsRingBufferSample=function(a){this.$42=a;return this};b.setIsOnline=function(a){this.$43=a;return this};b.setProxyStatusHeader=function(a){this.$44=a;return this};b.setPlaybackFbmsParam=function(a){return this};b.setUserInfo=function(a){return this};b.setDynamicStatusHeader=function(a){return this};b.getError=function(){return this.$2};b.getResult=function(){return this.$3};b.getType=function(){return this.$4};b.getClientTimeBegin=function(){return this.$5};b.getClientTimeEnd=function(){return this.$6!=null?this.$5!=null?this.$5+this.$6:null:this.$7};b.getTimeToRequestStart=function(){return this.$10};b.getTimeToRequestSent=function(){return this.$11};b.getReason=function(){return this.$12};b.getResource=function(){return this.$13};b.getOperationName=function(){return this.$1};b.getSegmentStartTime=function(){return this.$15};b.getSegmentEndTime=function(){return this.$16};b.getLength=function(){return this.$17};b.getLiveheadPosition=function(){return this.$18};b.getManifestType=function(){return this.$21};b.getPriorityFloat=function(){return this.$22};b.getAppendedBufferMs=function(){return this.$23};b.getInitiator=function(){return this.$24};b.getPreloadTime=function(){return this.$25};b.getConcluder=function(){return this.$26};b.getContentLengthHeader=function(){return this.$31};b.getOriginHitHeader=function(){return this.$33};b.getEdgeHitHeader=function(){return this.$34};b.getCode=function(){return this.$32};b.getResponseTimeMsHeader=function(){return this.$35};b.getIsTemplatedManifest=function(){return this.$36};b.getOneObserved=function(){return this.$38};b.getOneReqWave=function(){return this.$39};b.getOneResWave=function(){return this.$40};b.getAppendTarget=function(){return this.$41};b.getIsRingBufferSample=function(){return this.$42};b.getIsOnline=function(){return this.$43};b.getProxyStatusHeader=function(){return this.$44};return a}();f["default"]=a}),66);
__d("oz-player/utils/OzErrorEmitter",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;b===void 0&&(b=!1);d=a.call(this)||this;d.$OzErrorEmitter1=!1;d.$OzErrorEmitter2=!1;d.$OzErrorEmitter3=[];d.emitError=function(a){!d.$OzErrorEmitter1?d.$OzErrorEmitter2?d.$OzErrorEmitter3.push(a):d.$OzErrorEmitter1||c("oz-player/shims/ozvariant")(0,14038):d.emit("error",a)};d.$OzErrorEmitter2=b;return d}var d=b.prototype;d.onError=function(a){this.$OzErrorEmitter1=!0;a=this.addListener("error",a);this.$OzErrorEmitter2&&this.$OzErrorEmitter3.length>0&&this.$OzErrorEmitter3.forEach(this.emitError);return a};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/drm/OzDrmManager",["oz-player/drm/OzDrmUtils","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzOperationLoggerBase","oz-player/shims/OzDOMEventListener","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e){var f=this;e===void 0&&(e=null);this.$1=null;this.$2=new Map();this.$4=!1;this.$6=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$7=new(c("oz-player/utils/OzErrorEmitter"))();this.$8=!1;this.$9=null;this.$10=0;this.$12=[];this.$14=[];this.$24=function(a){a instanceof c("oz-player/loggings/OzOperationLoggerBase")&&a.getError()&&a.setResult("failed")};this.$21=function(a){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(new Error("OzDrmManager destroyed before call to mediaKeySystemAccess.createMediaKeys()."));var b=f.$5.mediaKeys!=null?c("oz-player/shims/OzMaybeNativePromise").resolve(f.$5.mediaKeys):a.createMediaKeys();return d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b.then(function(b){return{mediaKeySystemAccess:a,mediaKeys:b}}),f.$3,"drm_create_media_keys",function(){},f.$24)};this.$22=function(a){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(new Error("OzDrmManager destroyed before call to setMediaKeys()"));var b=a.mediaKeySystemAccess,e=a.mediaKeys;if(!e)throw new(c("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"No mediaKeys for mediaKeySystemAccess"});a=f.$5.setMediaKeys(e).then(function(){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(new Error("OzDrmManager destroyed after setMediaKeys() called."));var a=Array.from(f.$2.values()).find(function(a){return a.getKeySystem()===b.keySystem});if(!a)throw new(c("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"Can't find OzDrmProvider for keySystem "+b.keySystem});var d=a.getServerCertificate();return d?e.setServerCertificate(d).then(function(){return{mediaKeys:e,provider:a}}):{mediaKeys:e,provider:a}});return d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,f.$3,"drm_set_media_keys",function(){},f.$24)};this.$23=function(a){var b=a.mediaKeys,e=a.provider;a=e.getInitDatas();if(a.length===0){f.$6.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(f.$5,"encrypted",function(a){f.$25(b,e,a)["catch"](function(a){f.$17(a,"encrypted")})}));return c("oz-player/shims/OzMaybeNativePromise").resolve([])}a=a.map(function(a){return f.$25(b,e,{initData:a.data,initDataType:a.type})});return d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(c("oz-player/shims/OzMaybeNativePromise").all(a),f.$3,"drm_request_license",function(){},f.$24)};this.$5=b;this.$1=e;this.$3=a.cloneContext().setType("drm_manager")}var b=a.prototype;b.hasContentProtections=function(){return this.$9};b.onError=function(a){return this.$7.onError(a)};b.$15=function(a,b){var d;a instanceof c("oz-player/utils/OzError")?d=a:a instanceof Error?(a.stack,d=new(c("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:a.message,extra:{originalError:a}})):a!=null&&typeof a.message==="string"?d=new(c("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:a.message,extra:{}}):d=new(c("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"Unknown DRM "+b+" error",extra:{}});return d};b.$16=function(a){this.$7.emitError(a)};b.$17=function(a,b){var c;c=(c=(c=this.$1)==null?void 0:c.maxStartEMEAttempts)!=null?c:-1;this.$10<c?this.$18():this.$16(this.$15(a,b))};b.addProvider=function(a){this.$2.set(a.getSchemeId(),a)};b.getProviderForSchemeId=function(a){return this.$2.get(a)};b.parseContentProtectionForRepresentation=function(a){if(!a.ContentProtection)return null;var b=[];for(var c=0;c<a.ContentProtection.length;c++){var e=a.ContentProtection[c],f=e.$.schemeIdUri;f=this.getProviderForSchemeId(f);if(f){var g=f.getInitDatas();if(g.length==0&&e["cenc:pssh"]&&e["cenc:pssh"].length===1){e=(e=e["cenc:pssh"][0]._)!=null?e:"";e=d("oz-player/drm/OzDrmUtils").base64ToUint8Array(e.replace(/-/g,"+").replace(/_/g,"/"));g=[{data:e,type:"cenc"}];f.setInitDatas(g)}b.push({provider:f,initDatas:g})}}return b};b.$18=function(){try{this.$8=!1,this.startEME(this.$11,this.$12,this.$13,this.$14)}catch(b){var a=b;this.$16(new(c("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"Restart EME failed with: "+String(a),extra:{}}))}};b.startEME=function(a,b,d,e){var f=this;if(this.$8)return;this.$8=!0;this.$10+=1;this.$11=a;this.$12=b;this.$13=d;this.$14=e;var g=new Map();this.$19(d,e,g,"audio");this.$19(a,b,g,"video");var h;g.forEach(function(a,b){!h?h=f.$20(b,a):h=h["catch"](function(){return f.$20(b,a)})});if(!h){this.$9=!1;return}this.$9=!0;var i=this.$3.getOperationLogger("drm_setup").start();h.then(this.$21).then(this.$22).then(this.$23).then(function(){return i.log()},function(a){a=a!=null?f.$15(a,"keypromisechain"):new(c("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"Unknown DRM setup error",extra:{}});f.$16(a);i.setResult("failed").setError(a).log()})};b.$19=function(a,b,c,d){var e=this;b.forEach(function(b){var f;a&&a.ContentProtection?f=e.parseContentProtectionForRepresentation(a):f=b.getCustomField("drmProtections");var g=b.getMimeCodecs();f!==void 0&&f!==null&&f.forEach(function(a){a=a.provider;var b=a.getKeySystem(),e=c.get(b);e||(e={audioCapabilities:new Map(),videoCapabilities:new Map(),distinctiveIdentifier:a.getRequireDistinctiveIdentifier(),persistentState:a.getRequirePersistentState(),sessionTypes:a.getDrmSessionTypes(),initDataTypes:a.getInitDataTypes()},c.set(b,e));d==="audio"&&!e.audioCapabilities.has(g)&&e.audioCapabilities.set(g,{contentType:g,robustness:a.getAudioRobustness()});d==="video"&&!e.videoCapabilities.has(g)&&e.videoCapabilities.set(g,{contentType:g,robustness:a.getVideoRobustness()})})})};b.destroy=function(){this.$6.release(),this.$4=!0};b.$20=function(a,b){b={audioCapabilities:Array.from(b.audioCapabilities.values()),videoCapabilities:Array.from(b.videoCapabilities.values()),distinctiveIdentifier:b.distinctiveIdentifier,persistentState:b.persistentState,sessionTypes:b.sessionTypes,initDataTypes:b.initDataTypes};return d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(window.navigator.requestMediaKeySystemAccess(a,[b]),this.$3,"drm_request_media_key_system_access",function(){},this.$24)};b.$25=function(a,b,d){var e=this,f=a.createSession();this.$6.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(f,"message",function(a){e.$26(f,b,a)["catch"](function(a){e.$17(a,"message")})}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(f,"keystatuseschange",function(a){e.$27(f)["catch"](function(a){e.$17(a,"keystatuseschange")})}));return f.generateRequest(d.initDataType,d.initData)};b.$26=function(a,b,d){var e=this;d=b.getLicenseRequestInfo(d.message.slice(0));return window.fetch(d.url,d).then(function(a){return a.arrayBuffer()}).then(function(d){d=new Uint8Array(d);d=b.parseLicenseResponse(d);d===null||d===void 0||d.byteLength===0?e.$16(new(c("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"No license for "+b.getKeySystem(),extra:{}})):a.update(d)})};b.$27=function(a){return a.expiration<Date.now()?a.close():c("oz-player/shims/OzMaybeNativePromise").resolve()};return a}();g.OzDrmManager=a}),98);
__d("oz-player/loggings/OzDevConsolePerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).debug.apply(a,["[oz]"].concat(c))}function i(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).error.apply(a,["[oz]"].concat(c))}function j(a,b){return Math.floor(a).toString().padStart(b,"0")}function k(a,b){b===void 0&&(b=null);var c=function(a){return j(a.getHours(),2)+":"+j(a.getMinutes(),2)+":"+j(a.getSeconds(),2)+" "+j(a.getMilliseconds(),3)},d=b?b-a:0;return"["+c(a)+(b?" - "+c(b):"")+" ("+d+" ms)]"}function l(a){return a==="failed"?i:h}function m(a){return a==null||a===0?null:a.toFixed(2)}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.createOperationLogger=function(a){return new n(a)};c.createLoggerProvider=function(){return new b()};return b}(c("oz-player/loggings/OzPerfLoggerProviderBase"));var n=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.log=function(){b.prototype.log.call(this);var a=this.getClientTimeBegin()||0,c=this.getClientTimeEnd();c=c!=null&&c!==0?new Date(c):null;var d=this.getResult()||"success",e=this.getType(),f=this.getInitiator(),g=this.getResource(),h=m(this.getSegmentStartTime()),i=m(this.getSegmentEndTime());l(d)("["+d+"]",this.getOperationName()+": "+k(new Date(a),c),e!=null&&e!==""?"["+e+"]":"",h!=null&&h!==""&&i!=null&&i!==""?"[segment time range: "+h+" - "+i+"]":"",f||"",g||"")};return a}(c("oz-player/loggings/OzOperationLoggerBase"));g.OzDevConsolePerfLoggerProvider=a;g.OzDevConsoleOperationLogger=n}),98);
__d("oz-player/loggings/OzMultiDestinationPerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzMultiDestinationPerfLoggerProvider1=b;return c}var c=b.prototype;c.createOperationLogger=function(a){var b=new h(a,this.$OzMultiDestinationPerfLoggerProvider1.map(function(b){return b.getOperationLogger(a)}));return b};c.createLoggerProvider=function(){return new b(this.$OzMultiDestinationPerfLoggerProvider1)};return b}(c("oz-player/loggings/OzPerfLoggerProviderBase"));var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.$OzMultiDestinationOperationLogger1=c;return a}var c=a.prototype;c.start=function(){b.prototype.start.call(this);this.$OzMultiDestinationOperationLogger1.forEach(function(a){return a.start()});return this};c.setResult=function(a){b.prototype.setResult.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setResult(a)});return this};c.setError=function(a){b.prototype.setError.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setError(a)});return this};c.setType=function(a){b.prototype.setType.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setType(a)});return this};c.setClientTimeBegin=function(a){b.prototype.setClientTimeBegin.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setClientTimeBegin(a)});return this};c.setClientTimeDuration=function(a){b.prototype.setClientTimeDuration.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setClientTimeDuration(a)});return this};c.setClientTimeEnd=function(a){b.prototype.setClientTimeEnd.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setClientTimeEnd(a)});return this};c.setSegmentCount=function(a){b.prototype.setSegmentCount.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setSegmentCount(a)});return this};c.setTimeToFirstByte=function(a){b.prototype.setTimeToFirstByte.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToFirstByte(a)});return this};c.setTimeToLastByte=function(a){b.prototype.setTimeToLastByte.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToLastByte(a)});return this};c.setTimeToRequestStart=function(a){b.prototype.setTimeToRequestStart.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToRequestStart(a)});return this};c.setTimeToRequestSent=function(a){b.prototype.setTimeToRequestSent.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToRequestSent(a)});return this};c.setReason=function(a){b.prototype.setReason.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setReason(a)});return this};c.setResource=function(a){b.prototype.setResource.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setResource(a)});return this};c.setSegmentStartTime=function(a){b.prototype.setSegmentStartTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setSegmentStartTime(a)});return this};c.setSegmentEndTime=function(a){b.prototype.setSegmentEndTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setSegmentEndTime(a)});return this};c.setAppendedBufferMs=function(a){b.prototype.setAppendedBufferMs.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setAppendedBufferMs(a)});return this};c.setLength=function(a){b.prototype.setLength.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLength(a)});return this};c.setLiveheadPosition=function(a){b.prototype.setLiveheadPosition.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLiveheadPosition(a)});return this};c.setLiveheadSeqNumHeader=function(a){b.prototype.setLiveheadSeqNumHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLiveheadSeqNumHeader(a)});return this};c.setLiveheadSeqNumMpd=function(a){b.prototype.setLiveheadSeqNumMpd.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLiveheadSeqNumMpd(a)});return this};c.setManifestType=function(a){b.prototype.setManifestType.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setManifestType(a)});return this};c.setPriorityFloat=function(a){b.prototype.setPriorityFloat.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPriorityFloat(a)});return this};c.setInitiator=function(a){b.prototype.setInitiator.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setInitiator(a)});return this};c.setPreloadTime=function(a){b.prototype.setPreloadTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPreloadTime(a)});return this};c.setConcluder=function(a){b.prototype.setConcluder.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setConcluder(a)});return this};c.setPreviousRepresentationID=function(a){b.prototype.setPreviousRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPreviousRepresentationID(a)});return this};c.setRepresentationID=function(a){b.prototype.setRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setRepresentationID(a)});return this};c.setState=function(a){b.prototype.setState.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setState(a)});return this};c.setContentLengthHeader=function(a){b.prototype.setContentLengthHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setContentLengthHeader(a)});return this};c.setEdgeHitHeader=function(a){b.prototype.setEdgeHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setEdgeHitHeader(a)});return this};c.setOriginHitHeader=function(a){b.prototype.setOriginHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setOriginHitHeader(a)});return this};c.setCode=function(a){b.prototype.setCode.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setCode(a)});return this};c.setResponseTimeMsHeader=function(a){b.prototype.setResponseTimeMsHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setResponseTimeMsHeader(a)});return this};c.setIsTemplatedManifest=function(a){b.prototype.setIsTemplatedManifest.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setIsTemplatedManifest(a)});return this};c.setIsP2pPlayback=function(a){b.prototype.setIsP2pPlayback.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setIsP2pPlayback(a)});return this};c.setOneObserved=function(a){b.prototype.setOneObserved.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setOneObserved(a)});return this};c.setOneReqWave=function(a){b.prototype.setOneReqWave.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setOneReqWave(a)});return this};c.setOneResWave=function(a){b.prototype.setOneResWave.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setOneResWave(a)});return this};c.setAppendTarget=function(a){b.prototype.setAppendTarget.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setAppendTarget(a)});return this};c.setIsRingBufferSample=function(a){b.prototype.setIsRingBufferSample.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setIsRingBufferSample(a)});return this};c.setIsOnline=function(a){b.prototype.setIsOnline.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setIsOnline(a)});return this};c.setProxyStatusHeader=function(a){b.prototype.setProxyStatusHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setProxyStatusHeader(a)});return this};c.setPlaybackFbmsParam=function(a){b.prototype.setPlaybackFbmsParam.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPlaybackFbmsParam(a)});return this};c.setUserInfo=function(a){b.prototype.setUserInfo.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setUserInfo(a)});return this};c.setDynamicStatusHeader=function(a){b.prototype.setDynamicStatusHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setDynamicStatusHeader(a)});return this};c.log=function(){b.prototype.log.call(this),this.$OzMultiDestinationOperationLogger1.forEach(function(a){return a.log()})};return a}(c("oz-player/loggings/OzOperationLoggerBase"));g.OzMultiDestinationPerfLoggerProvider=a}),98);
__d("oz-player/loggings/OzOperationLoggerObserver",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new(c("oz-player/shims/OzSubscriptionsHandler"))()}var b=a.prototype;b.observe=function(a,b){var c;a=a.map(function(a){var c=a.setOperationLoggedListener(function(a){var c=a.getClientTimeBegin()||0,d=a.getClientTimeEnd()||0;b.getOperationLogger(a.getOperationName()).setClientTimeBegin(c).setClientTimeDuration(d-c).setClientTimeEnd(d).setLength(a.getLength()).setResult(a.getResult()||"success").setInitiator(a.getInitiator()).setType(a.getType()).log()});a.activate();return c});(c=this.$1).addSubscriptions.apply(c,a)};b.destroy=function(){this.$1.release()};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzDynamicVideoLibrary",["oz-player/shims/OzNetworkDiagnostics"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$4=null;this.$5={};a=a.config;this.$3=a}var b=a.prototype;b.getLastSegmentStartPTS=function(){return this.$1};b.updateWithResponse=function(a,b,d){if(!d.headers||d.status!=200)return;this.$1=c("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(d.headers);this.$2=c("oz-player/shims/OzNetworkDiagnostics").getDvlStatus(d.headers);(this.$2!=null&&this.$3.getBool("dvl_update_interval_reset_on_err")||this.$2==="200")&&(this.$4=b)};b.shouldRequestDynamicInfo=function(a){if(a!=="video")return!1;this.$6(a);a=this.$7(a);return a!=null&&a<=this.$3.getNumber("dvl_initial_segment_ignore_count")?!1:this.$3.getNumber("dvl_update_interval_ms")==0||this.$4==null||this.$4+this.$3.getNumber("dvl_update_interval_ms")<=Date.now()};b.$6=function(a){this.$5[a]==null&&(this.$5[a]={segmentCount:0});return this.$5[a].segmentCount=this.$5[a].segmentCount!=null?this.$5[a].segmentCount+1:0};b.$7=function(a){return this.$5[a].segmentCount};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzRepresentationBase",["oz-player/shims/ozvariant","oz-player/utils/OzError"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h){this.$1=a,this.$6=b,this.$2=c,this.$3=d,this.$4=e,this.$5=f,this.$7=g,this.$8=h}var b=a.prototype;b.getID=function(){return this.$6};b.getBandwidth=function(){return this.$5};b.getMimeCodecs=function(){return this.$2};b.getQualityLabel=function(){return this.$6};b.getInitSegment=function(){return this.$3};b.getCustomFieldFirstSegment=function(){return this.$7};b.getCustomField=function(a){if(this.$8==null||!this.$8[a])throw new(c("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Custom field "+a+" is not specified by caller",extra:{code:"OZ_RP-8"}});a=this.$8[a];try{return a(this.$1)}catch(a){return null}};b.updateWith=function(b){b instanceof a||c("oz-player/shims/ozvariant")(0,229),this.$4.updateWith(b.$4)};b.getSegmentByTime=function(a){return this.$4.getSegmentByTime(a)};b.getSegment=function(a){return this.$4.getSegment(a)};b.getPredictedSegmentAfter=function(a){return this.$4.getPredictedSegmentAfter(a)};b.canPredict=function(){return this.$4.canPredict()};b.canApproximateId=function(){return this.$4.canApproximateId()};b.getSegmentAfter=function(a){return this.$4.getSegmentAfter(a)};b.isEndingSegment=function(a){return this.$4.isEndingSegment(a)};b.addUpdateListener=function(a){return this.$4.addUpdateListener(a)};b.getTimeRanges=function(){return this.$4.getTimeRanges()};b.blockTimeRange=function(a){this.$4.blockTimeRange(a)};b.getEndingSegment=function(){return this.$4.getEndingSegment()};b.forceParseIfNotParsed=function(){return this.$4.forceParseIfNotParsed()};b.getMaxGopSec=function(){return this.$4.getMaxGopSec()};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzVideoRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k){c=a.call(this,b,c,d,e,f,g,h,i)||this;c.$OzVideoRepresentation5=null;c.$OzVideoRepresentation1=j;c.$OzVideoRepresentation2=k;c.$OzVideoRepresentation4=i;c.$OzVideoRepresentation3=b;return c}var c=b.prototype;c.getWidth=function(){return this.$OzVideoRepresentation1};c.getHeight=function(){return this.$OzVideoRepresentation2};c.getQualityLabel=function(){if(this.$OzVideoRepresentation5!==null&&this.$OzVideoRepresentation5!==void 0)return this.$OzVideoRepresentation5;var a=this.$OzVideoRepresentation4?this.$OzVideoRepresentation4.qualityLabel:null;a&&(this.$OzVideoRepresentation5=a(this.$OzVideoRepresentation3));(this.$OzVideoRepresentation5==null||this.$OzVideoRepresentation5=="")&&(this.$OzVideoRepresentation5=this.getHeight().toString()+"p");return this.$OzVideoRepresentation5||""};return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/media_source/OzMediaErrorProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.hasError=function(){return this.$1.error!==null};b.getMediaErrorName=function(){var a=this.$1.error;return a&&a.message?this.$2(a.message):null};b.getErrorCode=function(){var a=this.$1.error;return a&&a.code?a.code:null};b.getVideoNode=function(){return this.$1};b.$2=function(a){a=a.replace(/([0-9]{2,})/g,function(a){var b="";while(b.length<a.length)b+="#";return b});return a};return a}();f["default"]=a}),66);
__d("oz-player/utils/OzSourceBufferUtil",["oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=0;for(var c=0;c<a.buffered.length;c++)b+=a.buffered.end(c)-a.buffered.start(c);return b}function b(a){return a.buffered.length==0?0:a.buffered.start(0)}function c(a){var b=null;try{b=a.buffered}catch(a){return 0}return b.length==0?0:b.end(b.length-1)}function e(a){var b=[];for(var c=0;c<a.length;c++)b.push({startTime:a.start(c),endTime:a.end(c)});return b}function f(a,b,c){c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,b,a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));b=c>=0?parseFloat((a[c].endTime-b).toFixed(3)):0;a=c>=0?a.length-1-c:-1;return{bufferAheadSec:b,bufferedOffset:a}}function h(a,b,c){var e=a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,b,e);e=parseFloat(e.reduce(function(a,c){var e=c.rangeEnd;return e===null||e===void 0?a:a+(d("oz-player/utils/OzNumericalRangeUtil").isWithin(b,c)?e-b:d("oz-player/utils/OzNumericalRangeUtil").isLargerThan(c.rangeStart,b)?e-c.rangeStart:0)},0).toFixed(3));a=c>=0?a.length-1-c:-1;return{bufferAheadSec:e,bufferedOffset:a}}g.getTotalBufferedTime=a;g.getStartBufferedTime=b;g.getEndBufferedTime=c;g.convertToBufferedTimeRangeArray=e;g.getBufferAheadInBufferedRanges=f;g.getTotalBufferAheadOfPosition=h}),98);
__d("oz-player/media_source/SourceBufferManagerUtils",["oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){if(a.getBool("generate_mos_segment_buffer_diff")){var e=d("oz-player/utils/OzNumericalRangeUtil").convertFromTimeRanges(c.getBufferedRanges());a=function(){var a=d("oz-player/utils/OzNumericalRangeUtil").firstAddedInSortedRanges(e,d("oz-player/utils/OzNumericalRangeUtil").convertFromTimeRanges(c.getBufferedRanges()));return{startTime:(a==null?void 0:a.rangeStart)||0,endTime:(a==null?void 0:a.rangeEnd)||0}};return a}else{var f=d("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(b);a=function(){var a=d("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(b);return{startTime:f,endTime:a}};return a}}g.startMeasuringAppendedBuffer=a}),98);
__d("oz-player/shims/www/ozClearTimeoutWWW",["clearTimeout"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("clearTimeout")}),98);
__d("oz-player/shims/ozClearTimeout",["oz-player/shims/www/ozClearTimeoutWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozClearTimeoutWWW")}),98);
__d("oz-player/states/OzObservedSourceBufferState",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$2=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$3=[];this.$5=new Set();this.$7=function(){if(d.$4.getBool("stable_buffered_timeranges_in_observedsourcebufferstate")){var a;try{a=d.$1.buffered}catch(a){if(a.name==="InvalidStateError"){d.$3=[];return}else throw a}var b=[];for(var c=0;c<a.length;c++)b.push({startTime:a.start(c),endTime:a.end(c)});d.$3=b}else{a=[];for(var c=0;c<d.$1.buffered.length;c++)a.push({startTime:d.$1.buffered.start(c),endTime:d.$1.buffered.end(c)});d.$3=a}};this.$1=a;this.$4=b;this.$6()}var b=a.prototype;b.$6=function(){var a=this;this.$2.release();this.$2=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$2.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updateend",function(){a.$7();for(var b=a.$5.values(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e()}}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",this.$7))};b.setSourceBuffer=function(a){this.$1=a,this.$6(),this.$7()};b.getBufferedRanges=function(){return this.$3};b.addEventListener=function(a,b){var c=this;this.$5.add(b);return{remove:function(){c.$5["delete"](b)}}};b.destroy=function(){this.$5.clear(),this.$2.release(),this.$2.engage()};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzCustomErrorCode",[],(function(a,b,c,d,e,f){"use strict";a={APPEND_BUFFER_UNKNOWN_ERROR:"21539",APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:"21540",APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:"21541",APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:"21542",SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR:"21543",SOURCE_BUFFER_MANAGER_CREATE_ERROR:"21544",SETUP_STREAMS_PROMISE_REJECTION:"21545",APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:"21546",APPEND_BUFFER_INVALID_STATE_ERROR:"21547",SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR:"21548",NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR:"21549",STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR:"21550",SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED:"21551"};b=a;f["default"]=b}),66);
__d("oz-player/media_source/SourceBufferManager",["oz-player/loggings/OzLoggingUtils","oz-player/media_source/SourceBufferManagerUtils","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzStreams","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/states/OzObservedSourceBufferState","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzError","oz-player/utils/OzSourceBufferUtil","oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g){var h=this;g===void 0&&(g=null);this.$3=null;this.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$7=!1;this.$8=[];this.$12=!1;this.$13=!1;this.$15=0;this.$27=function(){if(h.$10.hasError()){h.$13=!1;h.$12=!1;var a=h.$10.getMediaErrorName();a=a!==null&&a!==void 0?a:"An unknown source buffer error occurred.";var b=h.$10.getErrorCode();b=b!==null&&b!==void 0?String(b):c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR;a=new(c("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:a,extra:{code:b}});if(h.$11.getBool("fix_operation_deferred_promise_lifecycle")){b=h.$3;b&&(h.$3=null,b.reject(a))}else h.$3&&h.$3.reject(a),h.$3=null;h.cancelOperationAndCleanQueue()}else h.$13||(h.$13=!0,h.$4.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(h.$10.getVideoNode(),"error",h.$27)))};this.$18=function(){var a=h.$1;if(a!=null){a.getOperationLogger("source_buffer_updateend").setError((a=h.$10.getMediaErrorName())!=null?a:void 0).setCode(h.$10.getErrorCode()).setResult(h.$12?"failed":"success").log()}a=h.$3;a&&(h.$12?h.$27():h.$11.getBool("fix_operation_deferred_promise_lifecycle")?(h.$3=null,a.resolve()):(a.resolve(),h.$3&&(h.$3=null)))};this.$19=function(){var a=h.$1;if(a!=null){a.getOperationLogger("source_buffer_error").setError((a=h.$10.getMediaErrorName())!=null?a:void 0).setCode(h.$10.getErrorCode()).setResult("failed").log()}h.$12=!0};this.$1=g;this.$2=a;this.$11=b;this.$17();this.$9=new(c("oz-player/states/OzObservedSourceBufferState"))(this.$2,this.$11);this.$10=d;this.$14=e;this.$16=f}var b=a.prototype;b.$17=function(){this.$4.release(),this.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))(),this.$4.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"updateend",this.$18),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"error",this.$19))};b.setSourceBuffer=function(a){var b=this;return this.cancelOperationAndCleanQueue()["catch"](function(){}).then(function(){b.$2=a,b.$17(),b.$9.setSourceBuffer(a)})};b.queueData=function(a,b,d,e){b===void 0&&(b=null);d===void 0&&(d=0);e===void 0&&(e=null);var f=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$8.push({data:a,deferred:f,loggerProvider:b,appendTarget:d,onDataAppend:e});a=f.getPromise();this.$7||this.$20();return a};b.cancelOperationAndCleanQueue=function(a){a===void 0&&(a=null);a&&a.cloneContext().getOperationLogger("source_buffer_cancel_and_clean").log();var b=this.$21("cancel and clean");this.$8.forEach(function(a){a=a.deferred;a.reject(b)});this.$8=[];try{this.$14(this.$2)&&(this.$10.hasError()||this.$2.abort())}catch(b){var d=b;a&&a.cloneContext().getOperationLogger("cancel_operation_abort_failed").setError(d).setReason(this.$16?this.$16():null).log();if(this.$11.getBool("throw_cancel_operation_abort_failed"))throw d}a=c("oz-player/shims/OzMaybeNativePromise").resolve();d=this.$3;d&&(this.$11.getBool("fix_operation_deferred_promise_lifecycle")&&(this.$3=null),d.reject(b),a=d.getPromise()["catch"](function(){}));this.$5&&(this.$5.reject(b),this.$5=null);return a};b.getSourceBufferState=function(){return this.$9};b.clearRange=function(a,b){if(this.$11.getBool("clear_sbm_buffer_on_byte_threshold")){var c=this.getTotalTimeInBuffer(),d=this.getTotalTimeInBufferForRange(a,b);this.$15*=c>0?1-d/c:0}d=this.$11.getBool("throw_error_on_clear_buffer_on_seek_failed")?Math.max(a,0):a;b>0&&b>d&&this.$2.remove(d,b)};b.$22=function(a,b){a=this.$11.getBool("throw_error_on_clear_buffer_on_seek_failed")?Math.max(a,0):a;if(b>0&&b>a){var d=this.$23();this.clearRange(a,b);return d}return c("oz-player/shims/OzMaybeNativePromise").resolve()};b.clearRangeWithWait=function(a,b){var c=this,d=this.cancelOperationAndCleanQueue();d=d.then(function(){return c.$22(a,b)});return d};b.clear=function(){if(this.$2.buffered.length>0){var a=d("oz-player/utils/OzSourceBufferUtil").getStartBufferedTime(this.$2),b=d("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(this.$2);if(b>0)return this.$22(a,b)}return this.cancelOperationAndCleanQueue()};b.$23=function(a){if(this.$11.getBool("fix_operation_deferred_promise_lifecycle")){var b=null;if(this.$3)b=this.$3.getPromise(),a&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,a,"wait_for_source_buffer");else if(this.$2.updating){var e=this.$3=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));b=e.getPromise();a&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,a,"wait_for_source_buffer")}else return c("oz-player/shims/OzMaybeNativePromise").resolve()}e=this.$3=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));b=e.getPromise();a&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,a,"wait_for_source_buffer");return b};b.$24=function(a,b,e,f){var g=this;if(this.$3!==null)return c("oz-player/shims/OzMaybeNativePromise").reject(this.$25("cannot have concurrent appends"));var h=function h(){if(g.$11.getBool("sbm_recursively_waits_for_update_end")&&g.$2.updating)return g.$23(b).then(h)["catch"](function(a){if(g.$11.getBool("enable_appends_on_wait_update_end_failure"))return h();throw a});if(g.$11.getBool("fix_operation_deferred_promise_lifecycle")&&g.$3!==null)return c("oz-player/shims/OzMaybeNativePromise").reject(g.$25("cannot have concurrent appends (inner)"));var i=g.$3=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),j=!1;try{j=g.$2.updating,g.$2.appendBuffer(a)}catch(a){var k=a,l=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_UNKNOWN_ERROR,m=k.name,n=k.message;m==="QuotaExceededError"?l=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:g.$10.hasError()?l=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:j?l=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:m==="InvalidStateError"&&typeof n==="string"&&/SourceBuffer has been removed/.test(n)?l=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:m==="InvalidStateError"&&(l=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR);j=new(c("oz-player/utils/OzError"))({type:m==="QuotaExceededError"&&g.$11.getBool("append_retry_quota_exceeded_error")?"OZ_SOURCE_BUFFER_QUOTA_EXCEEDED":"OZ_SOURCE_BUFFER",description:String(n),extra:{originalError:k,code:l}});g.$3=null;i.reject(j)}m=i.getPromise();b&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(m,b,"append",function(b){var c;b.setLength(a.byteLength);c=(c=e==null?void 0:e.appendTarget)!=null?c:null;b.setAppendTarget(c)});return m.then(function(){f&&f()})};if(!this.$11.getBool("sbm_waits_for_update_end"))return h();if(!this.$11.getBool("sbm_recursively_waits_for_update_end")&&this.$2.updating)return this.$23(b).then(h)["catch"](function(a){if(g.$11.getBool("enable_appends_on_wait_update_end_failure"))return h();throw a});this.$15+=a.byteLength;return h()};b.$20=function(){var a=this;if(this.$7)return c("oz-player/shims/OzMaybeNativePromise").reject(this.$25("Another unit of queued data is being appended."));var b=this.$8.shift();if(!b){this.$7=!1;return c("oz-player/shims/OzMaybeNativePromise").resolve()}var e=b.data,f=b.deferred,g=b.loggerProvider,h=b.appendTarget;b=b.onDataAppend;this.$7=!0;e=e instanceof d("oz-player/shims/OzStreams").OzReadableStream?this.$26(e,g,h,b):this.$24(e,g,{appendTarget:h},b);var i=d("oz-player/media_source/SourceBufferManagerUtils").startMeasuringAppendedBuffer(this.$11,this.$2,this.$9);return e["catch"](function(a){f.reject(a)}).then(function(){var b=i(),c=b.startTime;b=b.endTime;f.resolve({startTime_UNSAFE:c,endTime_UNSAFE:b,appendedSec:b-c});a.$7=!1;a.$20()})};b.$26=function(a,b,d,e){var f=this;this.$11.getBool("sbm_abort_on_append_new_readable_stream")&&this.$2.abort();var g=[],h=0,i=a.getReader();a=function a(){var j=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));f.$5=j;var k=null;f.$11.getNumber("sbm_read_timeout_ms")>0&&(k=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){var a=new(c("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:"ReadableStreamReader.read() timed out.",extra:{}});j.reject(a);f.$5=null;f.$6=k=null},f.$11.getNumber("sbm_read_timeout_ms")));i.read().then(function(a){j.resolve(a),f.$5=null,k&&(c("oz-player/shims/ozClearTimeout")(k),f.$6=k=null)})["catch"](function(a){j.reject(a),f.$5=null,k&&(c("oz-player/shims/ozClearTimeout")(k),f.$6=k=null)});return j.getPromise().then(function(i){if(i.done){var j=c("oz-player/utils/ozConcatUint8Arrays")(g);j=j.buffer;g.length=0;h=0;j=j;return j.byteLength>0?f.$24(j,b,{appendTarget:d},e):c("oz-player/shims/OzMaybeNativePromise").resolve()}j=i.value;i=null;var k=j;if(d>0){j=j instanceof Uint8Array?j:new Uint8Array(j);g.push(j);h+=j.byteLength;if(h>=d){j=c("oz-player/utils/ozConcatUint8Arrays")(g);j=j.buffer;g.length=0;h=0;k=j}}k&&k.byteLength>=d&&(i=k);return i?f.$24(i,b,{appendTarget:d},e).then(function(){return a()}):a()},function(a){if(f.$11.getBool("sbm_wait_for_abort_on_reject")){var b=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),d=f.$3?f.$3.getPromise():c("oz-player/shims/OzMaybeNativePromise").resolve();d["catch"](function(){}).then(function(){var c=f.$23();f.$2.abort();c.then(function(){b.reject(a)})["catch"](function(){b.reject(a)})});return b.getPromise()}else{f.$2.abort();return c("oz-player/shims/OzMaybeNativePromise").reject(a)}})};return a()};b.$25=function(a){a=new Error(a);a.name="invariant_violation";return a};b.$21=function(a){a=new Error("operation is cancelled: "+a);a.name="cancelled";return a};b.destroy=function(){var a=this,b=this.$1;b&&b.cloneContext().getOperationLogger("source_buffer_destroy").log();this.$6&&c("oz-player/shims/ozClearTimeout")(this.$6);this.$6=null;b=this.$3;if(b)if(this.$11.getBool("fix_operation_deferred_promise_lifecycle")){var d=function(){a.$3=null,a.$4.release(),a.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))()};this.$13?b.getPromise().then(function(){d()},function(){d()})["catch"](function(){}):(d(),b.reject(this.$21("destroyed")))}else!this.$13?(b.reject(this.$21("destroyed")),this.$3=null,this.$4.release(),this.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))()):b.getPromise()["catch"](function(){a.$3=null,a.$4.release(),a.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))()});this.$9.destroy()};b.getTotalTimeInBufferForRange=function(a,b){var c=this.$2.buffered,d=0;for(var e=0;e<c.length;++e)a<c.end(e)&&b>=c.start(e)&&(d+=Math.min(c.end(e),b)-Math.max(c.start(e),a));return d};b.getTotalTimeInBuffer=function(){var a=this.$2.buffered,b=0;for(var c=0;c<a.length;++c)b+=a.end(c)-a.start(c);return b};b.getTotalAppendedBytes=function(){return this.$15};b.getDebug=function(){return{SourceBuffer:this.$2}};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzMimeUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[0]||"").trim()}f.getMimeType=a}),66);
__d("oz-player/utils/ozGetErrorNameFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:}return"MEDIA_ERR_UNKNOWN"}f["default"]=a}),66);
__d("oz-player/media_source/MediaSourceManager",["oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/media_source/OzMediaErrorProvider","oz-player/media_source/SourceBufferManager","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzMimeUtil","oz-player/utils/ozGetErrorNameFromMediaErrorCode"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e){var f=this;e===void 0&&(e=new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]));this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$6=[];this.$7=new Map();this.$8=[];this.$10=!1;this.$12=!1;this.$13=!1;this.$14=!1;this.$15=!1;this.$17=null;this.$18=null;this.$19=new(c("oz-player/utils/OzErrorEmitter"))();this.$24=function(){f.$28()||(f.$10=!1);if(!f.$29())return;var a=f.$8.shift();a&&(a(f.$2),f.$10=!0)};this.$5=e;this.$11=b;this.$1=a;this.$9=new(c("oz-player/media_source/OzMediaErrorProvider"))(this.$1);this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",function(){var a;f.$5.getOperationLogger("media_element_error").setError((a=f.$9.getMediaErrorName())!=null?a:void 0).setCode(f.$9.getErrorCode()).setResult("failed").log();f.$8=[];f.$6=[];f.$4.release();f.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))();f.$15=f.$15||f.$14||f.$13;if(f.$18!=null){a=f.$1.error;var b=new Error(a==null?void 0:a.message);b.name=c("oz-player/utils/ozGetErrorNameFromMediaErrorCode")((a==null?void 0:a.code)||0);f.$19.emitError(b);return}f.$18=f.$1.currentTime;f.$17==null&&(f.$17=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){f.$17=null,f.$11.getBool("retry_video_element_error")&&f.$20()},0))}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"play",function(){f.$14=!0}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",function(){f.$14=!1,f.$15=!1,f.$18=null,f.$13=!0}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",function(){f.$14=!1,f.$13=!1,f.$15=!!f.$1.error}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"ended",function(){f.$14=!1,f.$13=!1}));this.$2=new MediaSource();this.$1.src=window.URL.createObjectURL(this.$2);d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(this.$21(),this.$5,"media_source_open")}var b=a.prototype;b.$20=function(){var a=this,b=[];this.$7.forEach(function(a){b.push(a.cancelOperationAndCleanQueue())});var d=c("oz-player/shims/OzMaybeNativePromise").all(b);d=d.then(function(){if(a.$11.getBool("abort_clear_video_node_on_detach")&&a.$12)return;var b=a.$1.src;a.$11.getBool("create_new_media_source_on_node_reset")&&(a.$2=new MediaSource());a.$1.src=window.URL.createObjectURL(a.$2);window.URL.revokeObjectURL(b);return a.$21().then(function(){var b=[];a.$7.forEach(function(d,e){var f=a.$22(e),c=d.setSourceBuffer(f).then(function(){a.$23(f,d,e)});b.push(c)});return c("oz-player/shims/OzMaybeNativePromise").all(b)})});d.then(function(){if(a.$11.getBool("abort_clear_video_node_on_detach")&&a.$12)return;a.$16&&a.$16();a.$18!=null&&(a.$1.currentTime=a.$18);if(a.$15)return a.$1.play()["catch"](function(){})})["catch"](function(b){if(a.$11.getBool("abort_clear_video_node_on_detach")&&a.$12)return;a.$19.emitError(b)})};b.$21=function(){var a=this;if(this.$2.readyState==="open")return c("oz-player/shims/OzMaybeNativePromise").resolve();var b=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){b.resolve(),a.$24()}));return b.getPromise()};b.$22=function(a,b){var d=this;b===void 0&&(b=!1);var e;try{e=this.$2.addSourceBuffer(a);if(this.$11.getBool("stub_safari_source_buffer_abort"))try{var f=e.abort,g=function(){d.$13&&f.call(e)};e.abort=function(){g()}}catch(a){}}catch(b){a=new(c("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): '+(b.message||String(b)),extra:{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}});throw a}b&&!isNaN(this.$2.duration)&&(e.appendWindowEnd=this.$2.duration);this.$6.push(e);return e};b.$23=function(a,b,e){var f=this,g=d("oz-player/utils/OzMimeUtil").getMimeType(e);this.$4.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(a,"updateend",function(){var a=b.getTotalAppendedBytes(),c=f.$25(g);if(c>0&&a>=c&&f.$11.getBool("clear_sbm_buffer_on_byte_threshold")){a=Math.max(0,f.$1.currentTime-f.$26());a>0&&b.clearRangeWithWait(0,a)}f.$24()}))};b.createSourceBufferManager=function(a,b){var e=this;b===void 0&&(b=!1);return this.$21().then(function(){var f=e.$22(a,b),g=new(c("oz-player/media_source/SourceBufferManager"))(f,e.$11,e.$9,function(a){return e.$2.readyState!=="closed"&&(e.$11.getBool("should_check_that_source_buffer_attached")?e.$27(a):!0)},function(){return e.$2.readyState},e.$5.cloneContext().setType(d("oz-player/utils/OzMimeUtil").getMimeType(a)));e.$23(f,g,a);e.$7.set(a,g);return g})["catch"](function(a){if(a instanceof c("oz-player/utils/OzError"))throw a;else{a=new(c("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:"Failed to create SBM: "+(a.message||String(a)),extra:{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CREATE_ERROR.toString()}});throw a}})};b.setOnClearVideoNodeError=function(a){this.$16=a};b.getMediaSource=function(){return this.$2};b.notifyEndOfStream=function(a){var b=this,d=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){d.resolve()}));this.$8.push(function(c){b.$11.getBool("check_mediasource_readystate_before_end_of_stream")?c.readyState==="open"&&(a(b.$5.getOperationLogger("end_of_stream")).log(),c.endOfStream()):(a(b.$5.getOperationLogger("end_of_stream")).log(),c.endOfStream())});this.$24();return d.getPromise()};b.updateDuration=function(a){this.$8.push(function(b){b.duration=a}),this.$24()};b.detach=function(){this.$17&&(c("oz-player/shims/ozClearTimeout")(this.$17),this.$17=null);var a=this.$1.src;this.$1.removeAttribute("src");for(var b=0;b<this.$2.sourceBuffers.length;b++){var d=this.$2.sourceBuffers[b];this.$2.removeSourceBuffer(d)}this.$11.getBool("revoke_object_url_on_detach")&&window.URL.revokeObjectURL(a);this.$3.release();this.$3.engage();this.$4.release();this.$4.engage();this.$8=[];this.$10=!1;this.$12=!0};b.$29=function(){return!this.$28()&&this.$2.readyState==="open"&&!this.$10&&!this.$12};b.$28=function(){return this.$6.some(function(a){return a.updating})};b.$26=function(){return this.$11.getNumber("min_buffer_behind_playhead")};b.$25=function(a){var b={audio:this.$11.getNumber("audio_byte_threshold_to_clear_buffer"),video:this.$11.getNumber("video_byte_threshold_to_clear_buffer")};return(b=b[a])!=null?b:0};b.$27=function(a){for(var b=0;b<this.$2.sourceBuffers.length;b++){var c=this.$2.sourceBuffers[b];if(c===a)return!0}return!1};b.onError=function(a){return this.$19.onError(a)};return a}();g["default"]=a}),98);
__d("oz-player/media_source/OzMediaSeekableRangeManager",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$5=function(){var a=d.$2;if(!a)return;a=a.getTimeRanges();if(!a.length)return;a=a[a.length-1];var b=d.$1.getMediaSource();d.$4.getBool("update_media_source_duration")&&(b.duration===Infinity||b.duration<a.endTime||isNaN(b.duration))&&d.$1.updateDuration(a.endTime)};this.$1=a;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=b;this.$5()}var b=a.prototype;b.setTimeRangeProvider=function(a){this.$3.release(),this.$3.engage(),this.$3.addSubscriptions(a.addUpdateListener(this.$5)),this.$2=a};b.listenToMediaStreamInitAppended=function(a){var b=this;return a.addListener("initAppended",function(){if(b.$4.getBool("update_duration_when_init_appended")){var a=b.$1.getMediaSource();(a.duration===Infinity||isNaN(a.duration))&&b.$5()}})};b.destroy=function(){this.$3.release()};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzClientClock",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=null}var b=a.prototype;b.updateOffsetFromHeaderResponse=function(a){a=a.get("x-fb-dynamic-client-wallclock-offset-ms");if(a!==null){a=parseInt(a,10);isNaN(a)||(this.$1=a)}};b.now=function(){var a;return Date.now()+((a=this.$1)!=null?a:0)};b.getClientClockOffsetMs=function(){return this.$1};return a}();b=new a();f["default"]=b}),66);
__d("oz-player/networks/OzCreateErrorStream",["oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(d("oz-player/shims/OzStreams").OzReadableStream)({pull:function(b){b.error(a)}})}g["default"]=a}),98);
__d("oz-player/shims/OzFetchAPI",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){return window.fetch(a,b)};f.fetch=a}),66);
__d("oz-player/networks/OzHTTPHeaders",["oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";d=function(){function a(){this.$1=new Map()}var b=a.prototype;b.append=function(a,b){a=a.toLowerCase();var c=this.$1.get(a);c!=null?this.$1.set(a,c+", "+b):this.$1.set(a,b)};b.get=function(a){a=a.toLowerCase();a=this.$1.get(a);return(a=a)!=null?a:null};b.entries=function(){return this.$1.entries()};b.has=function(a){return this.get(a)!==null};return a}();e=a.Headers;f=e&&e.prototype;var h=e&&f&&typeof f.append==="function"&&typeof f.entries==="function"&&typeof f.get==="function"&&typeof f.has==="function"?e:d;function b(a){if(a==null)return null;if(typeof a==="object"&&typeof a.append==="function"&&typeof a.get==="function"&&typeof a.has==="function")if(typeof a.entries==="function")return a;else if(typeof a.forEach==="function"){var b=new h();a.forEach(function(a,c){b.append(c,a)});return b}c("oz-player/shims/ozvariant")(!1,"Malformed Headers object: %s %s",typeof a,String(a));return null}g.OzHTTPHeaders=h;g.maybeConvertHeadersToOzHTTPHeaders=b}),98);
__d("oz-player/utils/arrayBuffer2OzReadableStream",["oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(d("oz-player/shims/OzStreams").OzReadableStream)({start:function(b){var c=new Uint8Array(a);b.enqueue(c);b.close()}})}g["default"]=a}),98);
__d("oz-player/utils/maybeConvertReadableStreamToOzReadableStream",["oz-player/shims/OzStreams","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(!d("oz-player/shims/OzStreams").OzReadableStreamIsPolyfilled)return a;var c=a.getReader();return new(d("oz-player/shims/OzStreams").OzReadableStream)({start:function(a){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=3;return b("regeneratorRuntime").awrap(c.read());case 3:d=e.sent;if(!d.done){e.next=6;break}return e.abrupt("break",9);case 6:a.enqueue(d.value);e.next=0;break;case 9:a.close();case 10:case"end":return e.stop()}},null,this)}})}g["default"]=a}),98);
__d("oz-player/utils/processFetchResponse",["oz-player/networks/OzHTTPHeaders","oz-player/shims/OzMaybeNativePromise","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/maybeConvertReadableStreamToOzReadableStream"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.body,e=a.ok,f=a.status,g=a.headers;return b!=null?{ok:e,status:f,headers:d("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(g),body:c("oz-player/utils/maybeConvertReadableStreamToOzReadableStream")(b),arrayBuffer:function(){return a.arrayBuffer()}}:a.arrayBuffer().then(function(a){return{ok:e,status:f,headers:d("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(g),body:c("oz-player/utils/arrayBuffer2OzReadableStream")(a),arrayBuffer:function(){return c("oz-player/shims/OzMaybeNativePromise").resolve(a)}}})}g["default"]=a}),98);
__d("oz-player/networks/OzFetchRequestImplementation",["oz-player/shims/OzFetchAPI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/processFetchResponse"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){if(!d("oz-player/shims/OzFetchAPI").fetch)throw new Error("fetch api is missing");var g=null;e=e?e.networkTimeoutMs:null;if("AbortController"in window&&e!=null&&e!=0){var h=new AbortController();g=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){return h.abort()},e);e=babelHelpers["extends"]({},b,{signal:h.signal})}else e=babelHelpers["extends"]({},b);b=d("oz-player/shims/OzFetchAPI").fetch(a,e).then(function(a){c("oz-player/shims/ozClearTimeout")(g);var b=a.ok,d=a.status,e=a.headers;return f!=null&&f.getBool("get_fetch_body_text_when_response_not_ok")&&!b&&typeof a.text==="function"?a.text().then(function(c){c={ok:b,status:d,headers:e,body:c,arrayBuffer:function(){return a.arrayBuffer()}};return c}):c("oz-player/utils/processFetchResponse")(a)});return b}b=a;e=b;g["default"]=e}),98);
__d("oz-player/networks/OzFetchWithCache",["oz-player/networks/OzFetchRequestImplementation","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzError","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/processFetchResponse"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f,g,h,i){e===void 0&&(e=null);g===void 0&&(g=null);i===void 0&&(i="DISABLE_CACHE");var j=e!=null?e:c("oz-player/networks/OzFetchRequestImplementation");e=a.getBool("use_segment_request_cache")&&i==="ENABLE_CACHE"?h.get(b):null;g=g?g.getCacheValue(b):null;e=e!=null?e:g;g=!1;e?(i==="ENABLE_CACHE"&&h.set(b,e),g=!0,i=e.then(function(b){if(b.initiator==="FETCH"){var d=b.response,e=d.ok,f=d.status,g=d.headers;return a.getBool("get_fetch_body_text_when_response_not_ok")&&!e&&typeof b.response.text==="function"?b.response.text().then(function(a){return{ok:!1,status:f,headers:g,body:a,arrayBuffer:function(){return b.response.arrayBuffer()}}}):c("oz-player/utils/processFetchResponse")(b.response)}else if(b.initiator==="XHR_REQUEST"){d=c("oz-player/utils/arrayBuffer2OzReadableStream")(b.response);return{body:d,status:200,headers:null,ok:!0,arrayBuffer:function(){return c("oz-player/shims/OzMaybeNativePromise").resolve(b.response)}}}else throw new(c("oz-player/utils/OzError"))({type:"OZ_UNEXPECTED_CACHE_INITIATOR",description:"Unable to handle request initiator: "+b.initiator})})["catch"](function(c){if(a.getBool("retry_fetch_on_prefetch_error"))return j(b,d);else throw new TypeError()})):i=j(b,d,f,a);return{promise:i,retrievedFromCache:g}}g["default"]=a}),98);
__d("oz-player/networks/createNetworkError",["oz-player/utils/OzError"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f){return new(c("oz-player/utils/OzError"))({type:"OZ_NETWORK",description:f,extra:{originalError:a,code:b.toString(),headers:d,url:e}})}g["default"]=a}),98);
__d("oz-player/networks/OzNetworkRequestStream",["oz-player/networks/OzClientClock","oz-player/networks/OzCreateErrorStream","oz-player/networks/OzFetchWithCache","oz-player/networks/OzTransformStream","oz-player/networks/createNetworkError","oz-player/shims/ozvariant","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzError"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h,i,j,k){e===void 0&&(e=null),f===void 0&&(f=null),g===void 0&&(g=null),i===void 0&&(i="DISABLE_CACHE"),j===void 0&&(j=null),this.$6=!1,this.$1=b,this.$2=c,this.$3=d,this.$8=e||[],this.$9=j,this.$7=f,this.$10=g,this.$12=a,this.$11=h,this.$13=i||"DISABLE_CACHE",this.$14=k}var b=a.prototype;b.$15=function(a){a=this.$3.createRequestParam(this.$1,a);var b=a.uri;a=a.http;b=b.toString();this.$4=b;a=c("oz-player/networks/OzFetchWithCache")(this.$12,b,a,this.$7,this.$2,this.$10,this.$11,this.$13);var d=a.promise;a=a.retrievedFromCache;this.$6=a;return{requestPromise:d,requestUrl:b}};b.startStream=function(a){var b=this,d=this.$15(a),e=d.requestPromise,f=d.requestUrl,g=f,h=Date.now();return e.then(function(d){var e;(e=b.$14)==null?void 0:e.updateWithResponse(f,h,d);b.$5=d;d.headers!==null&&d.headers&&c("oz-player/networks/OzClientClock").updateOffsetFromHeaderResponse(d.headers);if(b.$9!=null&&d.ok===!1)return b.$9(d,function(){var d=b.$15(a),c=d.requestPromise;d=d.requestUrl;g=d;return c},g)["catch"](function(a){throw new(c("oz-player/utils/OzError"))({type:"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR",description:a.message,extra:{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR,url:g}})});else return d}).then(function(a){var d=[];for(var e=0;e<b.$8.length;e++)try{var f=b.$8[e].onResponse(a,g);f&&d.push(f)}catch(a){return c("oz-player/networks/OzCreateErrorStream")(a)}f=a.body;e=a.headers;var h=a.ok;a=a.status;if(!h)return c("oz-player/networks/OzCreateErrorStream")(c("oz-player/networks/createNetworkError")(new Error("HTTP status not OK"),a,e,g,typeof f==="string"&&f.length>0?f:"HTTP error."));typeof f!=="string"&&typeof f.getReader==="function"||c("oz-player/shims/ozvariant")(0,3287);h=f;for(var a=0;a<d.length;a++)h=h.pipeThrough(d[a]);if(!b.$12.getBool("throw_network_error_during_stream"))return h;e=new(c("oz-player/networks/OzTransformStream"))({errorTransform:function(a){return a instanceof TypeError?c("oz-player/networks/createNetworkError")(a,0,null,g,"Network failure."):a}});h=h.pipeThrough(e);return h},function(a){var d=[];for(var e=0;e<b.$8.length;e++)try{var f=b.$8[e].onError(a,g);f&&d.push(f)}catch(a){return c("oz-player/networks/OzCreateErrorStream")(a)}if(a instanceof TypeError){f=c("oz-player/networks/OzCreateErrorStream")(c("oz-player/networks/createNetworkError")(a,0,null,g,"Network failure: "+a.message));for(var e=0;e<d.length;e++)f=f.pipeThrough(d[e]);return f}throw a})["catch"](function(a){if(a instanceof c("oz-player/utils/OzError")&&a.getType()==="OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR")throw a;return a.name==="AbortError"?c("oz-player/networks/OzCreateErrorStream")({type:a.name,status:a.code,url:g,message:a}):c("oz-player/networks/OzCreateErrorStream")({type:"stream_processing",status:0,url:g,message:"Stream processing error. "+a})})};b.getLastRequestUrl=function(){return this.$4};b.getLastResponse=function(){return this.$5};b.retrievedFromCache=function(){return this.$6};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzByteRange",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.startByte===b.startByte}function b(a,b){return b.endByte===null?!1:a.startByte===b.endByte+1}function c(a,b){return a.startByte<b.startByte?!1:b.endByte==null||b.endByte>=a.startByte}function d(a,b){a=a;b=b;if(b.startByte<a.startByte){var c=a;a=b;b=c}if(a.endByte==null)return{startByte:a.startByte,endByte:null};if(b.startByte>a.endByte+1)return null;c=b.endByte==null||b.endByte>a.endByte?b.endByte:a.endByte;return{startByte:a.startByte,endByte:c}}function e(a,b){if(b.endByte==null)return null;if(a.startByte>b.endByte)return{startByte:a.startByte,endByte:a.endByte};return a.endByte!=null&&a.endByte<=b.endByte?null:{startByte:b.endByte+1,endByte:a.endByte}}function g(a){return a.endByte==null?null:a.endByte-a.startByte+1}f.startsAtSame=a;f.startsImmediateAfter=b;f.startsDuring=c;f.union=d;f.disjoinAfter=e;f.getLength=g}),66);
__d("oz-player/networks/OzProducerInterruptedError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("oz-player/networks/OzDeferredBuffer",["oz-player/networks/OzProducerInterruptedError","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){a===void 0&&(a={});this.$2=[];this.$3=!1;this.$5=0;a=a;a=a.disableArrayShift;this.$1=!!a}var b=a.prototype;b.produce=function(a){this.$6(a)};b.signalProducerInterruption=function(){this.$6(new(c("oz-player/networks/OzProducerInterruptedError"))("producer interrupted"))};b.consume=function(a){var b=this;if(this.$3)throw new Error("A buffer can only be consumed by one client at a time");this.$3=!0;var d=c("oz-player/shims/OzMaybeNativePromise").resolve();this.isEmpty()&&(this.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),d=this.$4.getPromise());return d.then(function(){if(b.$1){if(b.$2[b.$5]===void 0)throw new Error("buffer has no value at position "+b.$5)}else if(b.$2.length===0)throw new Error("buffer length must not be 0");b.$4=null;b.$3=!1;var c=b.$1?b.$7(a):b.$8(a);if(c instanceof Uint8Array)return c;throw c})};b.$6=function(a){this.$2.push(a),this.$4&&this.$4.resolve()};b.$7=function(a){var b=this.$2[this.$5];if(b===void 0)return new Uint8Array([]);b=b;if(!(b instanceof Uint8Array)){this.$2[this.$5]=void 0;this.$5++;return b}if(a!==void 0&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$2[this.$5]=c}else this.$2[this.$5]=void 0,this.$5++;return b};b.$8=function(a){if(this.$2.length===0)return new Uint8Array([]);var b=this.$2[0];if(!(b instanceof Uint8Array)){this.$2.shift();return b}if(a!==void 0&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$2[0]=c}else this.$2.shift();return b};b.isEmpty=function(){return this.$1?this.$2[this.$5]===void 0:this.$2.length===0};return a}();g["default"]=a}),98);
__d("oz-player/utils/ozPipeErrorTo",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){try{a.error(b)}catch(a){}}f["default"]=a}),66);
__d("oz-player/networks/OzPausableRangeStream",["oz-player/manifests/OzByteRange","oz-player/networks/OzDeferredBuffer","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/ozPipeErrorTo"],(function(a,b,c,d,e,f,g){"use strict";function h(){return new Error("Upstream has an inconsistent range")}var i=function(){function a(){this.$1=0}var b=a.prototype;b.setBytesToSkip=function(a){this.$1=a};b.setBytesSkipped=function(a){this.$1-=a};b.getBytesToSkip=function(){return this.$1};b.hasMoreBytesToSkip=function(){return this.$1>0};return a}();a=function(){function a(b,d,e,f,g){var j=this;this.$5=!1;this.$7=0;this.$8=0;this.$13=!1;this.$14=0;this.$15=new i();this.$16=!1;this.$17=!1;this.$18=!1;this.startStream=function(){j.$13=!0;var b={startByte:j.$1.startByte,endByte:j.$1.endByte};!j.$16?b.startByte+=j.$8:j.$8&&(j.$3.produce("skip_buffered_bytes"),j.$8=0);var d=j.$4;return j.$2.startStream(b).then(function(b){b.pipeTo(j.$17?d:j.$4).then(function(){j.$12&&j.$12.resolve("stream_done")})["catch"](function(b){j.$12&&!j.$12.isSettled()&&(j.$17&&b===a.STREAM_PAUSED?j.$12.resolve("stream_paused"):j.$12.reject(b))});j.$12=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));return{statusPromise:j.$12.getPromise()}})};this.$19=b;this.$20=d;this.$1=e;this.$2=f;b=g||{};d=b.fixStreamingUndefinedEndByte;e=b.disableDeferredBufferArrayShift;f=b.enablePausableStreamResumeFromStartDangerously;g=b.fixPausePreReadableStream;b=b.throwErrorWhenAborted;this.$11=!!d;this.$16=!!f;this.$17=!!g;this.$18=!!b;this.$3=new(c("oz-player/networks/OzDeferredBuffer"))({disableArrayShift:!!e});this.$6=new this.$19({start:function(a){j.$10=a},pull:function(a){if((j.$11&&j.$1.endByte===null&&j.$5||j.$7===j.$21())&&j.$3.isEmpty()){a.close();return c("oz-player/shims/OzMaybeNativePromise").resolve()}var b=function b(){var d=j.$15.hasMoreBytesToSkip()?j.$15.getBytesToSkip():void 0;return j.$3.consume(d).then(function(d){if(j.$15.hasMoreBytesToSkip()){j.$15.setBytesSkipped(d.length);return b()}j.$7+=d.length;var e=j.$21();e!==null&&j.$7>(e||0)&&c("oz-player/utils/ozPipeErrorTo")(j.$10,h());a.enqueue(d)})["catch"](function(a){if(a==="skip_buffered_bytes"){j.$15.setBytesToSkip(j.$7);return b()}throw a})};return b()},cancel:function(a){j.$12&&j.$12.resolve("stream_cancelled"),c("oz-player/utils/ozPipeErrorTo")(j.$9,a)}});this.$4=this.$22()}var b=a.prototype;b.$21=function(){var a=this.$1,b=a.startByte;a=a.endByte;return a!=null?a-b+1:null};b.$22=function(){var a=this;return new this.$20({start:function(b){a.$9=b},write:function(b){a.$3.produce(b),a.$8+=b.length},close:function(){a.$5=!0;var b=a.$1,d=b.endByte;b=b.startByte;a.$11&&d===null&&a.$3.produce(new Uint8Array([]));d!==null&&a.$8!==(d||0)-b+1&&c("oz-player/utils/ozPipeErrorTo")(a.$10,h())},abort:function(b){a.$12&&(a.$18?a.$12.reject(b):a.$12.resolve("stream_aborted")),c("oz-player/utils/ozPipeErrorTo")(a.$10,b)}})};b.getStream=function(){return this.$6};b.pauseStream=function(){c("oz-player/utils/ozPipeErrorTo")(this.$9,a.STREAM_PAUSED),this.$12&&this.$12.resolve("stream_paused"),this.$4=this.$22()};b.getByteRange=function(){return this.$1};b.getBytesStreamed=function(){return this.$7};b.tryConcatByteRange=function(a){if(this.$13||!d("oz-player/manifests/OzByteRange").startsImmediateAfter(a,this.$1))return!1;this.$1={startByte:this.$1.startByte,endByte:a.endByte};return!0};return a}();a.STREAM_PAUSED="streamPaused";g["default"]=a}),98);
__d("oz-player/networks/RequestParamCreator",["oz-player/shims/OzURI"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b){var d=this;this.createRequestParam=function(a,b){var e=new(c("oz-player/shims/OzURI"))(a.toString());if(b){a=b.startByte;var f=b.endByte;a===0&&(f===null||f===void 0)||(e.addQueryData({bytestart:b.startByte}),f!==null&&f!==void 0&&e.addQueryData({byteend:f}))}if(d.$2){var g=d.$2(e);g&&Object.keys(g).forEach(function(a){var b=g[a];e.addQueryData(a,b)})}a=d.$1&&d.$1(e)?"include":"same-origin";return{uri:e,http:{credentials:a}}};this.$1=a;this.$2=b};g["default"]=a}),98);
__d("oz-player/networks/getOzSegmentStreamableRange",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(!a.length)return null;var b=a[0].getURI().toString(),c=a[0].getByteRange();if(!c)return null;var d=c;for(var e=1;e<a.length;e++){var f=a[e];if(f.getURI().toString()!==b)return null;f=f.getByteRange();if(!d||!f)return null;if(d.endByte===null||f.startByte!==d.endByte+1)return null;d=f}return{startByte:c.startByte,endByte:d.endByte}}f["default"]=a}),66);
__d("oz-player/networks/OzNetworkManager",["oz-player/loggings/OzLoggingUtils","oz-player/networks/OzNetworkRequestStream","oz-player/networks/OzPausableRangeStream","oz-player/networks/RequestParamCreator","oz-player/networks/getOzSegmentStreamableRange","oz-player/shims/OzStreams","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzError","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$10=null;var b=a.config,d=a.prefetchCache,e=a.networkRequestStreamHandlers,f=a.getOverrideOzRequestImplementation,g=a.getShouldIncludeCredentials,h=a.getCustomRequestParametersForURI,i=a.networkRequestStreamRetryHandler,j=a.setCustomFetchStreamLoggingAttributes;a=a.dynamicVideoLibrary;this.$2=b;this.$7=g;this.$8=h;this.$1=new(c("oz-player/networks/RequestParamCreator"))(this.$7,this.$8);this.$3=d;this.$4=e;this.$5=i;this.$6=f;this.$10=j;this.$9=new Map();this.$11=a}var b=a.prototype;b.destroy=function(){this.$9&&this.$9.clear()};b.request=function(a,b,d,e){d===void 0&&(d=null);e===void 0&&(e="DISABLE_CACHE");a.length>0||c("oz-player/shims/ozvariant")(0,212);var f=c("oz-player/networks/getOzSegmentStreamableRange")(a)||{startByte:0,endByte:null},g=this.$6?this.$6():null;g=new(c("oz-player/networks/OzNetworkRequestStream"))(this.$2,a[0].getURI(),null,this.$1,this.$4,g,this.$3,this.$9,e,this.$5);return this.$12(f,g,b,d,a)};b.createPausableStream=function(a,b,d){a.length>0||c("oz-player/shims/ozvariant")(0,212);var e=c("oz-player/networks/getOzSegmentStreamableRange")(a)||{startByte:0,endByte:null},f=null,g=this.$2.getNumber("network_seg_timeout_ms");g>0&&(f={networkTimeoutMs:g});g=this.$6?this.$6():null;var h=new(c("oz-player/networks/OzNetworkRequestStream"))(this.$2,a[0].getURI(),f,this.$1,this.$4,g,this.$3,this.$9,null,this.$5,this.$11);return{pausableStream:this.$13(e,h,b||null,d),loggingPayloads:{getRequestUrl:function(){return h.getLastRequestUrl()||null},isPrefetch:function(){return h.retrievedFromCache()},segments:a,getResponse:function(){return h.getLastResponse()}}}};b.requestRawUrl=function(a,b,d){d===void 0&&(d=null);var e=this.$6?this.$6():null;a=new(c("oz-player/networks/OzNetworkRequestStream"))(this.$2,new(c("oz-player/shims/OzURI"))(a),b,this.$1,this.$4,e,this.$3,this.$9,null,this.$5,this.$11);b={startByte:0,endByte:null};return this.$12(b,a,[],d)};b.$13=function(a,b,e,f){b=b;if(e!=null)for(var g=0;g<e.length;g++){var h=e[g];b=h(this.$2,b,f)}return new(c("oz-player/networks/OzPausableRangeStream"))(d("oz-player/shims/OzStreams").OzReadableStream,d("oz-player/shims/OzStreams").OzWritableStream,a,b,{fixStreamingUndefinedEndByte:!0,enablePausableStreamResumeFromStartDangerously:!0,fixPausePreReadableStream:!0,throwErrorWhenAborted:this.$2.getBool("pausable_stream_throws_error_when_aborted")})};b.$12=function(a,b,c,e,f){var g=this;f===void 0&&(f=[]);var h=this.$13(a,b,c,e);a=h.startStream();var i=this.$14(a);e&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(i,e,"fetch_stream",function(){},function(a){d("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(a,b.getLastRequestUrl(),b.retrievedFromCache(),f,0,h.getBytesStreamed(),b.getLastResponse());var c=g.$10;c&&c(a,b.getLastRequestUrl(),b.getLastResponse())});return{getStream:function(){return h.getStream()},cancel:function(){return h.pauseStream()},getStatusChangePromise:function(){return i}}};b.$14=function(a){var b=this;return a.then(function(a){a=a.statusPromise;return a.then(function(a){if(a==="stream_done"||!b.$2.getBool("enable_network_manager_error"))return"done";throw new(c("oz-player/utils/OzError"))({description:a,type:"OZ_NETWORK"})})})};a.getStreamableSegmentsRange=function(a){if(!a.length)return[];return!c("oz-player/networks/getOzSegmentStreamableRange")(a)?[a[0]]:a.slice(0)};return a}();g["default"]=a}),98);
__d("oz-player/manifests/Mpd",["oz-player/shims/OzEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h){var i;i=a.call(this)||this;i.$Mpd8=!1;i.$Mpd1=b;i.$Mpd4=f;i.$Mpd2=c;i.$Mpd3=d;i.$Mpd5=e;i.$Mpd6=g;i.$Mpd7=h;return i}var c=b.prototype;c.markRefreshed=function(){this.$Mpd9=Date.now()};c.getRefreshDate=function(){return this.$Mpd9};c.updateLocation=function(a){this.$Mpd5=a,this.$Mpd8=!0,this.emit("locationUpdated")};c.getLocation=function(){return this.$Mpd5};c.getMinimumUpdatePeriod=function(){return this.$Mpd4};c.getVideoRepresentations=function(){return this.$Mpd2};c.getAudioRepresentations=function(){return this.$Mpd3};c.getCustomField=function(a){var b=this.$Mpd6.get(a);if(!b)throw new Error("Custom parser not specified for field "+a);try{return b(this.$Mpd1)}catch(a){return null}};c.isStaticMpd=function(){return this.$Mpd7};c.updateWith=function(a){this.$Mpd8&&(this.$Mpd8=!1,this.$Mpd2.splice(0,this.$Mpd2.length),this.$Mpd3.splice(0,this.$Mpd3.length)),this.$Mpd1=a.$Mpd1,this.$Mpd10(this.$Mpd2,a.getVideoRepresentations()),this.$Mpd10(this.$Mpd3,a.getAudioRepresentations()),this.$Mpd7=a.isStaticMpd(),this.$Mpd4=a.getMinimumUpdatePeriod(),this.emit("updated")};c.blockTimeRange=function(a){this.$Mpd2.forEach(function(b){return b.blockTimeRange(a)}),this.$Mpd3.forEach(function(b){return b.blockTimeRange(a)})};c.unblockTimeRange=function(){this.blockTimeRange({startTime:0,endTime:0})};c.$Mpd10=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=!1;for(var f=0;f<a.length;f++){var g=a[f];if(d.getID()===g.getID()){g.updateWith(d);e=!0;break}}e||a.push(d)}};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/manifests/OzAudioRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i){d=a.call(this,b,c,d,e,f,g,h,i)||this;d.$OzAudioRepresentation1=b;d.$OzAudioRepresentation2=c;d.$OzAudioRepresentation3=g;return d}var c=b.prototype;c.getBitrateKbps=function(){var a=1024;return(this.$OzAudioRepresentation3/a).toFixed(1)+"Kbps"};c.getQualityLabel=function(){return this.$OzAudioRepresentation2};return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzSegmentTemplateParser",["oz-player/parsers/OzDefaultSegmentTimelineParser","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){this.$2=a,this.$1=b}var b=a.prototype;b.getData=function(){return this.$1};b.getTimeRange=function(){return{startTime:0,endTime:0}};b.getByteRange=function(){return null};b.getURI=function(){return this.$2};b.getSequenceNumber=function(){return null};b.setOptions=function(a){};return a}();a=function(){function a(a,b,d,e,f){this.$2=d,this.$1=b,this.$3=a,e?this.$4=e:this.$4=new(c("oz-player/parsers/OzDefaultSegmentTimelineParser"))(),this.$5=f}var b=a.prototype;b.parseInitializationSegment=function(){var a=d("oz-player/utils/OzUrlHelper").joinUrlPaths(this.$2.baseUrl,this.$1.$.initialization);return new h(new(c("oz-player/shims/OzURI"))(a),this.$5)};b.parseSegmentsContainer=function(){return this.$4.parseSegmentsContainer(this.$3,this.$2,this.$1)};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzZeroTimeRangeSegment",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.getData=function(){return null};b.getURI=function(){return this.$1};b.getTimeRange=function(){return{startTime:0,endTime:0}};b.getByteRange=function(){return{startByte:this.$2,endByte:this.$3}};b.getSequenceNumber=function(){return null};b.setOptions=function(a){};return a}();f["default"]=a}),66);
__d("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter",["oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzNetworkRequestStream"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b,d,e){var f=b.getBool("estimate_video_bandwidth_only")?a==="video":!0;return d instanceof c("oz-player/networks/OzNetworkRequestStream")&&f?c("oz-player/networks/OzBandwidthEstimator").pipeThroughReporter(b.getLegacyConfig(),d,e):d}}g["default"]=a}),98);
__d("oz-player/manifests/OzDataSegment",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c,d,e){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e}var b=a.prototype;b.getData=function(){return null};b.getURI=function(){return this.$1};b.getTimeRange=function(){return{startTime:this.$2,endTime:this.$3}};b.getByteRange=function(){return{startByte:this.$4,endByte:this.$5}};b.getSequenceNumber=function(){return null};b.setOptions=function(a){};return a}();f["default"]=a}),66);
__d("oz-player/shims/www/OzDataViewReaderWWW",["DataViewReader"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("DataViewReader")}),98);
__d("oz-player/shims/OzDataViewReader",["oz-player/shims/www/OzDataViewReaderWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDataViewReaderWWW")}),98);
/**
 * License: https://www.facebook.com/legal/license/8SOvLuObRf9/
 */
__d("oz-player/parsers/OzMp4SidxParser",["oz-player/manifests/OzDataSegment","oz-player/shims/OzDataViewReader"],(function(a,b,c,d,e,f,g){"use strict";var h=1936286840;function a(a,b,d,e){var f=new(c("oz-player/shims/OzDataViewReader"))(new DataView(e.buffer));e=f.readUint32();var g=f.readUint32();if(g!==h)throw new Error('Invalid box type, expected "sidx".');e==1&&(e=f.readUint64());g=f.readUint8();f.skip(3);f.skip(4);var i=f.readUint32();if(!i)throw new Error("Invalid timescale.");var j;g==0?(g=f.readUint32(),j=f.readUint32()):(g=f.readUint64(),j=f.readUint64());f.skip(2);var k=f.readUint16(),l=g,m=d+e+j,n=0,o=a.getBool("sidx_parser_memory_optimization"),p=[];g=function(a){var d=f.readUint32(),e=(d&2147483648)>>>31;d=d&2147483647;var g=f.readUint32();f.readUint32();if(e==1)throw new Error("Heirarchical SIDXs are not supported.");var h=l/i,j=(l+g)/i;a===0&&(n=h);var k=m,q=k+d-1;p.push(o?new(c("oz-player/manifests/OzDataSegment"))(b,h-n,j-n,k,q):{getData:function(){return null},getURI:function(){return b},getTimeRange:function(){return{startTime:h-n,endTime:j-n}},getByteRange:function(){return{startByte:k,endByte:q}},getSequenceNumber:function(){return null},setOptions:function(a){return void 0}});l+=g;m+=d};for(var d=0;d<k;d++)g(d);return p}g.parse=a}),98);
__d("oz-player/parsers/OzSidxSegmentsContainer",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){c===void 0&&(c=null),this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.getSegmentByTime=function(a){var b=this.$1();for(var c=0;c<b.length;c++){var d=b[c],e=d.getTimeRange();if(e.startTime<=a&&e.endTime>a)return d}return null};b.getSegmentAfter=function(a){var b=this.$1(),c=b.findIndex(function(b){return b.getTimeRange().startTime===a.getTimeRange().startTime&&b.getTimeRange().endTime===a.getTimeRange().endTime});return c>=0&&c+1<b.length?b[c+1]:null};b.getPredictedSegmentAfter=function(a){return null};b.canPredict=function(){return!1};b.canApproximateId=function(){return!1};b.isEndingSegment=function(a){var b=this.$1();if(!b||!b.length)return!1;b=b[b.length-1].getTimeRange();a=a.getTimeRange();return b.startTime===a.startTime&&b.endTime===a.endTime};b.getSegment=function(a){return this.$1()[a]||null};b.updateWith=function(a){throw new Error("Not implemented: updatedWith")};b.addUpdateListener=function(a){return this.$2.addListener("segment_updated",a)};b.forceParseIfNotParsed=function(){this.$3&&(this.$3(),this.$3=null)};b.getTimeRanges=function(){var a=this.$1();if(a.length===0)return[];else{var b=a[0];a=a[a.length-1];return[{startTime:b.getTimeRange().startTime,endTime:a.getTimeRange().endTime}]}};b.blockTimeRange=function(){};b.getEndingSegment=function(){var a=this.$1();a=a.length>0?a[a.length-1]:null;return a};b.getMaxGopSec=function(){return null};return a}();f["default"]=a}),66);
/**
 * License: https://www.facebook.com/legal/license/8SOvLuObRf9/
 */
__d("oz-player/parsers/OzWebmSidxParser",["oz-player/manifests/OzDataSegment","oz-player/shims/OzDataViewReader","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";var h=.1,i=440786851,j=408125543,k=357149030,l=2807729,m=17545,n=475249515,o=187,p=179,q=183,r=241,s=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];function t(a,b){if(!a&&!b)return!0;if(!a||!b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}var u=function(){function a(a,b){this.id=a,this.$1=b}var b=a.prototype;b.getOffset=function(){return this.$1.byteOffset};b.createParser=function(){return new v(this.$1)};b.getUint=function(){if(this.$1.byteLength>8)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(this.$1.byteLength==8&&this.$1.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");var a=0;for(var b=0;b<this.$1.byteLength;b++){var c=this.$1.getUint8(b);a=256*a+c}return a};b.getFloat=function(){if(this.$1.byteLength==4)return this.$1.getFloat32(0);else if(this.$1.byteLength==8)return this.$1.getFloat64(0);else throw new RangeError("EbmlElement: floating point numbers must be 4 or 8 bytes.")};return a}(),v=function(){function a(a){this.$1=a,this.$2=new(c("oz-player/shims/OzDataViewReader"))(this.$1)}var b=a.prototype;b.hasMoreData=function(){return this.$2.hasMoreData()};b.parseElement=function(){var b=this.$3(),c=this.$4(),d;a.$5(c)?d=this.$1.byteLength-this.$2.getCursor():d=a.$6(c);c=this.$2.getCursor()+d<=this.$1.byteLength?d:this.$1.byteLength-this.$2.getCursor();d=new DataView(this.$1.buffer,this.$1.byteOffset+this.$2.getCursor(),c);this.$2.skip(c);return new u(b,d)};b.$3=function(){var a=this.$4();if(a.length>7)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");var b=0;for(var c=0;c<a.length;c++)b=256*b+a[c];return b};b.$4=function(){var a=this.$2.readUint8(),b;for(b=1;b<=8;b++){var c=1<<8-b;if(a&c)break}if(b>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");c=new Uint8Array(b);c[0]=a;for(var a=1;a<b;a++)c[a]=this.$2.readUint8();return c};a.$6=function(a){if(a.length==8&&a[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");var b=1<<8-a.length;b=a[0]&b-1;for(var c=1;c<a.length;c++)b=256*b+a[c];return b};a.$5=function(a){for(var b=0;b<s.length;b++)if(t(a,s[b]))return!0;return!1};return a}();function w(a){a=a.createParser();var b=1e6,c=null;while(a.hasMoreData()){var d=a.parseElement();d.id==l?b=d.getUint():d.id==m&&(c=d.getFloat())}if(c==null)return null;d=b/1e9;a=c*d;return{timecodeScale:d,duration:a}}function x(a,b,d,e,f,g){var i=[];b=b.createParser();var j=-1,k=-1;while(b.hasMoreData()){var l=b.parseElement();if(l.id!=o)continue;l=y(l);if(!l)continue;var m=e*l.unscaledTime;l=d+l.relativeOffset;j>=0&&(k>=0||c("oz-player/shims/ozvariant")(0,4010),i.push(new(c("oz-player/manifests/OzDataSegment"))(g,j,m,k,l-1)));j=m;k=l}if(j>=0){k>=0||c("oz-player/shims/ozvariant")(0,4010);m=f;a.getBool("handle_invalid_webm_duration")&&(m=f>j?f:j+h);i.push(new(c("oz-player/manifests/OzDataSegment"))(g,j,m,k,null))}return i}function y(a){a=a.createParser();var b=a.parseElement();if(b.id!=p)return null;b=b.getUint();a=a.parseElement();if(a.id!=q)return null;a=a.createParser();var c=0;while(a.hasMoreData()){var d=a.parseElement();if(d.id!=r)continue;c=d.getUint();break}return{unscaledTime:b,relativeOffset:c}}function z(a){a=a.createParser();var b=null;while(a.hasMoreData()){var c=a.parseElement();if(c.id!=k)continue;b=c;break}return!b?null:w(b)}function A(a){a=new v(a);var b=a.parseElement();if(b.id!=i)return null;b=a.parseElement();if(b.id!=j)return null;a=b.getOffset();b=z(b);return!b?null:{segmentOffset:a,timecodeScale:b.timecodeScale,duration:b.duration}}function a(a,b,c,d){d=new DataView(d.buffer);c=new DataView(c.buffer);d=A(d);if(!d)return[];c=new v(c);c=c.parseElement();return c.id!=n?[]:x(a,c,d.segmentOffset,d.timecodeScale,d.duration,b)}g.parse=a}),98);
__d("oz-player/parsers/OzSidxSegmentsParser",["oz-player/loggings/OzLoggingUtils","oz-player/manifests/OzZeroTimeRangeSegment","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/parsers/OzMp4SidxParser","oz-player/parsers/OzSidxSegmentsContainer","oz-player/parsers/OzWebmSidxParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzURI","oz-player/utils/OzErrorEmitter","oz-player/utils/OzReadableStreamUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.split("-");return{startByte:Number.parseInt(a[0],10),endByte:Number.parseInt(a[1],10)}}a=function(){function a(a,b,d,e,f,g,h,i){i===void 0&&(i=!1),this.$6=new(c("oz-player/utils/OzErrorEmitter"))(),this.$7=[],this.$9=new(c("oz-player/shims/OzEventEmitter"))(),this.$1=b,this.$2=new(c("oz-player/shims/OzURI"))(d),this.$3=e,this.$5=f,this.$4=g,this.$8=h.cloneContext().setType("sidx"),this.$10=a,this.$11=i}var b=a.prototype;b.onError=function(a){return this.$6.onError(a)};b.parseInitializationSegment=function(){var a=this,b=this.$1.Initialization[0].$.range,d=h(b);b=this.$10.getBool("sidx_parser_memory_optimization")?new(c("oz-player/manifests/OzZeroTimeRangeSegment"))(this.$2,d.startByte,d.endByte):{getData:function(){return null},getURI:function(){return a.$2},getTimeRange:function(){return{startTime:0,endTime:0}},getByteRange:function(){return d},getSequenceNumber:function(){return null},setOptions:function(a){}};return b};b.parseSegmentsContainer=function(){var a=this,b=function(){d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a.$12(),a.$8,"process_sidx")["catch"](a.$6.emitError)},e=this.$10.getBool("lazy_parse_sidx")&&!this.$11;e||b();e=new(c("oz-player/parsers/OzSidxSegmentsContainer"))(function(){return a.$7},this.$9,e?b:null);return e};b.$13=function(a,b,e){e===void 0&&(e="DISABLE_CACHE");a=new(c("oz-player/manifests/OzZeroTimeRangeSegment"))(a,b.startByte,b.endByte);b=this.$5+";sidx";a=this.$4.request([a],[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(b)],this.$8,e);b=a.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpAllData(b)};b.$12=function(){var a=this,b=this.$1.$.indexRange,e=h(b);b=[this.$13(this.$2,e)];if(this.$3==="webm"){var f=h(this.$1.Initialization[0].$.range);b.push(this.$13(this.$2,f,"ENABLE_CACHE"));f=c("oz-player/shims/OzMaybeNativePromise").all(b).then(function(b){var c=b[0];b=b[1];a.$7=d("oz-player/parsers/OzWebmSidxParser").parse(a.$10,a.$2,c,b)})}else f=b[0].then(function(b){a.$7=d("oz-player/parsers/OzMp4SidxParser").parse(a.$10,a.$2,e.startByte,b)});return f.then(function(){a.$9.emit("segment_updated")})};return a}();g["default"]=a}),98);
__d("oz-player/parsers/OzVideoContainerType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[1]||"").trim()}f.parse=a}),66);
__d("oz-player/parsers/OzRepresentationParserBase",["oz-player/manifests/OzRepresentationBase","oz-player/parsers/OzSegmentTemplateParser","oz-player/parsers/OzSidxSegmentsParser","oz-player/parsers/OzVideoContainerType","oz-player/shims/ozvariant","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzMimeUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g,h,i,j,k,l){this.$5=new(c("oz-player/utils/OzErrorEmitter"))();this.$1=b;this.$6=e;this.$7=f;this.$9=d;this.$10=a;this.$11=g;this.$2=h;this.$3=i;this.$4=j;this.$12=k;this.$13=l;try{this.$7=this.$7.cloneContext().setRepresentationID(this.parseID())}catch(a){}}var b=a.prototype;b.$14=function(){var a=this,b=this.$8;if(b)return b;if(this.$1.SegmentBase){var e=this.$1.SegmentBase[0],f=this.$1.BaseURL[0]._;typeof f==="string"||c("oz-player/shims/ozvariant")(0,29051);var g=this.$12.includes(this.$1.$.id);b=new(c("oz-player/parsers/OzSidxSegmentsParser"))(this.$10,e,f,d("oz-player/parsers/OzVideoContainerType").parse(this.$1.$.mimeType),d("oz-player/utils/OzMimeUtil").getMimeType(this.$1.$.mimeType),this.$6,this.$7,g);b.onError(function(b){var c;if((c=a.$13)==null?void 0:c.handleError(a.parseID(),b))return;return a.$5.emitError(b)})}else if(this.$1.SegmentTemplate)b=this.$15(this.$1.SegmentTemplate[0],{isShared:!1});else if(this.$2)b=this.$15(this.$2[0],{isShared:!0});else{e=new(c("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Unrecognized representation type",extra:{code:"OZ_RP-7"}});throw e}this.$8=b;return b};b.$15=function(a,b){var d;a=a;b.isShared&&(a=babelHelpers["extends"]({},a,{$:babelHelpers["extends"]({},a.$,{initialization:a.$.initialization.replace("$RepresentationID$",this.$1.$.id),media:a.$.media.replace("$RepresentationID$",this.$1.$.id)})}));b=this.$9.mpdUrl;var e=this.$1.BaseURL&&this.$1.BaseURL[0]?this.$1.BaseURL[0]._:null;e=e!=null?e:b;if(e==null){var f=new(c("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Missing mpd url for template manifest",extra:{code:"OZ_RP-6"}});throw f}f=this.$9.customSegmentTimelineParser;d=(d=this.$9.customRepresentationParsers)==null?void 0:d.initializationBinary;d=d?d(this.$1):null;return new(c("oz-player/parsers/OzSegmentTemplateParser"))(this.$10,a,{baseUrl:e,mpdUrl:b,isStaticMpd:this.$11.manifestType==="static",isTemplatedMpd:this.$11.manifestIsTemplated},f,d)};b.onError=function(a){return this.$5.onError(a)};b.parseInitSegment=function(){return this.$14().parseInitializationSegment()};b.parseBandwidth=function(){return Number(this.$1.$.bandwidth)};b.parseMimeCodecs=function(){var a,b;a=(a=(a=this.$1.$.mimeType)!=null?a:this.$3)!=null?a:"";b=(b=(b=this.$1.$.codecs)!=null?b:this.$4)!=null?b:"";return a+'; codecs="'+b+'"'};b.parseSegmentsContainer=function(){return this.$14().parseSegmentsContainer()};b.parseID=function(){return""+this.$1.$.id};b.parseCustomFieldFirstSegment=function(){var a=this.$9.customRepresentationParsers?this.$9.customRepresentationParsers.firstSegmentParser:null;return a?a(this.$1):null};b.parse=function(){return new(c("oz-player/manifests/OzRepresentationBase"))(this.$1,this.parseID(),this.parseMimeCodecs(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),this.$9.customRepresentationParsers)};return a}();g["default"]=a}),98);
__d("oz-player/parsers/OzAudioRepresentationParser",["oz-player/manifests/OzAudioRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k){b=a.call(this,b,c,d,e,f,g,h,i,j,k)||this;b.$OzAudioRepresentationParser1=c;b.$OzAudioRepresentationParser2=d;return b}var d=b.prototype;d.parse=function(){var a=this.$OzAudioRepresentationParser2.customRepresentationParsers;return new(c("oz-player/manifests/OzAudioRepresentation"))(this.$OzAudioRepresentationParser1,this.parseID(),this.parseMimeCodecs(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzVideoRepresentationParser",["oz-player/manifests/OzVideoRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l)||this;b.$OzVideoRepresentationParser1=c;b.$OzVideoRepresentationParser2=d;return b}var d=b.prototype;d.parse=function(){var a=Number.parseInt(this.$OzVideoRepresentationParser1.$.height,10),b=Number.parseInt(this.$OzVideoRepresentationParser1.$.width,10),d=this.$OzVideoRepresentationParser2.customRepresentationParsers;return new(c("oz-player/manifests/OzVideoRepresentation"))(this.$OzVideoRepresentationParser1,this.parseID(),this.parseMimeCodecs(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),d,b,a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzMpdParser",["oz-player/manifests/Mpd","oz-player/parsers/OzAudioRepresentationParser","oz-player/parsers/OzVideoRepresentationParser","oz-player/utils/OzErrorEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g,h){g===void 0&&(g=[]),h===void 0&&(h=null),this.$2=new(c("oz-player/utils/OzErrorEmitter"))(),this.$5=a,this.$1=d,this.$3=e,this.$4=b,this.$6=f,this.$7=g,this.$8=h}var b=a.prototype;b.onError=function(a){return this.$2.onError(a)};b.parse=function(a){a=a;var b=this.$4.createXmlParser().parse(a);b=b.MPD&&b.MPD.length>0?b.MPD[0]:null;if(!b){var d=2e3;throw new Error("parsed manifest XML missing MPD node; truncated xml ("+d+"/"+a.length+"): "+a.substring(0,d))}d=b.Period&&b.Period.length>0?b.Period[0]:null;if(!d){var e=2e3;throw new Error("parsed manifest XML missing Period node; truncated xml ("+e+"/"+a.length+"): "+a.substring(0,e))}a=d.AdaptationSet||[];e=this.$9(b);d=this.$10(b);var f=this.$11(a,"video"),g=this.$12(f,c("oz-player/parsers/OzVideoRepresentationParser"),{manifestType:e,manifestIsTemplated:d});g.sort(function(a,b){return a.getHeight()-b.getHeight()});a=this.$11(a,"audio");d=this.$12(a,c("oz-player/parsers/OzAudioRepresentationParser"),{manifestType:e,manifestIsTemplated:d});d.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});var h=this.$4.mpdUrl;h=new(c("oz-player/manifests/Mpd"))(b,g,d,h,this.$13(b),this.$4.customParsers||new Map(),e==="static");if(this.$6){b=this.$6;b.startEME(f,g,a,d)}return h};b.$13=function(a){a=a.$.minimumUpdatePeriod||"";a=/\d+/g.exec(a);if(a&&a.length){a=a[0];return a?Number.parseInt(a,10):null}return null};b.$9=function(a){return a.$.type||"static"};b.$10=function(a){var b;b=(b=this.$4.customParsers)==null?void 0:b.get("isLiveTemplated");if(!b)return!1;b=b(a);return typeof b==="boolean"&&b};b.$11=function(a,b){return a.find(function(a){if(a.$.mimeType!=null)return a.$.mimeType.indexOf(b)!==-1;a=a.Representation;return a&&a.length&&a[0].$.mimeType.indexOf(b)!==-1})};b.$12=function(a,b,c){var d=this;return!a?[]:a.Representation.map(function(e){e=new b(d.$5,e,d.$4,d.$1,d.$3,c,a.SegmentTemplate,a.$.mimeType,a.$.codecs,d.$7,d.$8);e.onError(d.$2.emitError);return e.parse()})};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzMpdUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a){var b=null;a.forEach(function(a){if(a){var c=a.endTime;c<((c=(c=b)==null?void 0:c.endTime)!=null?c:Infinity)&&(b=a)}});return b}function a(a,b){var c=[];c.push.apply(c,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(c.length)if(b.getBool("get_mpd_least_last_time_range")){a=c.map(function(a){a=a.getEndingSegment();return a?a.getTimeRange():null});return g(a)}else{b=c[0].getEndingSegment();if(b)return b.getTimeRange()}return null}function b(a){var b=[];b.push.apply(b,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(b.length){a=b[0].getEndingSegment();if(a)return a.getSequenceNumber()}return null}f.getLeastEndTimeTimeRange=g;f.getMpdLastTimeRange=a;f.getMpdLastSequenceNumber=b}),66);
__d("oz-player/utils/OzStreamInterruptChecker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzMpdUtils","oz-player/utils/OzNumericalHelper"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$OzStreamInterruptChecker4=0;d.$OzStreamInterruptChecker5=null;d.$OzStreamInterruptChecker6=!1;d.$OzStreamInterruptChecker2=b;d.$OzStreamInterruptChecker3=c;d.$OzStreamInterruptChecker1=d.$OzStreamInterruptChecker3.getNumber("live_numerical_error_epsilon");return d}var c=b.prototype;c.notifyMpdUpdated=function(){var a=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(this.$OzStreamInterruptChecker2,this.$OzStreamInterruptChecker3),b=a?a.endTime:null,c=!1;b!==null&&(c=this.$OzStreamInterruptChecker3.getBool("stream_interrupted_fuzzy_equals")?this.$OzStreamInterruptChecker5!=null&&d("oz-player/utils/OzNumericalHelper").equalTo(b,this.$OzStreamInterruptChecker5,this.$OzStreamInterruptChecker1):b===this.$OzStreamInterruptChecker5);c?this.$OzStreamInterruptChecker4++:(this.$OzStreamInterruptChecker4=0,this.$OzStreamInterruptChecker6&&this.$OzStreamInterruptChecker5!==null&&this.$OzStreamInterruptChecker5!==void 0&&a!==null&&a!==void 0&&this.emit("streamResumedAt",a.startTime),this.$OzStreamInterruptChecker6=!1);c=this.$OzStreamInterruptChecker3.getNumber("stream_interrupt_check_mpd_stale_count_threshold");!this.$OzStreamInterruptChecker6&&c>0&&this.$OzStreamInterruptChecker4>=c&&b!==null&&b!==void 0&&(this.emit("streamInterruptAt",b),this.$OzStreamInterruptChecker6=!0);this.$OzStreamInterruptChecker5=b};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/parsers/OzMpdUpdater",["oz-player/parsers/OzMpdParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzURI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzMpdUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/OzStreamInterruptChecker"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f,g,h,i,j){var k;k=a.call(this)||this;k.$OzMpdUpdater8=new(c("oz-player/utils/OzErrorEmitter"))();k.$OzMpdUpdater10=new(c("oz-player/shims/OzSubscriptionsHandler"))();k.$OzMpdUpdater11=!1;k.$OzMpdUpdater15=0;k.$OzMpdUpdater16=0;k.$OzMpdUpdater17=null;k.$OzMpdUpdater19=!0;k.$OzMpdUpdater22=function(){var a,b=k.$OzMpdUpdater2.getLocation();k.$OzMpdUpdater19=!1;if(!b)return;var e=new(c("oz-player/shims/OzURI"))(b),f=String((a=e.getQueryData().ms)!=null?a:e.getQueryData().ms_dev);if(k.$OzMpdUpdater6.getBool("live_disable_mpd_updates_when_paused")&&!k.$OzMpdUpdater12.isPlaying()){k.setupUpdateLoop();return}var g=k.$OzMpdUpdater5.getOperationLogger("update_manifest").start();k.$OzMpdUpdater25(b).then(function(a){k.$OzMpdUpdater16=0;k.$OzMpdUpdater26();k.$OzMpdUpdater7=0;if(k.$OzMpdUpdater19)return;var e=Object.assign({},k.$OzMpdUpdater13,{mpdUrl:b});e=new(c("oz-player/parsers/OzMpdParser"))(k.$OzMpdUpdater6,e,k.$OzMpdUpdater1,k.$OzMpdUpdater5,k.$OzMpdUpdater14);e.onError(function(a){k.$OzMpdUpdater8.emitError(a),g.setError(a).log()});e=e.parse(a);a=k.$OzMpdUpdater2.isStaticMpd();k.$OzMpdUpdater2.updateWith(e);k.$OzMpdUpdater2.markRefreshed();e.isStaticMpd()&&!a&&k.emit("streamTransitionToStatic");e=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(k.$OzMpdUpdater2,k.$OzMpdUpdater6);a=e&&e.endTime!=0?e.endTime:null;g.setLiveheadPosition(a).setLiveheadSeqNumMpd(d("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(k.$OzMpdUpdater2)).setManifestType(k.$OzMpdUpdater2.isStaticMpd()?"static":"dynamic").setIsTemplatedManifest(Boolean(k.$OzMpdUpdater2.getCustomField("isLiveTemplated"))).setPlaybackFbmsParam(f).log();k.$OzMpdUpdater9.notifyMpdUpdated();k.setupUpdateLoop()})["catch"](function(a){k.$OzMpdUpdater26();g.setError(a).log();if(k.$OzMpdUpdater6.getBool("handle_mpd_retries_outside_oz_mpd_updater")){var d;if(k.$OzMpdUpdater6.getBool("convert_dom_exception_to_oz_error"))if(a instanceof c("oz-player/utils/OzError"))d=a;else{var e=a.code!=null?String(a.code):null,f={originalError:a,url:b};e!==null&&(f.code=e);d=new(c("oz-player/utils/OzError"))({type:"OZ_NETWORK",description:a.name+"; "+a.message+"; "+a.description+";",extra:f})}else{d=a instanceof c("oz-player/utils/OzError")?a:new(c("oz-player/utils/OzError"))({type:"OZ_NETWORK",description:"Unknown mpd url load failure; errorMessage: "+a.message+"; errorDescription: "+((e=a.description)!=null?e:"")+";",extra:{originalError:a,url:b}})}k.$OzMpdUpdater24(d,b)}else k.$OzMpdUpdater23(a)})};var l=e.getMinimumUpdatePeriod();k.$OzMpdUpdater7=0;k.$OzMpdUpdater1=f;k.$OzMpdUpdater2=e;k.$OzMpdUpdater12=g;k.$OzMpdUpdater3=l;k.$OzMpdUpdater5=h.cloneContext().setType("manifest");k.$OzMpdUpdater6=b;k.$OzMpdUpdater13=i;k.$OzMpdUpdater14=j;k.$OzMpdUpdater2.addListener("locationUpdated",function(){k.$OzMpdUpdater20(),k.setupUpdateLoop()});k.$OzMpdUpdater9=new(c("oz-player/utils/OzStreamInterruptChecker"))(k.$OzMpdUpdater2,k.$OzMpdUpdater6);k.$OzMpdUpdater10.addSubscriptions(k.$OzMpdUpdater9.addListener("streamResumedAt",function(a){k.emit("streamResumedAt",a)}),k.$OzMpdUpdater9.addListener("streamInterruptAt",function(a){k.emit("streamInterruptAt",a)}));return k}var e=b.prototype;e.$OzMpdUpdater20=function(){c("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater4),this.$OzMpdUpdater4=null,this.$OzMpdUpdater21(),this.$OzMpdUpdater19=!0};e.setupUpdateLoop=function(){var a,b=!this.$OzMpdUpdater11;b&&this.$OzMpdUpdater6.getBool("stop_manifest_update_when_static")&&(b=!this.$OzMpdUpdater2.isStaticMpd(),this.$OzMpdUpdater3=this.$OzMpdUpdater2.getMinimumUpdatePeriod());a=(a=this.$OzMpdUpdater3)!=null?a:0;b&&a&&this.$OzMpdUpdater2.getLocation()&&(this.$OzMpdUpdater4=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(this.$OzMpdUpdater22,this.$OzMpdUpdater6.getNumber("manifest_update_frequency_ms")||a*1e3))};e.onError=function(a){return this.$OzMpdUpdater8.onError(a)};e.$OzMpdUpdater23=function(a){if(this.$OzMpdUpdater6.getBool("live_gracefully_handle_mpd_errors")){var b;a instanceof c("oz-player/utils/OzError")&&(b=a.getExtra().code||"");var d=["404","503"];this.$OzMpdUpdater6.getBool("live_gracefully_handle_no_network")&&d.push("0");var e=this.$OzMpdUpdater6.getNumber("live_max_try_attempts_on_404"),f=!1;if(b&&d.indexOf(b)>-1)switch(b){case"410":this.$OzMpdUpdater11=!0;f=!0;break;case"404":this.$OzMpdUpdater7++;if(this.$OzMpdUpdater7>=e)break;case"503":case"0":f=!0;break}if(f){this.setupUpdateLoop();return}}this.$OzMpdUpdater8.emitError(a)};e.$OzMpdUpdater24=function(a,b){var c=this;b=!0;var d=this.$OzMpdUpdater16-1,e=a.getExtra().code;this.$OzMpdUpdater17!==e?(this.$OzMpdUpdater17=e,this.$OzMpdUpdater15=1):this.$OzMpdUpdater15++;var f=function(){b=!1};e={endStream:function(){f(),c.$OzMpdUpdater11=!0,c.$OzMpdUpdater6.getBool("live_gracefully_handle_410")&&c.emit("streamGone")},consecutiveFailuresForErrorCode:this.$OzMpdUpdater15,error:a,isInitialRequest:!1,retry:function(a){f(),c.setupUpdateLoop()},retryAttemptCount:d};this.emit("manifestFetchError",e);b&&this.$OzMpdUpdater8.emitError(a)};e.$OzMpdUpdater27=function(a,b){a=new(c("oz-player/shims/OzURI"))(a);a.addQueryData("_nc_expid",b);return a.toString()};e.$OzMpdUpdater25=function(a){this.$OzMpdUpdater21();this.$OzMpdUpdater16++;var b=this.$OzMpdUpdater6.getString("cdn_experiment_id");a=b.length===0?a:this.$OzMpdUpdater27(a,b);b=this.$OzMpdUpdater1.requestRawUrl(a,{networkTimeoutMs:this.$OzMpdUpdater6.getNumber("mpd_updater_network_request_timeout_ms")},this.$OzMpdUpdater5);this.$OzMpdUpdater18=b;a=b.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpString(a)};e.$OzMpdUpdater21=function(){this.$OzMpdUpdater18&&this.$OzMpdUpdater6.getBool("mpd_update_cancel_current_request_tracker")&&(this.$OzMpdUpdater18.cancel(),this.$OzMpdUpdater16=0),this.$OzMpdUpdater26()};e.$OzMpdUpdater26=function(){this.$OzMpdUpdater18=null};e.destroy=function(){this.$OzMpdUpdater4&&c("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater4),this.$OzMpdUpdater10.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/parsers/OzXmlParserImplDOMParser",["oz-player/utils/OzError"],(function(a,b,c,d,e,f,g){function h(){return{$:{}}}function i(a){var b=h();for(var c=a.attributes,d=0;d<c.length;++d){var e=c[d];b.$[e.name]=e.value}for(var e=a.childNodes,c=0;c<e.length;++c){d=e[c];if(d instanceof Element){a=d.nodeName;Object.prototype.hasOwnProperty.call(b,a)||(b[a]=[]);b[a].push(i(d))}else{a=d.nodeValue.trim();a&&(b._=a)}}return b}a=function(){function a(){this.$1=new DOMParser()}var b=a.prototype;b.parse=function(a){try{var b=h(),d=this.$1.parseFromString(a,"application/xml"),e=d.querySelector("parsererror");if(e){e=e.innerHTML;var f=2e3;throw new(c("oz-player/utils/OzError"))({type:"OZ_XML_PARSER",description:e+"; truncated xml ("+f+"/"+a.length+"): "+a.substring(0,f),extra:{}})}e=d.documentElement;e!=null&&(b[e.nodeName]=[i(e)]);return b}catch(b){if(b instanceof c("oz-player/utils/OzError"))throw b;else{f=2e3;throw new(c("oz-player/utils/OzError"))({type:"OZ_XML_PARSER",description:b.message+"; truncated xml ("+f+"/"+a.length+"): "+a.substring(0,f)+"\n\n"+b.stack,extra:{originalError:b}})}}};return a}();g["default"]=a}),98);
/**
 * License: https://www.facebook.com/legal/license/yfmK3YA3_Vc/
 */
__d("sax-1.2.4",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){(function(a){a.parser=function(a,b){return new c(a,b)};a.SAXParser=c;a.MAX_BUFFER_LENGTH=64*1024;var b=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];a.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function c(b,d){if(!(this instanceof c))return new c(b,d);var f=this;e(f);f.q=f.c="";f.bufferCheckPosition=a.MAX_BUFFER_LENGTH;f.opt=d||{};f.opt.lowercase=f.opt.lowercase||f.opt.lowercasetags;f.looseCase=f.opt.lowercase?"toLowerCase":"toUpperCase";f.tags=[];f.closed=f.closedRoot=f.sawRoot=!1;f.tag=f.error=null;f.strict=!!b;f.noscript=!!(b||f.opt.noscript);f.state=u.BEGIN;f.strictEntities=f.opt.strictEntities;f.ENTITIES=f.strictEntities?Object.create(a.XML_ENTITIES):Object.create(a.ENTITIES);f.attribList=[];f.opt.xmlns&&(f.ns=Object.create(k));f.trackPosition=f.opt.position!==!1;f.trackPosition&&(f.position=f.line=f.column=0);w(f,"onready")}Object.create||(Object.create=function(a){function b(){}b.prototype=a;a=new b();return a});Object.keys||(Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b});function d(c){var d=Math.max(a.MAX_BUFFER_LENGTH,10),e=0;for(var f=0,g=b.length;f<g;f++){var h=c[b[f]].length;if(h>d)switch(b[f]){case"textNode":y(c);break;case"cdata":x(c,"oncdata",c.cdata);c.cdata="";break;case"script":x(c,"onscript",c.script);c.script="";break;default:A(c,"Max buffer length exceeded: "+b[f])}e=Math.max(e,h)}h=a.MAX_BUFFER_LENGTH-e;c.bufferCheckPosition=h+c.position}function e(a){for(var c=0,d=b.length;c<d;c++)a[b[c]]=""}function f(a){y(a),a.cdata!==""&&(x(a,"oncdata",a.cdata),a.cdata=""),a.script!==""&&(x(a,"onscript",a.script),a.script="")}c.prototype={end:function(){B(this)},write:L,resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){f(this)}};var g="[CDATA[",h="DOCTYPE",i="http://www.w3.org/XML/1998/namespace",j="http://www.w3.org/2000/xmlns/",k={xml:i,xmlns:j},l=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,n=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function p(a){return a===" "||a==="\n"||a==="\r"||a==="\t"}function q(a){return a==='"'||a==="'"}function r(a){return a===">"||p(a)}function s(a,b){return a.test(b)}function t(a,b){return!s(a,b)}var u=0;a.STATE={BEGIN:u++,BEGIN_WHITESPACE:u++,TEXT:u++,TEXT_ENTITY:u++,OPEN_WAKA:u++,SGML_DECL:u++,SGML_DECL_QUOTED:u++,DOCTYPE:u++,DOCTYPE_QUOTED:u++,DOCTYPE_DTD:u++,DOCTYPE_DTD_QUOTED:u++,COMMENT_STARTING:u++,COMMENT:u++,COMMENT_ENDING:u++,COMMENT_ENDED:u++,CDATA:u++,CDATA_ENDING:u++,CDATA_ENDING_2:u++,PROC_INST:u++,PROC_INST_BODY:u++,PROC_INST_ENDING:u++,OPEN_TAG:u++,OPEN_TAG_SLASH:u++,ATTRIB:u++,ATTRIB_NAME:u++,ATTRIB_NAME_SAW_WHITE:u++,ATTRIB_VALUE:u++,ATTRIB_VALUE_QUOTED:u++,ATTRIB_VALUE_CLOSED:u++,ATTRIB_VALUE_UNQUOTED:u++,ATTRIB_VALUE_ENTITY_Q:u++,ATTRIB_VALUE_ENTITY_U:u++,CLOSE_TAG:u++,CLOSE_TAG_SAW_WHITE:u++,SCRIPT:u++,SCRIPT_ENDING:u++};a.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};a.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(a.ENTITIES).forEach(function(b){var c=a.ENTITIES[b];c=typeof c==="number"?String.fromCharCode(c):c;a.ENTITIES[b]=c});for(var v in a.STATE)a.STATE[a.STATE[v]]=v;u=a.STATE;function w(a,b,c){a[b]&&a[b](c)}function x(a,b,c){a.textNode&&y(a),w(a,b,c)}function y(a){a.textNode=z(a.opt,a.textNode),a.textNode&&w(a,"ontext",a.textNode),a.textNode=""}function z(a,b){a.trim&&(b=b.trim());a.normalize&&(b=b.replace(/\s+/g," "));return b}function A(a,b){y(a);a.trackPosition&&(b+="\nLine: "+a.line+"\nColumn: "+a.column+"\nChar: "+a.c);b=new Error(b);a.error=b;w(a,"onerror",b);return a}function B(a){a.sawRoot&&!a.closedRoot&&C(a,"Unclosed root tag");a.state!==u.BEGIN&&a.state!==u.BEGIN_WHITESPACE&&a.state!==u.TEXT&&A(a,"Unexpected end");y(a);a.c="";a.closed=!0;w(a,"onend");c.call(a,a.strict,a.opt);return a}function C(a,b){if(typeof a!=="object"||!(a instanceof c))throw new Error("bad call to strictFail");a.strict&&A(a,b)}function D(a){a.strict||(a.tagName=a.tagName[a.looseCase]());var b=a.tags[a.tags.length-1]||a,c=a.tag={name:a.tagName,attributes:{}};a.opt.xmlns&&(c.ns=b.ns);a.attribList.length=0;x(a,"onopentagstart",c)}function E(a,b){var c=a.indexOf(":");c=c<0?["",a]:a.split(":");var d=c[0];c=c[1];b&&a==="xmlns"&&(d="xmlns",c="");return{prefix:d,local:c}}function F(a){a.strict||(a.attribName=a.attribName[a.looseCase]());if(a.attribList.indexOf(a.attribName)!==-1||a.tag.attributes.hasOwnProperty(a.attribName)){a.attribName=a.attribValue="";return}if(a.opt.xmlns){var b=E(a.attribName,!0),c=b.prefix;b=b.local;if(c==="xmlns")if(b==="xml"&&a.attribValue!==i)C(a,"xml: prefix must be bound to "+i+"\nActual: "+a.attribValue);else if(b==="xmlns"&&a.attribValue!==j)C(a,"xmlns: prefix must be bound to "+j+"\nActual: "+a.attribValue);else{c=a.tag;var d=a.tags[a.tags.length-1]||a;c.ns===d.ns&&(c.ns=Object.create(d.ns));c.ns[b]=a.attribValue}a.attribList.push([a.attribName,a.attribValue])}else a.tag.attributes[a.attribName]=a.attribValue,x(a,"onattribute",{name:a.attribName,value:a.attribValue});a.attribName=a.attribValue=""}function G(a,b){if(a.opt.xmlns){var c=a.tag,d=E(a.tagName);c.prefix=d.prefix;c.local=d.local;c.uri=c.ns[d.prefix]||"";c.prefix&&!c.uri&&(C(a,"Unbound namespace prefix: "+JSON.stringify(a.tagName)),c.uri=d.prefix);d=a.tags[a.tags.length-1]||a;c.ns&&d.ns!==c.ns&&Object.keys(c.ns).forEach(function(b){x(a,"onopennamespace",{prefix:b,uri:c.ns[b]})});for(var d=0,e=a.attribList.length;d<e;d++){var f=a.attribList[d],g=f[0];f=f[1];var h=E(g,!0),i=h.prefix;h=h.local;var j=i===""?"":c.ns[i]||"";f={name:g,value:f,prefix:i,local:h,uri:j};i&&i!=="xmlns"&&!j&&(C(a,"Unbound namespace prefix: "+JSON.stringify(i)),f.uri=i);a.tag.attributes[g]=f;x(a,"onattribute",f)}a.attribList.length=0}a.tag.isSelfClosing=!!b;a.sawRoot=!0;a.tags.push(a.tag);x(a,"onopentag",a.tag);b||(!a.noscript&&a.tagName.toLowerCase()==="script"?a.state=u.SCRIPT:a.state=u.TEXT,a.tag=null,a.tagName="");a.attribName=a.attribValue="";a.attribList.length=0}function H(a){if(!a.tagName){C(a,"Weird empty close tag.");a.textNode+="</>";a.state=u.TEXT;return}if(a.script){if(a.tagName!=="script"){a.script+="</"+a.tagName+">";a.tagName="";a.state=u.SCRIPT;return}x(a,"onscript",a.script);a.script=""}var b=a.tags.length,c=a.tagName;a.strict||(c=c[a.looseCase]());var d=c;while(b--){var e=a.tags[b];if(e.name!==d)C(a,"Unexpected close tag");else break}if(b<0){C(a,"Unmatched closing tag: "+a.tagName);a.textNode+="</"+a.tagName+">";a.state=u.TEXT;return}a.tagName=c;e=a.tags.length;while(e-->b){var f=a.tag=a.tags.pop();a.tagName=a.tag.name;x(a,"onclosetag",a.tagName);d={};for(var g in f.ns)d[g]=f.ns[g];c=a.tags[a.tags.length-1]||a;a.opt.xmlns&&f.ns!==c.ns&&Object.keys(f.ns).forEach(function(b){var c=f.ns[b];x(a,"onclosenamespace",{prefix:b,uri:c})})}b===0&&(a.closedRoot=!0);a.tagName=a.attribValue=a.attribName="";a.attribList.length=0;a.state=u.TEXT}function I(a){var b=a.entity,c=b.toLowerCase(),d,e="";if(a.ENTITIES[b])return a.ENTITIES[b];if(a.ENTITIES[c])return a.ENTITIES[c];b=c;b.charAt(0)==="#"&&(b.charAt(1)==="x"?(b=b.slice(2),d=parseInt(b,16),e=d.toString(16)):(b=b.slice(1),d=parseInt(b,10),e=d.toString(10)));b=b.replace(/^0+/,"");if(isNaN(d)||e.toLowerCase()!==b){C(a,"Invalid character entity");return"&"+a.entity+";"}return String.fromCodePoint(d)}function J(a,b){b==="<"?(a.state=u.OPEN_WAKA,a.startTagPosition=a.position):p(b)||(C(a,"Non-whitespace before first tag."),a.textNode=b,a.state=u.TEXT)}function K(a,b){var c="";b<a.length&&(c=a.charAt(b));return c}function L(a){var b=this;if(this.error)throw this.error;if(b.closed)return A(b,"Cannot write after close. Assign an onready handler.");if(a===null)return B(b);typeof a==="object"&&(a=a.toString());var c=0,e="";while(!0){e=K(a,c++);b.c=e;if(!e)break;b.trackPosition&&(b.position++,e==="\n"?(b.line++,b.column=0):b.column++);switch(b.state){case u.BEGIN:b.state=u.BEGIN_WHITESPACE;if(e==="\ufeff")continue;J(b,e);continue;case u.BEGIN_WHITESPACE:J(b,e);continue;case u.TEXT:if(b.sawRoot&&!b.closedRoot){var f=c-1;while(e&&e!=="<"&&e!=="&")e=K(a,c++),e&&b.trackPosition&&(b.position++,e==="\n"?(b.line++,b.column=0):b.column++);b.textNode+=a.substring(f,c-1)}e==="<"&&!(b.sawRoot&&b.closedRoot&&!b.strict)?(b.state=u.OPEN_WAKA,b.startTagPosition=b.position):(!p(e)&&(!b.sawRoot||b.closedRoot)&&C(b,"Text data outside of root node."),e==="&"?b.state=u.TEXT_ENTITY:b.textNode+=e);continue;case u.SCRIPT:e==="<"?b.state=u.SCRIPT_ENDING:b.script+=e;continue;case u.SCRIPT_ENDING:e==="/"?b.state=u.CLOSE_TAG:(b.script+="<"+e,b.state=u.SCRIPT);continue;case u.OPEN_WAKA:if(e==="!")b.state=u.SGML_DECL,b.sgmlDecl="";else if(!p(e))if(s(l,e))b.state=u.OPEN_TAG,b.tagName=e;else if(e==="/")b.state=u.CLOSE_TAG,b.tagName="";else if(e==="?")b.state=u.PROC_INST,b.procInstName=b.procInstBody="";else{C(b,"Unencoded <");if(b.startTagPosition+1<b.position){f=b.position-b.startTagPosition;e=new Array(f).join(" ")+e}b.textNode+="<"+e;b.state=u.TEXT}continue;case u.SGML_DECL:(b.sgmlDecl+e).toUpperCase()===g?(x(b,"onopencdata"),b.state=u.CDATA,b.sgmlDecl="",b.cdata=""):b.sgmlDecl+e==="--"?(b.state=u.COMMENT,b.comment="",b.sgmlDecl=""):(b.sgmlDecl+e).toUpperCase()===h?(b.state=u.DOCTYPE,(b.doctype||b.sawRoot)&&C(b,"Inappropriately located doctype declaration"),b.doctype="",b.sgmlDecl=""):e===">"?(x(b,"onsgmldeclaration",b.sgmlDecl),b.sgmlDecl="",b.state=u.TEXT):q(e)?(b.state=u.SGML_DECL_QUOTED,b.sgmlDecl+=e):b.sgmlDecl+=e;continue;case u.SGML_DECL_QUOTED:e===b.q&&(b.state=u.SGML_DECL,b.q="");b.sgmlDecl+=e;continue;case u.DOCTYPE:e===">"?(b.state=u.TEXT,x(b,"ondoctype",b.doctype),b.doctype=!0):(b.doctype+=e,e==="["?b.state=u.DOCTYPE_DTD:q(e)&&(b.state=u.DOCTYPE_QUOTED,b.q=e));continue;case u.DOCTYPE_QUOTED:b.doctype+=e;e===b.q&&(b.q="",b.state=u.DOCTYPE);continue;case u.DOCTYPE_DTD:b.doctype+=e;e==="]"?b.state=u.DOCTYPE:q(e)&&(b.state=u.DOCTYPE_DTD_QUOTED,b.q=e);continue;case u.DOCTYPE_DTD_QUOTED:b.doctype+=e;e===b.q&&(b.state=u.DOCTYPE_DTD,b.q="");continue;case u.COMMENT:e==="-"?b.state=u.COMMENT_ENDING:b.comment+=e;continue;case u.COMMENT_ENDING:e==="-"?(b.state=u.COMMENT_ENDED,b.comment=z(b.opt,b.comment),b.comment&&x(b,"oncomment",b.comment),b.comment=""):(b.comment+="-"+e,b.state=u.COMMENT);continue;case u.COMMENT_ENDED:e!==">"?(C(b,"Malformed comment"),b.comment+="--"+e,b.state=u.COMMENT):b.state=u.TEXT;continue;case u.CDATA:e==="]"?b.state=u.CDATA_ENDING:b.cdata+=e;continue;case u.CDATA_ENDING:e==="]"?b.state=u.CDATA_ENDING_2:(b.cdata+="]"+e,b.state=u.CDATA);continue;case u.CDATA_ENDING_2:e===">"?(b.cdata&&x(b,"oncdata",b.cdata),x(b,"onclosecdata"),b.cdata="",b.state=u.TEXT):e==="]"?b.cdata+="]":(b.cdata+="]]"+e,b.state=u.CDATA);continue;case u.PROC_INST:e==="?"?b.state=u.PROC_INST_ENDING:p(e)?b.state=u.PROC_INST_BODY:b.procInstName+=e;continue;case u.PROC_INST_BODY:if(!b.procInstBody&&p(e))continue;else e==="?"?b.state=u.PROC_INST_ENDING:b.procInstBody+=e;continue;case u.PROC_INST_ENDING:e===">"?(x(b,"onprocessinginstruction",{name:b.procInstName,body:b.procInstBody}),b.procInstName=b.procInstBody="",b.state=u.TEXT):(b.procInstBody+="?"+e,b.state=u.PROC_INST_BODY);continue;case u.OPEN_TAG:s(m,e)?b.tagName+=e:(D(b),e===">"?G(b):e==="/"?b.state=u.OPEN_TAG_SLASH:(p(e)||C(b,"Invalid character in tag name"),b.state=u.ATTRIB));continue;case u.OPEN_TAG_SLASH:e===">"?(G(b,!0),H(b)):(C(b,"Forward-slash in opening tag not followed by >"),b.state=u.ATTRIB);continue;case u.ATTRIB:if(p(e))continue;else e===">"?G(b):e==="/"?b.state=u.OPEN_TAG_SLASH:s(l,e)?(b.attribName=e,b.attribValue="",b.state=u.ATTRIB_NAME):C(b,"Invalid attribute name");continue;case u.ATTRIB_NAME:e==="="?b.state=u.ATTRIB_VALUE:e===">"?(C(b,"Attribute without value"),b.attribValue=b.attribName,F(b),G(b)):p(e)?b.state=u.ATTRIB_NAME_SAW_WHITE:s(m,e)?b.attribName+=e:C(b,"Invalid attribute name");continue;case u.ATTRIB_NAME_SAW_WHITE:if(e==="=")b.state=u.ATTRIB_VALUE;else if(p(e))continue;else C(b,"Attribute without value"),b.tag.attributes[b.attribName]="",b.attribValue="",x(b,"onattribute",{name:b.attribName,value:""}),b.attribName="",e===">"?G(b):s(l,e)?(b.attribName=e,b.state=u.ATTRIB_NAME):(C(b,"Invalid attribute name"),b.state=u.ATTRIB);continue;case u.ATTRIB_VALUE:if(p(e))continue;else q(e)?(b.q=e,b.state=u.ATTRIB_VALUE_QUOTED):(C(b,"Unquoted attribute value"),b.state=u.ATTRIB_VALUE_UNQUOTED,b.attribValue=e);continue;case u.ATTRIB_VALUE_QUOTED:if(e!==b.q){e==="&"?b.state=u.ATTRIB_VALUE_ENTITY_Q:b.attribValue+=e;continue}F(b);b.q="";b.state=u.ATTRIB_VALUE_CLOSED;continue;case u.ATTRIB_VALUE_CLOSED:p(e)?b.state=u.ATTRIB:e===">"?G(b):e==="/"?b.state=u.OPEN_TAG_SLASH:s(l,e)?(C(b,"No whitespace between attributes"),b.attribName=e,b.attribValue="",b.state=u.ATTRIB_NAME):C(b,"Invalid attribute name");continue;case u.ATTRIB_VALUE_UNQUOTED:if(!r(e)){e==="&"?b.state=u.ATTRIB_VALUE_ENTITY_U:b.attribValue+=e;continue}F(b);e===">"?G(b):b.state=u.ATTRIB;continue;case u.CLOSE_TAG:if(!b.tagName)if(p(e))continue;else t(l,e)?b.script?(b.script+="</"+e,b.state=u.SCRIPT):C(b,"Invalid tagname in closing tag."):b.tagName=e;else e===">"?H(b):s(m,e)?b.tagName+=e:b.script?(b.script+="</"+b.tagName,b.tagName="",b.state=u.SCRIPT):(p(e)||C(b,"Invalid tagname in closing tag"),b.state=u.CLOSE_TAG_SAW_WHITE);continue;case u.CLOSE_TAG_SAW_WHITE:if(p(e))continue;e===">"?H(b):C(b,"Invalid characters in closing tag");continue;case u.TEXT_ENTITY:case u.ATTRIB_VALUE_ENTITY_Q:case u.ATTRIB_VALUE_ENTITY_U:var i,j;switch(b.state){case u.TEXT_ENTITY:i=u.TEXT;j="textNode";break;case u.ATTRIB_VALUE_ENTITY_Q:i=u.ATTRIB_VALUE_QUOTED;j="attribValue";break;case u.ATTRIB_VALUE_ENTITY_U:i=u.ATTRIB_VALUE_UNQUOTED;j="attribValue";break}e===";"?(b[j]+=I(b),b.entity="",b.state=i):s(b.entity.length?o:n,e)?b.entity+=e:(C(b,"Invalid character in entity name"),b[j]+="&"+b.entity+e,b.entity="",b.state=i);continue;default:throw new Error(b,"Unknown state: "+b.state)}}b.position>=b.bufferCheckPosition&&d(b);return b}String.fromCodePoint||(function(){var a=String.fromCharCode,b=Math.floor,c=function(){var c=16384,d=[],e,f,g=-1,h=arguments.length;if(!h)return"";var i="";while(++g<h){var j=Number(arguments[g]);if(!isFinite(j)||j<0||j>1114111||b(j)!==j)throw RangeError("Invalid code point: "+j);j<=65535?d.push(j):(j-=65536,e=(j>>10)+55296,f=j%1024+56320,d.push(e,f));(g+1===h||d.length>c)&&(i+=a.apply(null,d),d.length=0)}return i};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:c,configurable:!0,writable:!0}):String.fromCodePoint=c})()})(typeof g==="undefined"?this.sax={}:g)}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
__d("sax",["sax-1.2.4"],(function(a,b,c,d,e,f){e.exports=b("sax-1.2.4")()}),null);
__d("oz-player/shims/www/OzSaxWWW",["sax"],(function(a,b,c,d,e,f,g){g["default"]=c("sax")}),98);
__d("oz-player/shims/OzSax",["oz-player/shims/www/OzSaxWWW"],(function(a,b,c,d,e,f,g){g["default"]=c("oz-player/shims/www/OzSaxWWW")}),98);
__d("oz-player/parsers/OzXmlParserImplSax",["oz-player/shims/OzSax","oz-player/shims/ozvariant","oz-player/utils/OzError"],(function(a,b,c,d,e,f,g){function h(){return{$:{}}}a=function(){function a(){var a=this;this.$4=[];this.$5=function(a){throw a};this.$6=function(b){b=b.name;var d=h(),e=a.$3||a.$2;e||c("oz-player/shims/ozvariant")(0,219);Object.prototype.hasOwnProperty.call(e,b)||(e[b]=[]);e[b].push(d);a.$4.push(e);a.$3=d};this.$8=function(){var b=a.$4.pop();a.$3=b};this.$9=function(b){b=b;b=b.trim();if(!b)return;var d=a.$3;d||c("oz-player/shims/ozvariant")(0,220);d._&&c("oz-player/shims/ozvariant")(0,221);d._=b};this.$7=function(b){var d=b.name;b=b.value;var e=a.$3;e||c("oz-player/shims/ozvariant")(0,222);e.$[d]=b};var b=!0;b=this.$1=c("oz-player/shims/OzSax").parser(b);b.onerror=this.$5;b.onopentagstart=this.$6;b.onattribute=this.$7;b.onclosetag=this.$8;b.ontext=this.$9}var b=a.prototype;b.parse=function(a){var b=h();this.$2=b;try{this.$1.write(a).close()}catch(b){var d=2e3;throw new(c("oz-player/utils/OzError"))({type:"OZ_XML_PARSER",description:b.message+"; truncated xml ("+d+"/"+a.length+"): "+a.substring(0,d),extra:{originalError:b}})}this.$3=null;this.$2=null;this.$4=[];return b};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzClearSourceBufferOnSeekManager",["oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e){e===void 0&&(e=null),this.$3=new(c("oz-player/utils/OzErrorEmitter"))(),this.$4=new Map(),this.$5=!1,this.$6=!1,this.$7=!1,this.$8=null,this.$9=[],this.$10=null,this.$11=null,this.$1=a,this.$2=b,this.$4=d,this.$11=e}var b=a.prototype;b.$12=function(a){var b;this.$5=!0;return this.$2.getBool("clear_buffer_on_seek_into_unbuffered_range")?(b=this.$8)!=null?b:a.call(this.$1):a.call(this.$1)};b.$13=function(a,b){this.$6=!0,this.$2.getBool("clear_buffer_on_seek_into_unbuffered_range")?(this.$9.push({t:b}),this.$8=b,this.$9.length===1&&this.$14(a)):a.call(this.$1,b)};b.$15=function(a){this.$7=!0;return this.$2.getBool("clear_buffer_on_seek_into_unbuffered_range")?this.$8!=null?!0:a.call(this.$1):a.call(this.$1)};b.$16=function(a,b){var d=this,e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),f=[];this.$4.forEach(function(c,d){d=c.clearSourceBufferRange(a,b);f.push(d)});var g=c("oz-player/shims/OzMaybeNativePromise").all(f);g.then(function(){e.resolve()})["catch"](function(a){d.$2.getBool("throw_error_on_clear_buffer_on_seek_failed")?e.reject(a):e.resolve()});return e.getPromise()};b.$14=function(a){var b=this,d=this.$9.length>0?this.$9[0]:null,e=this.$2.getNumber("clear_buffer_on_seek_epsilon_s");if(d){var f=d.t;d=this.$1.buffered;var g=d.length,h=d.length<=0,i=-1,j=!1;for(var k=0;i<0&&k<g;++k)i=f-e>=d.start(k)&&f+e<d.end(k)?k:i,j=f<d.start(k)-e;k=i>-1;var l=this.$2.getNumber("clear_buffer_on_seek_nudge_s");k&&i>=0&&i<g&&l>0&&(f=Math.min(f,d.end(i)-l),f=Math.max(f,d.start(i)+l));if(h||k||!j)this.$11&&this.$11.getOperationLogger("seek_to_next_time").setLength(f).log(),a.call(this.$1,f),this.$9.shift(),this.$14(a);else{var m=null;this.$11&&(m=this.$11.getOperationLogger("clear_buffer_before_seek").setLength(f).start());i=this.$16(this.$2.getBool("throw_error_on_clear_buffer_on_seek_failed")?Math.max(f-e,0):f-e,d.end(g-1)+e);i.then(function(){m&&m.log(),b.$11&&b.$11.getOperationLogger("seek_to_next_time").setLength(f).log(),a.call(b.$1,f),b.$9.shift(),b.$14(a)})["catch"](function(a){m&&m.setError(a).log(),b.$3.emitError(a instanceof c("oz-player/utils/OzError")?a:new(c("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:a?a.name+": "+a.message:"Unknown error while clearing the buffer.",extra:{code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED,originalError:a}}))})}}else this.$8=null};b.maybeOverwriteVideoCurrentTimeProperty=function(){var a=this;if(this.$2.getBool("overwrite_video_current_time_property")){var b,c,d=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"currentTime");d=(b=d)!=null?b:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");b=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"seeking");b=(c=b)!=null?c:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"seeking");var e=d&&typeof d.get==="function"?d.get:null,f=d&&typeof d.set==="function"?d.set:null,g=b&&typeof b.get==="function"?b.get:null;if(e&&f&&g&&Object.defineProperty){try{Object.defineProperty(this.$1,"currentTime",{get:function(){return a.$12(e)},set:function(b){a.$13(f,b)},configurable:!0,enumerable:!0});Object.defineProperty(this.$1,"seeking",{get:function(){return a.$15(g)},configurable:!0,enumerable:!0});c=this.$1.currentTime;this.$1.currentTime=c;this.$1.seeking}catch(a){}this.$17(function(){a.getCurrentTimePropertyOverwriteSuccess()&&Object.defineProperty(a.$1,"currentTime",{get:e,set:f,configurable:!0,enumerable:!0}),a.getSeekingPropertyOverwriteSuccess()&&Object.defineProperty(a.$1,"seeking",{get:g,configurable:!0,enumerable:!0})})}}};b.getCurrentTimePropertyOverwriteSuccess=function(){return this.$5&&this.$6};b.getSeekingPropertyOverwriteSuccess=function(){return this.$7};b.$17=function(a){this.$10=a};b.onError=function(a){return this.$3.onError(a)};b.destroy=function(){try{this.$10&&this.$10()}catch(a){}};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzLiveLatencyManager",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$7=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$8=null;this.$10=!1;this.$11=null;this.$12=null;this.$13=null;this.$14=!0;var d=a.config,e=a.mpd,f=a.playbackState,g=a.bufferingDetector,h=a.video;a=a.loggerProvider;this.$1=d;this.$2=e;this.$3=f;g!=null&&(this.$7.addSubscriptions(g.addListener("enterBuffering",function(a){a=="in_play"&&(b.$8=0);b.$10=!1;(a=b.$6)==null?void 0:a.log();b.$6=null})),this.$7.addSubscriptions(g.addListener("leaveBuffering",function(){b.$8==0&&(b.$8=Date.now()),b.$10=!1})));this.$4=h;this.$5=a;this.$15()&&this.$7.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$4,"timeupdate",c("oz-player/shims/ozThrottle")(function(){b.$16()},this.$1.getNumber("playhead_manager_timeupdate_throttle_ms"))),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$4,"seeking",function(){b.$13=Date.now(),b.$11=null}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$4,"playing",function(){b.$13=Date.now(),b.$11=null}))}var b=a.prototype;b.enabled=function(){var a=this.$1.getNumber("catchup_timeout_after_buffering_sec");return a==0||this.$8==null||this.$8!=0&&this.$8+a*1e3<=Date.now()};b.isBehindPreferredLiveHeadLatencyWithTolerance=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()-this.getPreferredLiveHeadLatencyToleranceSec()};b.isBehindPreferredLiveHeadLatency=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()};b.$17=function(){return this.$2.getRefreshDate()==null&&this.$1.getBool("latencymanager_stalempd_edgelatency_sec_on")};b.getInitialPlayHeadPosition=function(){return this.$17()?this.getLiveHeadTimeSec()-this.$18(this.$1.getNumber("latencymanager_stalempd_edgelatency_sec")):this.getLiveHeadTimeSec()-this.getPreferredLiveHeadLatencySec()};b.getLiveHeadTimeSec=function(){var a=this.$19();return(a==null?void 0:(a=a.getEndingSegment())==null?void 0:a.getTimeRange().endTime)||0};b.$20=function(){return this.$8!=null&&this.$1.getBool("latencymanager_stalled_edgelatency_sec_on")};b.getPreferredLiveHeadLatencySec=function(){var a=this.$20()?this.$1.getNumber("latencymanager_stalled_edgelatency_sec"):this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec");return this.$18(a)};b.getPreferredLiveHeadLatencyToleranceSec=function(){return this.$1.getNumber("pdash_download_cursor_catchup_tolerance_sec")};b.shouldEnableManifestTimeRangeCatchup=function(){return!this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")};b.shouldEnableCursorBasedCatchup=function(){var a=this.$2.getVideoRepresentations()[0];a=a&&a.canPredict();return a&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")>0};b.setEnablePlaybackRateAdjustmentForSession=function(a){this.$14=a};b.$21=function(a,b,c){var d=this.$1.getNumber("playback_speed_min_sharpness_factor");c=a*2/(1+Math.pow(Math.E,-(c-b)*d));return 1-a+c};b.$15=function(){return this.$1.getNumber("playback_speed_latency_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate")>0};b.$16=function(){var a=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1),b=a.bufferAheadSec;a=a.bufferedOffset;var c=this.$1.getNumber("playback_speed_enabled_delay_sec"),e=this.$1.getNumber("playback_speed_min_buffer_sec");b>e&&(this.$10=!0);var f=this.$1.getNumber("playback_speed_min_duration_sec"),g=this.$1.getNumber("playback_speed_restore_min_duration_sec"),h=this.$1.getNumber("playback_speed_latency_adjustment_rate"),i=this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate"),j=this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate");if(this.$4.playbackRate==0){var k;this.$9=null;(k=this.$6)==null?void 0:k.log();this.$6=null}else if(this.$14&&this.$10&&b<e&&(h>0||i>0)&&a===0&&(c===0||this.$13!=null&&this.$13+c*1e3<Date.now())){k=i>0?1-i:this.$21(h,e,b);!this.$1.getBool("playback_speed_latency_adjustment_user_rate_disable")&&this.$9==null&&(this.$9=this.$4.playbackRate);this.$6==null&&this.$1.getBool("log_extra_events")&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("slow").setUserInfo({newPlaybackRate:String(k),oldPlaybackRate:String(this.$4.playbackRate)}));this.$4.playbackRate=k;this.$11=Date.now()}else if(this.$14&&this.$10&&this.isBehindPreferredLiveHeadLatency()&&j>0&&a===0&&(this.$12==null||this.$12+g*1e3<Date.now())&&(c==0||this.$13!=null&&this.$13+c*1e3<Date.now())){!this.$1.getBool("playback_speed_latency_adjustment_user_rate_disable")&&this.$9==null&&(this.$9=this.$4.playbackRate);i=1+j;this.$6==null&&this.$1.getBool("log_extra_events")&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("fast").setUserInfo({newPlaybackRate:String(i),oldPlaybackRate:String(this.$4.playbackRate)}));this.$4.playbackRate=i;this.$11=Date.now()}else if(this.$14==!1||this.$11==null||this.$11+f*1e3<Date.now()){this.$1.getBool("playback_speed_latency_adjustment_user_rate_disable")?this.$4.playbackRate=1:this.$9!=null&&(this.$4.playbackRate=this.$9,this.$9=null);(h=this.$6)==null?void 0:h.log();this.$6=null;this.$12=Date.now()}};b.$19=function(){var a=this.$2.getVideoRepresentations().concat(this.$2.getAudioRepresentations());return a.length===0?null:a.reduce(function(a,b){var c;return(((c=a.getEndingSegment())==null?void 0:c.getTimeRange().endTime)||0)>(((c=b.getEndingSegment())==null?void 0:c.getTimeRange().endTime)||0)?a:b})};b.$18=function(a){var b;if(a<=0)return a;var c=this.$19();b=c==null?void 0:(b=c.getEndingSegment())==null?void 0:b.getTimeRange();if(!b)return a;c=c==null?void 0:(c=c.getSegmentByTime((b==null?void 0:b.endTime)-a))==null?void 0:c.getTimeRange();return!c?a:(b==null?void 0:b.endTime)-(c==null?void 0:c.startTime)};b.destroy=function(){this.$7.release()};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzPlaybackTimeRangeManager",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$4=null;this.$5=0;this.$6=0;this.$7=!0;this.$8=0;this.$9=0;this.$10=!1;this.$12=0;this.$13=0;this.$15=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$17=function(){b.$10!=b.$14.isPlaying()&&(b.$14.isPlaying()&&(b.$11=Date.now()),b.$10=b.$14.isPlaying())};var d=a.video,e=a.config,f=a.mpd,g=a.liveheadFallBehindBlockThreshold,h=a.liveheadFallBehindBlockMargin,i=a.playbackState;a=a.perfLoggerProvider;this.$1=e;this.$2=d;this.$3=f;this.$8=g;this.$9=h;this.$14=i;this.$16=a;this.$1.getNumber("catchup_timeout_after_play_sec")!==0&&this.$15.addSubscriptions(this.$14.addEventListener("play",this.$17),this.$14.addEventListener("pause",this.$17))}var b=a.prototype;b.setTimelineBlockingEnabled=function(a){this.$7=a,this.$7||this.$3.unblockTimeRange()};b.setTimeRangeProvider=function(a){var b=this;this.$4!=null&&this.$4.remove();this.$4=a.addUpdateListener(function(){var c=a.getTimeRanges(),d=0;if(c.length!==0){c=c[c.length-1];d=c.endTime}b.$18(d)})};b.$18=function(a){var b;if(!this.$7)return;if(this.$5===a)return;this.$5=a;if(this.$2.currentTime<=this.$6)return;a=this.$1.getBool("catchup_use_timeline_range_end_time_as_end")?a:this.$2.duration;var c=this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold")!==0?this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold"):this.$8,e=this.$1.getNumber("overwrite_live_time_range_block_margin")!==0?this.$1.getNumber("overwrite_live_time_range_block_margin"):this.$9;this.$17();this.$1.getBool("reset_catchup_timeout_after_play_sec_on_overwrite")&&(this.$13!=e||this.$12!=c)&&(this.$13=e,this.$12=c,this.$11=Date.now());b=this.$1.getNumber("catchup_timeout_after_play_sec")===0||Date.now()-((b=this.$11)!=null?b:0)<this.$1.getNumber("catchup_timeout_after_play_sec")*1e3;if(b&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")===0&&e!==0&&c!==0&&a-this.$2.currentTime>c){b=[];for(var c=0;c<this.$2.buffered.length;c++)b.push({startTime:this.$2.buffered.start(c),endTime:this.$2.buffered.end(c)});c=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(this.$2.currentTime,b);this.$6=this.$2.currentTime+Math.min(c,e);b={startTime:this.$6,endTime:a-e};this.$1.getBool("log_extra_events")&&this.$16.getOperationLogger("latency_manager").setInitiator("time_range_manager").setReason("blocked_range").setLength(b.endTime-b.startTime).setUserInfo({blockedRangeStart:String(b.startTime),blockedRangeEnd:String(b.endTime)}).log();this.$3.blockTimeRange(b)}};b.destroy=function(){this.$4!=null&&(this.$4.remove(),this.$4=null),this.$15.release()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/LiveheadSeekaheadStrategy",[],(function(a,b,c,d,e,f){"use strict";var g=.05;function a(a,b){b=Math.max.apply(Math,b.map(function(a){return a.startTime}));return b-a>0?b-a+g:0}f.computeSeekAhead=a}),66);
__d("oz-player/utils/OzTimelineGapUtil",["oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=1.5;function a(a,b,c,e){b=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});return d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,a,b,e)===-1}function b(a,b,c,e,f){f===void 0&&(f=h);var g=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,a,g,e);if(c!==-1){g=b[c];return d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(a,g.endTime)&&g.endTime-a<f}return!1}g.isInGap=a;g.isNearGap=b}),98);
__d("oz-player/playback_controls/OzPlayheadManager",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/shims/ozvariant","oz-player/strategies/LiveheadSeekaheadStrategy","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzSourceBufferUtil","oz-player/utils/OzTimelineGapUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a){this.$1=a.perfLoggerProvider,this.$2=a.video,this.$4=a.config}var b=a.prototype;b.markState=function(a,b){var c=d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$2.buffered),e=this.$3;if(e==null){this.$3=c;return}var f=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(c,b.getCurrentTime(),this.$4);e=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(e,b.getCurrentTime(),this.$4);e.bufferedOffset!==-1&&f.bufferedOffset===-1&&this.$1.getOperationLogger("playhead_adjustment").setError("buffer_deleted").setResult("failed").setUserInfo({vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null}).setInitiator(a).log();this.$3=c};return a}(),i=function(){function a(a){this.$5=!1,this.$6={},this.$1=a.perfLoggerProvider,this.$2=a.video}var b=a.prototype;b.markState=function(a,b){var c=this;if(this.$2.paused){this.$3=null;this.$4=null;this.$5=!1;this.$6={};return}(this.$3==null||this.$2.currentTime>this.$3)&&(this.$4=Date.now(),this.$3=this.$2.currentTime,this.$5=!1,this.$6={});this.$6[a]=this.$6[a]==null?1:this.$6[a]+1;var d=this.$4;if(!this.$5&&!this.$2.paused&&d!=null&&d+1e4<Date.now()){this.$5=!0;var e={};Object.keys(this.$6).forEach(function(a){e[a]=String(c.$6[a])});this.$1.getOperationLogger("playhead_adjustment").setError("not_advancing").setResult("failed").setLength(Date.now()-d).setUserInfo(babelHelpers["extends"]({},e,b,{lastCurrentTime:String(this.$3),lastCurrentTimeChanged:String(d-Date.now()),vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null})).setInitiator(a).log()}};return a}();a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzPlayheadManager2=new(c("oz-player/shims/OzSubscriptionsHandler"))();d.$OzPlayheadManager3=new(c("oz-player/shims/OzSubscriptionsHandler"))();d.$OzPlayheadManager4=new Set();d.$OzPlayheadManager10=new Set();d.$OzPlayheadManager12=function(a){d.$OzPlayheadManager1.currentTime=a};d.$OzPlayheadManager14=!1;d.$OzPlayheadManager15=!1;d.$OzPlayheadManager16=!0;d.$OzPlayheadManager17=!1;var e=b.video,f=b.mpd,g=b.playheadCatchup,j=b.playbackState,k=b.config,l=b.perfLoggerProvider,m=b.seekHandler,n=b.initialPlaybackPosition,o=b.canSupportSkipVideobufferGaps,p=b.liveLatencyManager;b=b.dynamicVideoLibrary;d.$OzPlayheadManager1=e;d.$OzPlayheadManager6=k;d.$OzPlayheadManager7=j;d.$OzPlayheadManager8=f;d.$OzPlayheadManager9=g;d.$OzPlayheadManager11=l;m&&(d.$OzPlayheadManager12=m);d.$OzPlayheadManager17=o;d.$OzPlayheadManager20=p;d.$OzPlayheadManager13=n;d.$OzPlayheadManager21=b;d.$OzPlayheadManager6.getBool("log_extra_events")&&(d.$OzPlayheadManager18=new i({video:e,perfLoggerProvider:l}),d.$OzPlayheadManager19=new h({video:e,perfLoggerProvider:l,config:k}));d.$OzPlayheadManager2.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(d.$OzPlayheadManager1,"durationchange",function(){d.$OzPlayheadManager22("durationchange"),d.$OzPlayheadManager23("durationchange"),d.$OzPlayheadManager24("durationchange")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(d.$OzPlayheadManager1,"pause",function(){d.$OzPlayheadManager23("pause")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(d.$OzPlayheadManager1,"play",function(){d.$OzPlayheadManager23("play")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(d.$OzPlayheadManager1,"playing",function(){d.$OzPlayheadManager23("playing")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(d.$OzPlayheadManager1,"waiting",function(){d.$OzPlayheadManager6.getBool("playhead_manager_handle_time_range_update_on_waiting")?d.$OzPlayheadManager23("waiting"):d.$OzPlayheadManager23.bind(babelHelpers.assertThisInitialized(d),"waiting"),d.$OzPlayheadManager24("waiting")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(d.$OzPlayheadManager1,"timeupdate",c("oz-player/shims/ozThrottle")(function(){d.$OzPlayheadManager6.getBool("playhead_manager_handle_timerange_update_on_timeupdate")&&d.$OzPlayheadManager23("timeupdate"),(d.$OzPlayheadManager6.getBool("playhead_manager_handle_buffered_timerange_update_on_timeupdate")||d.$OzPlayheadManager6.getBool("playhead_manager_buffered_timerange_update_on_timeupdate"))&&d.$OzPlayheadManager24("timeupdate")},d.$OzPlayheadManager6.getNumber("playhead_manager_timeupdate_throttle_ms"))),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(d.$OzPlayheadManager1,"ratechange",function(){d.$OzPlayheadManager1.playbackRate===0&&d.$OzPlayheadManager6.getBool("handle_buffered_timerange_update_on_ratechange")&&d.$OzPlayheadManager24("ratechange")}));return d}var e=b.prototype;e.observeSourceBufferState=function(a,b){var d=this;this.$OzPlayheadManager4.has(a)&&c("oz-player/shims/ozvariant")(0,4179);this.$OzPlayheadManager4.add(a);this.$OzPlayheadManager2.addSubscriptions(a.addEventListener("buffer_updated",function(){d.$OzPlayheadManager25(a,b),d.$OzPlayheadManager6.getBool("overwrite_video_current_time_property")&&d.$OzPlayheadManager6.getBool("clear_buffer_on_seek_into_unbuffered_range")?d.$OzPlayheadManager6.getBool("skip_videobuffer_gaps_on_buffer_updated")&&d.$OzPlayheadManager17&&d.$OzPlayheadManager24("buffer_updated"):d.$OzPlayheadManager6.getBool("skip_videobuffer_gaps_on_buffer_updated")&&d.$OzPlayheadManager24("buffer_updated")}))};e.$OzPlayheadManager25=function(a,b){var c=[];if(this.$OzPlayheadManager6.getBool("check_buffer_range_once_for_playhead_update")&&this.$OzPlayheadManager10.has(a))return;this.$OzPlayheadManager4.forEach(function(a){a=a.getBufferedRanges();a.length&&c.push(a[0])});c.length>0&&this.$OzPlayheadManager10.add(a);a=this.$OzPlayheadManager6.getBool("seek_ahead_use_native_current_time")?this.$OzPlayheadManager1.currentTime:this.$OzPlayheadManager7.getCurrentTime();a=d("oz-player/strategies/LiveheadSeekaheadStrategy").computeSeekAhead(a,c);var e=this.$OzPlayheadManager6.getNumber("timeline_offset_threshold");a>0&&(e===0||a<e)&&this.$OzPlayheadManager26(this.$OzPlayheadManager1.currentTime+a,"first_available_buffer","source_buffer",b)};e.setTimeRangeProvider=function(a){var b=this;this.$OzPlayheadManager3.release();this.$OzPlayheadManager3.engage();this.$OzPlayheadManager3.addSubscriptions(a.addUpdateListener(function(){b.$OzPlayheadManager23("time_range_updated")}));this.$OzPlayheadManager5=a;this.$OzPlayheadManager23("time_range_set")};e.$OzPlayheadManager22=function(a){var b=this.$OzPlayheadManager1.duration;if(this.$OzPlayheadManager13!==0&&!this.$OzPlayheadManager15&&!isNaN(b)&&b!==Infinity){b=this.$OzPlayheadManager13>0?this.$OzPlayheadManager13:b+this.$OzPlayheadManager13;if(this.$OzPlayheadManager20!=null&&this.$OzPlayheadManager6.getBool("playhead_manager_initial_playback_position_lat_mgr")){var c;b=(c=this.$OzPlayheadManager20)==null?void 0:c.getInitialPlayHeadPosition()}this.$OzPlayheadManager15=!0;if(this.$OzPlayheadManager6.getBool("playhead_manager_clamp_initial_playback_position")){c=(c=this.$OzPlayheadManager5)==null?void 0:c.getTimeRanges();c!=null&&c.length>0&&c[0].startTime>b&&(b=c[0].startTime)}this.$OzPlayheadManager26(b,"initial_playback_position",a);this.emit("initialPlaybackPositionSet",b)}};e.$OzPlayheadManager23=function(a,b){b===void 0&&(b=null);if(this.$OzPlayheadManager20!=null?!this.$OzPlayheadManager20.shouldEnableManifestTimeRangeCatchup():!this.$OzPlayheadManager6.getBool("skip_timerange_gaps"))return;var c=this.$OzPlayheadManager9;if(c&&c.isEnabled(this.$OzPlayheadManager1,this.$OzPlayheadManager8)){c=c.computeNewPlayheadPosition(this.$OzPlayheadManager1,this.$OzPlayheadManager8);if(typeof c==="number"){this.$OzPlayheadManager26(c,"live_catch_up_strategy",a,b);return}}c=this.$OzPlayheadManager6.getNumber("auto_seek_playhead_slack");if(c===0)return;var e=this.$OzPlayheadManager5;if(!e)return;var f=this.$OzPlayheadManager7.getCurrentTime(),g=e.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),h=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(f,g);if((d("oz-player/utils/OzTimelineGapUtil").isNearGap(f,e.getTimeRanges(),this.$OzPlayheadManager6)||d("oz-player/utils/OzTimelineGapUtil").isInGap(f,e.getTimeRanges(),this.$OzPlayheadManager6))&&h!==-1){f=g[h];this.$OzPlayheadManager26(f.rangeStart+c,"jump_over_timeline_gap",a,b)}};e.$OzPlayheadManager24=function(a){var b;if(!this.$OzPlayheadManager6.getBool("skip_videobuffer_gaps"))return;if(this.$OzPlayheadManager6.getBool("overwrite_video_current_time_property")&&this.$OzPlayheadManager6.getBool("clear_buffer_on_seek_into_unbuffered_range")&&!this.$OzPlayheadManager17)return;var c=this.$OzPlayheadManager6.getNumber("playhead_manager_buffered_auto_seek_playhead_slack");if(c===0)return;var e=this.$OzPlayheadManager7.getCurrentTime(),f=[];for(var g=0;g<this.$OzPlayheadManager1.buffered.length;g++)f.push({startTime:this.$OzPlayheadManager1.buffered.start(g),endTime:this.$OzPlayheadManager1.buffered.end(g)});g=f.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});this.$OzPlayheadManager19&&this.$OzPlayheadManager6.getBool("log_extra_events")&&this.$OzPlayheadManager19.markState(a,this.$OzPlayheadManager7);var h=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(e,g),i=this.$OzPlayheadManager16?0:this.$OzPlayheadManager6.getNumber("skip_videobuffer_gaps_max_gap_size_sec"),j=this.$OzPlayheadManager6.getNumber("playhead_manager_buffered_is_near_gap_threshold"),k=this.$OzPlayheadManager6.getNumber("playhead_manager_buffered_numerical_error");b=(b=this.$OzPlayheadManager21)==null?void 0:b.getLastSegmentStartPTS();b=b!=null?b/1e3:null;if(b!=null&&b<e&&this.$OzPlayheadManager6.getBool("playhead_manager_buffer_gaps_skip_reverse")){var l=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager6,b,g);l=l>=0?g[l]:null;if(l!=null&&l.rangeStart<=b&&l.rangeEnd!=null&&l.rangeEnd>b){this.$OzPlayheadManager26(b,"reverse_jump_over_buffer_gap",a,null);return}}if((d("oz-player/utils/OzTimelineGapUtil").isNearGap(e,f,this.$OzPlayheadManager6,k,j)||d("oz-player/utils/OzTimelineGapUtil").isInGap(e,f,this.$OzPlayheadManager6,k))&&h!==-1&&(i===0||g[h].rangeStart-e<i)){l=g[h];this.$OzPlayheadManager26(l.rangeStart+c,"jump_over_buffer_gap",a,null);return}this.$OzPlayheadManager18&&this.$OzPlayheadManager6.getBool("log_extra_events")&&this.$OzPlayheadManager18.markState(a,{nextBufferedRangeIndex:String(h),limitMaxGapSize:String(i),rangeStart:h!==-1?String(g[h].rangeStart):null,isNearGapThreshold:String(j),numericalError:String(k)})};e.setEnableLiveheadCatchup=function(a){this.$OzPlayheadManager16=a};e.destroy=function(){this.$OzPlayheadManager2.release(),this.$OzPlayheadManager3.release(),this.$OzPlayheadManager4.clear()};e.$OzPlayheadManager26=function(a,b,c,d){if(this.$OzPlayheadManager6.getBool("skip_playhead_adjustment_before_initial_playback_position")&&(this.$OzPlayheadManager13!==0&&b!=="initial_playback_position"&&!this.$OzPlayheadManager14))return;var e=a-this.$OzPlayheadManager1.currentTime,f=this.$OzPlayheadManager6.getNumber("seek_ahead_epsilon");if(f>0&&(this.$OzPlayheadManager6.getBool("playhead_manager_buffer_gaps_skip_reverse")?Math.abs(e):e)<=f)return;this.$OzPlayheadManager11.getOperationLogger("playhead_adjustment").setLength(Math.round(e*1e3)).setReason(b).setInitiator(c).setType(d).log();this.$OzPlayheadManager12(a);b==="initial_playback_position"&&(this.$OzPlayheadManager14=!0)};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/playback_controls/OzPlayheadNudger",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$2=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$3=null;this.$6=function(){var a=b.$4.getNumber("playhead_nudge_slack");if(a===0)return;var c=b.$3;c!=null&&!b.$1.paused&&b.$1.readyState===4&&(b.$1.currentTime===c&&(b.$1.currentTime+=a,b.$4.getBool("log_extra_events")&&b.$5.getOperationLogger("playhead_adjustment").setInitiator("nudger").setLength(a).log()),b.$3=null)};this.$7=function(){b.$3=b.$1.currentTime};this.$8=function(){b.$3=null};var d=a.video,e=a.config;a=a.perfLoggerProvider;this.$1=d;this.$4=e;this.$5=a;this.$2.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"timeupdate",this.$6),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",this.$7),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",this.$8))}var b=a.prototype;b.destroy=function(){this.$2.release()};return a}();g["default"]=a}),98);
__d("oz-player/states/OzObservedPlaybackState",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle"],(function(a,b,c,d,e,f,g){"use strict";var h=150;a=function(){function a(a,b,e){var f=this;e===void 0&&(e=new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]));this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$8=function(){f.$6.getOperationLogger("pause").setState("paused").log()};this.$9=function(){f.$7(),f.$6.getOperationLogger("playing").setState("playing").log()};this.$7=function(){f.$3=f.$2.currentTime,f.$4=Date.now()};this.$1=a.getBool("always_use_current_time_in_playback_state");this.$2=b;this.$6=e;this.$3=this.$2.currentTime;this.$4=Date.now();this.$5.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"seeked",this.$7),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"seeking",this.$7),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"timeupdate",c("oz-player/shims/ozThrottle")(this.$7,h)),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"pause",this.$8),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"playing",this.$9))}var b=a.prototype;b.isPlaying=function(){return!this.$2.paused};b.getCurrentTime=function(){return this.$1?this.$2.currentTime:this.$3};b.getCurrentTimeUpdateTime=function(){return this.$4};b.forceUpdateCurrentTime=function(){this.$7()};b.getDuration=function(){return this.$2.duration};b.addEventListener=function(a,b){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,a,b)};b.destroy=function(){this.$5.release()};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzPositionToViewportUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){b=b.filter(function(a){a=a.position;if(a==null)return!1;var b=a.y-window.scrollY;return b>=0||(a.height+b)/a.height>c}).sort(function(a,b){return a.position==null||b.position==null?0:a.position.y-b.position.y});return b.findIndex(function(b){return b.video===a})}f.determinePositionIndexOfVideoFromViewportVertically=a}),66);
__d("oz-player/states/OzPositionToViewportTracker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzPositionToViewportUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=.5;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzPositionToViewportTracker1=[];c.$OzPositionToViewportTracker5=function(a){a.forEach(function(a){var b=c.$OzPositionToViewportTracker1.find(function(b){return a.target===b.video});b!=null&&(a.isIntersecting?b.position=c.$OzPositionToViewportTracker7(a):c.$OzPositionToViewportTracker1.map(function(b){a.target===b.video&&(b.position=null)}));c.$OzPositionToViewportTracker1.forEach(function(a){a.positionIndexToViewportVertically=c.$OzPositionToViewportTracker6(a.video)})}),c.emit("state_changed")};c.$OzPositionToViewportTracker2=b;return c}var c=b.prototype;c.$OzPositionToViewportTracker4=function(){if(this.$OzPositionToViewportTracker3!=null)return;this.$OzPositionToViewportTracker3=new IntersectionObserver(this.$OzPositionToViewportTracker5,{rootMargin:this.$OzPositionToViewportTracker2.getNumber("pixels_above_viewport_to_observe")+"px 0px "+this.$OzPositionToViewportTracker2.getNumber("pixels_below_viewport_to_observe")+"px 0px",threshold:0})};c.registerVideo=function(a){this.$OzPositionToViewportTracker1.push({video:a,position:null,positionIndexToViewportVertically:-1}),this.$OzPositionToViewportTracker4(),this.$OzPositionToViewportTracker3!=null&&this.$OzPositionToViewportTracker3.observe(a)};c.getPositionIndexOfVideoFromViewportVertically=function(a){var b=this.$OzPositionToViewportTracker1.find(function(b){return b.video===a});return b!=null?b.positionIndexToViewportVertically:-1};c.$OzPositionToViewportTracker6=function(a){return d("oz-player/utils/OzPositionToViewportUtils").determinePositionIndexOfVideoFromViewportVertically(a,this.$OzPositionToViewportTracker1,i)};c.$OzPositionToViewportTracker7=function(a){a=a.boundingClientRect;return{x:a.x+window.scrollX,y:a.y+window.scrollY,width:a.width,height:a.height}};b.getInstance=function(a){h==null&&(h=new b(a));return h};c.unregisterVideo=function(a){var b=this,c=[];this.$OzPositionToViewportTracker1.forEach(function(d){d.video===a&&b.$OzPositionToViewportTracker3!=null?b.$OzPositionToViewportTracker3.unobserve(a):c.push(d)});this.$OzPositionToViewportTracker1=c;this.$OzPositionToViewportTracker1.length===0&&this.$OzPositionToViewportTracker3!=null&&(this.$OzPositionToViewportTracker3.disconnect(),this.$OzPositionToViewportTracker3=null)};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/states/OzPositionToViewport",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzPositionToViewportTracker"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPositionToViewport1=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPositionToViewport3=b;e.$OzPositionToViewport2=c("oz-player/states/OzPositionToViewportTracker").getInstance(d);e.$OzPositionToViewport2.registerVideo(b);e.$OzPositionToViewport1.addSubscriptions(e.$OzPositionToViewport2.addListener("state_changed",function(){e.emit("state_changed")}));return e}var d=b.prototype;d.getPositionIndexOfVideoFromViewportVertically=function(){return this.$OzPositionToViewport3!=null?this.$OzPositionToViewport2.getPositionIndexOfVideoFromViewportVertically(this.$OzPositionToViewport3):-1};d.destroy=function(){this.$OzPositionToViewport3!=null&&this.$OzPositionToViewport2.unregisterVideo(this.$OzPositionToViewport3),this.$OzPositionToViewport3=null};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPlaybackConfidenceUtils",[],(function(a,b,c,d,e,f){"use strict";var g=.8;function a(a,b,c,d,e,f,i,j){c=Math.min(1,c/d);d=1+(1-c)*e;c=a.getBandwidth()*d;if(c>b)return g*(b/c);e=0;if(f!=null&&i!=null&&j>0){d=h(a,b,f,i);d!=null&&d>0&&(e=d/1e3*j)}return 1-(1-g)*c/b-e}function h(a,b,c,d){var e=a.getBandwidth();a=a.getSegment(0);if(a){a=a.getTimeRange();a=(a.endTime-a.startTime)*c;c=a*e/b*1e3+d;return c-a*1e3}}f.getPlaybackConfidence=a;f.getEstimatedDownloadTimeBufferDeltaMs=h}),66);
__d("oz-player/strategies/OzAbrManager",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzPlaybackConfidenceUtils","oz-player/utils/OzAbrUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzPlaybackRestrictionsUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h){this.$2=0,this.$3=Date.now(),this.$4=!1,this.$10=null,this.$1=a,this.$5=b,this.$6=this.$14(b,c),this.$7=d,this.$8=e,this.$11=f,this.$12=g,this.$13=h}var b=a.prototype;b.setSourceBuffer=function(a){this.$9=a};b.$14=function(a,b){var c=this.$1.getNumber("abr_restrict_from_index"),d=this.$1.getNumber("abr_restrict_to_index");if(d===0&&c===0)return b;var e=b.findIndex(function(b){return a.getID()===b.getID()});return e===-1?b:b.filter(function(a,b){return b-e>=c&&b-e<=d})};b.$15=function(a){a=d("oz-player/utils/OzAbrUtils").excludeLargeRepresentations(this.$1,a,this.$12(),this.$11);a=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$1,this.$7,this.$12(),a);return a};b.getBestRepresentation=function(a){a=(a=a==null?void 0:a.length)!=null?a:null;var b=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromPlaybackStates(this.$9,this.$8),e=d("oz-player/utils/OzAbrUtils").getReasonToPreventEvaluation(this.$1,this.$4,b,c("oz-player/networks/OzBandwidthEstimator").getSampleCount(),this.$2,this.$3);if(e!==null&&e!==void 0){this.$10=e;return this.$5}e=Date.now();this.$2=e;var f=c("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1.getLegacyConfig()),g=this.$15(this.$6),h=null;this.$1.getBool("abr_use_download_time")&&a!=null?h=this.$16(g,f,a)||this.$17(g,f,b,a):h=this.$17(g,f,b,a);f=g[0];h=h||f;if(this.$18(b,h)){this.$10="high_buffer";return this.$5}this.$5!==h&&(this.$4=!0,this.$3=e,this.$5=h);this.$10="bandwidth";return h};b.$17=function(a,b,e,f){f===void 0&&(f=null);var g=null;for(var h=0;h<a.length;h++){var i=d("oz-player/strategies/OzPlaybackConfidenceUtils").getPlaybackConfidence(a[h],b,e,this.$1.getNumber("low_buffer_bandwidth_target_threshold"),this.$1.getNumber("low_buffer_bandwidth_target_increase_factor"),f,c("oz-player/networks/OzBandwidthEstimator").getEstimatedTimeToFirstByteMs(this.$1.getLegacyConfig()),this.$1.getNumber("download_time_buffer_delta_penalty_factor"));i>this.$1.getNumber("abr_confidence_threshold")&&(!g||g.getBandwidth()<a[h].getBandwidth())&&(g=a[h])}return g};b.$16=function(a,b,e){for(var f=a.length-1;f>=0;f--){var g=d("oz-player/strategies/OzPlaybackConfidenceUtils").getEstimatedDownloadTimeBufferDeltaMs(a[f],b,e,c("oz-player/networks/OzBandwidthEstimator").getEstimatedTimeToFirstByteMs(this.$1.getLegacyConfig())||0);if(g!=null&&g+this.$1.getNumber("minimum_download_additional_buffer_ms")<0)return a[f]}return null};b.$18=function(a,b){var c=this.$1.getNumber("abr_prevent_down_switch_buffer_threshold");return c>0&&a>=c&&this.$5.getBandwidth()>b.getBandwidth()?!0:!1};b.getLastEvaluationReason=function(){return this.$10};b.updateRepresentations=function(a){var b=this;this.$6=a;a=this.$6.find(function(a){return a.getQualityLabel()===b.$5.getQualityLabel()});this.$5=(a=a)!=null?a:this.$6[0]};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzAudioIBRManager",["oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getInitialAudioRepresentation=function(a){var b=c("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1.getLegacyConfig());a=a.slice(0);a.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});var d=this.$1.getNumber("live_audio_ibr_bandwidth_percentage");d=b*d;for(var e=a.length-1;e>=0;e--)if(a[e].getBandwidth()<=d){this.$2.getOperationLogger("audio_ibr_success").setRepresentationID(a[e].getID()).setReason(b.toString()).log();return a[e]}this.$2.getOperationLogger("audio_ibr_no_op").setReason(b.toString()).log();return null};return a}();g["default"]=a}),98);
__d("oz-player/strategies/getSegmentsCount",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){var e=0,f=a.getTimeRange().startTime;a=a;var g=a.getTimeRange().startTime;while(a!==null&&g<c+f){var h=g;e++;a=b.getSegmentAfter(a);if(a)g=a.getTimeRange().startTime;else break;if(g<=h)return d}return Math.max(e,1)}f["default"]=a}),66);
__d("oz-player/strategies/OzStaticStreamSegmentsStrategy",["oz-player/strategies/getSegmentsCount"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!0};b.getSegmentsCount=function(a,b,d){a=this.$1.getNumber("seconds_to_stream");var e=this.$1.getNumber("segments_to_stream");a>0&&(e=c("oz-player/strategies/getSegmentsCount")(b,d,a,e));return e};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/getSegmentsCount"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b,this.$3=new(c("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(a)}var b=a.prototype;b.isActive=function(a){return!0};b.getSegmentsCount=function(a,b,d){var e=c("oz-player/networks/OzBandwidthEstimator").getBandwidth(this.$1.getLegacyConfig()),f=c("oz-player/networks/OzBandwidthEstimator").getStandardDeviationOfBandwidth(),g=this.$1.getNumber("bandwidth_boundary_standard_deviation_factor"),h=this.$2.some(function(a){a=a.getBandwidth();return Math.abs(a-e)<f*g});h=h?this.$4(a,b,d):this.$3.getSegmentsCount(a,b,d);a=this.$5(b,e);return Math.min(h,a)};b.$4=function(a,b,d){a=this.$1.getNumber("seconds_to_stream_near_bandwidth_boundary");var e=this.$1.getNumber("segments_to_stream_near_bandwidth_boundary");a>0&&(e=c("oz-player/strategies/getSegmentsCount")(b,d,a,e));return e};b.$5=function(a,b){var c=Infinity;a=a.getByteRange();if(a){var d=a.endByte;if(d!==null&&d!==void 0){var e=this.$1.getNumber("per_stream_duration_target");d=d-a.startByte;e>1e-5&&d!==0&&(c=Math.ceil(e*b/(d*8)))}}return c};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBlockedRepresentationsManager",["oz-player/shims/OzEventEmitter","oz-player/utils/OzError"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$1=new Set();this.$2=new Set();this.$3=new(c("oz-player/shims/OzEventEmitter"))();try{a=JSON.parse(a.getString("block_representation_status_codes_json"));Array.isArray(a)&&a.forEach(function(a){var c=parseInt(a,10);isNaN(c)||b.$1.add(a)})}catch(a){this.$1=new Set()}}var b=a.prototype;b.isBlocked=function(a){return this.$2.has(a)};b.handleError=function(a,b){if(b instanceof c("oz-player/utils/OzError")&&b.getType()==="OZ_NETWORK"){b=Number(b.getExtra().code);if(!isNaN(b)&&this.$1.has(b)){if(!this.$2.has(a)){this.$2.add(a);(b=this.$3)==null?void 0:b.emit("representation_blocked",a)}return!0}}return!1};b.applyRestriction=function(a,b){var c=this;return a.filter(function(a){return!c.$2.has(a.getID())})};b.onRepresentationBlocked=function(a){return this.$3?this.$3.addListener("representation_blocked",a):{remove:function(){}}};b.destroy=function(){var a;(a=this.$3)==null?void 0:a.removeAllListeners();this.$3=null};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBufferAheadPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=6,i=1e3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzBufferAheadPriorityStrategy3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzBufferAheadPriorityStrategy5=function(){e.emit("state_changed")};e.$OzBufferAheadPriorityStrategy4=b;e.$OzBufferAheadPriorityStrategy1=d;e.$OzBufferAheadPriorityStrategy3.addSubscriptions(e.$OzBufferAheadPriorityStrategy1.addEventListener("progress",c("oz-player/shims/ozThrottle")(e.$OzBufferAheadPriorityStrategy5,i)),e.$OzBufferAheadPriorityStrategy1.addEventListener("timeupdate",c("oz-player/shims/ozThrottle")(e.$OzBufferAheadPriorityStrategy5,i)));return e}var e=b.prototype;e.getName=function(){return"buffer_ahead"};e.setSourceBufferState=function(a){if(this.$OzBufferAheadPriorityStrategy2)return;this.$OzBufferAheadPriorityStrategy4.getBool("fix_buffer_ahead_priority_strategy")&&(this.$OzBufferAheadPriorityStrategy2=a);this.$OzBufferAheadPriorityStrategy3.addSubscriptions(a.addEventListener("buffer_updated",c("oz-player/shims/ozThrottle")(this.$OzBufferAheadPriorityStrategy5,i)))};e.isActive=function(){return!0};e.getPriority=function(){var a=this.$OzBufferAheadPriorityStrategy2;if(!a)return 1;var b=this.$OzBufferAheadPriorityStrategy1.getCurrentTime();a=a.getBufferedRanges();b=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(b,a);return b>=h?0:1};e.destroy=function(){this.$OzBufferAheadPriorityStrategy3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzBufferAheadTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!0};b.getBufferTarget=function(){return this.$1.getNumber("buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferEndLimitStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(){return!0};b.getBufferTarget=function(){var a=this.$3();return this.$2>=a?this.$2-a:0};b.$3=function(){return this.$1.buffered.length===0?0:this.$1.buffered.end(0)};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(a){return!a.isPlaying()};b.getSegmentsCount=function(a,b,c){a=a.getCurrentTime();var d=this.$1.computeBufferTarget(),e=1,f=b;b=b.getTimeRange().startTime;while(f!==null&&b<d+a){f=c.getSegmentAfter(f);if(!f)break;b=f.getTimeRange().startTime;e++}return e};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetCalculator",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=0,this.$2=a,this.$3=b}var b=a.prototype;b.computeBufferTarget=function(){var a=this.$1;for(var b=this.$2,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(e.isActive()){a=e.getBufferTarget();break}}for(var e=this.$3,d=Array.isArray(e),c=0,e=d?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(d){if(c>=e.length)break;b=e[c++]}else{c=e.next();if(c.done)break;b=c.value}b=b;a=b.adjustBufferTargetInSeconds(a)}this.$1=a;return a};b.handleEvent=function(a){for(var b=this.$3,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.handleEvent(a)}};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$2=1,this.$1=a}var b=a.prototype;b.adjustBufferTargetInSeconds=function(a){a=a;this.$1.getBool("append_retry_quota_exceeded_error")&&(a=Math.max(this.$1.getNumber("buffer_target_constraint_minimum_sec"),a*this.$2));return a};b.handleEvent=function(a){var b=this.$2;switch(a){case"append_succeeded":b=Math.max(0,Math.min(1,b+this.$1.getNumber("buffer_target_constraint_append_succeeded_reward")));break;case"append_quota_exceeded":b=Math.max(0,Math.min(1,b-this.$1.getNumber("buffer_target_constraint_quota_exceeded_penalty")));break;default:a}this.$2=b};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzLiveheadDeltaCatchupStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isEnabled=function(a,b){return(!this.$1.getBool("live_catch_up_only_when_paused")||a.paused)&&typeof b.getMinimumUpdatePeriod()==="number"};b.computeNewPlayheadPosition=function(a,b){a=a.currentTime;b=b.getVideoRepresentations()[0];if(!b)return null;b=b.getTimeRanges();if(b.length===0)return null;b=b[b.length-1].endTime;return b-a>this.$1.getNumber("live_catch_up_fall_behind_threshold")?b-this.$1.getNumber("live_catch_up_live_head_delta"):null};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzPausedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(){return!this.$1.isPlaying()};b.getSegmentsCount=function(a,b,c){return this.$2.getNumber("paused_stream_segments_count")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzPlayheadAtInterruptionDetector",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h=1;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPlayheadAtInterruptionDetector2=null;e.$OzPlayheadAtInterruptionDetector3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadAtInterruptionDetector4=null;e.$OzPlayheadAtInterruptionDetector1=b;b=d?d.addListener("enterBuffering",function(){e.$OzPlayheadAtInterruptionDetector5()}):c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadAtInterruptionDetector1,"waiting",function(){e.$OzPlayheadAtInterruptionDetector5()});e.$OzPlayheadAtInterruptionDetector3.addSubscriptions(b);e.$OzPlayheadAtInterruptionDetector4=d;return e}var d=b.prototype;d.notifyStreamInterrupted=function(a){this.$OzPlayheadAtInterruptionDetector2=a,this.$OzPlayheadAtInterruptionDetector5()};d.notifyStreamResumed=function(){this.$OzPlayheadAtInterruptionDetector2=null};d.$OzPlayheadAtInterruptionDetector5=function(){if(this.$OzPlayheadAtInterruptionDetector2!=null){var a=this.$OzPlayheadAtInterruptionDetector2||0;Math.abs(this.$OzPlayheadAtInterruptionDetector1.currentTime-a)<h&&this.emit("playheadAtInterruption",a)}};d.destroy=function(){this.$OzPlayheadAtInterruptionDetector3.release(),this.$OzPlayheadAtInterruptionDetector4=null};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPlayingStatePriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzPlayingStatePriorityStrategy1=new(c("oz-player/shims/OzSubscriptionsHandler"))();d.$OzPlayingStatePriorityStrategy3=function(){d.emit("state_changed")};d.$OzPlayingStatePriorityStrategy2=b;d.$OzPlayingStatePriorityStrategy1.addSubscriptions(d.$OzPlayingStatePriorityStrategy2.addEventListener("playing",d.$OzPlayingStatePriorityStrategy3),d.$OzPlayingStatePriorityStrategy2.addEventListener("play",d.$OzPlayingStatePriorityStrategy3),d.$OzPlayingStatePriorityStrategy2.addEventListener("pause",d.$OzPlayingStatePriorityStrategy3));return d}var d=b.prototype;d.isActive=function(){return!0};d.getName=function(){return"playing_state"};d.setSourceBufferState=function(a){};d.getPriority=function(){return this.$OzPlayingStatePriorityStrategy2.isPlaying()?1:0};d.destroy=function(){this.$OzPlayingStatePriorityStrategy1.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPositionToViewportPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPositionToViewportPriorityStrategy3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPositionToViewportPriorityStrategy4=function(){e.emit("state_changed")};e.$OzPositionToViewportPriorityStrategy2=b;e.$OzPositionToViewportPriorityStrategy1=d;e.$OzPositionToViewportPriorityStrategy3.addSubscriptions(b.addListener("state_changed",e.$OzPositionToViewportPriorityStrategy4));return e}var d=b.prototype;d.isActive=function(){return!0};d.getName=function(){return"position_to_viewport"};d.setSourceBufferState=function(a){};d.getPriority=function(){var a=this.$OzPositionToViewportPriorityStrategy1.getNumber("prioritize_by_viewport_static_penalty"),b=this.$OzPositionToViewportPriorityStrategy2.getPositionIndexOfVideoFromViewportVertically();return a>0?b===-1?a*-1:0:b===-1?-Infinity:-1*b};d.destroy=function(){this.$OzPositionToViewportPriorityStrategy3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPriorityCalculator",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzPriorityCalculator2=new(c("oz-player/shims/OzSubscriptionsHandler"))();d.$OzPriorityCalculator1=b;(b=d.$OzPriorityCalculator2).addSubscriptions.apply(b,d.$OzPriorityCalculator1.map(function(a){return a.addListener("state_changed",function(){d.emit("state_changed",d.compute(),a.getName())})}));return d}var d=b.prototype;d.setSourceBufferState=function(a){this.$OzPriorityCalculator1.forEach(function(b){return b.setSourceBufferState(a)}),this.emit("state_changed",this.compute(),"source_buffer")};d.compute=function(){var a=this.$OzPriorityCalculator1.reduce(function(a,b){b=b.isActive()?b.getPriority():0;return a+b},0);return Math.max(a,0)};d.destroy=function(){this.$OzPriorityCalculator2.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzStaleManifestBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=b,this.$2=a}var b=a.prototype;b.isActive=function(){return this.$2.getRefreshDate()==null&&this.$1.getNumber("stale_mpd_buffer_ahead_target")>0};b.getBufferTarget=function(){return this.$1.getNumber("stale_mpd_buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzStartupBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$3=b}var b=a.prototype;b.isActive=function(){var a=this.$1.isPlaying();a&&(this.$2=!0);return!this.$2};b.getBufferTarget=function(){return this.$3.getNumber("pre_start_buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzStreamSegmentsCountCalculator",[],(function(a,b,c,d,e,f){"use strict";var g=1;a=function(){function a(a){this.$1=a}var b=a.prototype;b.computeMin=function(a,b,c){var d=Number.MAX_VALUE;for(var e=this.$1,f=Array.isArray(e),h=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;i.isActive(a)&&(d=Math.min(d,i.getSegmentsCount(a,b,c)))}return d===Number.MAX_VALUE?g:Math.max(d,g)};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzSupportedMimeCodecsRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.applyRestriction=function(a,b){return a.filter(function(a){a=MediaSource.isTypeSupported(a.getMimeCodecs());return!!a})};return a}();f["default"]=a}),66);
__d("oz-player/streams/OzEndOfStreamWatcher",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$OzEndOfStreamWatcher1=new Map();d.$OzEndOfStreamWatcher2=b;d.$OzEndOfStreamWatcher3=c;return d}var d=b.prototype;d.registerMediaStream=function(a){this.$OzEndOfStreamWatcher1.has(a)&&c("oz-player/shims/ozvariant")(0,5191),this.$OzEndOfStreamWatcher1.set(a,!1)};d.notifyRepresentationSwitched=function(a){this.$OzEndOfStreamWatcher1.has(a)||c("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher4(function(a){return a.setInitiator("end_of_stream_watcher").setReason("representation_switched")})};d.notifyMediaStreamEnded=function(a){this.$OzEndOfStreamWatcher1.has(a)||c("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher1.set(a,!0),this.$OzEndOfStreamWatcher4(function(a){return a.setInitiator("end_of_stream_watcher").setReason("media_stream_ended")})};d.$OzEndOfStreamWatcher4=function(a){var b=this,c=this.$OzEndOfStreamWatcher2.getMediaSource();(this.$OzEndOfStreamWatcher3.getBool("allow_queueing_end_of_stream_when_update")||c.readyState==="open")&&this.$OzEndOfStreamWatcher5()&&(this.$OzEndOfStreamWatcher3.getBool("delay_stream_end_for_sourceended")?this.$OzEndOfStreamWatcher2.notifyEndOfStream(a).then(function(){b.emit("streamEnd")})["catch"](function(){b.emit("streamEnd")}):(this.$OzEndOfStreamWatcher2.notifyEndOfStream(a),this.emit("streamEnd")))};d.$OzEndOfStreamWatcher5=function(){if(this.$OzEndOfStreamWatcher1.size===0)return!1;for(var a=this.$OzEndOfStreamWatcher1.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(!d)return!1}return!0};d.destroy=function(){this.$OzEndOfStreamWatcher1.clear()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/streams/OzHandleUserRepresentationSwitch",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f){var g=this;this.$2=new(c("oz-player/utils/OzErrorEmitter"))();this.$5=null;this.$6=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$1=a;this.$3=b;this.$4=d;this.$7=e;f.then(function(a){g.$5=a});this.$6.addSubscriptions(e.addListener("switchRepresentation",function(a,b){g.$8(a,b)}))}var b=a.prototype;b.cleanup=function(){this.$6.release(),this.$6.engage()};b.onError=function(a){return this.$2.onError(a)};b.$8=function(a,b){var d=this;if(a!=="user")return;a=this.$5;if(a==null)return;var e=this.$7.getRepresentationIDAtTime(this.$3.getCurrentTime()),f;for(var g=0;g<this.$4.length;g++)this.$4[g].getID()===e&&(f=this.$4[g]);if(f&&b&&(this.$1.getBool("enable_immediate_down_switch")||f.getBandwidth()<b.getBandwidth())){e=f.getSegmentByTime(this.$3.getCurrentTime());e&&(this.$1.getBool("async_clear_on_quality_upgrade")?a.clearRangeWithWait(this.$3.getCurrentTime(),this.$3.getDuration())["catch"](function(a){d.$2.emitError(a instanceof c("oz-player/utils/OzError")?a:new(c("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:"failed to clear range: "+a.name+"; "+a.message+"; "+a.description+";",extra:{code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED,originalError:a}}))}):a.clearRange(this.$3.getCurrentTime(),this.$3.getDuration()))}};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzReadableStreamDataReader",["oz-player/networks/OzTransformStream","oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzReadableStreamDataReader1=[];c.$OzReadableStreamDataReader2=b;return c}var d=b.prototype;d.onDataWritten=function(a){this.$OzReadableStreamDataReader1.push(a)};d.onClose=function(){var a=this.$OzReadableStreamDataReader1,b=c("oz-player/utils/ozConcatUint8Arrays")(a);b=b.buffer;a.length=0;this.$OzReadableStreamDataReader2(b)};return b}(c("oz-player/networks/OzTransformStream"));g["default"]=a}),98);
__d("oz-player/networks/OzStreamingTask",["Promise","oz-player/loggings/OzLoggingUtils","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/utils/OzError","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$3=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),this.$5=!1,this.$9=null,this.$1=this.$2=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),this.$6=c("oz-player/shims/OzPerformance").now(),this.$7=b,this.$8=a,this.$9=d}var e=a.prototype;e.run=function(){var a=this.$3.getPromise(),b=this.$7;if(b){var e=c("oz-player/shims/OzPerformance").now()-this.$6;d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,b,"streaming_task",function(){},function(a){a.setTimeToRequestSent(Math.floor(e))})["catch"](function(){})}this.$2.resolve();return a};e.cancel=function(){this.$3.getPromise()["catch"](function(){}),this.$3.reject(new(c("oz-player/utils/OzError"))({type:"OZ_STREAMING_TASK",description:"task cancelled",extra:{code:"OZ_ST-1"}})),this.$5=!0};e.finish=function(){this.$3.resolve()};e.isCancelled=function(){return this.$5};e.addStream=function(a,d,e){var f=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$10({pausableStreamPromise:b("Promise").resolve({pausableStream:a,loggingPayloads:e}),changeStatusDeferred:f,createStreamDeferred:new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),loggerProviderWithStreamContext:d,loggingPayloads:e});return{getStream:function(){return a.getStream()},cancel:function(){return a.pauseStream()},getStatusChangePromise:function(){return f.getPromise()}}};e.addStreamDeferred=function(a,b){var d=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$10({pausableStreamPromise:a,changeStatusDeferred:d,createStreamDeferred:e,loggerProviderWithStreamContext:b});b=function(){return e.getPromise()};return{genStream:b,cancel:function(){a&&a.then(function(a){a=a.pausableStream;return a.pauseStream()})},getStatusChangePromise:function(){return d.getPromise()}}};e.$10=function(a){var b=this,e=a.pausableStreamPromise,f=a.changeStatusDeferred,g=a.createStreamDeferred,h=a.loggerProviderWithStreamContext,i=a.loggingPayloads;a=this.$1.getPromise();var j=c("oz-player/shims/OzPerformance").now(),k=this.$1=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));a.then(function(){return e}).then(function(a){if(a){var e=a.pausableStream;a.loggingPayloads&&(i=a.loggingPayloads);g.resolve(e.getStream());b.$4=e;var f=c("oz-player/shims/OzPerformance").now();a=b.$11(e.startStream());h&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,h,"fetch_stream",function(){},function(a){if(i){d("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(a,i.getRequestUrl(),i.isPrefetch(),i.segments,f-j,e.getBytesStreamed(),i.getResponse());var c=b.$9;c&&c(a,i.getRequestUrl(),i.getResponse())}});return a}return null}).then(function(a){b.$4=null,k.resolve(),f.resolve(a||"cancelled")})["catch"](function(a){b.$4=null,b.$3.reject(a),b.$8.getBool("streaming_task_reject_current_stream_deferred")&&k.reject(a),f.reject(a)})};e.$11=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){return a==="stream_done"?"done":"error"})})};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzStreamingTaskStateManager",["Promise","oz-player/networks/OzStreamingTask","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=0;this.$9=!1;this.$10=null;var e=a.mimeType,f=a.priorityCalculator,g=a.loggerProvider,h=a.setCustomFetchStreamLoggingAttributes;a=a.config;this.$5=e;this.$1=f;this.$6=d("oz-player/networks/OzStreamingTaskQueueProvider").getQueue(this.$5);this.$7=g;this.$8=a;this.$10=h;this.$3.addSubscriptions(this.$1.addListener("state_changed",function(a,c){b.$11(a,c),b.$2&&b.$6.updatePriority(b.$2,b.$4)}))}var e=a.prototype;e.startStream=function(a){var b=a.streamableSegments,c=a.networkManager;a=a.segmentsLoggerProvider;var d=this.$12(a),e=this.$13();c=c.createPausableStream(b,e,a);b=c.pausableStream;e=c.loggingPayloads;this.$9=!0;c=d.addStream(b,a,e);d={getStream:c.getStream,cancel:c.cancel,getStatusChangePromise:this.$14(c.getStatusChangePromise)};return d};e.$13=function(){var a=[];a.push(c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$5));return a};e.startStreamDeferred=function(a){var b=a.segmentsPromise,d=a.networkManager,e=a.segmentsLoggerProvider;a=this.$12(e);var f=this.$13(),g=new(c("oz-player/shims/OzMaybeNativePromise"))(function(a,c){b.then(function(b){b.length>0?a(d.createPausableStream(b,f,e)):a(null)})["catch"](function(a){return c(a)})});this.$9=!0;a=a.addStreamDeferred(g,e);g={genStream:a.genStream,cancel:a.cancel,getStatusChangePromise:this.$14(a.getStatusChangePromise)};return g};e.$12=function(a){var b=this.$2;this.$11(this.$1.compute(),"start_stream");!b||b.isCancelled()?(b=this.$2=new(c("oz-player/networks/OzStreamingTask"))(this.$8,a,this.$10),this.$6.enqueue(b,this.$4)["catch"](function(){})):this.$6.updatePriority(b,this.$4);return b};e.$14=function(a){var c=this;return function(){return a().then(function(a){c.$15();return a})["catch"](function(a){c.$15();return b("Promise").reject(a)})}};e.finishTaskIfNoOngoingStream=function(){this.$9||this.$16()};e.destroy=function(){this.$3.release();var a=this.$2;this.$2=null;a&&this.$6.remove(a)};e.$15=function(){this.$9=!1,this.$11(this.$1.compute(),"end_stream"),this.$4<d("oz-player/networks/OzStreamingTaskQueueProvider").OZ_QUEUE_MAX_PRIORITY&&this.$16()};e.$16=function(){this.$2&&(this.$2.finish(),this.$2=null)};e.$11=function(a,b){if(a===this.$4)return;this.$4=a;this.$7&&this.$7.getOperationLogger("priority_changed").setPriorityFloat(this.$4).setInitiator(b).log()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzStreamLengthStrategy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d,e){b=b;e=e;var f=a.getNumber("segments_to_stream_under_playhead_threshold");a=a.getNumber("low_segment_stream_playhead_threshold");f>0&&d.getCurrentTime()<a&&(b=f);d=[];d.push(e);for(var a=1;a<b;a++){f=c.getSegmentAfter(e);if(!f)break;e=f;d.push(e)}return d}f.getStreamingSegments=a}),66);
__d("oz-player/streams/OzMediaStreamLoopDriver",["oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$2=null;this.$3=!1;this.$6=function(){var a;d.$7();if(d.$3)return;(a=d.$5)==null?void 0:a.start();a=d.$1.execute();var b=d.$1.getLoopInterval();b&&(d.$2=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){d.$6()},b));a&&a.then(d.$6)["catch"](function(b){d.$7();var a=d.$1.handleError(b);if(a)d.$2=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(d.$6,a);else{(a=d.$5)==null?void 0:a.setError(b);(a=d.$5)==null?void 0:a.log();d.$5=null;d.$3=!0}})};this.$1=a;this.$4=b}var b=a.prototype;b.start=function(){if(this.$3)throw new Error("restart is not implemented");this.$5=this.$4.getOperationLogger("media_stream").start();this.$6()};b.stop=function(){var a;this.$7();this.$3=!0;(a=this.$5)==null?void 0:a.log();this.$5=null};b.$7=function(){this.$2&&(c("oz-player/shims/ozClearTimeout")(this.$2),this.$2=null)};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzRangeUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b.filter(function(b){return b.startTime<=a&&b.endTime>=a});return b!=null&&b.length>0?b[0]:null}f.getRangeForTime=a}),66);
__d("oz-player/streams/OzSegmentLocator",["oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzRangeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.getEndingSegment();return a!=null&&a.getSequenceNumber()!=null?a.getSequenceNumber():0}var h=function(a,b){a=a.getCurrentTime();a=b?d("oz-player/utils/OzRangeUtils").getRangeForTime(a,b.getBufferedRanges()):null;return a},i=function(a,b,c){b=h(a,b);c=c?c.getTimeRange().endTime:0;a=a.getCurrentTime()||0;c?a=c:b&&(a=b.endTime);return a};b=function(a,b,c,e,f,g,j,k){var l=a.getPredictedSegmentAfter(g);if(l&&b.isPlaying())return l;l=h(b,e);if(j.getBool("use_stream_end_time_in_segment_locator")&&l&&l.endTime===k)return null;l=i(b,e,g);k=f.getTimeRanges();e=d("oz-player/utils/OzNumericalRangeUtil").findDiffCoveredByRanges(b.getCurrentTime(),l,k.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));if(e>c)return null;g=a.getSegment(0);(j.getNumber("auto_seek_playhead_slack")===0||j.getBool("fix_initial_segment_non_zero_start_time"))&&g&&g.getTimeRange().startTime>l&&(l=g.getTimeRange().startTime);return a.getSegmentByTime(l)};g.getEndingSequenceNumber=a;g.getTimeToQuery=i;g.getSegment=b}),98);
__d("oz-player/streams/OzPredictedSegmentLocator",["oz-player/shims/OzURI","oz-player/streams/OzSegmentLocator","oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=0;for(var d in a){var e;if(d===b)continue;c=Math.max(c,(e=a[d].lastSkippedToSegmentNumber)!=null?e:0)}return c}function i(a){return a.reduce(function(a,b){var c;return((c=b==null?void 0:b.getSequenceNumber())!=null?c:0)>((c=a==null?void 0:a.getSequenceNumber())!=null?c:0)?b:a})}function j(a,b){return a.getPredictedSegmentAfter({getData:function(){return null},getByteRange:function(){return null},getSequenceNumber:function(){return b-1},getTimeRange:function(){return{endTime:0,startTime:0}},getURI:function(){return new(c("oz-player/shims/OzURI"))("")},setOptions:function(){return void 0}})}a=function(){function a(a){this.$5={};var b=a.videoNode,c=a.liveLatencyManager,d=a.loggerProvider;a=a.dynamicVideoLibrary;this.$1=b;this.$2=c;this.$3=d;this.$4=a}var b=a.prototype;b.getSegment=function(a,b,c,d,e,f,g,h,i){var j;this.$5[i]==null&&(this.$5[i]={lastSkippedToSegmentNumber:null});(j=this.$2)==null?void 0:j.setEnablePlaybackRateAdjustmentForSession(h);j=this.$6(a,b,c,d,e,f,g,h,i);g.getBool("log_extra_events")&&j.segment===null&&this.$3.getOperationLogger("segment_locator").setInitiator(j.initiator).setReason(j.reason).setType(i).setUserInfo(j.userInfo).log();j.segment&&this.$4!=null&&j.segment.setOptions({enableDvl:this.$4.shouldRequestDynamicInfo(i)});return j.segment};b.$6=function(a,b,c,e,f,g,k,l,m){var n,o=b.getCurrentTime(),p=k.getNumber("pdash_download_cursor_catchup_threshold_sec")>0;p=this.$2==null?!1:this.$2.shouldEnableCursorBasedCatchup();e=e!=null?k.getBool("pdash_download_cursor_use_totalbuffer")?d("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(e.getBufferedRanges(),b.getCurrentTime(),k):d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(e.getBufferedRanges(),b.getCurrentTime(),k):{bufferAheadSec:0,bufferedOffset:0};b=e.bufferAheadSec;e=e.bufferedOffset;var q=null,r=null,s=this.$2?this.$2.enabled():!0,t=a.getPredictedSegmentAfter(f),u=j(a,k.getNumber("pdash_download_cursor_between_catchups_seg")>0?h(this.$5):h(this.$5,m)),v=!0;if(p&&l&&((n=t)==null?void 0:n.getSequenceNumber())!=null&&((n=(n=t)==null?void 0:n.getSequenceNumber())!=null?n:0)<=((n=u==null?void 0:u.getSequenceNumber())!=null?n:0)){t=u;q="paired_catchup";if(k.getBool("log_extra_events")){this.$3.getOperationLogger("latency_manager").setInitiator(q).setUserInfo({bufferAheadSec:String(b),bufferedOffset:String(e)}).setLength(((n=u==null?void 0:u.getSequenceNumber())!=null?n:0)-((n=(n=t)==null?void 0:n.getSequenceNumber())!=null?n:0)).setType(m).log()}v=!1}else if(p&&l&&s&&t!=null&&((n=this.$2)==null?void 0:n.isBehindPreferredLiveHeadLatencyWithTolerance())){if(k.getBool("pdash_download_cursor_catchup_skip_totalbufer")&&this.$2&&b>this.$2.getPreferredLiveHeadLatencySec()&&e==0)return{segment:null,initiator:"catchup_pause",userInfo:{bufferAheadSec:String(b),bufferedOffset:String(e)}};p=a.getEndingSegment();l=i([p,t]);n=k.getNumber("pdash_download_cursor_between_catchups_seg")===0||((n=u==null?void 0:u.getSequenceNumber())!=null?n:0)+k.getNumber("pdash_download_cursor_between_catchups_seg")<((u=p==null?void 0:p.getSequenceNumber())!=null?u:0);if(n){if(((p=l==null?void 0:l.getSequenceNumber())!=null?p:0)>((n=(u=t)==null?void 0:u.getSequenceNumber())!=null?n:0)){this.$5[m].lastSkippedToSegmentNumber=(p=l==null?void 0:l.getSequenceNumber())!=null?p:0;if(k.getBool("log_extra_events")){this.$3.getOperationLogger("latency_manager").setInitiator("catchup").setUserInfo({bufferAheadSec:String(b),bufferedOffset:String(e)}).setLength(((u=l==null?void 0:l.getSequenceNumber())!=null?u:0)-((p=(n=t)==null?void 0:n.getSequenceNumber())!=null?p:0)).setType(m).log()}}t=l;q="catchup";v=!1}}else if(f==null){t=a.getSegmentByTime(o);q="1st_run";u=a.getTimeRanges();r={approx:String(a.canApproximateId()),ranges:String(u.length),mpdStartTime:u.length>0?String(u[0].startTime):null,mpdEndTime:u.length>0?String(u[0].endTime):null};if(k.getBool("download_cursor_1st_run_set_skipped_segment_on")){this.$5[m].lastSkippedToSegmentNumber=(p=(n=t)==null?void 0:n.getSequenceNumber())!=null?p:0}}v=v&&k.getBool("download_cursor_disable_buffer_ahead_rule_on")?s:v;if(v&&b>c)return{segment:null,initiator:"buffer_ahead_rule",userInfo:{bufferAheadSec:String(b),bufferedOffset:String(e),lastMaxSegNum:String(h(this.$5,m)),segment:t?String(t.getSequenceNumber()):null}};if(k.getBool("pdash_wait_on_mpd_refresh_when_error")){l=g&&g.getSequenceNumber()||0;f=t&&t.getSequenceNumber()||0;if(t&&g&&l>=f){o=d("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(a);return(o||0)>=l?{segment:g}:{segment:null,initiator:"mpd_refresh",userInfo:{leSegNum:String(l)}}}}return{segment:t,initiator:q?q:void 0,userInfo:r?r:void 0}};return a}();g.getSegmentForSequenceNumber=j;g.OzPredictedSegmentLocator=a}),98);
__d("oz-player/utils/OzTaggedTimeRanges",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=[],this.$2=0,this.$3=0,this.$4=a?a:function(a,b){return a===b}}var b=a.prototype;b.add=function(a,b,c){if(b<a)return;if(b===a)return;if(this.$1.length===0){this.$1.push({startTime:a,endTime:b,tag:c});return}var d=0,e=0;for(var f=0;f<this.$1.length;f++){if(a===this.$1[f].startTime&&b===this.$1[f].endTime){d=f;e=f+1;break}a>=this.$1[f].startTime&&(d=f+1);b<=this.$1[f].endTime&&(e=f);if(b<this.$1[f].startTime)break}this.$1.splice(d,e-d,{startTime:a,endTime:b,tag:c});this.$5(d)};b.$5=function(a){a=a;var b=this.$1[a],c=null;a!==0&&(c=this.$1[a-1]);c!==null&&(this.$4(c.tag,b.tag)?c.endTime>=b.startTime&&(this.$1.splice(a-1,2,{startTime:c.startTime,endTime:Math.max(b.endTime,c.endTime),tag:b.tag}),a--):(c.endTime>b.startTime&&c.startTime===b.startTime?(this.$1.splice(a-1,1),a--):c.endTime>b.startTime&&this.$1.splice(a-1,1,{startTime:c.startTime,endTime:b.startTime,tag:c.tag}),c.endTime>b.endTime&&this.$1.splice(a+1,0,{startTime:b.endTime,endTime:c.endTime,tag:c.tag})));c=null;a!==this.$1.length-1&&(c=this.$1[a+1]);c&&(this.$4(c.tag,b.tag)?c.startTime<=b.endTime&&this.$1.splice(a,2,{startTime:b.startTime,endTime:Math.max(c.endTime,b.endTime),tag:b.tag}):c.startTime<=b.endTime&&(c.endTime<b.endTime?(this.$1.splice(a,1,{startTime:b.startTime,endTime:c.startTime,tag:b.tag}),this.$1.push({startTime:c.endTime,endTime:b.endTime,tag:b.tag})):this.$1.splice(a+1,1,{startTime:b.endTime,endTime:c.endTime,tag:c.tag})))};b.get=function(a){var b=a>=this.$3?this.$2:0,c=null;for(var b=b;b<this.$1.length;b++)if(this.$1[b].startTime<=a&&a<this.$1[b].endTime){c=b;break}this.$2=c===null?0:c;this.$3=a;return c===null?null:this.$1[c].tag};b.getLength=function(){return this.$1.length};return a}();f["default"]=a}),66);
__d("oz-player/streams/OzMediaStream",["oz-player/networks/OzNetworkManager","oz-player/networks/OzReadableStreamDataReader","oz-player/networks/OzStreamingTaskStateManager","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzDeferred","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzNetworkDiagnostics","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozThrottle","oz-player/shims/ozvariant","oz-player/strategies/OzStreamLengthStrategy","oz-player/streams/OzMediaStreamLoopDriver","oz-player/streams/OzPredictedSegmentLocator","oz-player/streams/OzSegmentLocator","oz-player/utils/OzBufferingUtils","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzMimeUtil","oz-player/utils/OzRangeUtils","oz-player/utils/OzTaggedTimeRanges"],(function(a,b,c,d,e,f,g){"use strict";var h=1e3,i=.2;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$OzMediaStream2=0;e.$OzMediaStream3=0;e.$OzMediaStream4=null;e.$OzMediaStream13=null;e.$OzMediaStream15=!1;e.$OzMediaStream16=null;e.$OzMediaStream17=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzMediaStream19=[];e.$OzMediaStream23=0;e.$OzMediaStream30=!0;e.$OzMediaStream32=!1;e.$OzMediaStream33=null;e.$OzMediaStream34=new(c("oz-player/utils/OzErrorEmitter"))();e.$OzMediaStream36=!0;e.$OzMediaStream39=0;e.$OzMediaStream40=null;e.$OzMediaStream41=null;var f=b.config,g=b.sourceBufferManagerPromise,h=b.prependedSegmentsCount,i=b.networkManager,j=b.playbackState,k=b.endOfStreamWatcher,l=b.bufferTargetCalculator,m=b.priorityCalculator,n=b.streamSegmentsCountCalculator,o=b.abrManager,p=b.loadedRepresentationId,q=b.representation,r=b.loggerProvider,s=b.segmentLocator,t=b.setCustomFetchStreamLoggingAttributes;b=b.blockedRepresentationsManager;e.$OzMediaStream1=f;e.$OzMediaStream5=g;e.$OzMediaStream5.then(function(a){e.$OzMediaStream6=a,e.$OzMediaStream16&&e.$OzMediaStream16.setSourceBuffer(a),e.$OzMediaStream28.setSourceBufferState(a.getSourceBufferState()),e.$OzMediaStream42()});e.$OzMediaStream21=h;e.$OzMediaStream12=i;e.$OzMediaStream7=j;e.$OzMediaStream14=k;e.$OzMediaStream14.registerMediaStream(babelHelpers.assertThisInitialized(e));e.$OzMediaStream27=l;e.$OzMediaStream28=m;e.$OzMediaStream29=n;e.$OzMediaStream16=o;e.$OzMediaStream18=r.cloneContext();e.$OzMediaStream37=s;e.$OzMediaStream26=new(c("oz-player/utils/OzTaggedTimeRanges"))(function(a,b){return a.id===b.id});e.$OzMediaStream40=t;e.$OzMediaStream41=b;e.$OzMediaStream17.addSubscriptions(e.$OzMediaStream7.addEventListener("seeking",function(){var a=j.getCurrentTime();e.$OzMediaStream1.getBool("fix_seek_performance")?e.restartLoopBody():e.$OzMediaStream1.getBool("ignore_reset_after_seek_if_bufferahead")&&e.$OzMediaStream8.canPredict()&&(e.$OzMediaStream1.getBool("ignore_reset_after_seek_if_bufferahead_liverewind")||e.$OzMediaStream36)&&(e.$OzMediaStream6?d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(a,e.$OzMediaStream6.getSourceBufferState().getBufferedRanges())>0:!1)||(!e.$OzMediaStream1.getBool("prevent_unnecessary_seek_stream_anchor_reset")||e.$OzMediaStream9!=null)&&(e.$OzMediaStream9=null,e.$OzMediaStream32=!1,e.$OzMediaStream25&&e.$OzMediaStream25.resolve())}));e.$OzMediaStream41!=null&&e.$OzMediaStream17.addSubscriptions(e.$OzMediaStream41.onRepresentationBlocked(function(a){return e.$OzMediaStream43(a)}));e.$OzMediaStream22=d("oz-player/utils/OzMimeUtil").getMimeType(q.getMimeCodecs());e.$OzMediaStream31=new(c("oz-player/networks/OzStreamingTaskStateManager"))({mimeType:e.$OzMediaStream22,priorityCalculator:e.$OzMediaStream28,loggerProvider:e.$OzMediaStream18,setCustomFetchStreamLoggingAttributes:e.$OzMediaStream40,config:e.$OzMediaStream1});e.$OzMediaStream24=new(c("oz-player/streams/OzMediaStreamLoopDriver"))(babelHelpers.assertThisInitialized(e),e.$OzMediaStream18);p===q.getID()?(e.$OzMediaStream8=q,e.$OzMediaStream21>0&&e.$OzMediaStream44(h,q)):e.$OzMediaStream45(q);return e}var e=b.prototype;e.start=function(){this.$OzMediaStream24.start()};e.getCurrentRepresentation=function(){return this.$OzMediaStream8};e.switchRepresentation=function(a){this.$OzMediaStream45(a,"user")};e.onError=function(a){return this.$OzMediaStream34.onError(a)};e.updateRunTimeConfigs=function(a){a=a.streamDataHandler;a!==void 0&&(this.$OzMediaStream35=a)};e.$OzMediaStream45=function(a,b){var d=this;b===void 0&&(b="internal");b==="user"&&(this.$OzMediaStream9=null);if(this.$OzMediaStream1.getBool("fix_segment_updated_subscription_leak")){var e;(e=this.$OzMediaStream20)==null?void 0:e.remove();this.$OzMediaStream20=null}e=this.$OzMediaStream18.cloneContext().setType(this.$OzMediaStream22+";init");var f=e.cloneContext().setRepresentationID(a.getID()),g=a.getInitSegment(),h=g.getData();if(h==null){g=this.$OzMediaStream12.request([g],[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream22)],f,"ENABLE_CACHE");h=g.getStream()}var i=e.getOperationLogger("stream_switch").setPreviousRepresentationID(this.$OzMediaStream8?this.$OzMediaStream8.getID():null).setInitiator(b).setRepresentationID(a.getID()).setReason(b==="internal"?this.$OzMediaStream16&&this.$OzMediaStream16.getLastEvaluationReason():b).start();this.$OzMediaStream8=a;this.emit("switchRepresentation",b,a);this.$OzMediaStream46({data:h,dataAppendedCallback:function(){i.log(),d.$OzMediaStream1.getBool("append_retry_quota_exceeded_error")&&d.$OzMediaStream27.handleEvent("append_succeeded"),d.emit("initAppended"),d.$OzMediaStream14.notifyRepresentationSwitched(d)},dataAppendedErrorCallback:function(b){var c;i.setError(b).log();d.$OzMediaStream47(b);(c=d.$OzMediaStream41)==null?void 0:c.handleError(a.getID(),b);if(d.$OzMediaStream1.getBool("proceed_on_representation_change_in_init_append_fail")&&a.getID()!==d.$OzMediaStream8.getID()){(c=d.$OzMediaStream25)==null?void 0:c.resolve()}},loggerProvider:f.cloneContext(),appendTarget:0,timeRange:null})};e.getLoopInterval=function(){return this.$OzMediaStream23};e.execute=function(){var a=this.$OzMediaStream48();if(a){var b=this.$OzMediaStream25=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));a.then(function(){return b.resolve()})["catch"](function(a){return b.reject(a)});return b.getPromise()}return null};e.$OzMediaStream49=function(a){if(this.$OzMediaStream16&&this.$OzMediaStream30&&(this.$OzMediaStream1.getBool("enable_abr_for_first_request")||this.$OzMediaStream15||this.$OzMediaStream21>0)){a=this.$OzMediaStream16.getBestRepresentation(a);if(this.$OzMediaStream8!==a)return a}return null};e.$OzMediaStream50=function(a){var b=this.$OzMediaStream6?this.$OzMediaStream6.getSourceBufferState():null,c=this.$OzMediaStream21>0?this.$OzMediaStream8.getSegment(this.$OzMediaStream21-1):null,e=this.$OzMediaStream27.computeBufferTarget();if(this.$OzMediaStream1.getBool("null_segment_for_no_buffer_target")&&e<=0)return null;var f=null;a&&(f=this.$OzMediaStream8.getCustomFieldFirstSegment());if(!f&&this.$OzMediaStream8.canPredict()&&this.$OzMediaStream37!=null){a=this.$OzMediaStream36&&this.$OzMediaStream7.isPlaying();return this.$OzMediaStream37.getSegment(this.$OzMediaStream8,this.$OzMediaStream7,e,b,this.$OzMediaStream9||c,this.$OzMediaStream10,this.$OzMediaStream1,a,this.$OzMediaStream22)}else{f||(f=d("oz-player/streams/OzSegmentLocator").getSegment(this.$OzMediaStream8,this.$OzMediaStream7,e,b,this.$OzMediaStream8,this.$OzMediaStream9||c,this.$OzMediaStream1,this.$OzMediaStream33));if(this.$OzMediaStream8.canPredict()){a=this.$OzMediaStream10&&this.$OzMediaStream10.getSequenceNumber()||0;e=f&&f.getSequenceNumber()||0;if(f&&this.$OzMediaStream10&&a>=e){e=d("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(this.$OzMediaStream8);return(e||0)>=a?this.$OzMediaStream10:null}}}if(!f&&!this.$OzMediaStream51()){e=this.$OzMediaStream8.getEndingSegment();if(e&&this.$OzMediaStream8.isEndingSegment(e)){a=e.getTimeRange().endTime;b=d("oz-player/streams/OzSegmentLocator").getTimeToQuery(this.$OzMediaStream7,b,this.$OzMediaStream9||c);b>=a&&!this.$OzMediaStream51()&&(f=e)}}return f};e.$OzMediaStream52=function(){return!this.$OzMediaStream15&&this.$OzMediaStream21===0};e.$OzMediaStream53=function(a,b){var e;e=(e=b.fetchSingleSegment)!=null?e:!1;b=(b=b.preventRepresentationSwitch)!=null?b:!1;var f=[];if(e)f=[a];else{e=this.$OzMediaStream29.computeMin(this.$OzMediaStream7,a,this.$OzMediaStream8);f=d("oz-player/strategies/OzStreamLengthStrategy").getStreamingSegments(this.$OzMediaStream1,e,this.$OzMediaStream8,this.$OzMediaStream7,a);f=c("oz-player/networks/OzNetworkManager").getStreamableSegmentsRange(f);if(!b){e=this.$OzMediaStream49(f);if(e){this.$OzMediaStream45(e);a=this.$OzMediaStream50(!1);if(!a)return[];else return this.$OzMediaStream53(a,{fetchSingleSegment:!1,preventRepresentationSwitch:this.$OzMediaStream1.getBool("prevent_multiple_successive_representation_switch")})}}}return f};e.$OzMediaStream54=function(){var a=this;if(this.$OzMediaStream1.getBool("fix_segment_updated_subscription_leak")){var b=function(b){b==null?void 0:b.remove(),a.$OzMediaStream20===b&&(a.$OzMediaStream20=null)};b(this.$OzMediaStream20);var d=null;return new(c("oz-player/shims/OzMaybeNativePromise"))(function(c,e){a.getCurrentRepresentation().forceParseIfNotParsed(),d=a.getCurrentRepresentation().addUpdateListener(function(){b(d),c()}),a.$OzMediaStream20=d})["catch"](function(a){b(d);throw a})}else return new(c("oz-player/shims/OzMaybeNativePromise"))(function(c,d){a.getCurrentRepresentation().forceParseIfNotParsed();var b=a.getCurrentRepresentation().addUpdateListener(function(){c(),a.$OzMediaStream20=null,b.remove()});a.$OzMediaStream20=b})};e.$OzMediaStream44=function(a,b){var c=this,d=b.addUpdateListener(function(){var e=b.getSegment(a-1);e!=null&&c.$OzMediaStream26.add(0,e.getTimeRange().endTime,{id:b.getID()});d.remove()})};e.$OzMediaStream55=function(a,b){var d=this;return new(c("oz-player/shims/OzMaybeNativePromise"))(function(b,c){c=d.$OzMediaStream50(a);c==null?b([]):b(d.$OzMediaStream53(c,{fetchSingleSegment:a}))})};e.$OzMediaStream48=function(){var a,b=this,d=this.$OzMediaStream6?this.$OzMediaStream6.getSourceBufferState():null;if(this.$OzMediaStream8.canPredict()&&this.$OzMediaStream10&&this.$OzMediaStream8.isEndingSegment(this.$OzMediaStream10)){this.endStream();this.$OzMediaStream18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end1").setRepresentationID(this.$OzMediaStream8.getID()).log();return}if(this.$OzMediaStream8.canPredict()&&this.$OzMediaStream9&&this.$OzMediaStream8.isEndingSegment(this.$OzMediaStream9)){this.endStream();this.$OzMediaStream18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end2").setRepresentationID(this.$OzMediaStream8.getID()).log();return}var e=this.$OzMediaStream52(),f=this.$OzMediaStream50(e);if(this.$OzMediaStream8.canPredict()&&this.$OzMediaStream11!=null&&((f==null?void 0:f.getSequenceNumber())||0)>=(((a=this.$OzMediaStream11)==null?void 0:a.getSequenceNumber())||0)){this.$OzMediaStream1.getBool("log_extra_events")&&this.$OzMediaStream18.cloneContext().getOperationLogger("media_loop_end").setInitiator("segment_end").setRepresentationID(this.$OzMediaStream8.getID()).log();if(this.$OzMediaStream1.getBool("segment_end_410_response_loop_end"))return}f===this.$OzMediaStream38?this.$OzMediaStream39++:this.$OzMediaStream39=0;this.$OzMediaStream38=f;this.$OzMediaStream7.isPlaying()&&this.$OzMediaStream39>0&&this.$OzMediaStream1.getBool("log_extra_events")&&this.$OzMediaStream18.cloneContext().getOperationLogger("get_segment_to_stream_same_segment").setReason((f==null?void 0:f.getSequenceNumber())!=null?String(f==null?void 0:f.getSequenceNumber()):null).setLength(this.$OzMediaStream39).setRepresentationID(this.$OzMediaStream8.getID()).setSegmentStartTime(f==null?void 0:f.getTimeRange().startTime).setSegmentEndTime(f==null?void 0:f.getTimeRange().endTime).log();if(this.$OzMediaStream32){this.$OzMediaStream23=h;this.$OzMediaStream18.cloneContext().getOperationLogger("media_loop_end").setInitiator("ongoing_stream").setReason(((a=this.$OzMediaStream9)==null?void 0:a.getSequenceNumber())!=null?String((a=this.$OzMediaStream9)==null?void 0:a.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream8.getID()).log();return null}this.$OzMediaStream21>0&&!this.$OzMediaStream51()&&this.endStreamIfBufferedToEndTime();if(!f||this.$OzMediaStream32){if(this.$OzMediaStream8.canPredict()&&this.$OzMediaStream1.getBool("ms_promise_for_null")){var g=this.$OzMediaStream1.getNumber("ms_promise_for_null_ms");return new(c("oz-player/shims/OzMaybeNativePromise"))(function(a,d){var e=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){c("oz-player/shims/ozClearTimeout")(e),a()},g?g:(b.$OzMediaStream8.getMaxGopSec()||1)*1e3)})}this.$OzMediaStream23=h;this.$OzMediaStream32||this.$OzMediaStream31.finishTaskIfNoOngoingStream();return this.$OzMediaStream54()}this.$OzMediaStream23=0;var i=this.$OzMediaStream53(f,{fetchSingleSegment:e});if(i.length===0){this.$OzMediaStream18.cloneContext().getOperationLogger("media_loop_end").setInitiator("no_stream_segments").setReason(((a=this.$OzMediaStream9)==null?void 0:a.getSequenceNumber())!=null?String((f=this.$OzMediaStream9)==null?void 0:f.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream8.getID()).log();return this.$OzMediaStream54()}this.$OzMediaStream15=!0;var j=i[i.length-1]||null,k=this.$OzMediaStream8,l=function(){return k.isEndingSegment(j)};i.length!==0||c("oz-player/shims/ozvariant")(0,23148);a=i[0];f=a.getTimeRange().startTime;var m=j.getTimeRange().endTime,n=this.$OzMediaStream18.cloneContext();n.setRepresentationID(this.$OzMediaStream8.getID());this.$OzMediaStream1.getBool("log_appended_segment_info")||n.setSegmentStartTime(f).setSegmentEndTime(m);var o,p,q=this.$OzMediaStream1.getBool("disable_audio_scheduler")&&this.$OzMediaStream22.indexOf("audio")!==-1;this.$OzMediaStream1.getBool("use_scheduler")&&!q&&!e?p=this.$OzMediaStream31.startStreamDeferred({segmentsPromise:this.$OzMediaStream55(e,i),networkManager:this.$OzMediaStream12,sourceBufferState:d,playbackState:this.$OzMediaStream7,segmentsLoggerProvider:n.cloneContext()}):o=this.$OzMediaStream12.request(i,[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream22)],n.cloneContext());this.$OzMediaStream13=o;this.$OzMediaStream32=!0;var r=this.$OzMediaStream56(a,j,i.length),s={startTime:f,endTime:m,tag:{id:this.$OzMediaStream8.getID()}},t=n.getOperationLogger("queued_append");t.start().setReason(this.$OzMediaStream16&&this.$OzMediaStream16.getLastEvaluationReason());var u=function(a){b.$OzMediaStream46({data:a,dataAppendedCallback:function(c,a){t.setAppendedBufferMs(Math.round(c.appendedSec*1e3)),b.$OzMediaStream1.getBool("log_appended_segment_info")&&t.setSegmentEndTime(c.endTime_UNSAFE*1e3).setSegmentStartTime(c.startTime_UNSAFE*1e3),t.log(),b.$OzMediaStream1.getBool("append_retry_quota_exceeded_error")&&b.$OzMediaStream27.handleEvent("append_succeeded"),i.forEach(function(c){b.emit("SegmentAppended",b.$OzMediaStream57(c,a))}),l()&&b.endStream(),b.$OzMediaStream21=0},dataAppendedErrorCallback:function(a){t.setError(a).log();var c=p||o;c&&c.cancel();b.$OzMediaStream47(a)},loggerProvider:n.cloneContext(),appendTarget:r,timeRange:s})},v;!!p||!!o||c("oz-player/shims/ozvariant")(0,23147);p?(p.genStream().then(function(a){return u(a)})["catch"](function(a){return b.$OzMediaStream34.emitError(a)}),v=p.getStatusChangePromise()):o&&(u(o.getStream()),v=o.getStatusChangePromise());!v&&c("oz-player/shims/ozvariant")(0,51928);q=v.then(function(a){b.$OzMediaStream58(a,j);return b.$OzMediaStream59()}).then(function(){b.$OzMediaStream2=0});return q["catch"](function(a){var c=b.$OzMediaStream9;return b.$OzMediaStream60(j).then(function(){var d;(d=b.$OzMediaStream41)==null?void 0:d.handleError(k.getID(),a);return b.$OzMediaStream61(a,j,c)})})};e.handleError=function(a){return this.$OzMediaStream1.getNumber("loop_body_handle_error_interval_ms")};e.$OzMediaStream61=function(a,b,e){var f=this;this.$OzMediaStream32=!1;var g=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),h=this.$OzMediaStream62(a),i=h[0],j=h[1],k=function(b){f.$OzMediaStream2++;f.$OzMediaStream1.getBool("log_extra_events")&&f.$OzMediaStream18.getOperationLogger("media_stream").setInitiator("fetch_stream_"+(b.behavior!=null?b.behavior:"default")).setLength(b.timeoutMs).setReason(""+i.getDescription()).setCode(j.length>0?Number.parseInt(j,10):null).setType(f.$OzMediaStream22).log();if(b.behavior==="retry_failed_request")f.$OzMediaStream9=e;else if(b.behavior==="recover_failed_request"&&a instanceof c("oz-player/utils/OzError")){var h;h=(h=a.getExtra())==null?void 0:h.headers;h=c("oz-player/shims/OzNetworkDiagnostics").getNextValidSegmentId(h);h!=null&&(f.$OzMediaStream9=d("oz-player/streams/OzPredictedSegmentLocator").getSegmentForSequenceNumber(f.$OzMediaStream8,h-1))}c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){return g.resolve()},b.timeoutMs)};this.$OzMediaStream4!==j?(this.$OzMediaStream4=j,this.$OzMediaStream3=1):this.$OzMediaStream3++;h=!0;var l=function(){h=!1},m={consecutiveFailuresForErrorCode:this.$OzMediaStream3,endStream:function(){l(),f.$OzMediaStream10=b,f.$OzMediaStream1.getBool("segment_end_410_response")&&(f.$OzMediaStream11=b),f.endStream(),g.resolve()},error:i,isInitialRequest:!1,retry:function(a){var b;l();k({timeoutMs:(b=a==null?void 0:a.waitMs)!=null?b:0,behavior:a==null?void 0:a.behavior})},retryAttemptCount:this.$OzMediaStream2};this.emit("streamError",m);h&&(this.$OzMediaStream34.emitError(i),this.$OzMediaStream2=0,g.resolve());return g.getPromise()};e.$OzMediaStream60=function(a){this.$OzMediaStream9=null;this.$OzMediaStream10=a;this.$OzMediaStream31.finishTaskIfNoOngoingStream();return this.$OzMediaStream6?this.$OzMediaStream6.cancelOperationAndCleanQueue(this.$OzMediaStream18):c("oz-player/shims/OzMaybeNativePromise").resolve()};e.$OzMediaStream58=function(a,b){a==="done"&&(this.$OzMediaStream9=b)};e.$OzMediaStream59=function(){this.$OzMediaStream32=!1};e.$OzMediaStream62=function(a){var b,d;a instanceof c("oz-player/utils/OzError")?(b=a.getExtra().code||"",d=a):(b=a.status!=null&&a.status!==""?a.status.toString():"0",d=new(c("oz-player/utils/OzError"))({type:"OZ_NETWORK",description:a.message,extra:{originalError:a,code:b,url:a.url}}));return[d,b]};e.$OzMediaStream46=function(a){this.$OzMediaStream19.push(a),this.$OzMediaStream6&&this.$OzMediaStream42()};e.$OzMediaStream63=function(a){if(this.$OzMediaStream6!=null&&a!=null){var b=this.$OzMediaStream6.getSourceBufferState().getBufferedRanges();b=d("oz-player/utils/OzRangeUtils").getRangeForTime(a.startTime+i,b);b!=null&&this.$OzMediaStream26.add(a.startTime,b.endTime,a.tag)}};e.$OzMediaStream42=function(){var a=this;this.$OzMediaStream19.forEach(function(b){var d=b.data,e=b.dataAppendedCallback,f=b.dataAppendedErrorCallback,g=b.loggerProvider,h=b.appendTarget,i=b.timeRange;b=d instanceof Uint8Array||a.$OzMediaStream35==null?d:d.pipeThrough(new(c("oz-player/networks/OzReadableStreamDataReader"))(a.$OzMediaStream35.bind(a,a.$OzMediaStream8)));d=null;var j=a.$OzMediaStream1.getNumber("tagged_time_range_per_append_throttle");j>0&&(d=c("oz-player/shims/ozThrottle")(function(){a.$OzMediaStream63(i)},j));a.$OzMediaStream6&&a.$OzMediaStream6.queueData(b,g,h,d).then(function(b){e(b,i),i&&a.$OzMediaStream8.canPredict()&&b.startTime_UNSAFE&&b.endTime_UNSAFE?a.$OzMediaStream26.add(b.startTime_UNSAFE,b.endTime_UNSAFE,i.tag):i&&a.$OzMediaStream26.add(i.startTime,i.endTime,i.tag)})["catch"](function(a){f(a)})});this.$OzMediaStream19=[]};e.$OzMediaStream64=function(){var a=this.$OzMediaStream6,b=this.$OzMediaStream7.getCurrentTime(),d=null;a&&(d=this.$OzMediaStream1.getBool("clear_buffer_on_quota_exceeded_error")?a.clearRangeWithWait(0,b):a.cancelOperationAndCleanQueue(this.$OzMediaStream18));return(b=d)!=null?b:c("oz-player/shims/OzMaybeNativePromise").resolve()};e.$OzMediaStream47=function(a){var b=this;if(this.$OzMediaStream1.getBool("append_retry_quota_exceeded_error")&&a instanceof c("oz-player/utils/OzError")&&a.getType()==="OZ_SOURCE_BUFFER_QUOTA_EXCEEDED"){this.$OzMediaStream27.handleEvent("append_quota_exceeded");var d=this.$OzMediaStream64();d.then(function(){b.restartLoopBody()})["catch"](function(a){a=new(c("oz-player/utils/OzError"))({type:"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR",description:a.name+": "+a.message,extra:{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR}});b.$OzMediaStream34.emitError(a)})}else this.$OzMediaStream1.getBool("fallback_on_append_error")&&a instanceof c("oz-player/utils/OzError")&&a.getType()!=="OZ_NETWORK"&&this.$OzMediaStream34.emitError(a)};e.$OzMediaStream56=function(a,b,c){var d=0,e=this.$OzMediaStream1.getNumber("appends_per_segment");if(e>0){a=a.getByteRange();b=b.getByteRange();a&&b&&b.endByte!=null&&(d=Math.ceil((b.endByte-a.startByte+1)/(c*e)))}d===0&&(d=this.$OzMediaStream1.getNumber("append_byte_target_without_range"));return d};e.getIsAdaptationEnabled=function(){return this.$OzMediaStream30};e.enableAdaptation=function(){this.$OzMediaStream30=!0};e.disableAdaptation=function(){this.$OzMediaStream30=!1};e.cleanup=function(){var a,b=this.$OzMediaStream1.getBool("stop_loop_driver_immediately_on_cleanup");b&&this.$OzMediaStream24.stop();this.$OzMediaStream5.then(function(a){a.destroy()});(a=this.$OzMediaStream41)==null?void 0:a.destroy();this.$OzMediaStream31.destroy();this.$OzMediaStream17.release();this.$OzMediaStream17.engage();this.removeAllListeners();this.$OzMediaStream20&&(this.$OzMediaStream20.remove(),this.$OzMediaStream1.getBool("fix_segment_updated_subscription_leak")&&(this.$OzMediaStream20=null));b||this.$OzMediaStream24.stop()};e.getRepresentationIDAtTime=function(a){var b=this.$OzMediaStream26.get(a);if(!b){var c=this.$OzMediaStream8.getTimeRanges();c=c[c.length-1];var d=.001;c&&a>=c.endTime&&a<=this.$OzMediaStream7.getDuration()+d&&(b=this.$OzMediaStream26.get(c.endTime-d))}return b?b.id:null};e.endStream=function(){this.$OzMediaStream14.notifyMediaStreamEnded(this),this.$OzMediaStream65()};e.endStreamIfBufferedToEndTime=function(){var a=this.$OzMediaStream8.getTimeRanges();if(a.length>0){a=a[a.length-1].endTime;if(this.$OzMediaStream6){var b=this.$OzMediaStream6.getSourceBufferState().getBufferedRanges();b.length>0&&(Math.abs(b[b.length-1].endTime-a)<i&&this.endStream())}}};e.$OzMediaStream57=function(a,b){return{type:this.$OzMediaStream22.charAt(0),segment:a,sourceBuffer:this.$OzMediaStream6?this.$OzMediaStream6.getDebug().SourceBuffer:null,timeRange:b}};e.restartLoopBody=function(){this.$OzMediaStream9=null,this.$OzMediaStream32=!1,this.$OzMediaStream13&&this.$OzMediaStream13.cancel(),this.$OzMediaStream23!==0&&this.$OzMediaStream25&&this.$OzMediaStream25.resolve()};e.$OzMediaStream65=function(){if(this.$OzMediaStream6){var a=this.$OzMediaStream6.getSourceBufferState().getBufferedRanges();a.length>0&&(this.$OzMediaStream33=a[a.length-1].endTime)}};e.$OzMediaStream51=function(){return this.$OzMediaStream33!==null};e.$OzMediaStream43=function(a){this.$OzMediaStream8.getID()===a&&this.$OzMediaStream16!=null&&this.$OzMediaStream45(this.$OzMediaStream16.getBestRepresentation())};e.setEnableLiveheadCatchup=function(a){this.$OzMediaStream36=a};e.clearSourceBufferRange=function(a,b){var d=this.$OzMediaStream6;return d?d.clearRangeWithWait(a,b):c("oz-player/shims/OzMaybeNativePromise").resolve()};e.getDebug=function(){return{SourceBufferManager:this.$OzMediaStream6,MediaStreamAbrManager:this.$OzMediaStream16}};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/utils/getRepresentationInCache",["oz-player/networks/RequestParamCreator"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("oz-player/networks/RequestParamCreator"))();function a(a,b){b===void 0&&(b=null);return a.find(function(a){a=a.getInitSegment();var c=a&&a.getByteRange();return a&&c&&b?b.hasCacheValue(h.createRequestParam(a.getURI(),c).uri.toString()):!1})||null}g["default"]=a}),98);
__d("oz-player/Player",["Promise","oz-player/configs/OzPlayerConfig","oz-player/drm/OzDrmManager","oz-player/loggings/OzDevConsolePerfLogger","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/loggings/OzOperationLoggerObserver","oz-player/manifests/OzDynamicVideoLibrary","oz-player/manifests/OzVideoRepresentation","oz-player/media_source/MediaSourceManager","oz-player/media_source/OzMediaSeekableRangeManager","oz-player/networks/OzClientClock","oz-player/networks/OzNetworkManager","oz-player/parsers/OzMpdParser","oz-player/parsers/OzMpdUpdater","oz-player/parsers/OzXmlParserImplDOMParser","oz-player/parsers/OzXmlParserImplSax","oz-player/playback_controls/OzClearSourceBufferOnSeekManager","oz-player/playback_controls/OzLiveLatencyManager","oz-player/playback_controls/OzPlaybackTimeRangeManager","oz-player/playback_controls/OzPlayheadManager","oz-player/playback_controls/OzPlayheadNudger","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/states/OzObservedPlaybackState","oz-player/states/OzPositionToViewport","oz-player/strategies/OzAbrManager","oz-player/strategies/OzAudioIBRManager","oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy","oz-player/strategies/OzBlockedRepresentationsManager","oz-player/strategies/OzBufferAheadPriorityStrategy","oz-player/strategies/OzBufferAheadTargetStrategy","oz-player/strategies/OzBufferEndLimitStrategy","oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy","oz-player/strategies/OzBufferTargetCalculator","oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint","oz-player/strategies/OzBufferingDetector","oz-player/strategies/OzLiveheadDeltaCatchupStrategy","oz-player/strategies/OzPausedStreamSegmentsCountStrategy","oz-player/strategies/OzPlayheadAtInterruptionDetector","oz-player/strategies/OzPlayingStatePriorityStrategy","oz-player/strategies/OzPositionToViewportPriorityStrategy","oz-player/strategies/OzPriorityCalculator","oz-player/strategies/OzStaleManifestBufferTargetStrategy","oz-player/strategies/OzStartupBufferTargetStrategy","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/OzStreamSegmentsCountCalculator","oz-player/strategies/OzSupportedMimeCodecsRestriction","oz-player/streams/OzEndOfStreamWatcher","oz-player/streams/OzHandleUserRepresentationSwitch","oz-player/streams/OzMediaStream","oz-player/streams/OzPredictedSegmentLocator","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzMpdUtils","oz-player/utils/OzPlaybackRestrictionsUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/getRepresentationInCache"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a||c("oz-player/shims/ozvariant")(0,21876);return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var e;e=a.call(this)||this;e.$Player4=new Map();e.$Player5=new Map();e.$Player9=void 0;e.$Player10=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$Player11=new(c("oz-player/utils/OzErrorEmitter"))();e.$Player25=[];e.$Player31=null;e.$Player32=null;e.$Player41=null;e.$Player49=!1;e.$Player52=0;e.$Player53=null;e.$Player54=null;e.$Player55=0;e.$Player56=null;e.$Player57=null;e.$Player58=!1;e.$Player61=null;e.$Player75=function(){var a=e.$Player3.getBool("xmlparser_use_domparser")?new(c("oz-player/parsers/OzXmlParserImplDOMParser"))():new(c("oz-player/parsers/OzXmlParserImplSax"))();return a};e.$Player77=function(){e.$Player4.forEach(function(a){return a.endStreamIfBufferedToEndTime()})};e.$Player78=function(){e.$Player4.forEach(function(a){return a.endStream()})};var f=b.audioOnly;f=f===void 0?!1:f;var g=b.bufferingDetector,h=b.videoNodeOrQuickStarter,i=b.config,j=b.configMap,k=b.rawMpdXml,l=b.mpdUrl;l=l===void 0?null:l;var m=b.loggerConfig;m=m===void 0?{perfLoggerProviders:[],observedOperationLoggers:[],isOzDevConsoleEnabled:!1}:m;var n=b.prefetchCache;n=n===void 0?null:n;var o=b.getOverrideOzRequestImplementation;o=o===void 0?null:o;var p=b.networkRequestStreamHandlers,q=b.networkRequestStreamRetryHandler,r=b.getShouldIncludeCredentials;r=r===void 0?null:r;var s=b.getCustomRequestParametersForURI;s=s===void 0?null:s;var t=b.initialRepresentationIDs;t=t===void 0?[]:t;var u=b.debugCreateInitiator;u=u===void 0?null:u;var v=b.customParsers;v=v===void 0?new Map():v;var w=b.videoPlaybackRestrictions;w=w===void 0?[]:w;var x=b.customSegmentTimelineParser;x=x===void 0?null:x;var y=b.customRepresentationParsers;y=y===void 0?{}:y;var z=b.videoAbrManagerFactory;z=z===void 0?null:z;var A=b.seekHandler;A=A===void 0?null:A;var B=b.initialPlaybackPositionForDynamicMpd;B=B===void 0?-20:B;var C=b.liveheadFallBehindBlockThreshold;C=C===void 0?30:C;var D=b.liveheadFallBehindBlockMargin;D=D===void 0?5.9:D;var E=b.startTimeStamp;E=E===void 0?0:E;var F=b.drmProviders;F=F===void 0?[]:F;var G=b.getVideoDimensions;G=G===void 0?null:G;var H=b.setCustomFetchStreamLoggingAttributes;H=H===void 0?null:H;b=b.bufferEndLimit;b=b===void 0?null:b;e.$Player47=u;u=m.perfLoggerProviders;var I=m.observedOperationLoggers;m=m.isOzDevConsoleEnabled;e.$Player16=m||!1;e.$Player15=new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)(e.$Player66().concat(u));e.$Player1=f;e.$Player3=(m=i)!=null?m:new(c("oz-player/configs/OzPlayerConfig"))((u=j)!=null?u:{});e.$Player67();e.$Player22=new(c("oz-player/loggings/OzOperationLoggerObserver"))();e.$Player22.observe(I,e.$Player15);e.$Player24=n;e.$Player51=o;f=n&&n.getCachedRepresentations();e.$Player25=f||t;e.$Player27=v;e.$Player65=new(c("oz-player/strategies/OzBlockedRepresentationsManager"))(e.$Player3);e.$Player10.addSubscriptions(e.$Player65.onRepresentationBlocked(function(){e.emit("availableQualitiesChanged")}));e.$Player30=[e.$Player65,new(c("oz-player/strategies/OzSupportedMimeCodecsRestriction"))()].concat(w);e.$Player28=y;e.$Player29=x;e.$Player34=z;e.$Player35=A;e.$Player36=E;e.$Player37=B;e.$Player38=C;e.$Player40=D;e.$Player64=b;e.$Player45=F;e.$Player61=H;h instanceof HTMLVideoElement?(e.$Player2=h,e.$Player6=new(c("oz-player/media_source/MediaSourceManager"))(e.$Player2,e.$Player3,e.$Player15)):(e.$Player2=h.getVideoNode(),e.$Player6=h.getMediaSourceManager(),e.$Player7=h);e.$Player6.setOnClearVideoNodeError(function(){e.$Player68()});e.$Player6.onError(function(a){e.$Player11.emitError(a)});e.$Player62=new(c("oz-player/playback_controls/OzClearSourceBufferOnSeekManager"))(e.$Player2,e.$Player3,e.$Player4,e.$Player15);e.$Player62.maybeOverwriteVideoCurrentTimeProperty();e.$Player10.addSubscriptions(e.$Player62.onError(e.$Player11.emitError));e.$Player3.getBool("enable_dvl")&&(e.$Player63=new(c("oz-player/manifests/OzDynamicVideoLibrary"))({config:e.$Player3}));e.$Player42=p;e.$Player43=r;e.$Player44=s;e.$Player12=new(c("oz-player/networks/OzNetworkManager"))({config:e.$Player3,prefetchCache:e.$Player24,networkRequestStreamHandlers:e.$Player42,getOverrideOzRequestImplementation:e.$Player51,getShouldIncludeCredentials:e.$Player43,getCustomRequestParametersForURI:e.$Player44,networkRequestStreamRetryHandler:q,setCustomFetchStreamLoggingAttributes:e.$Player61,dynamicVideoLibrary:e.$Player63});e.$Player17=l;e.$Player3.getBool("treat_inline_mpd_xml_empty_string_as_null")?e.$Player8=k!=null&&k!==""?k:null:e.$Player8=k;e.$Player13=new(c("oz-player/states/OzObservedPlaybackState"))(e.$Player3,e.$Player2,e.$Player15);e.$Player50=G;e.$Player14=new(c("oz-player/streams/OzEndOfStreamWatcher"))(e.$Player6,e.$Player3);e.$Player10.addSubscriptions(e.$Player14.addListener("streamEnd",function(){e.$Player49=!0,e.emit("streamEnd")}));e.$Player23=new(c("oz-player/media_source/OzMediaSeekableRangeManager"))(e.$Player6,e.$Player3);if(e.$Player3.getBool("accept_external_buffering_detector")){e.$Player48=(i=g)!=null?i:e.$Player69()}else e.$Player7==null&&(e.$Player48=e.$Player69());e.$Player3.getNumber("pixels_below_viewport_to_observe")>0&&(e.$Player59=new(c("oz-player/states/OzPositionToViewport"))(e.$Player2,e.$Player3));return e}var f=e.prototype;f.$Player70=function(a){var b=this;this.$Player71();this.$Player7&&this.$Player10.addSubscriptions(this.$Player7.onError(this.$Player11.emitError));try{var e=d("oz-player/loggings/OzLoggingUtils").executeOperationAndLog(this.$Player15.cloneContext().setInitiator(this.$Player47),"parse_manifest",function(e){var c=b.$Player72(a);if(b.$Player3.getBool("log_extra_events")){var f=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(c,b.$Player3);f=f&&f.endTime!=0?f.endTime:null;e.setLiveheadPosition(f).setLiveheadSeqNumMpd(d("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(c)).setManifestType(c.isStaticMpd()?"static":"dynamic").setIsTemplatedManifest(Boolean(c.getCustomField("isLiveTemplated")))}return c});this.$Player73(e)}catch(a){e=a;if(e instanceof c("oz-player/utils/OzError"))this.$Player11.emitError(e);else throw e}};f.$Player73=function(a){var b=this;this.$Player9=h(a);this.$Player3.getBool("player_emit_mpdparsed_early")&&this.emit("mpdParsed",a);this.$Player26=this.$Player74();if(this.$Player17!==null&&this.$Player17!==void 0){var d=new(c("oz-player/parsers/OzMpdUpdater"))(this.$Player3,a,this.$Player12,this.$Player13,this.$Player15,{mpdUrl:null,createXmlParser:this.$Player75,customParsers:this.$Player27,customRepresentationParsers:this.$Player28,customSegmentTimelineParser:this.$Player29},this.$Player46);this.$Player76(d);this.$Player10.addSubscriptions(d.onError(this.$Player11.emitError),d.addListener("manifestFetchError",function(a){return b.emit("manifestFetchError",a)}),d.addListener("streamTransitionToStatic",this.$Player77),d.addListener("streamGone",this.$Player78));d.setupUpdateLoop();this.$Player21=d}this.$Player3.getBool("use_live_latency_manager")?!a.isStaticMpd()?(this.$Player39=new(c("oz-player/playback_controls/OzLiveLatencyManager"))({config:this.$Player3,mpd:a,playbackState:this.$Player13,bufferingDetector:this.$Player48,video:this.$Player2,loggerProvider:this.$Player15}),this.$Player36=this.$Player39.getPreferredLiveHeadLatencySec()*-1):this.$Player36=this.$Player36:this.$Player36=a.isStaticMpd()?this.$Player36:this.$Player79(a);this.$Player18=new(c("oz-player/playback_controls/OzPlayheadManager"))({video:this.$Player2,mpd:a,dynamicVideoLibrary:this.$Player63,playheadCatchup:this.$Player33,playbackState:this.$Player13,config:this.$Player3,perfLoggerProvider:this.$Player15,seekHandler:this.$Player35,initialPlaybackPosition:this.$Player36,canSupportSkipVideobufferGaps:this.$Player62.getCurrentTimePropertyOverwriteSuccess(),liveLatencyManager:this.$Player39});this.$Player19=new(c("oz-player/playback_controls/OzPlayheadNudger"))({config:this.$Player3,video:this.$Player2,perfLoggerProvider:this.$Player15});this.$Player20=new(c("oz-player/playback_controls/OzPlaybackTimeRangeManager"))({config:this.$Player3,video:this.$Player2,mpd:a,liveheadFallBehindBlockThreshold:this.$Player38,liveheadFallBehindBlockMargin:this.$Player40,playbackState:this.$Player13,perfLoggerProvider:this.$Player15});this.$Player80()["catch"](function(a){a instanceof c("oz-player/utils/OzError")?b.$Player11.emitError(a):b.$Player11.emitError(new(c("oz-player/utils/OzError"))({type:"OZ_INITIALIZATION",description:"Failed to setup streams: "+(a.message||String(a)),extra:{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()}}))});this.emit("mpdReady",a)};f.load=function(a){var b=this;this.$Player17=a;try{var d=this.$Player8;d!=null?this.$Player70(d):a!=null?this.$Player81(a).then(function(a){if(b.$Player58){b.$Player58=!1;b.load(b.$Player17);return}b.$Player8=a;b.$Player52=0;b.$Player70(a)})["catch"](function(d){var e;if(b.$Player58){b.$Player58=!1;b.load(b.$Player17);return}e=d instanceof c("oz-player/utils/OzError")?d:new(c("oz-player/utils/OzError"))({type:"OZ_INITIALIZATION",description:"Unknown mpd url load failure; errorMessage: "+d.message+"; errorDescription: "+((e=d.description)!=null?e:"")+";",extra:{originalError:d,url:a}});b.$Player82(e,a)}):this.$Player11.emitError(new(c("oz-player/utils/OzError"))({type:"OZ_INITIALIZATION",description:"Cannot start Oz without a raw mpd xml or mpd url"}))}catch(a){d=a instanceof c("oz-player/utils/OzError")?a:new(c("oz-player/utils/OzError"))({type:"OZ_INITIALIZATION",description:"Failed to call load"+("; errorMessage: "+a.message+"; errorDescription: "+((d=a.description)!=null?d:"")+";")});this.$Player11.emitError(d)}};f.$Player79=function(a){var b;b=(b=a.getVideoRepresentations()[0].getMaxGopSec())!=null?b:0;if(this.$Player3.getBool("use_ending_duration_for_gop_multiplier")){a=(a=a.getVideoRepresentations()[0].getEndingSegment())==null?void 0:a.getTimeRange();a=a!=null?a.endTime-a.startTime:0;a>0&&(b=a)}return Math.min(this.$Player37+this.$Player3.getNumber("dynamic_mpd_initial_playback_position_offset_modifier"),-1*b*this.$Player3.getNumber("pdash_download_cursor_catchup_threshold_gop_multiplier"))};f.$Player81=function(a){this.$Player52++;a=this.$Player12.requestRawUrl(a,null,this.$Player15);a=a.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpString(a)};f.$Player83=function(){this.$Player53!=null&&(c("oz-player/shims/ozClearTimeout")(this.$Player53),this.$Player53=null)};f.$Player82=function(a,b){var d=this,e=!0,f=this.$Player52-1,g=a.getExtra().code;this.$Player54!==g?(this.$Player54=g,this.$Player55=1):this.$Player55++;var h=function(){e=!1};g={endStream:function(){throw new(c("oz-player/utils/OzError"))({type:"OZ_INITIALIZATION",description:"Cannot call endStream before stream is started"})},consecutiveFailuresForErrorCode:this.$Player55,error:a,isInitialRequest:!0,retry:function(a){h(),d.$Player83(),d.$Player53=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){d.$Player83(),d.load(b)},(a==null?void 0:a.waitMs)!=null?a==null?void 0:a.waitMs:1e3)},retryAttemptCount:f};this.$Player3.getNumber("initial_manifest_request_retry_count")>0&&this.emit("manifestFetchError",g);e&&this.$Player11.emitError(a)};f.updatePlayerRunTimeConfig=function(a){var b=a.manifestUrl,c=a.audioStreamDataHandler;a=a.videoStreamDataHandler;if(a!==void 0){var d=this.$Player4.get("video");d&&d.updateRunTimeConfigs({streamDataHandler:a})}if(c!==void 0){d=this.$Player4.get("audio");d&&d.updateRunTimeConfigs({streamDataHandler:c})}b!=null&&b!==""&&this.$Player84(b)};f.$Player85=function(a,b){var c=this,e=a.getMimeCodecs(),f,g=0,h=null,i=this.$Player7;i&&(f=i.getSourceBufferManagerPromise(e),g=i.getPrependedSegmentsCount(e),this.$Player3.getBool("fix_quick_starter_overhead")&&(h=i.getRepresentationId(e)));f||(f=this.$Player6.createSourceBufferManager(e,this.$Player3.getBool("set_source_buffer_append_window_end")));this.$Player86(f,b,h,a,g);i=f.then(function(a){c.$Player48&&c.$Player48.setSourceBufferState(b,a.getSourceBufferState());return a});return d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(i,this.$Player15,"source_attach",function(a){a.setType(b)}).then(function(a){return c.$Player18.observeSourceBufferState(a.getSourceBufferState(),b)})};f.isDrm=function(){var a=this.$Player46;if(a!==null&&a!==void 0){a=a.hasContentProtections();return a!=null?a:!1}return!1};f.$Player71=function(){if(this.$Player45.length>0){var a=this.$Player46=new(d("oz-player/drm/OzDrmManager").OzDrmManager)(this.$Player15,this.$Player2,{maxStartEMEAttempts:this.$Player3.getNumber("max_start_eme_attempts")});a.onError(this.$Player11.emitError);this.$Player45&&this.$Player45.forEach(a.addProvider,a);this.$Player28.drmProtections&&this.$Player11.emitError(new(c("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:'"drmProtections" is a reserved parser name for "customRepresentationParsers". Please rename your parser.'}));this.$Player28.drmProtections=function(b){return a.parseContentProtectionForRepresentation(b)}}};f.$Player87=function(a){var b=this,d=h(this.$Player9);a=[this.$Player3,a,d.getVideoRepresentations(),this.$Player30,this.$Player13,window.devicePixelRatio||1,function(){return b.$Player88()},d.isStaticMpd()?"static":"dynamic"];d=this.$Player34&&this.$Player34.apply(this,a);return(d=d)!=null?d:babelHelpers.construct(c("oz-player/strategies/OzAbrManager"),a)};f.$Player86=function(a,b,e,f,g){var i=this,j=h(this.$Player9),k=this.$Player5.get(b),l=new(c("oz-player/streams/OzMediaStream"))({config:this.$Player3,sourceBufferManagerPromise:a,prependedSegmentsCount:g,networkManager:this.$Player12,playbackState:this.$Player13,endOfStreamWatcher:this.$Player14,bufferTargetCalculator:this.$Player26,priorityCalculator:this.$Player89(),streamSegmentsCountCalculator:this.$Player90(b),abrManager:k,loadedRepresentationId:e,representation:f,loggerProvider:this.$Player15.cloneContext().setType(b),segmentLocator:this.$Player60,setCustomFetchStreamLoggingAttributes:this.$Player61,blockedRepresentationsManager:this.$Player65});this.$Player36===0?l.start():this.$Player10.addSubscriptions(this.$Player18.addListener("initialPlaybackPositionSet",function(){i.$Player13.forceUpdateCurrentTime(),l.start()}));this.$Player10.addSubscriptions(l.onError(this.$Player11.emitError),this.$Player23.listenToMediaStreamInitAppended(l));b==="video"&&(this.$Player32=new(c("oz-player/streams/OzHandleUserRepresentationSwitch"))(this.$Player3,this.$Player13,d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player3,this.$Player30,this.$Player88(),j.getVideoRepresentations()),l,a),this.$Player10.addSubscriptions(this.$Player32.onError(this.$Player11.emitError)));this.$Player4.set(b,l);this.$Player10.addSubscriptions(l.addListener("switchRepresentation",function(){if(i.$Player3.getBool("update_live_video_config_on_representation_switch")){var a=l.getCurrentRepresentation();i.$Player3.getBool("fix_setup_video_duration_on_representation_switch")||i.$Player91(a);i.$Player23.setTimeRangeProvider(a);i.$Player18.setTimeRangeProvider(a);i.$Player20!=null&&i.$Player20.setTimeRangeProvider(a)}b==="video"&&i.emit("switchVideoRepresentation")}),l.addListener("SegmentAppended",function(a){i.$Player92("SegmentAppended",a)}),l.addListener("streamError",function(a){i.emit("streamError",a)}))};f.$Player74=function(){return this.$Player64!=null?new(c("oz-player/strategies/OzBufferTargetCalculator"))([new(c("oz-player/strategies/OzBufferEndLimitStrategy"))(this.$Player2,this.$Player64)],[]):new(c("oz-player/strategies/OzBufferTargetCalculator"))([new(c("oz-player/strategies/OzStaleManifestBufferTargetStrategy"))(h(this.$Player9),this.$Player3),new(c("oz-player/strategies/OzStartupBufferTargetStrategy"))(this.$Player13,this.$Player3),new(c("oz-player/strategies/OzBufferAheadTargetStrategy"))(this.$Player3)],this.$Player3.getBool("append_retry_quota_exceeded_error")?[new(c("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))(this.$Player3)]:[])};f.$Player76=function(a){var b=this;if(this.$Player3.getNumber("stream_interrupt_check_mpd_stale_count_threshold")>0){var d=this.$Player3.getBool("use_buffering_detector_for_playhead_interruption")?this.$Player48:null,e=new(c("oz-player/strategies/OzPlayheadAtInterruptionDetector"))(this.$Player2,d);this.$Player10.addSubscriptions(e.addListener("playheadAtInterruption",function(a){b.$Player15.getOperationLogger("stream_interrupted").log(),b.emit("streamInterruptAt",a)}),a.addListener("streamInterruptAt",function(a){var c;(c=b.$Player48)==null?void 0:c.notifyStreamInterrupted();e.notifyStreamInterrupted(a)}),a.addListener("streamResumedAt",function(a){var c;b.$Player3.getBool("restart_media_streams_on_stream_resumed")&&b.$Player4.forEach(function(a){a.restartLoopBody()});b.$Player15.getOperationLogger("stream_resumed").log();(c=b.$Player48)==null?void 0:c.notifyStreamResumed();e.notifyStreamResumed();b.emit("streamResumedAt",a)}));this.$Player31=e}};f.$Player89=function(){var a=[new(c("oz-player/strategies/OzPlayingStatePriorityStrategy"))(this.$Player13),new(c("oz-player/strategies/OzBufferAheadPriorityStrategy"))(this.$Player3,this.$Player13)].concat(this.$Player3.getNumber("pixels_below_viewport_to_observe")>0&&this.$Player59!=null?new(c("oz-player/strategies/OzPositionToViewportPriorityStrategy"))(this.$Player59,this.$Player3):[]);return new(c("oz-player/strategies/OzPriorityCalculator"))(a)};f.$Player90=function(a){var b=[new(c("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(this.$Player3),new(c("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy"))(this.$Player26,this.$Player3)];this.$Player3.getNumber("paused_stream_segments_count")!==0&&b.push(new(c("oz-player/strategies/OzPausedStreamSegmentsCountStrategy"))(this.$Player13,this.$Player3));if(a==="video"){a=h(this.$Player9);b.push(new(c("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy"))(this.$Player3,a.getVideoRepresentations()))}return new(c("oz-player/strategies/OzStreamSegmentsCountCalculator"))(b)};f.onError=function(a){return this.$Player11.onError(a)};f.getSelectedVideoQuality=function(){var a=this.$Player9;if(!a)return"";var b=this.$Player4.get("video");b=b&&b.getCurrentRepresentation();if(b instanceof c("oz-player/manifests/OzVideoRepresentation"))return b.getQualityLabel();b=a.getVideoRepresentations();a=b[0];if(a)return a.getQualityLabel();a||c("oz-player/shims/ozvariant")(0,19857);return""};f.switchToVideoQuality=function(a){var b=h(this.$Player9);b=b.getVideoRepresentations().find(function(b){return b.getQualityLabel()===a});if(b){var c=this.$Player4.get("video");c&&(c.switchRepresentation(b),c.disableAdaptation())}};f.getIsVideoQualityAdaptationEnabled=function(){var a=this.$Player4.get("video");return a?a.getIsAdaptationEnabled():!1};f.enableVideoQualityAdaptation=function(){var a=this.$Player4.get("video");a&&a.enableAdaptation()};f.getVideoQualities=function(){var a=this,b=this.$Player9;return!b?[]:b.getVideoRepresentations().filter(function(b){var c;return!((c=a.$Player65)==null?void 0:c.isBlocked(b.getID()))}).map(function(a){return a.getQualityLabel()})};f.setEnableLiveheadCatchup=function(a){this.$Player20&&(a?this.$Player15.getOperationLogger("live_catchup_enabled").log():this.$Player15.getOperationLogger("live_catchup_disabled").log(),this.$Player20.setTimelineBlockingEnabled(a)),this.$Player4.forEach(function(b){b.setEnableLiveheadCatchup(a)}),this.$Player18.setEnableLiveheadCatchup(a)};f.$Player80=function(){var a=this,c=h(this.$Player9);c=c.getVideoRepresentations()[0];this.$Player60=c&&c.canPredict()&&this.$Player3.getBool("pdash_use_pdash_segmentlocator")||c&&c.canApproximateId()?new(d("oz-player/streams/OzPredictedSegmentLocator").OzPredictedSegmentLocator)({videoNode:this.$Player2,liveLatencyManager:this.$Player39,loggerProvider:this.$Player15,dynamicVideoLibrary:this.$Player63}):null;c=this.$Player1?[this.$Player93({liveConfigsFromAudioStream:!0})]:[this.$Player94(),this.$Player93({})];var e=[];return b("Promise").all(c).then(function(){var b=a.$Player4.get("video"),c=a.$Player4.get("audio");b&&e.push(b.getCurrentRepresentation());c&&e.push(c.getCurrentRepresentation());e.forEach(function(b){a.$Player10.addSubscriptions(b.addUpdateListener(function(){a.$Player92("SegmentIndexesUpdated",e)}))});a.$Player92("InitialSegmentIndexes",e);a.$Player2&&a.$Player2.style&&(a.$Player2.style.display=a.$Player1?"none":"block")})};f.$Player91=function(a){if(a.getTimeRanges().length){a=a.getTimeRanges()[a.getTimeRanges().length-1].endTime;this.$Player6.updateDuration(a)}else this.$Player3.getBool("log_extra_events")&&this.$Player15.getOperationLogger("playhead_adjustment").setInitiator("setup_initial_duration").setResult("failed").log()};f.$Player95=function(a){this.$Player91(a),this.$Player23.setTimeRangeProvider(a),this.$Player18.setTimeRangeProvider(a),this.$Player20!=null&&this.$Player20.setTimeRangeProvider(a)};f.$Player94=function(){var a=h(this.$Player9);a=a.getVideoRepresentations();if(this.$Player3.getBool("no_representation_error_detailed_message")&&!a.length)return c("oz-player/shims/OzMaybeNativePromise").reject(new Error("no video representations in the manifest."));var b=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player3,this.$Player30,this.$Player88(),a,this.$Player3.getBool("respect_initial_representation_on_setup")?this.$Player25:null);if(!b.length)if(this.$Player3.getBool("no_representation_error_detailed_message")){a=a.map(function(a){return a.getQualityLabel()+"@"+a.getWidth()+"x"+a.getHeight()+"("+a.getMimeCodecs()+")"});return c("oz-player/shims/OzMaybeNativePromise").reject(new Error("restricted all video representations: "+a.join(", ")))}else return c("oz-player/shims/OzMaybeNativePromise").reject(new Error("no representation available."));this.$Player95(b[0]);a=this.$Player96(b);if(this.$Player3.getBool("enable_adaptation")){var e=this.$Player87(a||b[0]);this.$Player5.set("video",e);this.$Player3.getBool("use_abr_for_missing_default_representation")&&!a&&(a=e.getBestRepresentation())}return this.$Player85(a||b[0],"video")};f.$Player93=function(a){a=a.liveConfigsFromAudioStream;a=a===void 0?!1:a;var b=h(this.$Player9);b=b.getAudioRepresentations();a&&this.$Player95(b[0]);return b.length?this.$Player85(this.$Player97(b)||b[0],"audio"):c("oz-player/shims/OzMaybeNativePromise").resolve()};f.getMpd=function(){return this.$Player9};f.destroy=function(a){var c=this;a=this.$Player15.getOperationLogger("unload").setInitiator(a).start();this.$Player62.destroy();this.$Player83();this.$Player4.forEach(function(a){a.cleanup()});this.$Player32&&this.$Player32.cleanup();this.$Player4=new Map();this.$Player10.release();this.$Player10.engage();this.$Player13.destroy();this.$Player18&&this.$Player18.destroy();this.$Player39&&(this.$Player39.destroy(),this.$Player39=null);this.$Player19&&(this.$Player19.destroy(),this.$Player19=null);this.$Player20&&(this.$Player20.destroy(),this.$Player20=null);this.$Player46&&this.$Player46.destroy();this.$Player59&&this.$Player59.destroy();this.$Player12&&this.$Player12.destroy();this.$Player50&&(this.$Player50=null);this.$Player3.getBool("detach_media_source_manager")&&this.$Player6&&this.$Player6.detach();var d=b("Promise").resolve();this.$Player3.getBool("cleanup_video_node_on_destroy")&&(this.$Player2.pause(),this.$Player3.getBool("remove_src_attr_on_unload")?this.$Player2.removeAttribute("src"):this.$Player2.src="","function"===typeof this.$Player2.setMediaKeys&&(d=this.$Player2.setMediaKeys(null)));this.$Player21&&this.$Player21.destroy();this.$Player31&&this.$Player31.destroy();this.$Player22.destroy();this.$Player23.destroy();this.$Player48&&this.$Player48.destroy();a.log();this.$Player3.getBool("emit_destroyed_after_media_keys_clear")||this.emit("destroyed");a=[d];return b("Promise").all(a).then(function(){c.$Player3.getBool("load_video_node_on_unload")&&(c.$Player2.load(),c.$Player3.getBool("emit_destroyed_after_media_keys_clear")&&c.emit("destroyed"))})};f.$Player96=function(a){var b=this,d;d=a.find(function(a){return b.$Player25.indexOf(a.getID())!==-1});if(!d&&this.$Player7&&this.$Player3.getBool("fix_quick_starter_overhead")){var e=this.$Player7.getRepresentationId("video");e!==null&&e!==void 0&&(d=a.find(function(a){return a.getID()===e}))}d||(d=c("oz-player/utils/getRepresentationInCache")(a,this.$Player24));return d||null};f.$Player97=function(a){var b=this,d=h(this.$Player9),e;e=a.find(function(a){return b.$Player25.indexOf(a.getID())!==-1});if(!e&&this.$Player7&&this.$Player3.getBool("fix_quick_starter_overhead")){var f=this.$Player7.getRepresentationId("audio");f!==null&&f!==void 0&&(e=a.find(function(a){return a.getID()===f}))}e||(e=c("oz-player/utils/getRepresentationInCache")(a,this.$Player24));if(!e&&!d.isStaticMpd()&&a.length>1&&this.$Player3.getBool("live_audio_ibr")){d=new(c("oz-player/strategies/OzAudioIBRManager"))(this.$Player3,this.$Player15);e=d.getInitialAudioRepresentation(a)}return e||null};f.$Player72=function(a){var b=new(c("oz-player/parsers/OzMpdParser"))(this.$Player3,{mpdUrl:this.$Player17,createXmlParser:this.$Player75,customParsers:this.$Player27,customRepresentationParsers:this.$Player28,customSegmentTimelineParser:this.$Player29},this.$Player12,this.$Player15,this.$Player46,this.$Player25,this.$Player65);this.$Player10.addSubscriptions(b.onError(this.$Player11.emitError));return b.parse(a)};f.$Player66=function(){var a=[];this.$Player16&&a.push(new(d("oz-player/loggings/OzDevConsolePerfLogger").OzDevConsolePerfLoggerProvider)());return a};f.$Player98=function(a,b){b=this.$Player4.get(b);return b?b.getRepresentationIDAtTime(a):null};f.getAudioRepresentationIDAtTime=function(a){return this.$Player98(a,"audio")};f.getVideoRepresentationIDAtTime=function(a){return this.$Player98(a,"video")};f.getCurrentVideoRepresentation=function(){return this.$Player99("video")};f.getCurrentAudioRepresentation=function(){return this.$Player99("audio")};f.$Player99=function(a){var b=this.$Player98(this.$Player13.getCurrentTime(),a),c=this.$Player9;if(!c)return null;var d=[];a==="audio"?d=c.getAudioRepresentations():a==="video"&&(d=c.getVideoRepresentations());return(a=d.find(function(a){return a.getID()===b}))!=null?a:null};f.getSelectedVideoRepresentation=function(){var a=this.$Player4.get("video");return a!=null?a.getCurrentRepresentation():null};f.getSelectedAudioRepresentation=function(){var a=this.$Player4.get("audio");return a!=null?a.getCurrentRepresentation():null};f.getDebug=function(){var a=this,b=this.$Player4.get("video"),c=this.$Player4.get("audio"),d,e,f,g,i;b&&(d=b.getDebug().MediaStreamAbrManager,e=b.getDebug().SourceBufferManager,e&&(f=e.getDebug().SourceBuffer));c&&(g=c.getDebug().SourceBufferManager,g&&(i=g.getDebug().SourceBuffer));return{getManifest:function(){return h(a.$Player9)},indentifiersIntact:!0,VideoSourceStream:b,VideoAbrManager:d,VideoBufferManager:e,VideoSourceBuffer:f,AudioSourceStream:c,AudioBufferManager:g,AudioSourceBuffer:i}};f.injectExternalDebugEvent=function(a,b){this.$Player92(a,b)};f.$Player92=function(a,b){this.emit("debug/dashPlayerEvent",{detail:{type:a,event:b}})};f.$Player67=function(){this.$Player3.getBool("live_playhead_catch_up")&&(this.$Player33=new(c("oz-player/strategies/OzLiveheadDeltaCatchupStrategy"))(this.$Player3))};f.$Player69=function(){var a=this,b=new(c("oz-player/strategies/OzBufferingDetector"))(this.$Player2,this.$Player3.getLegacyConfig(),function(){return a.$Player49?a.$Player2.duration:Infinity});b.attachPerfLoggerProvider(this.$Player15);this.$Player10.addSubscriptions(b.addListener("enterBuffering",function(b){a.emit("enterBuffering",b)}),b.addListener("leaveBuffering",function(){a.emit("leaveBuffering")}));return b};f.$Player88=function(){var a=this.$Player50?this.$Player50():{width:this.$Player2.offsetWidth,height:this.$Player2.offsetHeight};return a};f.getMpdUrl=function(){return this.$Player17};f.$Player84=function(a){var b=this;this.$Player17=a;var c=this.$Player9;if(!c){this.$Player58=!0;return}else{c.updateLocation(a);this.$Player41&&(this.$Player10.releaseOne(this.$Player41),this.$Player41=null);a=function(){b.$Player41&&(b.$Player10.releaseOne(b.$Player41),b.$Player41=null),b.$Player4.forEach(function(a,d){var e=a.getCurrentRepresentation(),f=e.getQualityLabel();e=(d==="video"?c.getVideoRepresentations():c.getAudioRepresentations()).slice();if(d==="video"){d=b.$Player5.get(d);d&&d.updateRepresentations(c.getVideoRepresentations())}d=e[0];e.forEach(function(a){var b=a.getQualityLabel();b===f&&(d=a)});a.switchRepresentation(d);a.restartLoopBody()})};this.$Player41=c.addListener("updated",a);this.$Player10.addSubscriptions(this.$Player41)}};f.getPerfLoggerProvider=function(){return this.$Player15};f.getApproximateFBLSToPlayerDisplayLatency=function(){var a,b;a=Number((a=(a=this.$Player9)==null?void 0:a.getCustomField("lastVideoFrameTs"))!=null?a:void 0);b=Number((b=(b=this.$Player9)==null?void 0:b.getCustomField("currentServerTimeMs"))!=null?b:void 0);var c=this.$Player100(a,b);a=this.$Player101(a,b);return{latencyFromClockSync:a,latencyFromMpdUpdate:c}};f.$Player100=function(a,b){if(!this.$Player13.getCurrentTime()||isNaN(a)||isNaN(b))return null;b=0;this.$Player56===a?b=(c("oz-player/shims/OzPerformance").now()-Number(this.$Player57))/1e3:(this.$Player57=c("oz-player/shims/OzPerformance").now(),this.$Player56=a);a=a/1e3+b-this.$Player13.getCurrentTime();return a};f.$Player101=function(a,b){var d;if(!this.$Player13.getCurrentTime()||isNaN(a)||isNaN(b)||c("oz-player/networks/OzClientClock").getClientClockOffsetMs()==null||!c("oz-player/networks/OzClientClock").getClientClockOffsetMs())return null;d=this.$Player13.getCurrentTimeUpdateTime()+((d=c("oz-player/networks/OzClientClock").getClientClockOffsetMs())!=null?d:0);b=b;var e=this.$Player13.getCurrentTime()*1e3;a=a;d=(d-b-(e-a))/1e3;return d};f.$Player68=function(){this.$Player4.forEach(function(a){a.restartLoopBody();var b=a.getCurrentRepresentation();a.switchRepresentation(b)})};return e}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player",["oz-player/Player"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/Player")}),98);
__d("usePremiumMusicVideoInterruptionSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"PremiumMusicVideoInterruptionSubscribeResponsePayload",kind:"LinkedField",name:"premium_music_video_interruption_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"disable_autoplay",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"usePremiumMusicVideoInterruptionSubscription",selections:b,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"usePremiumMusicVideoInterruptionSubscription",selections:b},params:{id:"3656947831001794",metadata:{subscriptionName:"premium_music_video_interruption_subscribe"},name:"usePremiumMusicVideoInterruptionSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("VideoPlayerRelay_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},{defaultValue:null,kind:"LocalArgument",name:"playerSuborigin"},{defaultValue:"DEFAULT",kind:"LocalArgument",name:"videoPlayerContext"}],kind:"Fragment",metadata:null,name:"VideoPlayerRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"animated_image_caption",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcaster_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_streaming",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_trace_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_looping",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_video_broadcast",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"loop_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unsupported_browser_message",storageKey:null},{alias:null,args:null,concreteType:"MusicVideoMetadata",kind:"LinkedField",name:"pmv_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_ncsr",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"permalink_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_url",storageKey:null},{alias:null,args:[{kind:"Variable",name:"player_origin",variableName:"playerOrigin"},{kind:"Variable",name:"player_suborigin",variableName:"playerSuborigin"}],kind:"ScalarField",name:"dash_prefetch_experimental",storageKey:null},{alias:null,args:null,concreteType:"VideoCaptionLocale",kind:"LinkedField",name:"video_available_captions_locales",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"localized_creation_method",storageKey:null}],storageKey:null},{args:[{kind:"Variable",name:"playerOrigin",variableName:"playerOrigin"},{kind:"Variable",name:"playerSuborigin",variableName:"playerSuborigin"}],kind:"FragmentSpread",name:"useOzQuickStarterData_video"},{args:[{kind:"Variable",name:"videoPlayerContext",variableName:"videoPlayerContext"}],kind:"FragmentSpread",name:"useRelay3DVideoImplementations_video"},{args:null,kind:"FragmentSpread",name:"useVideoImplementationsImpl_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaConfig_video"},{args:null,kind:"FragmentSpread",name:"useResolvedVideoPlayerConfigs_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoAutoplayGatingResult_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoDRMInfo_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoP2PSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAudioSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerCaptionsSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerLiveLatencyKnobSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAudioAvailabilityInfoRelay_video"},{alias:null,args:null,concreteType:"SphericalVideoRenderer",kind:"LinkedField",name:"spherical_video_renderer",plural:!1,selections:[{args:null,documentName:"VideoPlayerRelay_video_spherical_video_renderer",fragmentName:"VideoPlayerSphericalRelay_sphericalVideoRenderer",fragmentPropName:"sphericalVideoRenderer",kind:"ModuleImport"}],storageKey:null},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"InstreamVideoAdBreaksPlayer_video"}]},{args:null,kind:"FragmentSpread",name:"VideoPlayerVideoIsCastingCover_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerAudioSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerAudioSettings_video",selections:[{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"video_volume_setting",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerAudioAvailabilityInfoRelay_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerAudioAvailabilityInfoRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_availability",storageKey:null},{alias:null,args:null,concreteType:"VideoMutedSegment",kind:"LinkedField",name:"muted_segments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"mute_start_time_in_sec",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mute_end_time_in_sec",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useGraphQLVideoAutoplayGatingResult_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoAutoplayGatingResult_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"autoplay_gating_result",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_autoplay_setting",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_autoplay",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("VideoPlayerDefaultControls_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerDefaultControls_video",selections:[{args:null,kind:"FragmentSpread",name:"VideoPlayerDefaultControlsImplLive_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerDefaultControlsImplNotLive_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useGraphQLVideoDRMInfo_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoDRMInfo_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"drm_info",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useOzQuickStarterData_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"start",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"representation_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mime_codec",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"segment_type",storageKey:null}];return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},{defaultValue:null,kind:"LocalArgument",name:"playerSuborigin"}],kind:"Fragment",metadata:null,name:"useOzQuickStarterData_video",selections:[{alias:null,args:[{kind:"Variable",name:"player_origin",variableName:"playerOrigin"},{kind:"Variable",name:"player_suborigin",variableName:"playerSuborigin"}],concreteType:"VideoPrefetchResources",kind:"LinkedField",name:"dash_prefetch_resources",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoPrefetchResource",kind:"LinkedField",name:"audio",plural:!0,selections:a,storageKey:null},{alias:null,args:null,concreteType:"VideoPrefetchResource",kind:"LinkedField",name:"video",plural:!0,selections:a,storageKey:null}],storageKey:null}],type:"Video",abstractKey:null}}();e.exports=a}),null);
__d("InstreamVideoAdBreaksPlayer_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"InstreamVideoAdBreaksPlayer_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"InstreamExtraConfig",kind:"LinkedField",name:"instream_extra_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"instream_halo_delay_time_seconds",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreaks",kind:"LinkedField",name:"instream_video_ad_breaks_comet",plural:!1,selections:[{args:null,documentName:"InstreamVideoAdBreaksPlayer_video_instream_video_ad_breaks_comet",fragmentName:"InstreamVideoAdBreaksPlayerImpl_adBreaks",fragmentPropName:"adBreaks",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useGraphQLVideoP2PSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoP2PSettings_video",selections:[{alias:null,args:null,concreteType:"VideoP2PSettings",kind:"LinkedField",name:"p2p_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ticket",storageKey:null},{alias:null,args:null,concreteType:"VideoP2PSettingsConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"delay_p2p_until_play",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"disable_hivejava_for_livevc",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoHiveInitializationOptions",kind:"LinkedField",name:"hive_initialization_options",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoHiveInitializationOptionHiveJava",kind:"LinkedField",name:"hive_java",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"min_version",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hive_tech_order",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"debug_level",storageKey:null}],storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerCaptionsSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerCaptionsSettings_video",selections:[{alias:null,args:null,concreteType:"CaptionsSettings",kind:"LinkedField",name:"captions_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"always_show_captions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_background_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_background_opacity",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_text_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_text_size",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerLiveLatencyKnobSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerLiveLatencyKnobSettings_video",selections:[{alias:null,args:null,concreteType:"VideoBroadcastLowLatencyConfig",kind:"LinkedField",name:"broadcast_low_latency_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ll_desired_latency_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ll_latency_tolerance_ms",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("usePremiumMusicVideoInterruptionSubscription",["CometRelay","react","usePremiumMusicVideoInterruptionSubscription.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react").useEffect,j=h!==void 0?h:h=b("usePremiumMusicVideoInterruptionSubscription.graphql");function a(a){var b=d("CometRelay").useRelayEnvironment();i(function(){if(a==null)return;var c=d("CometRelay").requestSubscription(b,{subscription:j,variables:{input:{user_id:a}}});return function(){c.dispose()}},[a,b])}g["default"]=a}),98);
__d("useEventCallbackOn",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a,b,c){h(function(){a.addEventListener(b,c);return function(){a.removeEventListener(b,c)}},[a,b,c])}g["default"]=a}),98);
__d("useIsBackgrounded",["VideoPlayerShakaGlobalConfig","react","useEventCallbackOn"],(function(a,b,c,d,e,f,g){"use strict";f=d("react");var h=f.useCallback,i=f.useState;function b(){var b=a.document;if(typeof b.hidden!=="undefined")return"visibilitychange";else if(typeof b.mozHidden!=="undefined")return"mozvisibilitychange";else if(typeof b.msHidden!=="undefined")return"msvisibilitychange";else if(typeof b.webkitHidden!=="undefined")return"webkitvisibilitychange";return"visibilitychange"}function j(){var b=a.document;if(typeof b.hidden!=="undefined")return b.hidden;else if(typeof b.mozHidden!=="undefined")return b.mozHidden;else if(typeof b.msHidden!=="undefined")return b.msHidden;else if(typeof b.webkitHidden!=="undefined")return b.webkitHidden;return!1}var k=b();function l(){var b=a.document.hasFocus?a.document.hasFocus():!0,c=j(),e=d("VideoPlayerShakaGlobalConfig").getBool("comet_www_no_pause_on_blur_or_focus_events",!1);return c||(e?!1:!b)}function e(b){var e=i(function(){return l()}),f=e[0],g=e[1],j=!!b&&b.scrollTerminatesBackgrounded===!0;e=h(function(){g(l())},[g,l]);b=e;var m=h(function(){var a=l();a&&j&&f&&g(!1)},[f,j,g]);d("VideoPlayerShakaGlobalConfig").getBool("comet_www_no_pause_on_blur_or_focus_events",!1)&&(b=function(){});c("useEventCallbackOn")(a.window,"blur",b);c("useEventCallbackOn")(a.window,"focus",b);c("useEventCallbackOn")(a.document,k,e);c("useEventCallbackOn")(a.window,"scroll",m);return f}g["default"]=e}),98);
__d("VideoPlayerViewabilityProvider.react",["VideoPlayerViewabilityContexts","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.children,c=a.isFullscreen;a=a.videoPlayerPassiveViewabilityInfo;return h.jsx(d("VideoPlayerViewabilityContexts").VideoPlayerPassiveViewabilityInfoContext.Provider,{value:a,children:h.jsx(d("VideoPlayerViewabilityContexts").VideoPlayerFullscreenContext.Provider,{value:c,children:b})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("wrapWithContextProviders",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a,b){return b.reduceRight(function(a,b){return b(a)},a)}a.displayName=a.name+" [from "+f.id+"]";function b(a,b){return function(c){return h.jsx(a.Provider,{value:b,children:c})}}g.wrapWithContextProviders=a;g.makeRenderProviderFn=b}),98);
__d("VideoPlayerComponentContainer.react",["CometVisualCompletionAttributes","VideoPlayerContexts","VideoPlayerHooks","VideoPlayerViewabilityProvider.react","clearTimeout","cr:1269159","react","setTimeout","wrapWithContextProviders"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useCallback,j=e.useEffect,k=e.useRef,l=e.useState;function m(a){var b=k(a);j(function(){b.current=a},[a]);var d=l(!1),e=d[0],f=d[1];d=l(function(){var a=null;return{cleanup:function(){a&&a()},pingNotIdle:function(){a&&a();f(!1);var d=c("setTimeout")(function(){f(!0)},b.current);a=function(){c("clearTimeout")(d),a=null}}}});d=d[0];var g=d.cleanup;d=d.pingNotIdle;j(function(){return g},[g]);return{isIdle:e,pingNotIdle:d}}function n(){var a=l(!1),b=a[0],c=a[1];a=3e3;a=m(a);var d=a.isIdle,e=a.pingNotIdle;a=i(function(){c(!0),e()},[e]);var f=i(function(){c(!1),e()},[e]),g=i(function(){c(!0),e()},[e]),h=i(function(){e()},[e]),j=i(function(){e()},[e]);return{isHovering:b,isIdle:d,onMouseDown:h,onMouseEnter:a,onMouseLeave:f,onMouseMove:g,onMouseUp:j}}function o(a){var b=n(),e=b.isHovering,f=b.isIdle,g=b.onMouseDown,i=b.onMouseEnter,j=b.onMouseLeave,k=b.onMouseMove;b=b.onMouseUp;var l=d("VideoPlayerHooks").useIsFullscreen();return h.jsx("div",babelHelpers["extends"]({className:"k4urcfbm kr520xx4 pmk7jnqg datstx6m"+(l&&f?" sorcqhzv":"")},c("CometVisualCompletionAttributes").IGNORE,{onMouseDown:g,onMouseEnter:i,onMouseLeave:j,onMouseMove:k,onMouseUp:b,children:h.jsx(d("VideoPlayerContexts").VideoPlayerMouseHoverContext.Provider,{value:e,children:h.jsx(d("VideoPlayerContexts").VideoPlayerMouseIdleContext.Provider,{value:f,children:a.children})})}))}o.displayName=o.name+" [from "+f.id+"]";function a(a){var e=a.children;a=babelHelpers.objectWithoutPropertiesLoose(a,["children"]);var f=a.adClientToken,g=a.audioAvailabilityInfo,i=a.autoplayGatingResult,j=a.broadcastStatus,k=a.canAutoplay,l=a.controller,m=a.dimensions,n=a.initialTracePolicy,p=a.instanceKey,q=a.isFullscreen,r=a.isNCSR,s=a.isPremiumMusicVideo,t=a.lastMuteReason,u=a.lastPauseReason,v=a.lastPlayReason,w=a.originalHeight,x=a.originalWidth,y=a.videoFBID,z=a.videoPlayerPassiveViewabilityInfo,A=a.videoState,B=a.volumeSetting,C=A.activeCaptions,D=A.activeEmsgBoxes,E=A.availableVideoQualities,F=A.bufferEnd,G=A.captionDisplayStyle,H=A.captionsLoaded,I=A.captionsVisible,J=A.currentVideoQuality,K=A.duration,L=A.ended,M=A.error,N=A.inbandCaptionsAutogenerated,O=A.inPlayStalling,P=A.isAbrEnabled,Q=A.isExternalMedia,R=A.isLiveRewindActive,S=A.lastPlayedTimeMs,T=A.latencyLevel,U=A.loopCount,V=A.loopCurrent,W=A.muted,X=A.paused,Y=A.playerImplementationName,Z=A.playing,$=A.seekableRanges,aa=A.seeking,ba=A.selectedVideoQuality,ca=A.stalling,da=A.streamInterrupted,ea=A.targetAudioQuality,fa=A.targetPlaybackRate,ga=A.targetVideoQuality,ha=A.volume;A=A.watchTimeMs;e=h.jsx(o,{children:e});b("cr:1269159")(p,{controller:l,coreVideoStates:a,videoPlayerPassiveViewabilityInfo:z});a=d("wrapWithContextProviders").wrapWithContextProviders(e,[d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").VideoFBIDContext,y),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").StallingContext,ca),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").PlayingContext,Z),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").InPlayStallingContext,O),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").BufferEndContext,F),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").LastMuteReasonContext,t),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").LastPlayReasonContext,v),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").LastPauseReasonContext,u),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").PausedContext,X),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").CurrentVideoQualityContext,J),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").MutedContext,W),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").VolumeContext,ha),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").SelectedVideoQualityContext,ba),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").SeekingContext,aa),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").DurationContext,K),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").EndedContext,L),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").ErrorContext,M),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").DimensionsContext,m||null),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").InstanceKeyContext,p),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").ControllerContext,l),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").AvailableVideoQualitiesContext,E),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").PlayerImplementationNameContext,Y),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").IsAbrEnabledContext,P),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").TargetAudioQualityContext,ea),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").TargetVideoQualityContext,ga),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").PlaybackRateContext,fa),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").CanAutoplayContext,k),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").VolumeSettingContext,B),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").AutoplayGatingResultContext,i),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").BroadcastStatusContext,j),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").LoopCountContext,U),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").LoopCurrentContext,V),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").AdClientTokenContext,f),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").ActiveCaptionsContext,C),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").CaptionsVisibleContext,I),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").CaptionDisplayStyleContext,G),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").CaptionsLoadedContext,H),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").InbandCaptionsAutogeneratedContext,N),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").StreamInterruptedContext,da),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").WatchTimeContext,A),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").LastPlayedTimeContext,S),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").SeekableRangesContext,$),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").LatencyLevelContext,T),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").IsLiveRewindActiveContext,R),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").AudioAvailabilityInfoContext,g),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").IsNCSRContext,r),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").IsPremiumMusicVideoContext,s),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").InitialTracePolicyContext,n),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").ActiveEmsgBoxesContext,D),d("wrapWithContextProviders").makeRenderProviderFn(d("VideoPlayerContexts").IsExternalMediaContext,Q),function(a){return h.jsx(d("VideoPlayerContexts").VideoOriginalDimensionsContextMemoProvider,{originalHeight:w,originalWidth:x,children:a})},function(a){return h.jsx(c("VideoPlayerViewabilityProvider.react"),{isFullscreen:q,videoPlayerPassiveViewabilityInfo:z,children:a})}]);return h.jsx("div",{"data-instancekey":p,"data-testid":void 0,children:a})}a.displayName=a.name+" [from "+f.id+"]";e=h.memo(a);g["default"]=e}),98);
__d("VideoPlayerFullscreenController",["CometFullScreen","removeFromArray","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.current!=null&&d("CometFullScreen").getFullScreenElement()===a.current}function a(a){var b=[];function e(){b.forEach(function(a){a()})}var f=null;return{getIsFullscreen:function(){return h(a)},requestSetIsFullscreen:function(b){var e=a.current;if(e==null)throw c("unrecoverableViolation")("Requested full screen while the element is not present","comet_video_player");b!==h(a)&&(b===!0?d("CometFullScreen").requestFullScreen(e):b===!1&&d("CometFullScreen").exitFullScreen())},subscribe:function(a){b.length===0&&f==null&&(f=d("CometFullScreen").subscribeToFullScreenChangeEvent(e));b.push(a);return{remove:function(){c("removeFromArray")(b,a),b.length===0&&f!=null&&(f(),f=null)}}}}}g.createFullscreenController=a}),98);
__d("VideoPlayerPortalingPlaceState",["GlobalVideoPortsContexts","GlobalVideoPortsID","gkx","react","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useState;e=function(a,b){var e=c("usePrevious")(a);h(function(){a!==e&&(e!==null&&e&&!a&&b(d("GlobalVideoPortsID").makeVideoID()))},[a,e,b])};f=function(a,b){var c=i(null),e=c[0];c=c[1];a!==e&&(e!==null&&e&&!a&&b(d("GlobalVideoPortsID").makeVideoID()),c(a))};var j=c("gkx")("1375802")?f:e;function a(a){var b=a.portalingEnabled;a=a.portalingFromVideoID;var c=d("GlobalVideoPortsContexts").useGlobalVideoPortsLoader(),e=d("GlobalVideoPortsContexts").useGlobalVideoPortsManager(),f=d("GlobalVideoPortsContexts").useGlobalVideoPortsState(),g=e!=null&&f!=null,k=(g||c!=null)&&(b||a!=null),l=i(function(){return d("GlobalVideoPortsID").makePlaceID()});l=l[0];var m=i(function(){return d("GlobalVideoPortsID").makeVideoID()}),n=m[0];m=m[1];b=k&&b&&a!=null;a=b&&a!=null?a:n;j(b,m);h(function(){k&&!g&&c&&c()},[g,k,c]);return{canBecomePortableLater:k,currentVideoID:a,globalVideoPortsManager:e,globalVideoPortsState:f,thisPlaceID:l}}g.useRegenerateUniqueVideoID_exportedForTest=j;g.useVideoPlayerPortalingPlaceState=a}),98);
__d("VideoPlayerPortalingPlaceWithPortaling.react",["BaseContextualLayerAnchorRootContext","CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsRenderers.react","getOwnObjectValues","gkx","killswitch","react","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useContext;e=b.useEffect;var j=b.useRef,k=b.useState,l=c("gkx")("3501")?e:c("useLayoutEffect_SAFE_FOR_SSR");function a(a){var b=a.coreVideoPlayerMetaData,e=a.currentVideoID,f=a.fullscreenController,g=a.globalVideoPortsManager,m=a.globalVideoPortsState,n=a.implementations,o=a.isFullscreen,p=a.portablePlaceMetaData,q=a.renderComponents,r=a.renderPlaceholder,s=a.thisPlaceID,t=a.trackingDataEncrypted,u=a.trackingNodes,v=a.viewportMarginsForViewability;a=k(function(){return d("CoreVideoPlayerFitParentContainer.react").createFitParentContainerDiv({debugRole:null})});var w=a[0],x=j(null);l(function(){g.addOrUpdatePlace({coreVideoPlayerMetaData:b,fullscreenController:f,implementations:n,injectCoreVideoStatesRef:x,isFullscreen:o,portablePlaceContainer:w,portablePlaceID:s,portablePlaceMetaData:p,portableVideoID:e,renderComponents:q,renderPlaceholder:r,trackingDataEncrypted:t,trackingNodes:u,viewportMarginsForViewability:v})},[].concat(c("getOwnObjectValues")(b),[e,f,o,g,w],c("getOwnObjectValues")(p||{}),[q,r,s,t,u,v]));l(function(){return function(){g.removePlace({portablePlaceID:s})}},[g,s]);a=g.getPortableVideoState(m,e);var y=i(c("BaseContextualLayerAnchorRootContext")),z=j(null);return h.jsxs(c("BaseContextualLayerAnchorRootContext").Provider,{value:o&&!c("killswitch")("WORKPLACE_VIDEO_FULLSCREEN_CONTEXT_LAYER_ROOT")?z:y,children:[h.jsx(d("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentDOMContainer,{debugRole:null,domElement:w},s),h.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsVideoComponentsRenderer,{currentPlaceID:(m=(y=g.getCurrentPlaceStateForVideo(m,e))==null?void 0:y.portablePlaceID)!=null?m:null,currentVideoID:e,injectCoreVideoStatesRef:x,previousPlaceMetaData:(y=a==null?void 0:a.previousPlaceMetaData)!=null?y:null,renderComponents:q,thisPlaceID:s}),h.jsx("div",{ref:z})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerPortalingPlace.react",["BaseViewportMarginsContext","CometTrackingCodeContext","CometTrackingNodesContext","CoreVideoPlayer.react","CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsID","GlobalVideoPortsRenderers.react","VideoPlayerFullscreenController","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerPortalingPlaceState","VideoPlayerPortalingPlaceWithPortaling.react","react","recoverableViolation","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useContext,j=b.useEffect,k=b.useRef,l=b.useState,m={bottom:0,left:0,right:0,top:0},n=h.forwardRef(function(a,b){var c=a.children;a=a.debugRole;return h.jsx(d("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentContainer,{debugRole:a,ref:b,children:c})});function a(a){var b=a.implementations,e=a.portalingEnabled,f=a.portalingFromVideoID,g=a.portalingPlaceMetaData,o=a.renderComponents,p=a.renderPlaceholder;a=babelHelpers.objectWithoutPropertiesLoose(a,["implementations","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","renderComponents","renderPlaceholder"]);j(function(){return function(){}},[]);var q=f!=null?d("GlobalVideoPortsID").ensureVideoID(f):null;f!=null&&q==null&&c("recoverableViolation")("The provided portalingFromVideoID ("+String(f)+") does not look like such an ID. The video player will not use portaling until a valid ID is provided","comet_video_player");f=d("VideoPlayerPortalingPlaceState").useVideoPlayerPortalingPlaceState({portalingEnabled:e,portalingFromVideoID:q});e=f.canBecomePortableLater;q=f.currentVideoID;var r=f.globalVideoPortsManager,s=f.globalVideoPortsState;f=f.thisPlaceID;var t=i(c("BaseViewportMarginsContext")),u=k(null),v=c("useStable")(function(){return d("VideoPlayerFullscreenController").createFullscreenController(u)}),w=l(v.getIsFullscreen()),x=w[0],y=w[1];j(function(){var a=v.subscribe(function(){var a=v.getIsFullscreen();y(a)});y(v.getIsFullscreen());return function(){a.remove()}},[v,y]);w=i(c("CometTrackingNodesContext"));w=w.join("");var z=i(c("CometTrackingCodeContext"));z=(z=z.encrypted_tracking[0])!=null?z:"";t=x?m:t;if(!e)return h.jsx(n,{debugRole:null,ref:u,children:h.jsx(d("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:f,currentVideoID:q,portalingEnabled:!1,previousPlaceMetaData:null,thisPlaceID:f,children:h.jsx(c("CoreVideoPlayer.react"),babelHelpers["extends"]({},a,{fullscreenController:v,implementations:b,isFullscreen:x,renderWithCoreVideoStates:o,trackingDataEncrypted:z,trackingNodes:w,viewportMarginsForViewability:t}))})});if(r&&s)return h.jsx(n,{debugRole:null,ref:u,children:h.jsx(c("VideoPlayerPortalingPlaceWithPortaling.react"),{coreVideoPlayerMetaData:a,currentVideoID:q,fullscreenController:v,globalVideoPortsManager:r,globalVideoPortsState:s,implementations:b,isFullscreen:x,portablePlaceMetaData:g,renderComponents:o,renderPlaceholder:p,thisPlaceID:f,trackingDataEncrypted:z,trackingNodes:w,viewportMarginsForViewability:t})});else return h.jsx(n,{debugRole:null,ref:u,children:h.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlaceholderRenderer,{currentPlaceID:null,currentVideoID:q,originalHeight:a.originalHeight,originalWidth:a.originalWidth,previousPlaceMetaData:null,renderPlaceholder:p,thisPlaceID:f})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerTracePolicyContext",["react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=d("react").useContext;c={initialTracePolicy:null,routeTracePolicy:null};var i=b.createContext(c);function a(){return h(i)}g.VideoPlayerTracePolicyContext=i;g.useVideoPlayerTracePolicy=a}),98);
__d("VideoPlayerTracePolicyProvider.react",["VideoPlayerTracePolicyContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useEffect,j=b.useState;function a(a){var b=a.children,c=a.initialTracePolicy,e=a.routeTracePolicy;a=j(c);var f=a[0],g=a[1];a=j(e);var k=a[0],l=a[1];i(function(){f!==c&&g(c),k!==e&&l(e)},[c,e,f,k]);return h.jsx(d("VideoPlayerTracePolicyContext").VideoPlayerTracePolicyContext.Provider,{value:{initialTracePolicy:f,routeTracePolicy:k},children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CoreVideoPlayerWithComponents.react",["VideoPlayerComponentContainer.react","VideoPlayerPortalingPlace.react","VideoPlayerTracePolicyProvider.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function a(a){var b=a.children,d=a.implementations,e=a.portalingEnabled,f=a.portalingFromVideoID,g=a.portalingPlaceMetaData,j=a.portalingRenderPlaceholder;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","implementations","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","portalingRenderPlaceholder"]);var k=i(function(a){return h.jsx(c("VideoPlayerComponentContainer.react"),babelHelpers["extends"]({},a,{children:b}))},[b]);return h.jsx(c("VideoPlayerTracePolicyProvider.react"),{initialTracePolicy:a.initialTracePolicy,routeTracePolicy:a.routeTracePolicy,children:h.jsx(c("VideoPlayerPortalingPlace.react"),babelHelpers["extends"]({},a,{implementations:d,portalingEnabled:e,portalingFromVideoID:f,portalingPlaceMetaData:g,renderComponents:k,renderPlaceholder:j}))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerErrorBoundary.react",["FBLogger","getErrorSafe","react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={error:null},c.suppressReactDefaultErrorLogging=!0,b)||babelHelpers.assertThisInitialized(c)}b.getDerivedStateFromError=function(a){return{error:c("getErrorSafe")(a)}};var d=b.prototype;d.componentDidCatch=function(a,b){b=b.componentStack;a=c("getErrorSafe")(a);a.componentStack=b;b=this.props;var d=b.description,e=b.onError;b=b.project;var f="ErrorBoundary caught an Error";d!=null&&(f=f+" ("+d+")");d=["OZ_NETWORK","BUFFERING_TIMEOUT","MEDIA_ERR_DECODE"];var g=!0;for(var h=0;h<d.length;h++)a.message.includes(d[h])&&(g=!1);d=c("FBLogger")(b==null?"comet_video_player":b).catching(a);g?d.fatal(f):d.warn(f);e!=null&&e(a)};d.render=function(){var a=this.props,b=a.children;a=a.fallback;var c=this.state.error;return c?typeof a==="function"?a(c):a:b};return b}(a.PureComponent);g["default"]=b}),98);
__d("InstreamVideoAdBreaksPlayer.react",["CometPlaceholder.react","CometRelay","InstreamVideoAdBreaksPlayer_video.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");function a(a){var e=a.playerFormat,f=a.subOrigin;a=a.video;a=d("CometRelay").useFragment(h!==void 0?h:h=b("InstreamVideoAdBreaksPlayer_video.graphql"),a);var g=a.id,j=a.instream_extra_config;a=a.instream_video_ad_breaks_comet;return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(d("CometRelay").MatchContainer,{match:a,props:{instreamExtraConfig:{instreamHaloDelayTimeSeconds:j==null?void 0:j.instream_halo_delay_time_seconds},instreamVideoAdBreaksComet:a,playerFormat:e,subOrigin:f,videoFBID:g}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerFallbackCover.react",["fbt","cr:1405514","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var c;c=(c=a.message)!=null?c:h._("Sorry, we're having trouble with playing this video.");return i.jsx(b("cr:1405514"),{debugError:a.debugError,message:c,onRetry:a.onRetry})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerRetryableErrorBoundary.react",["VideoPlayerErrorBoundary.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useState;function a(a){var b=a.children,d=a.description,e=a.fallback;a=j(0);var f=a[0],g=a[1],k=i(function(){g(function(a){return a+1})},[]);a=i(function(a){return f>=3?e({error:a,retry:null}):e({error:a,retry:k})},[e,k,f]);return h.jsx(c("VideoPlayerErrorBoundary.react"),{description:d,fallback:a,project:"comet_video_player",children:b},f)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometAudioManagerHooks",["CometAudioManagerContexts","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useContext;function a(){var a=h(d("CometAudioManagerContexts").AudioApiContext);return a}g.useAudioApi=a}),98);
__d("makeAudioSymbol",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b+"::"+a;return b}f["default"]=a}),66);
__d("CoreVideoPlayerAudioClient.react",["CometAudioManagerContexts","CometAudioManagerHooks","CometThrottle","VideoPlayerHooks","VideoPlayerPortalingPlaceInfoProvider.react","makeAudioSymbol","react","useCometUniqueID","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";d("react");b=d("react");var h=b.useContext,i=b.useEffect,j=b.useMemo,k=b.useRef,l=b.useState;function a(){var a=c("useCometUniqueID")(),b=d("VideoPlayerHooks").useInstanceKey(),e=j(function(){return c("makeAudioSymbol")(a,b)},[a,b]),f=d("CometAudioManagerHooks").useAudioApi(),g=k(f);i(function(){g.current=f},[f]);var m=d("VideoPlayerHooks").useController(),n=200,o=d("VideoPlayerHooks").useLastPlayReason(),p=d("VideoPlayerHooks").useLastMuteReason(),q=d("VideoPlayerHooks").useMuted();n=c("CometThrottle")(d("VideoPlayerHooks").useVolume,n,{trailing:!0});n=n();var r=c("usePrevious")(n),s=d("VideoPlayerHooks").usePaused(),t=h(d("CometAudioManagerContexts").CometAudioLocalScopeContext),u=h(d("CometAudioManagerContexts").CometAudioGroupContext),v=d("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo(),w=d("VideoPlayerHooks").useVolumeSetting(),x=j(function(){return(u==null?void 0:u.groupID)||d("CometAudioManagerContexts").makeAudioGroupID()},[u==null?void 0:u.groupID]),y=l(!0),z=y[0];y=y[1];var A={audioLocalScope:t,controller:m,groupID:x,instanceKey:b,lastMuteReason:p,lastPlayReason:o,muted:q,paused:s,previousVolume:r,symbol:e,videoPlayerPortalingPlaceInfo:v,volume:n};i(function(){w!=null&&m.setVolume(w)},[m,w]);t=u||{allowSound:z,groupID:x,setAllowSound:y};var B=k(t);i(function(){f&&f.register(A,B.current);return function(){f&&f.unregister(e,x)}},[f,A,x,e]);i(function(){f&&f.update(A)},[f,A]);i(function(){!z&&g.current&&m.setMuted(!0,"audio_manager_initiated")},[z,g,m]);return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerAutoplayHooks",["VideoPlayerAutoplayContexts","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useContext;function a(){var a=h(d("VideoPlayerAutoplayContexts").AutoplayApiContext);if(a==null)throw c("unrecoverableViolation")("Empty AutoplayApiContext. Are you rendering useAutoplayApi outside of VideoAutoplayManagerX?","comet_video_player");return a}function b(){return h(d("VideoPlayerAutoplayContexts").VideoAutoplayLocalScopeContext)}g.useAutoplayApi=a;g.useVideoAutoplayLocalScope=b}),98);
__d("VideoPlayerDebugAutoplayAPI",["cr:1453865","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";d=(a=b("cr:1453865"))!=null?a:{useVideoPlayerDebugAPI:c("emptyFunction").thatReturns(null),useVideoPlayerDebugAPIDefinition:c("emptyFunction"),useVideoPlayerDebugInfo:c("emptyFunction").thatReturns(null)};g["default"]=d}),98);
__d("evaluateVideoAutoplayDefaultAllowRule",[],(function(a,b,c,d,e,f){"use strict";function a(){return"ALLOW"}a.displayName="evaluateVideoAutoplayDefaultRule";f["default"]=a}),66);
__d("makeSelectedAutoplayVideoSymbol",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b+"::"+a;return b}f["default"]=a}),66);
__d("AutoplayRulesEngine",[],(function(a,b,c,d,e,f){"use strict";var g=-2,h=-1;a=function(){function a(a){this.$1=g,this.$2=a}var b=a.prototype;b.evaluateAutoplay=function(a,b){b=b();var c=h;if(a)for(var d=0;d<this.$2.length;d++){var e=this.$2[d](a);if(e!=="SKIP"){b=e;c=d;break}}this.$1=c;return b};b.getIndexOfLastWinningRule=function(){return this.$1};b.getRules=function(){return this.$2};return a}();f["default"]=a}),66);
__d("useAutoplayRulesEngine",["AutoplayRulesEngine","react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef,j=b.useState;function a(a){var b=i(a),d=j(function(){return new(c("AutoplayRulesEngine"))(a)}),e=d[0],f=d[1];h(function(){b.current!==a&&f(function(){return new(c("AutoplayRulesEngine"))(a)})},[a]);h(function(){b.current=e.getRules()},[e]);return e}g["default"]=a}),98);
__d("useConcurrentAutoplayManagementAPI",["react","removeFromArray","useCometUniqueID"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useState;function a(){var a=c("useCometUniqueID")();return a}function i(){var a=[];return{isControllingComponent:function(b){var c=a.length;return a[c-1]===b},registerControllingComponent:function(b){c("removeFromArray")(a,b),a.push(b)},unregisterControllingComponent:function(b){var d=a.length;d>1&&c("removeFromArray")(a,b);return d>1}}}function b(){var a=h(function(){return i()});a=a[0];return a}g.useAutoplayControlID=a;g.createConcurrentAutoplayManagementAPI=i;g.useConcurrentAutoplayManagementAPI=b}),98);
__d("VideoPlayerOzWWWGlobalConfig",["VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";var h="oz_www_";a={getBool:function(a,b){return d("VideoPlayerShakaGlobalConfig").getBool(h+a,b)},getNumber:function(a,b){return d("VideoPlayerShakaGlobalConfig").getNumber(h+a,b)},getString:function(a,b){return d("VideoPlayerShakaGlobalConfig").getString(h+a,b)}};b=a;g["default"]=b}),98);
__d("oz-player/shims/www/getOzGlobalConfigSourceWWW",["VideoPlayerOzWWWGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("VideoPlayerOzWWWGlobalConfig")}g["default"]=a}),98);
__d("oz-player/shims/getOzGlobalConfigSource",["oz-player/shims/www/getOzGlobalConfigSourceWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/getOzGlobalConfigSourceWWW")}),98);
__d("oz-player/configs/OzGlobalConfig",["oz-player/shims/getOzGlobalConfigSource"],(function(a,b,c,d,e,f,g){"use strict";var h=c("oz-player/shims/getOzGlobalConfigSource")();a={getBool:function(a,b){return h?h.getBool(a,b):b},getNumber:function(a,b){return h?h.getNumber(a,b):b},getString:function(a,b){return h?h.getString(a,b):b}};b=a;g["default"]=b}),98);
__d("oz-player/shims/www/OzCacheStorageWWW",["CacheStorage"],(function(a,b,c,d,e,f,g){a="localstorage";b="_oz_";var h=new(c("CacheStorage"))(a,b);d={get:function(a){return h.get(a)},set:function(a,b){h.set(a,b)}};e=d;g["default"]=e}),98);
__d("oz-player/shims/OzCacheStorage",["oz-player/shims/www/OzCacheStorageWWW"],(function(a,b,c,d,e,f,g){g["default"]=c("oz-player/shims/www/OzCacheStorageWWW")}),98);
__d("oz-player/shims/www/OzWindowEventsWWW",["Run"],(function(a,b,c,d,e,f,g){"use strict";a={onUnload:function(a){d("Run").onUnload(a)}};b=a;g["default"]=b}),98);
__d("oz-player/shims/OzWindowEvents",["oz-player/shims/www/OzWindowEventsWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzWindowEventsWWW")}),98);
__d("oz-player/networks/OzBandwidthCache",["oz-player/configs/OzGlobalConfig","oz-player/shims/OzCacheStorage","oz-player/shims/OzWindowEvents"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b,d,e){var f=this;this.$1=a;this.$2=b;this.$3=d;this.$4=e;c("oz-player/shims/OzWindowEvents").onUnload(function(){f.updateCache()})}var b=a.prototype;b.getCachedBandwidth=function(){var a=c("oz-player/shims/OzCacheStorage").get(this.$1);if(a==null)return null;a=Number(a);return isNaN(a)?null:a};b.getCachedSamples=function(){if(this.$5!=null)return this.$5;var b=c("oz-player/shims/OzCacheStorage").get(this.$2);if(b==null)return null;this.$5=a.deserialize(b);return this.$5};b.updateCache=function(){c("oz-player/shims/OzCacheStorage").set(this.$1,String(this.$3()));var b=c("oz-player/configs/OzGlobalConfig").getNumber("bandwidth_ttfb_samples_to_save",0);if(b>0){var d=this.$4(),e=d.bandwidth.length,f=d.timeToFirstByteMs.length;e={bandwidth:d.bandwidth.slice(Math.max(0,e-b),e),timeToFirstByteMs:d.timeToFirstByteMs.slice(Math.max(0,f-b),f)};c("oz-player/shims/OzCacheStorage").set(this.$2,a.serialize(e))}};a.deserialize=function(a){var b={};try{b=JSON.parse(a)}catch(a){}if(typeof b==="object"&&Array.isArray(b.b)&&Array.isArray(b.t)){a={bandwidth:b.b.reduce(function(a,b){typeof b.b==="number"&&typeof b.t==="number"&&typeof b.s==="number"&&a.push({bytes:b.b,timeInMs:b.t,timestamp:b.s});return a},[]),timeToFirstByteMs:b.t.reduce(function(a,b){typeof b.t==="number"&&typeof b.s==="number"&&a.push({timeToFirstByteMs:b.t,timestamp:b.s});return a},[])};return a}return null};a.serialize=function(a){a={b:a.bandwidth.map(function(a){return{b:a.bytes,s:a.timestamp,t:a.timeInMs}}),t:a.timeToFirstByteMs.map(function(a){return{s:a.timestamp,t:a.timeToFirstByteMs}})};return JSON.stringify(a)};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzBandwidthUtils",[],(function(a,b,c,d,e,f){"use strict";var g=.3,h=3,i=.1,j=.25,k=50,l=10,m=5,n=new Map([["51",.03],["52",.06],["53",.08],["54",.1],["55",.13],["56",.16],["57",.18],["58",.2],["59",.23],["60",.26],["61",.28],["62",.31],["63",.33],["64",.36],["65",.39],["66",.42],["67",.44],["68",.47],["69",.5],["70",.53],["71",.56],["72",.59],["73",.62],["74",.65],["75",.68],["76",.71],["77",.74],["78",.78],["79",.81],["80",.85],["81",.88],["82",.92],["83",.96],["84",1],["85",1.04],["86",1.08],["87",1.13],["88",1.18],["89",1.23],["90",1.28],["91",1.34],["92",1.41],["93",1.48],["94",1.56],["95",1.65],["96",1.76],["97",1.89],["98",2.06],["99",2.33]]);function a(a,b,c,d,e){if(a.length===0)return null;if(e)return u(a,c);e=p(a);a=v(a,b);b=a.average;a=a.totalWeight;var f=l,g=m,h=k;if(c.length>0){f=q(c.map(function(a){return a.timeToFirstByteMs}));c=r(c.map(function(a){return{value:a.timeToFirstByteMs,weight:1}}),d);h=c.average;g=c.totalWeight}return{bandwidthEstimate:b,bandwidthStandardDeviation:e,bandwidthTotalWeight:a,timeToFirstByteMsEstimate:h,timeToFirstByteMsStandardDeviation:f,timeToFirstByteMsTotalWeight:g}}function o(a){var b=0;for(var c=0;c<a.length;c++)b+=a[c].bytes*8e3/a[c].timeInMs;return b/a.length}function p(a){return q(a.map(function(a){return a.bytes*8e3/a.timeInMs}))}function q(a){var b=a.reduce(function(a,b){return a+b},0)/a.length,c=0;for(var d=0;d<a.length;d++)c+=Math.pow(a[d]-b,2);return Math.round(Math.sqrt(c/a.length))}function r(a,b){b=Math.exp(Math.log(.5)/b);var c=0,d=0;for(var e=0;e<a.length;e++){var f=Math.pow(b,a[e].weight);c=a[e].value*(1-f)+c*f;d+=a[e].weight}f=Math.round(c/(1-Math.pow(b,d)));return{average:f,totalWeight:d}}function s(a){var b=0,c=0,d=0,e=0;if(a.length===0)return{bandwidthEstimate:b,bandwidthStandardDeviation:c,bandwidthTotalWeight:d};var f=a[a.length-1].timestamp,g=[];for(var h=0;h<a.length;h++){var j=(f-a[h].timestamp)/1e3;j=Math.exp(-i*j)*Math.sqrt(a[h].bytes);g.push(j);d+=j;e+=j*Math.log(a[h].bytes/a[h].timeInMs*8e3)}b=Math.exp(e/d);j=0;for(var h=0;h<a.length;h++){f=a[h].bytes/a[h].timeInMs*8e3;j+=g[h]*Math.pow(f-b,2)/d}c=Math.sqrt(j);return{bandwidthEstimate:b,bandwidthStandardDeviation:c,bandwidthTotalWeight:d}}function t(a){var b=0,c=0,d=0;if(a.length===0)return{timeToFirstByteMsEstimate:k,timeToFirstByteMsStandardDeviation:l,timeToFirstByteMsTotalWeight:m};var e=a[a.length-1].timestamp,f=[];for(var g=0;g<a.length;g++){var h=(e-a[g].timestamp)/1e3;h=Math.exp(-j*h);f.push(h);c+=h;d+=h*Math.log(a[g].timeToFirstByteMs)}b=Math.exp(d/c);h=0;for(var g=0;g<a.length;g++)h+=f[g]*Math.pow(a[g].timeToFirstByteMs-b,2)/c;e=Math.sqrt(h);return{timeToFirstByteMsEstimate:b,timeToFirstByteMsStandardDeviation:e,timeToFirstByteMsTotalWeight:c}}function u(a,b){a=s(a);var c=a.bandwidthEstimate,d=a.bandwidthStandardDeviation;a=a.bandwidthTotalWeight;b=t(b);var e=b.timeToFirstByteMsEstimate,f=b.timeToFirstByteMsStandardDeviation;b=b.timeToFirstByteMsTotalWeight;return{bandwidthEstimate:c,bandwidthStandardDeviation:d,bandwidthTotalWeight:a,timeToFirstByteMsEstimate:e,timeToFirstByteMsStandardDeviation:f,timeToFirstByteMsTotalWeight:b}}function v(a,b){return r(a.map(function(a){return{value:a.bytes*8e3/a.timeInMs,weight:a.timeInMs/1e3}}),b)}function w(a,b){var c=o(a),d=[];for(var e=0;e<a.length;e++)Math.abs(c-a[e].bytes*8e3/a[e].timeInMs)<b&&d.push(a[e]);return d}function b(a,b,c,d){var e=p(a);a=w(a,e*c);c=v(a,b);return c.average-e*d}function c(a,b,c){c=n.get(String(c));var d=a.bandwidthEstimate,e=a.bandwidthStandardDeviation,f=a.timeToFirstByteMsStandardDeviation;a=a.timeToFirstByteMsEstimate;var i=1,j=1;c!=null&&(i=1-c*e/d,i=isNaN(i)?1:Math.max(i,g),j=1+c*f/a,j=isNaN(j)?1:j,j=Math.min(j,h));e=8e3*b/(d*i)+a*j;return e}f.getBandwidthDiagnostics=a;f.getMeanBandwidth=o;f.getStandardDeviationOfBandwidth=p;f.getExponentiallyWeightedMovingAverage=r;f.getDiagnosticsWithWeightedArithmeticMean=u;f.getExponentiallyWeightedMovingAverageOfBandwidth=v;f.getBandwidthSamplesWithinRangeOfMean=w;f.getBandwidthEstimate=b;f.getEstimatedRequestTimeToLastByteMs=c}),66);
__d("oz-player/shims/www/OzEventEmitterWWW",["EventEmitter"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("EventEmitter")}),98);
__d("oz-player/shims/OzEventEmitter",["oz-player/shims/www/OzEventEmitterWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzEventEmitterWWW")}),98);
__d("oz-player/shims/www/OzStreamsWWW",["cr:927622","cr:927623"],(function(a,b,c,d,e,f,g){"use strict";a=Boolean(b("cr:927622"));c=Boolean(b("cr:927623"));d=b("cr:927622")?b("cr:927622").ReadableStream:window.ReadableStream;e=b("cr:927623")?b("cr:927623").WritableStream:window.WritableStream;g.OzReadableStream=d;g.OzReadableStreamIsPolyfilled=a;g.OzWritableStream=e;g.OzWritableStreamIsPolyfilled=c}),98);
__d("oz-player/shims/OzStreams",["oz-player/shims/www/OzStreamsWWW"],(function(a,b,c,d,e,f,g){"use strict";g.OzReadableStream=d("oz-player/shims/www/OzStreamsWWW").OzReadableStream,g.OzReadableStreamIsPolyfilled=d("oz-player/shims/www/OzStreamsWWW").OzReadableStreamIsPolyfilled,g.OzWritableStream=d("oz-player/shims/www/OzStreamsWWW").OzWritableStream,g.OzWritableStreamIsPolyfilled=d("oz-player/shims/www/OzStreamsWWW").OzWritableStreamIsPolyfilled}),98);
__d("oz-player/networks/OzTransformStream",["oz-player/shims/OzEventEmitter","oz-player/shims/OzStreams","oz-player/utils/OzError"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;var f=(b=b==null?void 0:b.errorTransform)!=null?b:function(a){return a},g,h;e.writable=new(d("oz-player/shims/OzStreams").OzWritableStream)({start:function(a){h=a},write:function(a){e.emit("writableWrite",a);try{e.onDataWritten(a)}catch(a){g.error(new(c("oz-player/utils/OzError"))({type:"OZ_STREAM",description:"Error from write handler: "+e.constructor.name,extra:{code:"OZ_S-0",originalError:a}}))}g.enqueue(a)},close:function(){e.emit("writableClose");try{e.onClose()}catch(a){g.error(new(c("oz-player/utils/OzError"))({type:"OZ_STREAM",description:"Error from close handler: "+e.constructor.name,extra:{code:"OZ_S-1",originalError:a}}))}g.close()},abort:function(a){a=f(a);g.error(a)}});e.readable=new(d("oz-player/shims/OzStreams").OzReadableStream)({start:function(a){g=a},cancel:function(a){e.emit("readableCancel",a),h.error(a)}});return e}var e=b.prototype;e.onDataWritten=function(a){};e.onClose=function(){};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/shims/www/OzNetworkDiagnosticsWWW",[],(function(a,b,c,d,e,f){"use strict";function g(a,b){if(!a)return null;a=parseInt(a.get(b),10);return!isNaN(a)&&isFinite(a)?a:null}a={getNextValidSegmentId:function(a){return g(a,"x-fb-next-valid-segment-id")},getResponseTimeMs:function(a){return g(a,"x-fb-response-time-ms")},getDvlSegmentPTS:function(a){return g(a,"x-fb-segment-pts-start")},getDvlStatus:function(a){return a==null?void 0:a.get("x-fb-dynamic-status")},getUsableResponseSizeForBandwidthEstimation:function(a){return g(a,"x-fb-dynamic-predictive-response-chunk-size")},getBandwidthMeanEstimate:function(a){return g(a,"x-bwe-mean")},getBandwidthStandardDeviationEstimate:function(a){return g(a,"x-bwe-std-dev")},getTimeToFirstByteMsEstimate:function(a){return g(a,"x-mrtt-ms")}};b=a;f["default"]=b}),66);
__d("oz-player/shims/OzNetworkDiagnostics",["oz-player/shims/www/OzNetworkDiagnosticsWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzNetworkDiagnosticsWWW")}),98);
__d("oz-player/shims/www/OzPerformanceWWW",["performance","performanceNow"],(function(a,b,c,d,e,f,g){a={now:function(){return c("performanceNow")()},getEntriesByName:function(a,b){return typeof c("performance").getEntriesByName==="function"?c("performance").getEntriesByName(a,b):[]}};b=a;g["default"]=b}),98);
__d("oz-player/shims/OzPerformance",["oz-player/shims/www/OzPerformanceWWW"],(function(a,b,c,d,e,f,g){g["default"]=c("oz-player/shims/www/OzPerformanceWWW")}),98);
__d("oz-player/utils/OzResourceTimingUtils",["oz-player/shims/OzPerformance"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){a=c("oz-player/shims/OzPerformance").getEntriesByName(a,"resource");return a.reduce(function(a,b){return a==null?b:b.responseEnd<a.responseEnd?a:b},null)};g.getLatestResourceTimingEntry=a}),98);
__d("oz-player/utils/OzNetworkRequestLoggingUtils",["oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return a?parseInt(a.get("content-length"),10):null},i=function(a){return a?a.get("x-fb-edge-hit"):null},j=function(a){return a?a.get("x-fb-origin-hit"):null},k=function(a){return a?parseInt(a.get("x-fb-dynamic-latest-segment-id"),10):null},l=function(a,b){b=d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(b);b&&a.setTimeToFirstByte(Math.round(b.responseStart-b.startTime)).setTimeToLastByte(Math.round(b.responseEnd-b.startTime)).setTimeToRequestStart(Math.round(b.requestStart-b.startTime))};a=function(a,b,d,e,f,g,m){e.length&&a.setSegmentCount(e.length),b!=null&&b!==""&&l(a,b),a.setResource(b!=null&&b!==""?b:null).setInitiator(d?"prefetch":"fetch").setTimeToRequestSent(Math.round(Math.floor(f))).setLiveheadSeqNumHeader(k(m==null?void 0:m.headers)).setContentLengthHeader(h(m==null?void 0:m.headers)).setEdgeHitHeader(i(m==null?void 0:m.headers)).setOriginHitHeader(j(m==null?void 0:m.headers)).setResponseTimeMsHeader(c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(m==null?void 0:m.headers)).setCode(m==null?void 0:m.status).setLength(g)};b=function(a,b,d,e,f,g,m){b!=null&&b!==""&&l(a,b),a.setResource(b!=null&&b!==""?b:null).setLiveheadSeqNumHeader(k(e==null?void 0:e.headers)).setContentLengthHeader(h(e==null?void 0:e.headers)).setEdgeHitHeader(i(e==null?void 0:e.headers)).setOriginHitHeader(j(e==null?void 0:e.headers)).setResponseTimeMsHeader(c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(e==null?void 0:e.headers)).setCode(e==null?void 0:e.status).setLength(d).setClientTimeBegin(f).setClientTimeDuration(g-f).setClientTimeEnd(g).setUserInfo(m!=null&&m>0?{chunkSize:String(m)}:null)};g.setPerformanceLoggingAttributes=l;g.setFetchStreamLoggingAttributes=a;g.setBandwidthSampledLoggingAttributes=b}),98);
__d("oz-player/networks/OzNetworkRequestStreamBandwidthReporter",["oz-player/networks/OzTransformStream","oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzNetworkRequestLoggingUtils","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$10=Date.now();this.$11=Date.now();this.$12=0;this.$13=0;this.$14=function(){};this.$15=function(){};this.$16=function(){};this.$17=new(c("oz-player/networks/OzTransformStream"))();this.$21=!1;this.$22=!1;this.$23=null;this.$24=function(a){b.$27();a.length!=void 0&&(b.$13+=a.length);b.$28();if(b.$19)return;b.$29()};this.$25=function(){if(b.$20&&b.$23!=null&&b.$23>0)return;var a=Date.now()-b.$10,c=b.$1.getLastRequestUrl();c=c!=null?d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(c):null;c&&b.$15(c.responseStart-c.requestStart);if(b.$3>0&&a>0&&b.$12===0&&b.$13>=b.$3){if(b.$6&&c&&c.responseEnd&&c.startTime){c=b.$9?c.responseEnd-c.responseStart:c.responseEnd-c.startTime;a=c>0?c:a}b.$30(b.$13,a)}};var e=a.stream,f=a.loggerProvider,g=a.byteCountPerSample,h=a.minimumBytesToSampleOnClose,i=a.minimumSampleDuration,j=a.maximumSampleBandwidth,k=a.usePerformanceEntryOnClose,l=a.useResponseTimeMs,m=a.responseTimeHandicapMs,n=a.ignoreTimeToResponseStart,o=a.ignoreOnStreamWriteSamples;a=a.useChunkResponseSize;this.$1=e;this.$18=f;this.$2=g;this.$3=h;this.$4=i;this.$5=j;this.$6=k;this.$7=l;this.$8=m;this.$9=n;this.$19=o;this.$20=a;this.$17.addListener("writableWrite",this.$24);this.$17.addListener("writableClose",this.$25)}var b=a.prototype;b.getTransformStream=function(){return this.$17};b.onBandwidthSample=function(a){this.$14=a};b.onTimeToFirstByteMsSample=function(a){this.$15=a};b.onEstimateFromHeaders=function(a){this.$16=a};b.$26=function(a,b,c){b=b-c;c=this.$18?this.$18.getOperationLogger("bandwidth_sampled"):null;if(c){var e=Date.now(),f=e-b;d("oz-player/utils/OzNetworkRequestLoggingUtils").setBandwidthSampledLoggingAttributes(c,this.$1.getLastRequestUrl(),a,this.$1.getLastResponse(),f,e,this.$23);c.log()}this.$14(a,b)};b.$31=function(a,b,c){if(b-c<=0)return!0;c=a*8/(b/1e3);return b<this.$4&&c>this.$5};b.$30=function(a,b){var d=this.$1.getLastResponse();d=this.$7?c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(d==null?void 0:d.headers)||0:0;this.$31(a,b,d)||this.$26(a,b,Math.max(d-this.$8,0))};b.$27=function(){var a;a=(a=this.$1.getLastResponse())==null?void 0:a.headers;if(this.$22||a==null)return;this.$22=!0;var b=c("oz-player/shims/OzNetworkDiagnostics").getBandwidthMeanEstimate(a),d=c("oz-player/shims/OzNetworkDiagnostics").getBandwidthStandardDeviationEstimate(a);a=c("oz-player/shims/OzNetworkDiagnostics").getTimeToFirstByteMsEstimate(a);b!=null&&d!=null&&a!=null&&this.$16(b,d,a)};b.$28=function(){if(this.$21)return;if(this.$20&&this.$23==null){var a=this.$1.getLastResponse();this.$23=c("oz-player/shims/OzNetworkDiagnostics").getUsableResponseSizeForBandwidthEstimation(a==null?void 0:a.headers)||0}this.$23!=null&&this.$23>0&&this.$13>=this.$23&&(this.$21=!0,this.$30(this.$13,Date.now()-this.$11))};b.$29=function(){var a=Date.now(),b=a-this.$10;this.$2>0&&this.$13>=this.$12+this.$2&&!this.$31(this.$13,b,0)&&(this.$26(this.$13-this.$12,b,0),this.$10=a,this.$12=this.$13)};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzNetworkSamples",["oz-player/configs/OzGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=!1,this.$2=[],this.$3=[],this.$4=null,this.$5=null}var b=a.prototype;b.setBandwidthCache=function(a){this.$4=a};b.getRecentBandwidthSamples=function(){return this.$6().recentBandwidthSamples};b.getRecentTimeToFirstByteMsSamples=function(){return this.$6().recentTimeToFirstByteMsSamples};b.setBandwidthEstimateFromHeaders=function(a){this.$5=a};b.getBandwidthEstimateFromHeaders=function(){return this.$5};b.$6=function(){if(!this.$1&&this.$4!=null&&c("oz-player/configs/OzGlobalConfig").getNumber("bandwidth_ttfb_samples_to_save",0)>0){this.$1=!0;var a=this.$4.getCachedSamples();a!=null&&(this.$2=a.bandwidth,this.$3=a.timeToFirstByteMs)}return{recentBandwidthSamples:this.$2,recentTimeToFirstByteMsSamples:this.$3}};b.addBandwidthSample=function(a){this.$2.push(babelHelpers["extends"]({},a,{timestamp:Date.now()})),this.$2.length>c("oz-player/configs/OzGlobalConfig").getNumber("max_bandwidth_sample_count",15)&&this.$2.shift()};b.addTimeToFirstByteMsSample=function(a){this.$3.push(babelHelpers["extends"]({},a,{timestamp:Date.now()})),this.$3.length>c("oz-player/configs/OzGlobalConfig").getNumber("max_bandwidth_sample_count",15)&&this.$3.shift()};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzDeferredWWW",["Deferred"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("Deferred")}),98);
__d("oz-player/shims/OzDeferred",["oz-player/shims/www/OzDeferredWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDeferredWWW")}),98);
__d("oz-player/shims/www/OzMaybeNativePromiseWWW",["MaybeNativePromise"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("MaybeNativePromise")}),98);
__d("oz-player/shims/OzMaybeNativePromise",["oz-player/shims/www/OzMaybeNativePromiseWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzMaybeNativePromiseWWW")}),98);
__d("oz-player/scheduling/OzRoundRobinPriorityTaskQueue",["oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){b===void 0&&(b=-1),this.$3=function(){},this.$4=[],this.$5=new Map(),this.$6=new Map(),this.$1=a,this.$2=b}var b=a.prototype;b.getHighestPriority=function(){return Math.max.apply(Math,this.$4.map(function(a){return a.queue.length?a.priority:-Infinity}))};b.enqueue=function(a,b){b=b;b=this.$7(b);var c=this.$5.get(a),d=this.$8(a);if(c===b)return d;this.$5.has(a)&&this.remove(a);c=this.$9(b);var e=this.$4[c];e&&e.priority===b||(e={priority:b,queue:[]},this.$4.splice(c,0,e));this.$5.set(a,b);e.queue.push(a);this.$3(a,b>=this.$1?"immediate":"normal");return d};b.updatePriority=function(a,b){if(!this.$5.has(a))return;this.enqueue(a,b)};b.dequeue=function(){for(var a=0;a<this.$4.length;a++){var b=this.$4[a];if(b.queue.length){b=b.queue.shift();this.$6["delete"](b);this.$5["delete"](b);return b}}return null};b.remove=function(a){this.$6["delete"](a);var b=this.$5.get(a);if(b!==void 0){b=this.$9(b);b=this.$4[b];if(b&&b.queue){var c=b.queue.findIndex(function(b){return b===a});c>-1&&b.queue.splice(c,1)}this.$5["delete"](a)}};b.setOnTaskUpdated=function(a){this.$3=a};b.clearOnTaskUpdated=function(){this.setOnTaskUpdated(function(){})};b.getLength=function(){return this.$5.size};b.test_isEmpty=function(){return this.$5.size===0&&this.$6.size===0&&this.$4.every(function(a){return a.queue.length===0})};b.$8=function(a){var b=this,d=this.$6.get(a);if(!d){var e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));d=e.getPromise();this.$6.set(a,d);var f=a.run;a.run=function(){return f.call(a).then(function(c){b.remove(a);e.resolve(c);return c})["catch"](function(c){b.remove(a);e.reject(c);throw c})}}return d};b.$9=function(a){a=a;a=this.$7(a);var b;for(b=0;b<this.$4.length;b++)if(a>=this.$4[b].priority)return b;return b};b.$7=function(a){a=a;this.$2>=0&&(a=Number.parseFloat(a.toFixed(this.$2)));return a};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("setTimeoutAcrossTransitions")}),98);
__d("oz-player/shims/ozSetTimeoutAcrossTransitions",["oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW")}),98);
__d("oz-player/scheduling/OzSequentialTaskScheduler",["oz-player/shims/OzMaybeNativePromise","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$3=0;this.$1=a;a=b||{};b=a.taskTimeout;this.$4=b||0}var b=a.prototype;b.start=function(){this.$1.setOnTaskUpdated(this.$5.bind(this));var a=this.$1.dequeue();a&&this.$6(a,"immediate")};b.destroy=function(){this.$2&&this.$2.cancel(),this.$1.clearOnTaskUpdated()};b.$5=function(a,b){b=this.$6(a,b);b&&this.$1.remove(a)};b.$6=function(a,b){var d=this;if(this.$2&&b!=="immediate")return!1;this.$2&&this.$2.cancel();b=a.run()["catch"](function(a){});this.$4>0&&(b=c("oz-player/shims/OzMaybeNativePromise").race([b,new(c("oz-player/shims/OzMaybeNativePromise"))(function(a,b){c("oz-player/shims/ozSetTimeoutAcrossTransitions")(a,d.$4)})]));this.$3++;this.$2=a;b=b.then(function(){d.$3--;d.$2===a&&(d.$2=null);if(d.$3===0){var b=d.$1.dequeue();b&&d.$6(b,"immediate")}});return!0};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzStreamingTaskQueueProvider",["oz-player/scheduling/OzRoundRobinPriorityTaskQueue","oz-player/scheduling/OzSequentialTaskScheduler"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=new Map(),j=2,k=2,l=6e4;function a(a){var b=h.get(a);if(!b){b=new(c("oz-player/scheduling/OzRoundRobinPriorityTaskQueue"))(j,k);var d=new(c("oz-player/scheduling/OzSequentialTaskScheduler"))(b,{taskTimeout:l});h.set(a,b);i.set(a,d);d.start()}return b}g.OZ_QUEUE_MAX_PRIORITY=j;g.getQueue=a}),98);
__d("oz-player/networks/OzBandwidthEstimator",["oz-player/configs/OzGlobalConfig","oz-player/networks/OzBandwidthCache","oz-player/networks/OzBandwidthUtils","oz-player/networks/OzNetworkRequestStreamBandwidthReporter","oz-player/networks/OzNetworkSamples","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/shims/OzEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";var h=.9,i=5e5,j=2e4,k="bandwidthEstimate",l="bandwidthAndTTFBSamples";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.$OzBandwidthEstimator2=new(c("oz-player/networks/OzNetworkSamples"))();b.$OzBandwidthEstimator1=new(c("oz-player/networks/OzBandwidthCache"))(k,l,function(){return b.getAdjustedBandwidth(c("oz-player/configs/OzGlobalConfig"))},function(){return{bandwidth:b.$OzBandwidthEstimator2.getRecentBandwidthSamples(),timeToFirstByteMs:b.$OzBandwidthEstimator2.getRecentTimeToFirstByteMsSamples()}});b.$OzBandwidthEstimator2.setBandwidthCache(b.$OzBandwidthEstimator1);return b}var e=b.prototype;e.getBandwidth=function(a){var b=d("oz-player/networks/OzBandwidthUtils").getBandwidthEstimate(this.$OzBandwidthEstimator2.getRecentBandwidthSamples(),a.getNumber("bandwidth_estimator_half_life",6),a.getNumber("bandwidth_estimator_outlier_exclusion_factor",2),a.getNumber("bandwidth_estimator_std_dev_penalty_factor",.1));return b>0?b:this.$OzBandwidthEstimator3(a)};e.getEstimatedTimeToFirstByteMs=function(a){return this.$OzBandwidthEstimator2.getRecentTimeToFirstByteMsSamples().length>0?d("oz-player/networks/OzBandwidthUtils").getExponentiallyWeightedMovingAverage(this.$OzBandwidthEstimator2.getRecentTimeToFirstByteMsSamples().map(function(a){return{value:a.timeToFirstByteMs,weight:1}}),a.getNumber("time_to_first_byte_estimate_half_life_ms",500)).average:null};e.getStandardDeviationOfBandwidth=function(){return d("oz-player/networks/OzBandwidthUtils").getStandardDeviationOfBandwidth(this.$OzBandwidthEstimator2.getRecentBandwidthSamples())};e.getSampleCount=function(){return this.$OzBandwidthEstimator2.getRecentBandwidthSamples().length};e.getAdjustedBandwidth=function(a){if(this.$OzBandwidthEstimator2.getRecentBandwidthSamples().length===0)return this.$OzBandwidthEstimator3(a);var b=a.getNumber("bandwidth_estimator_variance_penalty_half_life",0)>0?this.$OzBandwidthEstimator4(a):this.$OzBandwidthEstimator5(a);return this.$OzBandwidthEstimator6(a,b)};e.getBandwidthDiagnostics=function(a){return d("oz-player/networks/OzBandwidthUtils").getBandwidthDiagnostics(this.$OzBandwidthEstimator2.getRecentBandwidthSamples(),a.getNumber("bandwidth_estimator_half_life",6),this.$OzBandwidthEstimator2.getRecentTimeToFirstByteMsSamples(),a.getNumber("time_to_first_byte_estimate_half_life_ms",500),a.getBool("use_simple_moving_average_estimator",!1))};e.getBandwidthDiagnosticsFromHeaders=function(a){var b=this.getBandwidthDiagnostics(a);if(b==null&&!a.getBool("use_ttfb_from_headers",!1))return null;var c=this.$OzBandwidthEstimator2.getBandwidthEstimateFromHeaders();if(c==null)return b;var d,e;if(a.getBool("use_ttfb_from_headers",!1))a=c.timeToFirstByteMsEstimate,d=0,e=1;else if(b!=null)a=b.timeToFirstByteMsEstimate,d=b.timeToFirstByteMsStandardDeviation,e=b.timeToFirstByteMsTotalWeight;else return null;return{bandwidthEstimate:c.meanEstimate,bandwidthStandardDeviation:c.standardDeviationEstimate,bandwidthTotalWeight:1,timeToFirstByteMsEstimate:a,timeToFirstByteMsStandardDeviation:d,timeToFirstByteMsTotalWeight:e}};e.$OzBandwidthEstimator3=function(a){var b=this.$OzBandwidthEstimator1.getCachedBandwidth();return typeof b==="number"&&b>0?b:a.getNumber("default_bandwidth_estimate",i)};e.$OzBandwidthEstimator6=function(a,b){var c=Math.max(0,d("oz-player/networks/OzStreamingTaskQueueProvider").getQueue("video").getLength()-a.getNumber("bandwidth_penalty_additional_video_start",0));a=a.getNumber("bandwidth_penalty_per_additional_video",0);c=Math.min(h,c*a);return b*(1-c)};e.$OzBandwidthEstimator4=function(a){var b=d("oz-player/networks/OzBandwidthUtils").getExponentiallyWeightedMovingAverageOfBandwidth(this.$OzBandwidthEstimator2.getRecentBandwidthSamples(),a.getNumber("bandwidth_estimator_half_life",6)).average,c=d("oz-player/networks/OzBandwidthUtils").getExponentiallyWeightedMovingAverageOfBandwidth(this.$OzBandwidthEstimator2.getRecentBandwidthSamples(),a.getNumber("bandwidth_estimator_variance_penalty_half_life",0)).average;a=c<b?a.getNumber("bandwidth_estimator_variance_penalty_down_factor",0):a.getNumber("bandwidth_estimator_variance_penalty_up_factor",0);c=Math.abs(b-c)*a;return b-c};e.$OzBandwidthEstimator5=function(a){return this.getBandwidth(a)};e.pipeThroughReporter=function(a,b,d){var e=this;return{startStream:function(f){var g=new(c("oz-player/networks/OzNetworkRequestStreamBandwidthReporter"))({stream:b,loggerProvider:d,byteCountPerSample:a.getNumber("byte_count_per_sample",j),minimumBytesToSampleOnClose:a.getNumber("minimum_bytes_to_sample_on_close",0),minimumSampleDuration:a.getNumber("minimum_bandwidth_sample_duration",0),maximumSampleBandwidth:a.getNumber("maximum_bandwidth_sample_bandwidth",999999999),usePerformanceEntryOnClose:a.getBool("use_performance_entry_on_stream_close",!1),useResponseTimeMs:a.getBool("bandwidth_use_response_time_adjustment",!1),responseTimeHandicapMs:a.getNumber("bandwidth_response_time_handicap",0),ignoreTimeToResponseStart:a.getBool("ignore_time_to_response_start",!1),ignoreOnStreamWriteSamples:a.getBool("bandwidth_ignore_on_stream_write_samples",!1),useChunkResponseSize:a.getBool("bandwidth_use_chunk_response_size",!1)});g.onBandwidthSample(function(b,c){e.$OzBandwidthEstimator7(b,c),a.getBool("update_bandwidth_cache_on_sample",!1)&&e.$OzBandwidthEstimator1.updateCache()});g.onTimeToFirstByteMsSample(function(b){var c=a.getNumber("time_to_first_byte_ignore_above_threshold_ms",0);(c===0||b<=c)&&e.$OzBandwidthEstimator8(b)});g.onEstimateFromHeaders(function(a,b,c){e.$OzBandwidthEstimator2.setBandwidthEstimateFromHeaders({meanEstimate:a,standardDeviationEstimate:b,timeToFirstByteMsEstimate:c})});return b.startStream(f).then(function(c){return b.retrievedFromCache()&&a.getBool("exclude_prefetch_bandwidth_samples",!1)?c:c.pipeThrough(g.getTransformStream())})}}};e.$OzBandwidthEstimator7=function(a,b){this.$OzBandwidthEstimator2.addBandwidthSample({bytes:a,timeInMs:b}),this.emit("bandwidth_sampled")};e.$OzBandwidthEstimator8=function(a){this.$OzBandwidthEstimator2.addTimeToFirstByteMsSample({timeToFirstByteMs:a})};return b}(c("oz-player/shims/OzEventEmitter"));b=new a();e=b;g["default"]=e}),98);
__d("useVideoPlayerBandwidthEstimate",["VideoPlayerOzWWWGlobalConfig","oz-player/networks/OzBandwidthEstimator","react","useInterval"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useState,i=5e3;function a(){var a=function(){return c("oz-player/networks/OzBandwidthEstimator").getBandwidth(c("VideoPlayerOzWWWGlobalConfig"))},b=h(a()),d=b[0],e=b[1];c("useInterval")(function(){return e(a())},i);return d}g["default"]=a}),98);
__d("useVideoAutoplayState",["HiddenSubtreePassiveContext","VideoPlayerHooks","VideoPlayerViewabilityHooks","gkx","react","useIsBackgrounded","useVideoPlayerBandwidthEstimate"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.startTransition,i=b.useContext,j=b.useEffect,k=b.useMemo,l=b.useRef,m=b.useState;function a(){var a=d("VideoPlayerHooks").useAdClientToken(),b=d("VideoPlayerHooks").useAutoplayGatingResult(),e=d("VideoPlayerHooks").useBroadcastStatus(),f=d("VideoPlayerHooks").useEnded(),g=d("VideoPlayerHooks").useIsExternalMedia(),n=d("VideoPlayerHooks").useIsFrozenPassive(),o=d("VideoPlayerHooks").useLastPauseReason(),p=d("VideoPlayerHooks").useLastPlayReason(),q=d("VideoPlayerHooks").useMuted(),r=d("VideoPlayerHooks").usePaused(),s=i(c("HiddenSubtreePassiveContext")),t=!a,u=c("useIsBackgrounded")({scrollTerminatesBackgrounded:t}),v=c("useVideoPlayerBandwidthEstimate")(),w=d("VideoPlayerViewabilityHooks").useVideoPlayerPassiveViewabilityInfo(),x=d("VideoPlayerViewabilityHooks").useVideoPlayerExtendedPassiveViewabilityInfo();t=m(s.getCurrentState().backgrounded);var y=t[0],z=t[1];t=m(s.getCurrentState().hidden);var A=t[0],B=t[1];j(function(){function a(a,b){B(a),z(b)}var b=s.subscribeToChanges(function(b){c("gkx")("1500552")?h(function(){var b=s.getCurrentState();a(b.hidden,b.backgrounded)}):a(b.hidden,b.backgrounded)}),d=s.getCurrentState().hidden,e=s.getCurrentState().backgrounded;c("gkx")("1500552")?h(function(){var b=s.getCurrentState();a(b.hidden,b.backgrounded)}):a(d,e);return function(){b.remove()}},[s,z,B]);t=m(function(){return n.getCurrentState()});var C=t[0],D=t[1];j(function(){var a=n.subscribeToChanges(function(a){D(a)}),b=n.getCurrentState();D(b);return function(){a.remove()}},[n,D]);var E=k(function(){return{adClientToken:a,autoplayGatingResult:b,bandwidthEstimate:v,broadcastStatus:e,controllerIsFrozen:C,currentSubtreeIsBackgrounded:y,currentSubtreeIsHidden:A,ended:f,hiddenSubtreePassive:s,isBackgrounded:u,isExternalMedia:g,isFrozenPassive:n,lastPauseReason:o,lastPlayReason:p,muted:q,paused:r,videoPlayerExtendedPassiveViewabilityInfo:x,videoPlayerPassiveViewabilityInfo:w}},[a,b,v,e,C,y,A,f,s,u,g,n,o,p,q,r,x,w]);t=m(E);var F=t[0],G=t[1],H=l(F);j(function(){H.current=F},[F]);j(function(){var a=!1;for(var b in E)if(Object.prototype.hasOwnProperty.call(E,b)&&E[b]!==H.current[b]){a=!0;break}a&&G(E)},[E,G]);return F}g["default"]=a}),98);
__d("CoreVideoPlayerAutoplayClient.react",["CoreVideoPlayerAutoplayClientUtils","HiddenSubtreePassiveContext","VideoPlayerAutoplayHooks","VideoPlayerDebugAutoplayAPI","VideoPlayerHooks","VideoPlayerViewabilityConstants","WwwCometVideoAutoplayFalcoEvent","evaluateVideoAutoplayDefaultAllowRule","evaluateVideoAutoplayDefaultIgnoreRule","makeSelectedAutoplayVideoSymbol","react","useAutoplayRulesEngine","useCometUniqueID","useConcurrentAutoplayManagementAPI","useVideoAutoplayState"],(function(a,b,c,d,e,f,g){"use strict";d("react");b=d("react");var h=b.useCallback,i=b.useContext,j=b.useEffect,k=b.useMemo,l=b.useRef,m=b.useState;function a(){var a=c("useCometUniqueID")(),b=d("VideoPlayerHooks").useCanAutoplay(),e=d("VideoPlayerHooks").useInstanceKey(),f=k(function(){return c("makeSelectedAutoplayVideoSymbol")(a,e)},[a,e]),g=l(f);j(function(){g.current=f},[f]);var n=i(c("HiddenSubtreePassiveContext")),o=d("VideoPlayerHooks").useController(),p=l(!1),q=d("useConcurrentAutoplayManagementAPI").useAutoplayControlID();j(function(){d("CoreVideoPlayerAutoplayClientUtils").log(g.current,"[ASSUME CONTROL] "+q),o.registerControllingComponent(q)},[o,q]);var r=d("VideoPlayerHooks").useVideoPlayerPassiveViewabilityInfo(),s=o.getCurrentState();s=s.paused;var t=l(s),u=d("VideoPlayerAutoplayHooks").useVideoAutoplayLocalScope(),v=l(u);j(function(){v.current=u},[u]);var w=h(function(){var a=o.getCurrentState(),b=a.lastPlayReason;a=a.paused;var d=t.current;t.current=a;var e=r==null?void 0:r.getCurrent();if(e){e=e.visiblePercentage;a=!a&&a!==d;d=e<c("VideoPlayerViewabilityConstants").DEFAULT_VIEWABILITY_PERCENTAGE_FOR_PAUSE&&e>0;v.current.disableScrollBeforePlayWhenOffscreen!==!0&&a&&b==="user_initiated"&&d&&(p.current=!0)}},[o,r]),x=l(w);j(function(){x.current=w},[w]);j(function(){var a=o.subscribe(function(){w()});return function(){a.remove()}},[o,w]);var y=c("useVideoAutoplayState")(),z=c("useAutoplayRulesEngine")(u.autoplayLocalRules),A=b==="allow"?c("evaluateVideoAutoplayDefaultAllowRule"):c("evaluateVideoAutoplayDefaultIgnoreRule");s=m(function(){return A});var B=s[0],C=s[1];s=m(null);var D=s[0],E=s[1];s=m(function(){return z.evaluateAutoplay(y,A)});var F=s[0],G=s[1];s=m(null);var H=s[0],I=s[1],J=l(F),K=d("VideoPlayerAutoplayHooks").useAutoplayApi(),L=l(K);j(function(){L.current=K},[K]);var M=b!=="dangerously_disable_autoplay_management";j(function(){K.register(f,e,u,o,n,M);c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"register",autoplay_scope_id:v.current.autoplayScopeID,event_creation_time:Date.now(),initiator:g.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:K.getAutoplayManagerDebugInfo(v.current).selectedAutoplayVideoSymbol,target:g.current,target_current_autoplay_decision:J.current}});return function(){K.unregister(f),c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"unregister",autoplay_scope_id:v.current.autoplayScopeID,event_creation_time:Date.now(),initiator:g.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:K.getAutoplayManagerDebugInfo(v.current).selectedAutoplayVideoSymbol,target:g.current,target_current_autoplay_decision:J.current}})}},[K,u,o,n,e,M,f]);j(function(){var a=function(){var b=z.evaluateAutoplay(y,A);J.current=b;var e=z.getRules(),h=z.getIndexOfLastWinningRule(),a=h>=0?e[h]:A;e=r&&r.getCurrent();h=o.getCurrentState();h=h.paused;(H===null||H!==b)&&(G(b),I(b));if(b==="PAUSE"&&!h&&o.isControllingComponent(q)){h=!0;x.current();if(p.current){p.current=!1;var i=e==null?void 0:e.positionToViewport;i&&o.scrollIntoView(i.top<0);h=!1}if(h){i="[PAUSE] via short-circuit on "+a.name+".";d("CoreVideoPlayerAutoplayClientUtils").log(g.current,i);o.pause("autoplay_initiated");c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:v.current.autoplayScopeID,event_creation_time:Date.now(),initiator:g.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:K.getAutoplayManagerDebugInfo(v.current).selectedAutoplayVideoSymbol,target:g.current,target_current_autoplay_decision:b}})}}(D===null||D!==a)&&(C(function(){return a}),E(function(){return a}),c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"rule_changed",autoplay_scope_id:v.current.autoplayScopeID,event_creation_time:Date.now(),initiator:g.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:K.getAutoplayManagerDebugInfo(v.current).selectedAutoplayVideoSymbol,target:g.current,target_current_autoplay_decision:b}}));d("CoreVideoPlayerAutoplayClientUtils").log(g.current,"[DECISION: "+b+"] from "+a.name);e&&K.update(f,b,e)},b=n.subscribeToChanges(function(a){n.getCurrentState().hidden||n.getCurrentState().backgrounded?o.isControllingComponent(q)||o.unregisterControllingComponent(q):o.registerControllingComponent(q)}),e=r?r.subscribe(function(){n.getCurrentState().hidden||n.getCurrentState().backgrounded?o.isControllingComponent(q)||o.unregisterControllingComponent(q):o.registerControllingComponent(q),a()}):null;a();return function(){b.remove(),e&&e.remove()}},[K,q,z,o,A,n,D,H,C,G,E,I,f,y,r]);j(function(){var a=o.isControllingComponent(q),b=o.getCurrentState();b=b.paused;d("CoreVideoPlayerAutoplayClientUtils").componentShouldPause(F,J.current,b,a)&&(d("CoreVideoPlayerAutoplayClientUtils").log(g.current,"[PAUSE] the video for "+F),o.pause("autoplay_initiated"),c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:v.current.autoplayScopeID,event_creation_time:Date.now(),initiator:g.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:L.current.getAutoplayManagerDebugInfo(v.current).selectedAutoplayVideoSymbol,target:g.current,target_current_autoplay_decision:F}}))},[F,o,q]);j(function(){return function(){d("CoreVideoPlayerAutoplayClientUtils").log(g.current,"[RELEASE CONTROL] "+q),o.unregisterControllingComponent(q)}},[o,q]);c("VideoPlayerDebugAutoplayAPI").useVideoPlayerDebugAPIDefinition({applicableRule:B,autoplayApiRef:L,autoplayDecision:F,autoplayLocalScope:u,symbol:f});return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerCaptionsAreaDeferred.react",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";d("react");a=c("deferredLoadComponent")(c("requireDeferredForDisplay")("VideoPlayerCaptionsArea.react").__setRef("VideoPlayerCaptionsAreaDeferred.react"));g["default"]=a}),98);
__d("WebSessionExtender",["WebSession","clearInterval","cr:913","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h=2e4,i=new Set(),j=null;function a(a,e){e===void 0&&(e="extender"),i.add(a),j==null&&(d("WebSession").extend(Date.now()+h+2e3),j=c("setInterval")(function(){d("WebSession").extend(Date.now()+h+2e3),b("cr:913")&&new(b("cr:913"))().setClientTime(Date.now()).setWebsessionID(d("WebSession").getId()).setReason(e).log()},h))}function e(a){i["delete"](a);a=i.size;a===0&&j!=null&&(c("clearInterval")(j),j=null)}g.subscribe=a;g.unsubscribe=e}),98);
__d("VideoPlayerWebSessionExtender.react",["VideoPlayerHooks","WebSessionExtender","react","useCometUniqueID"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(){var a=d("VideoPlayerHooks").usePlaying(),b=c("useCometUniqueID")();h(function(){if(a){d("WebSessionExtender").subscribe(b,"video");return function(){d("WebSessionExtender").unsubscribe(b)}}},[a,b]);return null}g["default"]=a}),98);
__d("useVideoPlayerDefaultLoadingIndicatorsLogic",["VideoPlayerHooks"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("VideoPlayerHooks").useStalling(),b=d("VideoPlayerHooks").useStreamInterrupted(),c=d("VideoPlayerHooks").useIsLiveRewindActive();b=b&&!c;c=a;a=b?"live_video_interrupted_overlay":c?"spinner":"none";return{liveVideoInterruptedOverlayVisible:b,loadingIndicatorType:a,spinnerVisible:c}}g["default"]=a}),98);
__d("useVideoPlayerDefaultLoadingIndicators",["CometPlaceholder.react","deferredLoadComponent","react","requireDeferred","requireDeferredForDisplay","useVideoPlayerDefaultLoadingIndicatorsLogic"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("deferredLoadComponent")(c("requireDeferredForDisplay")("VideoPlayerSpinner.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),j=c("deferredLoadComponent")(c("requireDeferred")("VideoPlayerWithLiveVideoInterruptedOverlay.react").__setRef("useVideoPlayerDefaultLoadingIndicators"));function a(){var a=c("useVideoPlayerDefaultLoadingIndicatorsLogic")(),b=a.loadingIndicatorType;a=a.spinnerVisible;var d=h.jsx(c("CometPlaceholder.react"),{fallback:null,children:h.jsx(j,{})});a=h.jsx(i,{isVisible:a});var e=null;switch(b){case"spinner":e=a;break;case"live_video_interrupted_overlay":e=d;break;case"none":default:e=a}return{loadingIndicatorElement:e,loadingIndicatorType:b}}g["default"]=a}),98);
__d("CVCv3DisabledPlayerOrigins",[],(function(a,b,c,d,e,f){a=Object.freeze({BEEPER:"beeper",FB_STORIES:"fb_stories"});f["default"]=a}),66);
__d("CVCv3DisabledPlayerSubOrigins",[],(function(a,b,c,d,e,f){a=Object.freeze({LIVE_BEEPER:"live_beeper"});f["default"]=a}),66);
__d("CvcV3HttpEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1856513");c=b("FalcoLoggerInternal").create("cvc_v3_http_event",a);e.exports=c}),null);
__d("CVCv3SubscriptionHelper",["CvcV3HttpEventFalcoEvent","DateConsts","guid"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$1=a;this.$2=c("guid")();this.$3=((a=b)!=null?a:"null")+"::"+((b=d)!=null?b:"null");this.$4=null;this.$5=null}var b=a.prototype;b.isValidSubscription=function(){return!!this.$1};b.makeCVCv3StateUpdate=function(a,b,c,e){var f=null;a!=null&&!Number.isNaN(a)&&b!=null&&!Number.isNaN(b)&&(f={m:e,pf:Math.floor((b-a)*d("DateConsts").MS_PER_SEC),s:c,sa:Math.floor(a*d("DateConsts").MS_PER_SEC)});e={pps:this.$4,ps:f,si:this.$2,so:this.$3,vi:this.$1};this.$4=f;return e};b.makeUnifiedVideoCVCUpdate=function(a,b,c,d,e){a=this.makeCVCv3StateUpdate(a,b,c,d);this.$5!=null&&(a.tk=this.$5);return Object.assign({},a,e)};b.processUnifiedResponse=function(a){a=a;this.$5=a.tk;return a};b.clearAnyPreviousContext=function(){this.$4=null};b.logHttpRequestSuccess=function(a){c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_success",duration_ms:a!=null?a.toString():null}})};b.logHttpRequestFailure=function(a,b){c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_failed",error_msg:a,duration_ms:b!=null?b.toString():null}})};b.logHttpRequestTimeout=function(a){c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_timeout",duration_ms:a!=null?a.toString():null}})};b.logHttpResponseBad=function(a,b){c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_response_bad",error_msg:a,duration_ms:b!=null?b.toString():null}})};return a}();g["default"]=a}),98);
__d("XVideoUnifiedCVCControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/video/unified_cvc/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("UnifiedVideoCVCSubscription",["CVCv3DisabledPlayerOrigins","CVCv3DisabledPlayerSubOrigins","CVCv3SubscriptionHelper","DateConsts","XVideoUnifiedCVCControllerRouteBuilder","clearTimeout","cometAsyncFetch","gkx","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=Object.values(c("CVCv3DisabledPlayerOrigins")),i=Object.values(c("CVCv3DisabledPlayerSubOrigins")),j=10;a=function(){function a(a,b,d,e,f,g){var j=this;this.$1=new(c("CVCv3SubscriptionHelper"))(a,b,d);this.$5=f;this.$6=null;this.$9=null;this.$10=!this.$1.isValidSubscription();this.$3=null;this.$2=null;a=b!=null?h.includes(b):!1;f=d!=null?i.includes(d):!1;!a&&!f&&(this.$3=e,this.$11=g,this.$4=e.subscribe(function(){if(j.$3==null)return;var a=j.$3.getCurrentState();a.playing?j.$12(a):j.$13()}))}var b=a.prototype;b.$12=function(a){if(this.$3==null)return;var b=!1;b||(b=this.$5?!0:c("gkx")("1124976"));if(!b)return;if(a.playing){if(this.$2==null){b=this.$3.getPlayheadPosition();b>=0&&(this.$2=b)}}else this.$2=null;this.$14(0)};b.stopUnifiedCVC=function(){this.$13()};b.destroy=function(){this.$13(),this.$4!=null&&this.$4.remove(),this.$4=null,this.$3=null};b.$13=function(){c("clearTimeout")(this.$8),c("clearTimeout")(this.$7),this.$8=null,this.$7=null,this.$2=null,this.$1.clearAnyPreviousContext(),this.$9=null};b.$15=function(){c("clearTimeout")(this.$7),this.$7=null};b.$16=function(){this.$9=null,this.$15(),this.$14(0)};b.$14=function(a){var b=this;if(this.$3==null||this.$8!=null||this.$9!=null||this.$10)return;this.$8=c("setTimeout")(function(){b.$8=null;var a=b.$17();if(a==null)return;b.$9=a;var e=Date.now(),f=!1;c("promiseDone")(a,function(c){if(a!==b.$9)return;b.$9=null;if(c!=null){c=b.$1.processUnifiedResponse(c);b.$18(c,e)}else b.$1.logHttpResponseBad("null payload",Date.now()-e)},function(a){f=!0,b.$1.logHttpRequestFailure(a!=null?a.toString():null,Date.now()-e)});b.$7=c("setTimeout")(function(){f||b.$1.logHttpRequestTimeout(Date.now()-e),b.$16()},j*d("DateConsts").MS_PER_SEC)},a)};b.$18=function(a,b){this.$15();b=Date.now()-b;a.d!=null?(this.$1.logHttpRequestSuccess(b),this.$11!=null&&this.$11(a.d)):this.$1.logHttpResponseBad("no data field",b);if(a.a!=null){b=a.a.t;switch(b){case"p":b=a.a.pi;b==null&&(b=j);this.$14(b*d("DateConsts").MS_PER_SEC);break;case"s":this.$10=!0;break}}};b.$17=function(){var a=this.$19();if(a==null)return null;a={d:JSON.stringify(a)};return c("cometAsyncFetch")(c("XVideoUnifiedCVCControllerRouteBuilder").buildURL({}),{data:a,method:"POST"})};b.$19=function(){if(this.$3==null)return null;var a={};this.$6!=null&&(a.lc=this.$6);this.$5&&(a.ls=!0);var b=0,c=0;this.$2!=null&&(b=this.$2,c=this.$3.getPlayheadPosition());var d=this.$3.getCurrentState();b=this.$1.makeUnifiedVideoCVCUpdate(b,c,this.$20(d),d.muted,a);return b};b.$20=function(a){if(a.playing||a.seeking)return"playing";else if(a.ended)return"ended";else if(a.paused)return"paused";else return"unknown"};b.testing_setLastStartPosition=function(a){this.$2=a};b.testing_makeUnifiedStateUpdate=function(){return this.$19()};b.testing_handleUnifiedResponse=function(a){return this.$18(a,Date.now())};return a}();g["default"]=a}),98);
__d("getPlayerFormatForLogData",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a===!0?"full_screen":b!=null?b:"inline"}f["default"]=a}),66);
__d("useVideoPlayerUnifiedCVCProvider",["UnifiedVideoCVCSubscription","VideoPlayerHooks","createVideoStateHook","getPlayerFormatForLogData","gkx","react","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g){"use strict";b=d("react").useEffect;var h=c("gkx")("3501")?b:c("useLayoutEffect_SAFE_FOR_SSR");e=d("createVideoStateHook").createVideoStateHook(null);var i=e.setterHook;f=d("createVideoStateHook").createVideoStateHook(null);var j=f.setterHook;b=f.valueHook;function a(a){var b=a.disableSubscription,e=a.playerFormat,f=a.subOrigin,g=a.videoFBID,k=d("VideoPlayerHooks").useIsLive(),l=d("VideoPlayerHooks").useIsFullscreen(),m=d("VideoPlayerHooks").useController(),n=i(),o=j();h(function(){if(b===!0)return;var a=new(c("UnifiedVideoCVCSubscription"))(g,c("getPlayerFormatForLogData")(l,e),f,m,k,function(a){o(a)});n(a);return function(){a.destroy()}},[l,k,b,e,o,n,f,m,g])}e=b;g.useVideoPlayerUnifiedCVCProvider=a;g.useVideoPlayerUnifiedCVCData=e}),98);
__d("VideoPlayerXImplSurface.react",["CoreVideoPlayerAudioClient.react","CoreVideoPlayerAutoplayClient.react","VideoPlayerCaptionsAreaDeferred.react","VideoPlayerInteractionOverlay.react","VideoPlayerWebSessionExtender.react","cr:1954434","cr:1969470","cr:946298","gkx","react","useVideoPlayerDefaultLoadingIndicators","useVideoPlayerUnifiedCVCProvider"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var e=a.children,f=a.disableLoadingIndicator;f=f===void 0?!1:f;var g=a.disableLogging,i=a.instreamVideoAdBreaksPlayer,j=a.playerFormat,k=a.subOrigin,l=a.videoFBID;a=a.videoPlayerSpherical;d("useVideoPlayerUnifiedCVCProvider").useVideoPlayerUnifiedCVCProvider({disableSubscription:g,playerFormat:j,subOrigin:k,videoFBID:l});b("cr:1969470")();g=c("useVideoPlayerDefaultLoadingIndicators")();j=g.loadingIndicatorElement;return h.jsxs(h.Fragment,{children:[a,f?null:j,c("gkx")("1586633")?h.jsx(d("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{}):null,h.jsx(c("VideoPlayerCaptionsAreaDeferred.react"),{children:e}),h.jsx(c("CoreVideoPlayerAutoplayClient.react"),{}),h.jsx(c("CoreVideoPlayerAudioClient.react"),{}),b("cr:1954434")?h.jsx(b("cr:1954434"),{}):null,b("cr:946298")?h.jsx(b("cr:946298"),{subOrigin:k}):null,i,h.jsx(c("VideoPlayerWebSessionExtender.react"),{})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("normalizeVideoPlayerLoopCount",["gkx","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){b===void 0&&(b=null);d===void 0&&(d=null);if(a==null){var e;d=((e=b)!=null?e:!1)?(e=d)!=null?e:0:0;d===-1?e=-1:d<0||!Number.isFinite(d)||Math.floor(d)!==d?e=0:c("gkx")("159")&&d===0&&b===!0?e=-1:e=d}else if(a===-1||a===Number.POSITIVE_INFINITY)e=-1;else if(a<0||!Number.isFinite(a)||Math.floor(a)!==a)throw c("unrecoverableViolation")("Invalid loopingCount: "+a,"comet_video_player");else e=a;return e}g["default"]=a}),98);
__d("VideoPlayerXImpl.react",["CoreVideoPlayerWithComponents.react","VideoPlayerXImplSurface.react","gkx","normalizeVideoPlayerLoopCount","react","usePlayerOriginRouteTracePolicy","useRouteProductAttribution"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.children,d=a.disableLoadingIndicator,e=a.disableLogging,f=a.implementations,g=a.instreamVideoAdBreaksPlayer,i=a.portalingEnabled,j=a.portalingFromVideoID,k=a.portalingPlaceMetaData,l=a.portalingRenderPlaceholder,m=a.videoPlayerSpherical;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","disableLoadingIndicator","disableLogging","implementations","instreamVideoAdBreaksPlayer","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","portalingRenderPlaceholder","videoPlayerSpherical"]);var n=c("usePlayerOriginRouteTracePolicy")(),o=c("useRouteProductAttribution")(),p=a.loopCount,q=a.playerFormat,r=a.subOrigin,s=a.videoFBID;p=c("normalizeVideoPlayerLoopCount")(p);return h.jsx(c("CoreVideoPlayerWithComponents.react"),babelHelpers["extends"]({},a,{disableLogging:e,implementations:f,loopCount:p,portalingEnabled:i,portalingFromVideoID:j,portalingPlaceMetaData:k,portalingRenderPlaceholder:l,productAttribution:c("gkx")("1759997")?o:null,routeTracePolicy:n,children:h.jsx(c("VideoPlayerXImplSurface.react"),{children:b,disableLoadingIndicator:d,disableLogging:e,instreamVideoAdBreaksPlayer:g,playerFormat:q,subOrigin:r,videoFBID:s,videoPlayerSpherical:m})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerXImplRelayWrapper.react",["VideoPlayerXImpl.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("VideoPlayerXImpl.react")}),98);
__d("defaultErrorBoundaryFallback",["fbt","VideoPlayerFallbackCover.react","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function j(a){return a&&c("gkx")("1792489")?a.message.toLowerCase().indexOf("audio_renderer_error")>=0:!1}function a(a){var b=a.error;a=a.retry;var d=j(b),e=null;a=a;d&&(e=h._("Audio renderer error: please restart your computer."),a=null);return i.jsx(c("VideoPlayerFallbackCover.react"),{debugError:b,message:e,onRetry:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("getVideoPlayerAutoplayProps",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){b=b!=null?b:"respect_user_settings";var d=b==="dangerously_always_autoplay";c=c!=null?c:"unknown";var e=a.autoplaySetting||"default_autoplay",f=e==="off";d=d||b==="respect_user_settings"&&!f&&a.canAutoplay;f=b==="do_not_autoplay"?c:a.autoplayGatingResult;c=d?"allow":b==="dangerously_disable_autoplay_management"?"dangerously_disable_autoplay_management":"deny";return{autoplayGatingResult:f,autoplaySetting:e,canAutoplay:c}}f["default"]=a}),66);
__d("GraphQLVideoAutoplayGatingResult",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){a=a!=null?a:"unknown";b=b?b:null;a={autoplayGatingResult:a,autoplaySetting:b,canAutoplay:c!=null?c:!1};return a}f.makeGraphQLVideoAutoplayGatingResult=a}),66);
__d("useGraphQLVideoAutoplayGatingResult",["CometRelay","GraphQLVideoAutoplayGatingResult","useGraphQLVideoAutoplayGatingResult_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useGraphQLVideoAutoplayGatingResult_video.graphql"),a);return d("GraphQLVideoAutoplayGatingResult").makeGraphQLVideoAutoplayGatingResult(a.autoplay_gating_result,a.viewer_autoplay_setting,a.can_autoplay)}g["default"]=a}),98);
__d("isEmptyObject",[],(function(a,b,c,d,e,f){"use strict";function a(a){for(var b in a)return!1;return!0}f["default"]=a}),66);
__d("GraphQLVideoDRMInfo",["isEmptyObject"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.fairplay_cert,d=a.graph_api_video_license_uri,e=a.video_license_uri_map;a=a.widevine_cert;d={fairplayCert:b,graphApiVideoLicenseUri:(b=d)!=null?b:null,videoLicenseUriMap:e,widevineCert:a};return d.graphApiVideoLicenseUri===null&&c("isEmptyObject")(d.videoLicenseUriMap)?null:d}g.makeGraphQLVideoDRMInfo=a}),98);
__d("useGraphQLVideoDRMInfo",["CometRelay","GraphQLVideoDRMInfo","gkx","react","useGraphQLVideoDRMInfo_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("react");var i=e.useEffect,j=e.useRef,k=e.useState;function l(a){if(a!=null){a=m(a);return d("GraphQLVideoDRMInfo").makeGraphQLVideoDRMInfo(a)}return null}function m(a){a=JSON.parse(a)||{};var b=a.fairplay_cert,c=a.graph_api_video_license_uri,d=a.video_license_uri_map;a=a.widevine_cert;return{fairplay_cert:b,graph_api_video_license_uri:c,video_license_uri_map:d,widevine_cert:a}}function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useGraphQLVideoDRMInfo_video.graphql"),a);var e=a.drm_info,f=k(e),g=f[0],m=f[1];i(function(){m(e)},[e]);f=k(function(){return l(g)});var n=f[0],o=f[1];i(function(){o(l(g))},[g]);f=j(null);var p=l(a.drm_info),q=j(null);f.current!==a.drm_info&&(f.current=a.drm_info,q.current=p);return c("gkx")("1718203")?q.current:n}g["default"]=a}),98);
__d("GraphQLVideoP2PSettings",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum").Mirrored(["HiveJava","HiveJS","StatsJS"]);function a(a){return(a=g.cast(a))!=null?a:null}f.HiveTechOrder=g;f.hiveTechOrderOrNull=a}),66);
__d("useGraphQLVideoP2PSettings",["CometRelay","GraphQLVideoP2PSettings","orEmptyArray","react","recoverableViolation","useGraphQLVideoP2PSettings_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react").useRef;function j(a){var b=null;if(a){var e,f,g,h,i;e={delay_p2p_until_play:(e=(e=a.config)==null?void 0:e.delay_p2p_until_play)!=null?e:!1,disable_hivejava_for_livevc:(e=(e=a.config)==null?void 0:e.disable_hivejava_for_livevc)!=null?e:!1};var j=a.ticket;f=(f=a.hive_initialization_options)==null?void 0:f.debug_level;g=c("orEmptyArray")((g=a.hive_initialization_options)==null?void 0:g.hive_tech_order.map(function(a){var b=d("GraphQLVideoP2PSettings").hiveTechOrderOrNull(a);b==null&&a!=null&&c("recoverableViolation")("Invalid hive tech order: '"+a+"'","comet_video_player");return b}).filter(Boolean));h=(h=a.hive_initialization_options)==null?void 0:(h=h.hive_java)==null?void 0:h.min_version;i=((i=a.hive_initialization_options)==null?void 0:i.hive_java)?{minVersion:h}:null;h=a.hive_initialization_options?{HiveJava:i,debugLevel:f,hiveTechOrder:g}:null;b={config:e,hive_initialization_options:h,ticket:j}}return b}function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useGraphQLVideoP2PSettings_video.graphql"),a);var c=i(null),e=i(null);a=j((a=a.p2p_settings)!=null?a:null);var f=JSON.stringify(a);if(c.current!==f){c.current=(c=f)!=null?c:null;e.current=(f=a)!=null?f:null}return e.current}g["default"]=a}),98);
__d("useOzQuickStarterData",["CometRelay","useOzQuickStarterData_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return a.url!=null&&a.start!=null&&a.end!=null&&a.representation_id!=null&&a.mime_codec!=null&&a.segment_type!=null?{end:a.end,mimeCodec:a.mime_codec,representationID:a.representation_id,segmentType:a.segment_type,start:a.start,url:a.url}:null}function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useOzQuickStarterData_video.graphql"),a);a=a.dash_prefetch_resources;return a==null?null:{audio:a.audio.map(i).filter(Boolean),video:a.video.map(i).filter(Boolean)}}g["default"]=a}),98);
__d("useVideoPlayerAudioAvailabilityInfoRelay",["CometRelay","VideoPlayerAudioAvailabilityInfo","react","useVideoPlayerAudioAvailabilityInfoRelay_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react").useMemo;function a(a){var c=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerAudioAvailabilityInfoRelay_video.graphql"),a);return i(function(){return d("VideoPlayerAudioAvailabilityInfo").makeVideoPlayerAudioAvailabilityInfo({audioAvailability:c.audio_availability,mutedSegmentsUnsanitized:c.muted_segments==null?[]:c.muted_segments.map(function(a){return{muteEndTimeInSec:a.mute_end_time_in_sec,muteStartTimeInSec:a.mute_start_time_in_sec}})})},[c.audio_availability,c.muted_segments])}g["default"]=a}),98);
__d("AudioSettingsVolumeSetting",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:"default",QUIET:"quiet"});f["default"]=a}),66);
__d("useVideoPlayerAudioSettings",["AudioSettingsVolumeSetting","CometRelay","react","useVideoPlayerAudioSettings_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react").useMemo,j=1;e=.5;var k=new Map([["default",j],["quiet",e]]);function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerAudioSettings_video.graphql"),a);a=(a=a.audio_settings)==null?void 0:a.video_volume_setting;var e="DEFAULT";switch(a){case"DEFAULT":case"QUIET":e=a;break;default:break}a=c("AudioSettingsVolumeSetting")[e];var f=(e=k.get(a))!=null?e:j;a=i(function(){return{preferredVolumeSetting:f}},[f]);return a}g["default"]=a}),98);
__d("useVideoPlayerCaptionsSettings",["CometRelay","useVideoPlayerCaptionsSettings_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c;a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerCaptionsSettings_video.graphql"),a);return{alwaysShowCaptions:(c=(c=a.captions_settings)==null?void 0:c.always_show_captions)!=null?c:!1,captionDisplayStyle:{captionsBackgroundColor:(c=(c=a.captions_settings)==null?void 0:c.captions_background_color)!=null?c:null,captionsBackgroundOpacity:(c=(c=a.captions_settings)==null?void 0:c.captions_background_opacity)!=null?c:null,captionsTextColor:(c=(c=a.captions_settings)==null?void 0:c.captions_text_color)!=null?c:null,captionsTextSize:(a=(c=a.captions_settings)==null?void 0:c.captions_text_size)!=null?a:null}}}g["default"]=a}),98);
__d("useVideoPlayerLiveLatencyKnobSettings",["CometRelay","useVideoPlayerLiveLatencyKnobSettings_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c;a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerLiveLatencyKnobSettings_video.graphql"),a);return{desiredLatencyMs:(c=(c=a.broadcast_low_latency_config)==null?void 0:c.ll_desired_latency_ms)!=null?c:0,latencyToleranceMs:(a=(c=a.broadcast_low_latency_config)==null?void 0:c.ll_latency_tolerance_ms)!=null?a:0}}g["default"]=a}),98);
__d("VideoPlayerRelay.react",["CastingStateHooks","CometPlaceholder.react","CometRelay","CometTrackingNodeProvider.react","CurrentUser","ErrorMetadata","InstreamVideoAdBreaksPlayer.react","JSResourceForInteraction","VideoPlayerFallbackCover.react","VideoPlayerRelay_video.graphql","VideoPlayerRetryableErrorBoundary.react","VideoPlayerXImplRelayWrapper.react","cr:1446473","cr:1694452","cr:1694453","cr:1701936","cr:1996722","defaultErrorBoundaryFallback","deferredLoadComponent","err","getVideoPlayerAutoplayProps","gkx","lazyLoadComponent","normalizeVideoPlayerLoopCount","orEmptyArray","react","recoverableViolation","requireDeferredForDisplay","unrecoverableViolation","useGraphQLVideoAutoplayGatingResult","useGraphQLVideoDRMInfo","useGraphQLVideoP2PSettings","useOzQuickStarterData","usePremiumMusicVideoInterruptionSubscription","useVideoPlayerAudioAvailabilityInfoRelay","useVideoPlayerAudioSettings","useVideoPlayerCaptionsSettings","useVideoPlayerLiveLatencyKnobSettings"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("react"),k=d("react").useMemo,l=c("deferredLoadComponent")(c("requireDeferredForDisplay")("VideoPlayerSphericalFallbackCover.react").__setRef("VideoPlayerRelay.react")),m=c("lazyLoadComponent")(c("JSResourceForInteraction")("VideoPlayerVideoIsCastingCover.react").__setRef("VideoPlayerRelay.react")),n=(i=b("cr:1694452"))!=null?i:a,o=(i=b("cr:1694453"))!=null?i:a;function p(a){var e=a.accessToken,f=a.adClientToken,g=a.additionalLogData,i=a.audioOnly,p=a.autoplayGatingResult,q=a.bufferEndLimit,r=a.canAutoplay,s=a.children,t=a.disableLoadingIndicator;t=t===void 0?!1:t;var u=a.disableLogging,v=a.externalLogID,w=a.externalLogType,x=a.initialForceHD,y=x===void 0?!1:x;x=a.initialTracePolicy;var z=a.loadSequence,A=a.loopCount,B=a.manifestURL_DO_NOT_USE,C=a.playerFormat;C=C===void 0?"inline":C;var D=a.playerOriginOverride,E=a.portalingEnabled,F=a.portalingFromVideoID,G=a.portalingPlaceMetaData,H=a.portalingRenderPlaceholder,I=a.source_VPL_LOGGING_HACK,J=a.startTimestamp,K=a.subOrigin,L=a.video;a=a.volumeSetting;c("usePremiumMusicVideoInterruptionSubscription")(c("CurrentUser").getID());var M=d("CometRelay").useFragment(h!==void 0?h:h=b("VideoPlayerRelay_video.graphql"),L);L=M.dash_prefetch_experimental;var aa=c("orEmptyArray")(M.video_available_captions_locales).find(function(a){a=a.localized_creation_method;return a!=null})!=null,N=b("cr:1701936")(M,{adClientToken:f}),ba=b("cr:1996722")(M.id),ca=c("useGraphQLVideoP2PSettings")(M),O=c("useGraphQLVideoDRMInfo")(M),P=!!(O&&O.fairplayCert!==null),Q=c("useOzQuickStarterData")(M),R=k(function(){return{forceProgressiveImpl:P,initialForceHD:y,manifestURL_DO_NOT_USE:B,ozQuickStarterData:Q,videoFBID:M.id,videoPlayerShakaConfig:N}},[P,y,B,Q,M.id,N]),S=n(M,R);R=o(M,R);S=c("gkx")("1669200")?S:R;R=c("useVideoPlayerCaptionsSettings")(M);var da=c("useVideoPlayerAudioSettings")(M),T=c("useVideoPlayerLiveLatencyKnobSettings")(M),ea=T.desiredLatencyMs;T=T.latencyToleranceMs;var fa=c("useVideoPlayerAudioAvailabilityInfoRelay")(M),U=c("useGraphQLVideoAutoplayGatingResult")(M);U=c("getVideoPlayerAutoplayProps")(U,r,p);r=b("cr:1446473")(M);p=j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(c("InstreamVideoAdBreaksPlayer.react"),{playerFormat:C,subOrigin:K,video:M})});var V=d("CastingStateHooks").useCastingVideoID(),W=M.id;if(W==null)throw c("unrecoverableViolation")("Cannot play video: Empty video ID","comet_video_player");if(M.unsupported_browser_message!=null){var X=c("err")("Cannot play video: Browser is not supported");X.metadata=new(c("ErrorMetadata"))();X.metadata.addEntry("COMET_VIDEO","VIDEO_ID",W);c("recoverableViolation")("Cannot play video: Browser is not supported","comet_video_player",{error:X});return j.jsx(c("VideoPlayerFallbackCover.react"),{message:M.unsupported_browser_message})}if(!S.length){X=c("err")("Cannot play video: No matching video player implementations");X.metadata=new(c("ErrorMetadata"))();X.metadata.addEntry("COMET_VIDEO","VIDEO_ID",W);throw c("unrecoverableViolation")("Cannot play video: No matching video player implementations","comet_video_player",{error:X})}X=M.permalink_url;var Y=M.spherical_video_renderer;Y=Y?j.jsx(d("CometRelay").MatchContainer,{match:Y,props:{playerFormat:C,sphericalVideoRenderer:Y,subOrigin:K,videoTahoeUrl:X}}):null;X=M.is_spherical;var Z=M.is_spherical_enabled,$=M.permalink_url;if(X===!0&&Z!==!0){if($==null||$==="")throw c("unrecoverableViolation")("Cannot play video: Empty permalink URL for a spherical video","comet_video_player");return j.jsx(l,{videoTahoeUrl:$})}if(V!=null&&V===M.id)return j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(m,{video:M})});X=c("gkx")("1477051")?!1:f!=null;Z=c("normalizeVideoPlayerLoopCount")(A,M.is_looping,M.loop_count);return j.jsx(c("VideoPlayerXImplRelayWrapper.react"),{VideoPlayerShakaPerformanceLoggerClass:r,accessToken:e,adClientToken:f,additionalLogData:g,alt:c("gkx")("1924962")?M.animated_image_caption:void 0,alwaysShowCaptions:R.alwaysShowCaptions,areCaptionsAutogenerated:aa,audioAvailabilityInfo:fa,audioOnly:i,autoplayGatingResult:U.autoplayGatingResult,autoplaySetting:U.autoplaySetting,broadcastId:M.broadcast_id,broadcastStatus:M.broadcast_status,broadcasterOrigin:M.broadcaster_origin,bufferEndLimit:q,canAutoplay:U.canAutoplay,captionDisplayStyle:R.captionDisplayStyle,captionsUrl:M.captions_url,children:s,desiredLatencyMs:ea,disableLoadingIndicator:t,disableLogging:u,expiredVideoUrlRefreshHandler:ba,externalLogID:v,externalLogType:w,graphQLVideoDRMInfo:O,graphQLVideoP2PSettings:ca,implementations:S,initialRepresentationIds:L,initialTracePolicy:x,instreamVideoAdBreaksPlayer:p,isLiveStreaming:M.is_live_streaming,isLiveTraceEnabled:M.is_live_trace_enabled,isNCSR:M.is_ncsr,isPremiumMusicVideo:M.pmv_metadata!=null,isVideoBroadcast:M.is_video_broadcast,latencyToleranceMs:T,loadSequence:z,loopCount:Z,originalHeight:M.original_height,originalWidth:M.original_width,playerFormat:C,playerOriginOverride:D,portalingEnabled:E&&!X,portalingFromVideoID:F,portalingPlaceMetaData:G,portalingRenderPlaceholder:H,source_VPL_LOGGING_HACK:I,startTimestamp:J,subOrigin:K,videoFBID:W,videoPlayerSpherical:Y,volumeSetting:a!==void 0?a:da.preferredVolumeSetting},W)}p.displayName=p.name+" [from "+f.id+"]";function a(a,b){return[]}function e(a){var b=a.doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn;b=b===void 0?!1:b;var d=a.errorBoundaryFallback;a=babelHelpers.objectWithoutPropertiesLoose(a,["doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn","errorBoundaryFallback"]);a=j.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:13,children:j.jsx(p,babelHelpers["extends"]({},a))});return b?a:j.jsx(c("VideoPlayerRetryableErrorBoundary.react"),{description:"VideoPlayerRelayBoundary",fallback:(b=d)!=null?b:c("defaultErrorBoundaryFallback"),children:a})}e.displayName=e.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("VideoPlayerWwwFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1914651");c=b("FalcoLoggerInternal").create("video_player_www",a);e.exports=c}),null);
__d("VideoPlayerWwwLogger",["VideoPlayerWwwFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return{access_token:a.logData.access_token,ad_client_token:a.logData.ad_client_token,attribution_id:a.logData.attribution_id,attribution_id_v2:a.logData.attribution_id_v2,attribution_id_v2_root:a.logData.attribution_id_v2_root,audio_only:a.logData.audio_only,audio_representation_id:a.logData.audio_representation_id,autoplay_eligible:a.logData.autoplay_eligible,autoplay_failure_reasons:a.logData.autoplay_failure_reasons,autoplay_setting:a.logData.autoplay_setting,available_qualities:a.logData.available_qualities,broadcaster_origin:a.logData.broadcaster_origin,browser_tab_id:a.logData.browser_tab_id,caption_state:a.logData.caption_state,cast_client_app_id:a.logData.cast_client_app_id,current_playback_speed:a.logData.current_playback_speed,current_viewability_percentage:Number(a.logData.current_viewability_percentage),current_volume:a.logData.current_volume,dash_perf_logging_enabled:a.logData.dash_perf_logging_enabled,data_connection_quality:a.logData.data_connection_quality,debug_reason:a.logData.debug_reason,device_id:a.logData.device_id,device_type:a.logData.device_type,dropped_frame_count:Number(a.logData.dropped_frame_count),error:a.logData.error,error_code:a.logData.error_code,error_description:a.logData.error_description,error_domain:a.logData.error_domain,error_type:a.logData.error_type,error_user_info:a.logData.error_user_info,event_name:a.eventType,event_seq_num:a.logData.event_seq_num,external_log_id:a.logData.external_log_id,external_log_type:a.logData.external_log_id,feed_aggregation_type:a.logData.feed_aggregation_type,feed_position:a.logData.feed_position,frame_events:a.logData.frame_events,ft:a.logData.ft,interrupt_count:a.logData.interrupt_count!==null?Number(a.logData.interrupt_count):null,interrupt_time:Number(a.logData.interrupt_time),is_abr_enabled:a.logData.is_abr_enabled,is_fbms:a.logData.is_fbms,is_live_video_rewound:a.logData.is_live_video_rewound,is_p2p_playback:a.logData.is_p2p_playback,is_predictive_playback:a.logData.is_predictive_playback,is_sound_on:a.logData.is_sound_on,is_templated_manifest:a.logData.is_templated_manifest,last_viewability_percentage:Number(a.logData.last_viewability_percentage),live_trace_source_id:a.logData.live_trace_source_id,live_trace_stream_id:a.logData.live_trace_stream_id,live_trace_stream_type:a.logData.live_trace_stream_type,next_representation_id:a.logData.next_representation_id,notification_id:a.logData.notification_id,notification_medium:a.logData.notification_medium,permalink_share_id:a.logData.permalink_share_id,playback_duration:a.logData.playback_duration,playback_is_broadcast:a.logData.playback_is_broadcast,playback_is_drm:a.logData.playback_is_drm,playback_is_live_streaming:a.logData.playback_is_live_streaming,player_format:a.logData.player_format,player_instance_key:a.logData.player_instance_key,player_mode:a.logData.player_mode,player_origin:a.logData.player_origin,player_state:a.logData.player_state,player_suborigin:a.logData.player_suborigin,player_version:a.logData.player_version,reaction_video_channel_type:a.logData.reaction_video_channel_type,representation_id:a.logData.representation_id,resource_url:a.logData.resource_url,routeTracePolicy:a.routeTracePolicy,seq_num:a.logData.seq_num,source:a.source_VPL_LOGGING_HACK,source_VPL_LOGGING_HACK:a.logData.source_VPL_LOGGING_HACK,stall_count:Number(a.logData.stall_count),stall_count_200_ms:Number(a.logData.stall_count_200_ms),stall_time:Number(a.logData.stall_time),state:a.logData.state,streaming_format:a.logData.streaming_format,time_ms:a.logData.time_ms,total_frame_count:Number(a.logData.total_frame_count),tracking_data_encrypted:a.logData.tracking_data_encrypted,tracking_nodes:a.logData.tracking_nodes,tv_session_id:a.logData.tv_session_id,v2_heart_beat:a.logData.v2_heart_beat,video_bandwidth:a.logData.video_bandwidth,video_buffer_end_position:a.logData.video_buffer_end_position,video_chaining_depth_level:a.logData.video_chaining_depth_level,video_chaining_parent_video_id:a.logData.video_chaining_parent_video_id,video_chaining_session_id:a.logData.video_chaining_session_id,video_channel_id:a.logData.video_channel_id,video_id:a.logData.video_id,video_last_start_time_position:a.logData.video_last_start_time_position,video_play_reason:a.logData.video_play_reason,video_player_height:Number(a.logData.video_player_height),video_player_width:Number(a.logData.video_player_width),video_time_position:a.logData.video_time_position,web_client_revision:a.logData.web_client_revision}}a={logComet:function(a){c("VideoPlayerWwwFalcoEvent").log(function(){return h(a)})},logCometImmediately:function(a){c("VideoPlayerWwwFalcoEvent").logImmediately(function(){return h(a)})}};b=a;g["default"]=b}),98);
__d("VideoPlayerCaptionsDisplayConfigContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext({liveCaptionsTextAlignment:null,textSizeMapping:null});g["default"]=b}),98);
__d("VideoPlayerCaptionsDisplay.react",["VideoPlayerCaptionsDisplayConfigContext","VideoPlayerHooks","qex","react","recoverableViolation","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext,j={captionsCenterAlign:{justifyContent:"taijpn5t",textAlign:"oqcyycmt"},captionsContainer:{bottom:"lhzng9rx",boxSizing:"rq0escxv",display:"j83agx80",justifyContent:"taijpn5t",paddingLeft:"k2nzzd71",paddingRight:"cnyvn6ex",position:"pmk7jnqg",textAlign:"oqcyycmt",transitionDuration:"pc15xi3s",transitionProperty:"flx89l3n",transitionTimingFunction:"eloblzlw",width:"k4urcfbm"},captionsDefault:{backgroundColor:"d6rk862h",color:"ljqsnud1",fontSize:"a5q79mjw",fontWeight:"ekzkrbhg",lineHeight:"j8p27hm0",marginTop:"kvgmc6g5",marginEnd:"nw5zvenu",marginBottom:"oygrvhab",marginStart:"pbhxczp3",paddingTop:"debrwdc1",paddingEnd:"m4n6deaq",paddingBottom:"pwvavz3a",paddingStart:"n1w2zk5c"},captionsLeftAlign:{justifyContent:"jifvfom9",textAlign:"hzawbc8m"},captionsRightAlign:{justifyContent:"bkfpd7mw",textAlign:"ftzlm3b6"}},k={BIG:"25px",BIGGER:"30px",BIGGEST:"34px",DEFAULT:"17px",MEDIUM:"21px",SMALL:"13px",SMALLEST:"8px"},l={DARK:.75,DEFAULT:.45,LIGHT:.25,OPAQUE:1,TRANSPARENT:0},m={BLACK:"20, 22, 26",BLUE:"0, 0, 255",CYAN:"0, 255, 255",GREEN:"0, 255, 0",MAGENTA:"255, 0, 255",RED:"255, 0, 0",WHITE:"255, 255, 255",YELLOW:"255, 255, 0"};function n(a){switch(a){case"center":return j.captionsCenterAlign;case"left":return j.captionsLeftAlign;case"right":return j.captionsRightAlign;default:c("recoverableViolation")("Unsupported captions text alignment: "+a,"comet_video_player")}}function o(a,b){var c={},d=a.captionsBackgroundColor,e=a.captionsBackgroundOpacity,f=a.captionsTextColor;a=a.captionsTextSize;if(d!==null){e=e!==null?l[e]:1;c.backgroundColor="rgba("+m[d]+","+e+")"}f!==null&&(c.color="rgba("+m[f]+")");a!==null&&(c.fontSize=b!=null?babelHelpers["extends"]({},k,b)[a]:k[a]);return c}function a(a){var b,e=a.activeCaptions,f=a.adjustments;a=a.captionDisplayStyle;var g=e==null?void 0:e.rows;b=(b=c("qex")._("835"))!=null?b:!1;var k=i(c("VideoPlayerCaptionsDisplayConfigContext")),l=k.liveCaptionsTextAlignment;k=k.textSizeMapping;var m={};b&&a&&(m=o(a,k));b=d("VideoPlayerHooks").useIsLive();e=(k=e==null?void 0:(a=e.styles)==null?void 0:a.textAlignment)!=null?k:"center";if(g!=null&&g.length>0){a=g.map(function(a){return a.trim()}).filter(function(a){return!!a});return a.length>0?h.jsx("div",{className:c("stylex")(j.captionsContainer,n(b?(k=l)!=null?k:e:e)),style:{paddingLeft:f.left,paddingRight:f.right,transform:"translateY("+-f.bottom+"px)"},children:h.jsx("div",{className:c("stylex")(j.captionsDefault),style:m,children:a.map(function(a,b){return h.jsxs("span",{children:[a,h.jsx("br",{})]},b)})})}):null}return null}a.displayName=a.name+" [from "+f.id+"]";b=h.memo(a);e=b;g["default"]=e}),98);
__d("useVideoPlayerCaptionsDisplayAdjustments",["VideoPlayerHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(){var a=d("VideoPlayerHooks").useVideoPlayerCaptionsReservations(),b=h(function(){var b={bottom:0,left:0,right:0,top:0};a.length>0&&a.forEach(function(a){b[a.location]+=a.size});return b},[a]);return b}g["default"]=a}),98);
__d("VideoPlayerCaptions.react",["VideoPlayerCaptionsDisplay.react","VideoPlayerHooks","react","useVideoPlayerCaptionsDisplayAdjustments"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(){var a=d("VideoPlayerHooks").useActiveCaptions(),b=c("useVideoPlayerCaptionsDisplayAdjustments")(),e=d("VideoPlayerHooks").useCaptionDisplayStyle();return h.jsx(c("VideoPlayerCaptionsDisplay.react"),{activeCaptions:a,adjustments:b,captionDisplayStyle:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerCaptionsArea.react",["VideoPlayerCaptions.react","VideoPlayerContexts","VideoPlayerHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useReducer,j=b.useState;function k(a,b){switch(b.type){case"reserve":return a.concat(b.reservation);case"release":return a.filter(function(a){return a!==b.reservation});default:return a}}function a(a){a=a.children;var b=i(k,[]),e=b[0],f=b[1];b=j({release:function(a){f({reservation:a,type:"release"})},reserve:function(a){f({reservation:a,type:"reserve"});return a}});b=b[0];var g=d("VideoPlayerHooks").useCaptionsVisible();return h.jsx(d("VideoPlayerContexts").VideoPlayerCaptionsReservationActionsContext.Provider,{value:b,children:h.jsxs(d("VideoPlayerContexts").VideoPlayerCaptionsReservationsContext.Provider,{value:e,children:[g?h.jsx(c("VideoPlayerCaptions.react"),{}):null,a]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerCaptionsController",["JSResourceForInteraction","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=c("JSResourceForInteraction")("VideoPlayerHTML5ApiCea608State").__setRef("VideoPlayerCaptionsController"),i=c("JSResourceForInteraction")("VideoPlayerHTML5ApiWebVttState").__setRef("VideoPlayerCaptionsController");function a(a){var b=a.captionsUrl,d=a.inbandCaptionsExpected,e=a.onCaptionsLoaded,f=null,g=null,j=null,k=null;function l(a){var b=i.load().then(function(c){if(b!==j)return;f=new c({captionsDisplay:null,onCaptionsLoaded:e,onReady:function(b){b.loadFromUrl(a)}})})["catch"](function(a){if(b!==j)return;c("recoverableViolation")("Failed to load the VideoPlayerHTML5ApiWebVttState module: "+a.message,"comet_video_player")});return b}function m(){var a=h.load().then(function(b){if(a!==k)return;g=new b({captionsDisplay:null,onCaptionsLoaded:e,onReady:function(a){a.processQueue()}})})["catch"](function(b){if(a!==k)return;c("recoverableViolation")("Failed to load the VideoPlayerHTML5ApiCea608State module: "+b.message,"comet_video_player")});return a}b!=null?j=l(b):d===!0&&(k=m());return{destroy:function(){f&&(f.destroy(),f=null),g&&(g.destroy(),g=null),j&&(j=null),k&&(k=null)},handleCea608BytesReceived:function(a){g&&g.enqueueBytes(a)},handleTimeUpdate:function(a){if(f){f.source&&f.source.handleTimeUpdate(a);return f.getCurrentScreenRepresentation()}else if(g){g.source&&g.source.handleTimeUpdate(a);return g.getCurrentScreenRepresentation()}return null},updateCaptionsUrl:function(a){f&&(f.destroy(),f=null),a!=null&&(j=l(a))},updateInbandCaptionsExpected:function(a){g&&(g.destroy(),g=null),a&&(k=m())}}}g.createCaptionsController=a}),98);
__d("VideoPlayerActionButton.react",["CometLink.react","TetraIcon.react","TetraText.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.icon,d=a.label,e=a.onPress,f=a.shouldJustifyContentCenter;f=f===void 0?!1:f;var g=a.testid;g=a.useVerticalLayout;a=g===void 0?!1:g;return h.jsxs("div",{className:c("stylex").dedupe(a!==!0?{"align-items-1":"bp9cbjyn","display-1":"j83agx80","flex-direction-1":"btwxx1t3","padding-top-1":"discj3wi","padding-end-1":"hv4rvrfc","padding-bottom-1":"ihqw7lf3","padding-start-1":"dati1w0a"}:{},f?{"justify-content-1":"taijpn5t"}:null,a===!0?{"align-items-1":"bp9cbjyn","display-1":"j83agx80","flex-direction-1":"cbu4d94t","padding-top-1":"discj3wi","padding-end-1":"hv4rvrfc","padding-bottom-1":"ihqw7lf3","padding-start-1":"dati1w0a","text-align-1":"oqcyycmt","width-1":"p0n2ovh4"}:null),"data-testid":void 0,children:[h.jsx("div",{className:c("stylex").dedupe(a!==!0?{"border-top-0.3":"gag4i7dh","border-end-0.3":"jsrkvy3z","border-bottom-0.3":"moy3fgm5","border-start-0.3":"kozd3uwk","border-top-start-radius-1":"s45kfl79","border-top-end-radius-1":"emlxlaya","border-bottom-end-radius-1":"bkmhp75w","border-bottom-start-radius-1":"spb7xbtv","margin-end-1":"tvfksri0","padding-top-1":"jktsbyx5","padding-end-1":"rv4hoivh","padding-bottom-1":"osnr6wyh","padding-start-1":"h4z51re5"}:{},a===!0?{"border-top-0.3":"gag4i7dh","border-end-0.3":"jsrkvy3z","border-bottom-0.3":"moy3fgm5","border-start-0.3":"kozd3uwk","border-top-start-radius-1":"s45kfl79","border-top-end-radius-1":"emlxlaya","border-bottom-end-radius-1":"bkmhp75w","border-bottom-start-radius-1":"spb7xbtv","margin-bottom-1":"n851cfcs","padding-top-1":"jktsbyx5","padding-end-1":"rv4hoivh","padding-bottom-1":"osnr6wyh","padding-start-1":"h4z51re5"}:null),children:h.jsx(c("TetraIcon.react"),{"aria-label":d,color:"white",hideHoverOverlay:!0,icon:b,onPress:e})}),h.jsx(c("TetraText.react"),{color:"white",type:"headlineEmphasized3",children:h.jsx(c("CometLink.react"),{onClick:e,children:d})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerFallbackCoverImplWithoutRetry.react",["TetraText.react","VideoPlayerFallbackLearnMoreLink.react","cr:1672302","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var d=a.debugError,e=a.message;a.onRetry;return h.jsx("div",{className:"stjgntxs ni8dbmo4 taijpn5t j83agx80 ora8z2hr bp9cbjyn kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 rq0escxv i09qtzwb",children:h.jsxs("div",{className:"ij9ysmuz cbu4d94t j83agx80 bp9cbjyn",children:[h.jsx("div",{className:"d2edcug0 cbu4d94t j83agx80 bp9cbjyn",children:h.jsx(c("TetraText.react"),{align:"center",color:"white",type:"bodyLink3",children:e})}),h.jsx("div",{className:"d2edcug0 tr9rh885 cbu4d94t j83agx80 bp9cbjyn",children:h.jsx(c("VideoPlayerFallbackLearnMoreLink.react"),{})}),b("cr:1672302")?h.jsx(b("cr:1672302"),{error:d}):null]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerSpinner.react",["CometLoadingAnimation.react","react","stylex","useDebouncedValue"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=36;function a(a){a=a.isVisible;var b=c("useDebouncedValue")(a,a?200:500);return h.jsx("div",{className:c("stylex").dedupe({"height-1":"tv7at329","opacity-1":"pedkr2u6","position-1":"pmk7jnqg","start-1":"kfkz5moi","top-1":"rk01pc8j","transform-0.1":"py2didcb","transition-delay-1":"chkx7lpg","transition-duration-1":"kmdw4o4n","transition-property-1":"art1omkt","transition-timing-function-1":"e4zzj2sf","width-1":"thwo4zme"},a?null:{"opacity-1":"b5wmifdl","transition-delay-1":"hwaazqwg","transition-duration-1":"kmdw4o4n","transition-property-1":"l23jz15m","transition-timing-function-1":"e4zzj2sf","visibility-1":"kr9hpln1"}),children:h.jsx(c("CometLoadingAnimation.react"),{animationPaused:!b,size:i})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerDefaultControlsProperties",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["SAME_AS_OTHER_CONTROLS","SEPARATE_FROM_OTHER_CONTROLS"]);f.MutedButtonVisibility=a}),66);
__d("VideoPlayerFullscreenControl.react",["fbt","ix","VideoPlayerControlIcon.react","VideoPlayerHooks","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function a(a){var b=a.onPress,e=a.onUserInteraction,f=a.shouldUnmute,g=d("VideoPlayerHooks").useController(),k=d("VideoPlayerHooks").useIsFullscreen(),l=d("VideoPlayerHooks").useLastMuteReason();a=k?h._("Exit full-screen"):h._("Enter full-screen");var m=function(){b&&b(),g.requestSetIsFullscreen(!k),f===!0&&l!=="user_initiated"&&g.setMuted(!1,"product_initiated"),e&&e({name:"video_fullscreen_button",type:"happened"})};return j.jsx(c("VideoPlayerControlIcon.react"),{icon:k?d("fbicon")._(i("517758"),20):d("fbicon")._(i("517763"),20),label:a,onPress:m,tooltip:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useVideoPlayerDefaultControlsVisibility",["VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerUserInteractionCounter","clearTimeout","react","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useState,j=5e3;function a(a){a=a===void 0?{}:a;var b=a.forceVisible,e=a.forceVisibleOnMount;a.isInteracting;a=d("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteractionCounter();var f=a.ongoingInteractionsCount;a=a.onUserInteraction;var g=d("VideoPlayerHooks").useEnded(),k=d("VideoPlayerHooks").useIsHovering(),l=d("VideoPlayerHooks").usePaused(),m=d("VideoPlayerHooks").useIsMouseIdle(),n=d("VideoPlayerHooks").useVideoPlaybackEnded(),o=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsIsStart();d("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_pointer_active",k&&!m,a);k=i(e===!0);var p=k[0],q=k[1];h(function(){if(!l&&p){var a=c("setTimeout")(function(){q(!1)},j);return function(){c("clearTimeout")(a)}}},[p,l]);b===!0||b===!1?m=b:o?m=!1:f>0||p?m=!0:l?m=g?n:!0:m=!1;return{isControlsVisible:m,onUserInteraction:a}}g["default"]=a}),98);
__d("VideoPlayerDefaultControls.react",["CometPlaceholder.react","CometRelay","CometWarningScreenContext","VideoPlayerDefaultControlsProperties","VideoPlayerDefaultControls_video.graphql","VideoPlayerFullscreenControl.react","VideoPlayerHooks","cr:1875194","deferredLoadComponent","emptyFunction","react","requireDeferred","useVideoPlayerBigPlayButtonOverlay","useVideoPlayerDefaultControlsVisibility"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=(e=b("cr:1875194"))!=null?e:c("emptyFunction"),k=c("deferredLoadComponent")(c("requireDeferred")("VideoPlayerDefaultControlsImplLive.react").__setRef("VideoPlayerDefaultControls.react")),l=c("deferredLoadComponent")(c("requireDeferred")("VideoPlayerDefaultControlsImplNotLive.react").__setRef("VideoPlayerDefaultControls.react"));function a(a){var e,f=a.forceVisible,g=a.forceVisibleOnMount,m=a.mutedButtonVisibility,n=a.renderExpandControl,o=a.shouldRenderCostreamControl,p=a.shouldRenderLivePauseControl,q=a.shouldRenderModeratorControl,r=a.shouldRenderQuietModeControl,s=a.shouldRenderWatchAndScrollControl,t=a.shouldUnmuteForBigPlayButton,u=a.skipControl,v=a.subOrigin,w=a.video;a=a.videoTahoeUrl;w=d("CometRelay").useFragment(h!==void 0?h:h=b("VideoPlayerDefaultControls_video.graphql"),w);e=(e=d("CometWarningScreenContext").useIsContentVisible())!=null?e:!1;var x=j();x=x!=null?x.isSilentAtPlayhead:!1;var y=d("VideoPlayerHooks").useMuted(),z=d("VideoPlayerHooks").useIsLive();g=c("useVideoPlayerDefaultControlsVisibility")({forceVisible:f,forceVisibleOnMount:g});var A=g.isControlsVisible;g=g.onUserInteraction;f=c("useVideoPlayerBigPlayButtonOverlay")({forceVisible:f===!1?!1:void 0,shouldUnmute:t});t=f.bigPlayButtonElement;f=f.bigPlayButtonIsVisible;A=A&&!f&&e;e=m===d("VideoPlayerDefaultControlsProperties").MutedButtonVisibility.SAME_AS_OTHER_CONTROLS?A:(y||A||x)&&!f;m=n!=null?n({onUserInteraction:g}):i.jsx(c("VideoPlayerFullscreenControl.react"),{onUserInteraction:g});y=z?i.jsx(k,{expandControl:m,isControlsVisible:A,isVolumeControlVisible:e,onUserInteraction:g,shouldRenderCostreamControl:o,shouldRenderModeratorControl:q,shouldRenderPauseControl:p,shouldRenderQuietModeControl:r,shouldRenderWatchAndScrollControl:s,subOrigin:v,video:w,videoTahoeUrl:a}):i.jsx(l,{expandControl:m,isControlsVisible:A,isVolumeControlVisible:e,onUserInteraction:g,shouldRenderQuietModeControl:r,shouldRenderWatchAndScrollControl:s,skipControl:u,subOrigin:v,video:w,videoTahoeUrl:a});return i.jsxs(i.Fragment,{children:[t,i.jsx(c("CometPlaceholder.react"),{fallback:null,children:y})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerBanzaiLogFlusher",["VideoPlayerWwwLogger","emptyFunction","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=c("emptyFunction");b=function(){function a(a){this.$1=a}var b=a.prototype;b.flushLogs=function(){var a=this.$1.consumeLoggerEvents();a.forEach(function(a){var b={event:a.eventType,logData:a.logData,routeTracePolicy:a.routeTracePolicy,source:a.source_VPL_LOGGING_HACK};if(a.source_VPL_LOGGING_HACK==="animated_image_share"&&c("gkx")("1710047"))return;b=(b=a.logData)==null?void 0:b.ad_client_token;b!=null?c("VideoPlayerWwwLogger").logCometImmediately(a):c("VideoPlayerWwwLogger").logComet(a)})};b.discardLogsWithoutFlushing=function(){var a=this.$1.consumeLoggerEvents()};return a}();g["default"]=b}),98);
__d("getErrorMessageFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 1:return"The fetching process for the media resource was aborted by the user agent at the users request.";case 2:return"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return"The media resource indicated by the src attribute was not suitable."}return null}f["default"]=a}),66);
__d("getErrorNameFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"MEDIA_ERR_UNKNOWN_"+((a=a)!=null?a:"UNDEFINED")}}f["default"]=a}),66);
__d("VideoPlayerImplementationErrors",["getErrorMessageFromMediaErrorCode","getErrorNameFromMediaErrorCode"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.errorLocation,d=a.hostCallError,e=a.videoElementError,f=a.videoElementNetworkState;a=a.videoElementReadyState;var g=e==null?void 0:e.code,h=d!=null&&typeof d.message==="string"?d.message:null;h==null&&(h=e==null?void 0:e.message);h==null&&g!=null&&(h=c("getErrorMessageFromMediaErrorCode")(g));e={createdTimestamp:Date.now(),errorDescription:((e=h)!=null?e:"Empty error")+("; code: "+((h=g)!=null?h:"undefined"))+("; readyState: "+a)+("; networkState: "+f),errorLocation:b,errorName:c("getErrorNameFromMediaErrorCode")(g),originalError:d};return e}function b(a,b){if(a==null){var c={createdTimestamp:Date.now(),errorDescription:"Empty rejection reason from video play()",errorLocation:b,errorName:"PlayRejectedError"};return c}c={createdTimestamp:Date.now(),errorCode:typeof a.code==="string"?a.code:typeof a.code==="number"?String(a.code):void 0,errorDescription:typeof a.message==="string"?a.message:String(a),errorLocation:b,errorName:typeof a.name==="string"?a.name:"PlayRejectedError"};return c}function d(a,b,c){var d;d={message:(d=b==null?void 0:b.message)!=null?d:"",name:(d=b==null?void 0:b.name)!=null?d:"UnknownError",stack:(b==null?void 0:b.stack)||new Error().stack};b={createdTimestamp:Date.now(),errorCode:null,errorDescription:d.name+" "+d.message,errorLocation:c,errorName:a,stack:d.stack,url:null};return b}g.createVideoPlayerErrorFromHTMLVideoElementError=a;g.createVideoPlayerErrorFromVideoElementPlayPromiseRejectionReason=b;g.createVideoPlayerErrorFromGenericError=d}),98);
__d("VideoPlayerImplementationStateMachine",["VideoPlayerImplementationErrors","gkx","orEmptyArray","recoverableViolation","shallowArrayEqual","shallowEqual","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.bufferingDetected,c=a.seeking;a=a.waitingForDomPlaying;return!b&&!c&&!a}function i(a){var b=a.bufferingDetected,d=a.prevPlaybackState,e=a.seeking;a=a.waitingForDomPlaying;b=h({bufferingDetected:b,seeking:e,waitingForDomPlaying:a});e=d;switch(d){case"stalling":e=b?"playing":"stalling";break;case"ended":case"paused":case"playing":break;default:d;c("recoverableViolation")("unexpected playbackState: "+d,"comet_video_player");break}return e}function j(a){return a.loopCount>0&&a.loopCurrent<a.loopCount||a.loopCount===-1}function k(a,b){var c=b.videoElementPlayheadPosition;return c==null?[]:a.emsgBoxes.filter(function(a){a=a.box;var b=a.getDuration()||0;a=a.getStartTime();return a!=null&&c>=a&&c<a+b})}function l(a,b,e){switch(e.type){case"host_call_pause":case"host_call_play":case"host_call_set_current_time":case"host_call_set_volume":case"host_call_set_muted":case"host_call_set_playback_rate":case"host_call_set_video_quality":case"host_call_set_latency_level":return babelHelpers["extends"]({},a,{hostCallQueue:a.hostCallQueue.concat([e])});case"controller_set_latency_level_requested":case"implementation_set_latency_level_requested":return babelHelpers["extends"]({},a,{latencyLevel:e.payload.latencyLevel});case"dom_event_ended":return babelHelpers["extends"]({},a,{playbackState:"ended",waitingForDomPlaying:!1});case"dom_event_pause":if(a.playbackState==="ended")return a;if(b.videoElementEnded===!0)return babelHelpers["extends"]({},a,{playbackState:"ended",waitingForDomPlaying:!1});return a.playbackState==="paused"?a:babelHelpers["extends"]({},a,{playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play":var f=a.playbackState,g=f;switch(f){case"playing":case"stalling":case"ended":case"paused":g="stalling";break;default:f;c("recoverableViolation")("unexpected playbackState: "+f,"comet_video_player");break}f=!0;return babelHelpers["extends"]({},a,{playbackState:g,waitingForDomPlaying:f});case"dom_event_playing":g=a.bufferingDetected;f=a.seeking;var h=!1,l=a.playbackState;return babelHelpers["extends"]({},a,{playbackState:i({bufferingDetected:g,prevPlaybackState:l,seeking:f,waitingForDomPlaying:h}),waitingForDomPlaying:h});case"dom_event_timeupdate":g=a.activeEmsgBoxes;l=k(a,b);f=c("shallowArrayEqual")(g,l)?g:l;if(a.waitingForDomTimeUpdateAfterSeeked){h=a.bufferingDetected;g=a.seeking;l=!1;var m=a.playbackState;return babelHelpers["extends"]({},a,{activeEmsgBoxes:f,playbackState:i({bufferingDetected:h,prevPlaybackState:m,seeking:g,waitingForDomPlaying:l}),waitingForDomPlaying:l,waitingForDomTimeUpdateAfterSeeked:!1})}return babelHelpers["extends"]({},a,{activeEmsgBoxes:f});case"dom_event_seeking":h=a.playbackState;m=h;switch(h){case"paused":case"ended":break;case"stalling":case"playing":m="stalling";break;default:h,c("recoverableViolation")("unexpected playbackState: "+h,"comet_video_player")}return babelHelpers["extends"]({},a,{playbackState:m,seeking:!0,waitingForDomPlaying:!0});case"dom_event_seeked":g=a.bufferingDetected;l=a.waitingForDomPlaying;f=!1;h=a.playbackState;return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:null,playbackState:i({bufferingDetected:g,prevPlaybackState:h,seeking:f,waitingForDomPlaying:l}),seeking:f,waitingForDomTimeUpdateAfterSeeked:!0});case"dom_event_error":m=d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromHTMLVideoElementError({errorLocation:"dom_event_error",hostCallError:null,videoElementError:e.payload.videoElementError,videoElementNetworkState:e.payload.videoElementNetworkState,videoElementReadyState:e.payload.videoElementReadyState});return babelHelpers["extends"]({},a,{error:c("gkx")("2011")?a.error:m,playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play_promise_created":return babelHelpers["extends"]({},a,{hostCallPlayIDLast:e.payload.hostCallPlayID});case"dom_event_play_promise_resolved":return a.hostCallPlayIDLast!==e.payload.hostCallPlayID?a:babelHelpers["extends"]({},a,{hostCallPlayIDLast:null});case"dom_event_play_promise_rejected":return a.hostCallPlayIDLast!==e.payload.hostCallPlayID?a:babelHelpers["extends"]({},a,{hostCallPlayIDLast:null,playbackState:a.playbackState==="stalling"?"paused":a.playbackState,waitingForDomPlaying:!1});case"implementation_host_call_queue_flushed":return babelHelpers["extends"]({},a,{hostCallQueue:[]});case"implementation_host_call_failed":g=d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromHTMLVideoElementError({errorLocation:e.payload.errorLocation,hostCallError:e.payload.hostCallError,videoElementError:e.payload.videoElementError,videoElementNetworkState:e.payload.videoElementNetworkState,videoElementReadyState:e.payload.videoElementReadyState});return babelHelpers["extends"]({},a,{error:g,playbackState:"paused",waitingForDomPlaying:!1});case"implementation_video_node_unmounted":return a;case"implementation_engine_initialized":l=(h=e.payload.streamingFormat)!=null?h:a.streamingFormat;return babelHelpers["extends"]({},a,{availableQualities:e.payload.availableQualities,selectedVideoQuality:e.payload.selectedVideoQuality,streamingFormat:l,targetVideoQuality:e.payload.targetVideoQuality,videoProjection:e.payload.videoProjection});case"implementation_engine_available_qualities_changed":return babelHelpers["extends"]({},a,{availableQualities:e.payload.availableQualities});case"implementation_engine_destroyed":return a;case"implementation_fatal_error":return babelHelpers["extends"]({},a,{error:e.payload.fatalError,playbackState:"paused",waitingForDomPlaying:!1});case"implementation_seek_requested":return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:e.payload.seekSourcePosition});case"representation_changed":return babelHelpers["extends"]({},a,{targetVideoQuality:e.payload.targetVideoQuality});case"controller_pause_requested":return a.playbackState==="ended"?a:babelHelpers["extends"]({},a,{lastPauseReason:e.payload.reason,lastPausedTimeMs:Date.now(),lastPlayedTimeMs:0,playbackState:"paused",waitingForDomPlaying:!1,watchTimeMs:a.lastPlayedTimeMs>0?a.watchTimeMs+(Date.now()-a.lastPlayedTimeMs):a.watchTimeMs});case"controller_play_requested":return a.playbackState!=="paused"&&a.playbackState!=="ended"?a:babelHelpers["extends"]({},a,{hasPlayEverBeenRequested:!0,lastPlayReason:e.payload.reason,lastPlayedTimeMs:a.lastPlayedTimeMs===0?Date.now():a.lastPlayedTimeMs,loopCurrent:j(a)?e.payload.reason==="loop_initiated"?a.loopCurrent+1:a.loopCurrent:0,playbackState:"stalling",waitingForDomPlaying:!0});case"controller_seek_requested":return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:(f=b.videoElementPlayheadPosition)!=null?f:a.implementationSeekSourcePosition,seekTargetPosition:e.payload.seekTargetPosition,seeking:!0});case"controller_quality_requested":return babelHelpers["extends"]({},a,{selectedVideoQuality:e.payload.selectedVideoQuality});case"controller_set_caption_display_style_requested":return babelHelpers["extends"]({},a,{captionDisplayStyle:e.payload.captionDisplayStyle});case"controller_set_playback_rate":return babelHelpers["extends"]({},a,{targetPlaybackRate:e.payload.playbackRate});case"controller_muted_requested":return babelHelpers["extends"]({},a,{lastMuteReason:e.payload.reason,muted:e.payload.muted});case"controller_volume_requested":return babelHelpers["extends"]({},a,{volume:e.payload.volume});case"controller_scrub_begin_requested":return a.scrubbing?a:babelHelpers["extends"]({},a,{scrubbing:!0,seekTargetPosition:null});case"controller_scrub_end_requested":return!a.scrubbing?a:babelHelpers["extends"]({},a,{implementationSeekSourcePosition:(m=b.videoElementPlayheadPosition)!=null?m:a.implementationSeekSourcePosition,scrubbing:!1,seekTargetPosition:e.payload.seekTargetPosition,seeking:e.payload.seekTargetPosition!=null});case"buffering_begin_requested":g=a.playbackState;h=g;switch(g){case"paused":case"ended":break;case"playing":case"stalling":h="stalling";break;default:g;c("recoverableViolation")("unexpected playbackState: "+g,"comet_video_player");break}l=e.payload.bufferingType;return babelHelpers["extends"]({},a,{bufferingDetected:!0,lastBufferingType:l,playbackState:h});case"buffering_end_requested":f=a.seeking;b=a.waitingForDomPlaying;m=!1;g=a.playbackState;return babelHelpers["extends"]({},a,{bufferingDetected:m,playbackState:i({bufferingDetected:m,prevPlaybackState:g,seeking:f,waitingForDomPlaying:b})});case"controller_set_captions_visible_requested":l=e.payload.captionsVisible;return a.captionsVisible===l?a:babelHelpers["extends"]({},a,{activeCaptions:l?a.activeCaptions:null,captionsVisible:l});case"controller_set_active_captions_requested":h=e.payload.activeCaptions;m=c("orEmptyArray")(h==null?void 0:h.rows);g=a.activeCaptions;var n=c("orEmptyArray")(g==null?void 0:g.rows);return n.length===m.length&&m.every(function(a,b){return n[b]===a})?a:babelHelpers["extends"]({},a,{activeCaptions:h});case"captions_loaded":return babelHelpers["extends"]({},a,{activeCaptions:a.activeCaptions,captionsLoaded:!0});case"captions_unloaded":return babelHelpers["extends"]({},a,{activeCaptions:null,captionsLoaded:!1});case"inband_captions_autogenerated_changed":f=e.payload.inbandCaptionsAutogenerated;return a.inbandCaptionsAutogenerated===f?a:babelHelpers["extends"]({},a,{inbandCaptionsAutogenerated:f});case"stream_ended":return babelHelpers["extends"]({},a,{streamEnded:!0});case"stream_interrupted":return babelHelpers["extends"]({},a,{streamInterrupted:!0});case"stream_resumed":return babelHelpers["extends"]({},a,{streamInterrupted:!1});case"seekable_ranges_changed":b=e.payload.seekableRanges;return babelHelpers["extends"]({},a,{seekableRanges:b});case"controller_set_is_live_rewind_active_requested":l=e.payload.isLiveRewindActive;return babelHelpers["extends"]({},a,{isLiveRewindActive:l});case"loop_count_change_requested":g=e.payload.loopCount;return g===a.loopCount?a:babelHelpers["extends"]({},a,{loopCount:g,loopCurrent:0});case"player_dimensions_changed":m=e.payload.dimensions;h=m.height;f=m.width;return f===a.dimensions.width&&h===a.dimensions.height?a:babelHelpers["extends"]({},a,{dimensions:{height:h,width:f}});case"emsg_box_received":b=e.payload.emsgBox;return babelHelpers["extends"]({},a,{emsgBoxes:[].concat(a.emsgBoxes,[b])});case"register_emsg_observer":l=new Set(a.emsgObserverTokens);l.add(e.payload.token);return babelHelpers["extends"]({},a,{emsgObserverTokens:l});case"unregister_emsg_observer":g=new Set(a.emsgObserverTokens);g["delete"](e.payload.token);return babelHelpers["extends"]({},a,{emsgObserverTokens:g});default:return a}}function m(a,b,d){var e=b.type!=="dom_seeking";e=e?d:a.uncontrolledState;d=!c("shallowEqual")(e,a.uncontrolledState);b=l(a.controlledState,e,b);var f=!c("shallowEqual")(b,a.controlledState);return d||f?babelHelpers["extends"]({},a,{controlledState:f?b:a.controlledState,uncontrolledState:d?e:a.uncontrolledState}):a}var n,o;function p(a){var b=a.collectUncontrolledState,d=a.debugLogId;d=a.initialState;var e=a.onDispatched,f=a.onFatalError,g=d,h=g,i=0,j=!1,k=!1,l=!0,n=!0;return{dispatch:function(a){if(!n)return;var d=null,g=null;try{++i;if(i>=10)if(!j){j=!0;throw c("unrecoverableViolation")("Video player state machine loop detected","comet_video_player")}else return;var o=h.uncontrolledState;if(l)try{o=b()}catch(a){l=!1,g=a}var p=h;o=m(p,a,o);h=o;e(p,o,a)}catch(a){n=!1,d=a}finally{if(!k&&(d!=null||g!=null)){k=!0;try{f((p=d)!=null?p:g)}catch(a){}}--i}},getCurrentState:function(){return h},getInitialState:function(){return g}}}var q,r;function a(a){var b=a.collectUncontrolledState,c=a.debugLogId,d=a.initialState,e=a.onFatalError,f=a.stateTransitionHandlers;function g(a,b,c){try{var d=!0,e=0;while(d&&e<f.length){var g=f[e];d=g(a,b,c);++e}}finally{}}return p({collectUncontrolledState:b,debugLogId:c,initialState:d,onDispatched:g,onFatalError:e})}function b(a,b){function c(){}function d(a){return a}function e(c){return function(e){var f=d(e.currentTarget);b(f,["reactEvent("+e.type+")"]);a.dispatch(c)}}return{onAbort:c,onCanPlay:c,onCanPlayThrough:c,onDurationChange:e({type:"dom_event_durationchange"}),onEmptied:c,onEncrypted:c,onEnded:e({type:"dom_event_ended"}),onError:function(c){var e=d(c.currentTarget);b(e,["reactEvent("+c.type+")"]);a.dispatch({payload:{videoElementError:e.error,videoElementNetworkState:e.networkState,videoElementReadyState:e.readyState},type:"dom_event_error"})},onLoadStart:c,onLoadedData:c,onLoadedMetadata:c,onPause:e({type:"dom_event_pause"}),onPlay:e({type:"dom_event_play"}),onPlaying:e({type:"dom_event_playing"}),onProgress:e({type:"dom_event_progress"}),onRateChange:e({type:"dom_event_ratechange"}),onSeeked:e({type:"dom_event_seeked"}),onSeeking:e({type:"dom_event_seeking"}),onStalled:c,onSuspend:c,onTimeUpdate:e({type:"dom_event_timeupdate"}),onVolumeChange:e({type:"dom_event_volumechange"}),onWaiting:e({type:"dom_event_waiting"})}}g.createVideoPlayerImplementationStateMachine=p;g.createVideoPlayerImplementationStateMachineWithStateTransitionHandlers=a;g.createReactVideoElementCallbacksForStateMachine=b}),98);
__d("VideoPlayerImplementationStateMachineHostCallQueue",["cometUniqueID","emptyFunction","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";b=c("emptyFunction");function h(){return"id-vpdom-"+c("cometUniqueID")()}function i(a){var b=a.engineExtrasAPI,d=a.hostCall,e=a.machine;a=a.videoElementAPI;switch(d.type){case"host_call_play":var f=a.play();f&&(e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID},type:"dom_event_play_promise_created"}),c("promiseDone")(f.then(function(){e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID},type:"dom_event_play_promise_resolved"})},function(a){e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID,playPromiseRejectionReason:a},type:"dom_event_play_promise_rejected"})})));break;case"host_call_pause":a.pause();break;case"host_call_set_playback_rate":a.setPlaybackRate(d.payload.playbackRate);break;case"host_call_set_muted":a.setMuted(d.payload.muted);break;case"host_call_set_volume":a.setVolume(d.payload.volume);break;case"host_call_set_current_time":a.setPlayheadPosition(d.payload.currentTime);break;case"host_call_set_video_quality":b.setUserSelectedVideoQuality(d.payload.selectedVideoQuality);break;case"host_call_set_latency_level":b.setLatencyLevel(d.payload.latencyLevel);break;default:d.type;return!1}return!0}function j(a){var b=a.engineExtrasAPI,c=a.hostCall,d=a.machine;a=a.videoElementAPI;if(!a||!b)d.dispatch(c);else{var e=!1;try{e=i({engineExtrasAPI:b,hostCall:c,machine:d,videoElementAPI:a})}catch(b){d.dispatch({payload:{errorLocation:"apply_host_call_catch",hostCall:c,hostCallError:b,videoElementError:a.getError(),videoElementNetworkState:a.getNetworkState(),videoElementReadyState:a.getReadyState()},type:"implementation_host_call_failed"})}e&&d.dispatch({payload:{hostCall:c},type:"implementation_host_call_applied"})}}function k(a){var b=[];function c(){b=b.filter(function(a){return a.type!=="host_call_play"&&a.type!=="host_call_pause"})}function d(a){b=b.filter(function(b){return b.type!==a})}a.forEach(function(a){switch(a.type){case"host_call_play":c();break;case"host_call_pause":c();break;case"host_call_set_playback_rate":d(a.type);break;case"host_call_set_muted":d(a.type);break;case"host_call_set_volume":d(a.type);break;case"host_call_set_current_time":d(a.type);break;case"host_call_set_video_quality":d(a.type);break;case"host_call_set_latency_level":d(a.type);break;default:a.type}b=b.concat([a])});return b}function a(a){var b=a.engineExtrasAPI,c=a.machine,d=a.reason,e=a.state,f=a.videoElementAPI;a=[{payload:{hostCallID:h(),reason:d,volume:e.controlledState.volume},type:"host_call_set_volume"},{payload:{hostCallID:h(),muted:e.controlledState.muted,reason:d},type:"host_call_set_muted"},{payload:{hostCallID:h(),reason:d,selectedVideoQuality:e.controlledState.selectedVideoQuality},type:"host_call_set_video_quality"}];d=k(e.controlledState.hostCallQueue.concat(a));d.forEach(function(a){j({engineExtrasAPI:b,hostCall:a,machine:c,videoElementAPI:f})});c.dispatch({payload:{hostCallsFlushed:d},type:"implementation_host_call_queue_flushed"})}g.makeHostCallID=h;g.applyOrQueueHostCall=j;g.flushHostCallQueue=a}),98);
__d("VideoMimeTypes",[],(function(a,b,c,d,e,f){function a(a,b,c){return a+'; codecs="'+b+", "+c+'"'}e="mp4a.40.2";function b(a){return"avc1.42E0"+a.toString(16).toUpperCase()}function c(a){return"avc1.4D40"+a.toString(16).toUpperCase()}function d(a){return"avc1.6400"+a.toString(16).toUpperCase()}var g="video/mp4";b=a(g,b(30),e);var h=a(g,c(30),e);c=a(g,c(31),e);var i=a(g,d(50),e);a=a(g,d(51),e);g={h264baseline:b,h264main30avc:h,h264main31avc:c,h264high50avc:i,h264high51avc:a};f["default"]=g}),66);
__d("VideoPlayerConnectionQuality",[],(function(a,b,c,d,e,f){"use strict";var g={POOR:"POOR",MODERATE:"MODERATE",GOOD:"GOOD",EXCELLENT:"EXCELLENT"},h=[{bandwidth:5e5,connectionQuality:g.POOR},{bandwidth:2e6,connectionQuality:g.MODERATE},{bandwidth:1e7,connectionQuality:g.GOOD}],i=100,j=null,k=null;a=function(a){if(j!==null&&k!==null&&j>=Date.now()-i)return k;a=a();var b=null;if(a!=null)for(var c=0;c<h.length;c++)if(a<h[c].bandwidth){b=h[c].connectionQuality;break}b===null&&(b=g.EXCELLENT);j=Date.now();k=b;return b};f.evaluate=a}),66);
__d("VideoPlayerLoggerPlayerStates",[],(function(a,b,c,d,e,f){a="started";b="unpaused";c={STARTED:a,UNPAUSED:b};f["default"]=c}),66);
__d("VideoPlayerMutedStateChange",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.currMuted,c=a.currVolume,d=a.prevMuted;a=a.prevVolume;b=b||c===0;c=d||a===0;if(c===b)return null;return b?"muted":"unmuted"}f.getVideoPlayerMutedStateChange=a}),66);
__d("getVideoBrowserTabId",["guid"],(function(a,b,c,d,e,f,g){var h=c("guid")().slice(-8);function a(){return h}g["default"]=a}),98);
__d("VideoPlayerImplementationStateMachineLogger",["CometProductAttribution","PlaybackSpeedExperiments","SiteData","VideoMimeTypes","VideoPlayerConnectionQuality","VideoPlayerLoggerPlayerStates","VideoPlayerMutedStateChange","VideoPlayerStateBasedLoggingEvents","emptyFunction","getPlayerFormatForLogData","getVideoBrowserTabId","gkx","mapObject","recoverableViolation","removeFromArray"],(function(a,b,c,d,e,f,g){"use strict";var h=6e4,i=.5,j=null,k=function(a){var b;j=(b=j)!=null?b:document.createElement("video");return!("canPlayType"in j)?"":j.canPlayType(a)};b=c("emptyFunction");e=c("emptyFunction");f=c("emptyFunction");b=c("emptyFunction");var l=(e=d("PlaybackSpeedExperiments").enablePlaybackSpeedLogging())!=null?e:!1;function m(){return{canLogPausedOrFinishedPlaying:!1,canLogPlayingEvent:!0,debugSubscribers:[],dontLogPauseOnUnpausedSeeking:!1,hasLoggedStallData:!1,hasLoggedStartedPlaying:!1,hasPausedOnce:!1,hasPendingRequestedPlaying:!1,initialSuborigin:void 0,interruptCount:0,interruptDuration:0,interruptEndTimestamp:0,interruptStartTimestamp:0,isLoggingScrubbingSequence:!1,lastLoggedError:null,lastLoggedFullscreenState:!1,lastLoggedPlaybackSpeed:null,lastLoggedViewabilityPercentage:void 0,lastStartTimePosition:null,lastTrackedRepresentation:null,nextHeartbeatTime:null,nextPlayedThreeSecondsPlayheadPosition:null,sequenceNumber:0,shouldIgnoreDomPause:!1,shouldIgnoreDomPlay:!1,shouldLogRequestedPlayingForScrub:!1,stallCount:0,stallCount200ms:0,stallDuration:0,stallStartTimestamp:0,stallCountTotal:0,stallDurationTotal:0,startStallCountTotal:0,startStallDurationTotal:0,vplEventSequenceNumber:0}}function n(a,b){return b==="muted"||b==="unmuted"||b==="started_playing"||b==="caption_change"||b==="unpaused"?a.controlledState.captionsVisible?"on":"off":void 0}function a(a){var b=new Map(),e=a.initialLoggingMetaData,f=e,g=[],j=m(),o=new Set(c("VideoPlayerStateBasedLoggingEvents").StateBasedLoggingEventNames);function p(a){j.debugSubscribers.push(a);return function(){c("removeFromArray")(j.debugSubscribers,a)}}function q(a){j.debugSubscribers.forEach(function(b){return b(a)})}function r(a){var b=j.stallStartTimestamp;if(b>0){j.stallCount+=1;j.stallCountTotal+=1;j.hasPendingRequestedPlaying&&(j.startStallCountTotal+=1);a=a-b;j.stallDurationTotal+=a;j.stallDuration+=a;j.stallCount200ms+=a>200?1:0;j.hasPendingRequestedPlaying&&(j.startStallDurationTotal+=a)}}function s(a,b){a=a.uncontrolledState.videoElementPlayheadPosition==null?null:a.uncontrolledState.videoElementPlayheadPosition;var c=null;switch(b){case"paused":case"cancelled_requested_playing":case"finished_playing":case"heart_beat":case"playback_speed_changed":case"representation_ended":c=j.lastStartTimePosition;break;case"scrubbed":c=a;break;default:break}switch(b){case"paused":case"cancelled_requested_playing":case"finished_playing":case"scrubbed":j.lastStartTimePosition=null;break;case"started_playing":case"unpaused":case"heart_beat":case"playback_speed_changed":case"representation_ended":j.lastStartTimePosition=a;break;default:break}return{video_last_start_time_position:c}}function t(a,b){var c=b.uncontrolledState.clockTimestamp;a=a.controlledState.streamInterrupted;b=b.controlledState.streamInterrupted;!a&&b?j.interruptStartTimestamp=c:a&&!b&&j.interruptStartTimestamp>0&&(j.interruptEndTimestamp=c,j.interruptCount+=1,j.interruptDuration+=j.interruptEndTimestamp-j.interruptStartTimestamp)}function u(a,b){var c=b.uncontrolledState.clockTimestamp;a=a.controlledState.playbackState;var d=b.controlledState.playbackState;a!=="stalling"&&d==="stalling"&&(q("stall_start"),j.stallStartTimestamp=c);a==="stalling"&&d!=="stalling"&&(r(b.uncontrolledState.clockTimestamp),j.stallStartTimestamp=0,q("stall_end"))}function v(a,b,c){a=b.uncontrolledState;b=a.videoElementPlayheadPosition;switch(c){case"unpaused":case"started_playing":j.nextPlayedThreeSecondsPlayheadPosition=((a=b)!=null?a:0)+3;break;case"paused":case"finished_playing":j.nextPlayedThreeSecondsPlayheadPosition=null;break;default:break}}function w(a,b,c){if(j.interruptCount>0&&j.interruptDuration>0){a={interrupt_count:j.interruptCount,interrupt_time:j.interruptDuration};j.interruptCount=0;j.interruptDuration=0;j.interruptStartTimestamp=0;j.interruptEndTimestamp=0;return a}return{interrupt_count:null,interrupt_time:null}}function x(a,b,c){var d={stall_count:null,stall_count_200_ms:null,stall_time:null},e=b.uncontrolledState.clockTimestamp,f=function(){var a={stall_count:j.stallCount,stall_count_200_ms:j.stallCount200ms,stall_time:j.stallDuration};j.stallCount=0;j.stallCount200ms=0;j.stallDuration=0;j.stallStartTimestamp=0;return a};a=a.controlledState.playbackState;var g=b.controlledState.playbackState;a!=="stalling"&&g==="stalling"&&(j.stallStartTimestamp=e);switch(c){case"started_playing":case"unpaused":case"finished_playing":case"paused":case"cancelled_requested_playing":case"playback_speed_changed":case"representation_ended":r(b.uncontrolledState.clockTimestamp);d=f();break;case"heart_beat":b.controlledState.playbackState!=="stalling"&&(r(b.uncontrolledState.clockTimestamp),d=f());break;default:break}return d}function y(a,b){a=a.current;var c=null;switch(b){case"finished_playing":case"paused":case"heart_beat":a&&(c=a.getAndFlushTracedFrames());return c!=null?JSON.stringify(c):null;default:return null}}function z(a){a=a.controlledState.playbackState;switch(a){case"playing":case"stalling":return"playing";case"paused":return"paused";case"ended":return"finished";default:a;return"unknown"}}function A(){return{state:j.hasLoggedStartedPlaying?c("VideoPlayerLoggerPlayerStates").UNPAUSED:c("VideoPlayerLoggerPlayerStates").STARTED}}function B(a){return(a=a==null?void 0:(a=a.v2)==null?void 0:a.map(function(a){return[a["class"],a.module].map(d("CometProductAttribution").filterEntryValue).join(":")}).join(";"))!=null?a:""}function C(f){var h=f.eventType,i=f.logDataOverrides,k=f.prevState,m=f.state;f=s(m,h);f=f.video_last_start_time_position;var p=x(k,m,h),q=p.stall_count,r=p.stall_count_200_ms;p=p.stall_time;var t=w(k,m,h),u=t.interrupt_count;t=t.interrupt_time;var A=y(a.initialLoggingMetaData.videoLiveTraceRef,h),C=[],D=a.initialLoggingMetaData.coreVideoPlayerMetaData.autoplayGatingResult;D&&C.push(D);D=h==="entered_fs"?!0:h==="exited_fs"?!1:j.lastLoggedFullscreenState;var E=c("getPlayerFormatForLogData")(D,e.coreVideoPlayerMetaData.playerFormat),F=m.uncontrolledState.viewabilityPercentage,G=Boolean(m.uncontrolledState.isFBIsLiveTemplated),H=Boolean(m.uncontrolledState.isFBWasLive),I=m.uncontrolledState.videoElementPlaybackRate;I=I==null||I===0?j.lastLoggedPlaybackSpeed:I;var J=a.initialLoggingMetaData.productAttribution,K=null,L=null;c("gkx")("3013")&&(K=J!=null?d("CometProductAttribution").minifyProductAttributionV2(J):null,L=J!=null?B(J):null);L={access_token:a.initialLoggingMetaData.accessToken,ad_client_token:e.coreVideoPlayerMetaData.adClientToken,attribution_id:J!=null&&Object.prototype.hasOwnProperty.call(J,"0")?JSON.stringify({0:J["0"]}):null,attribution_id_v2:K,attribution_id_v2_root:L,audio_only:e.coreVideoPlayerMetaData.audioOnly,audio_representation_id:m.uncontrolledState.audioRepresentationID,autoplay_eligible:a.initialLoggingMetaData.coreVideoPlayerMetaData.canAutoplay==="allow",autoplay_failure_reasons:JSON.stringify(C),autoplay_setting:a.initialLoggingMetaData.coreVideoPlayerMetaData.autoplaySetting,available_qualities:m.controlledState.availableQualities.length,broadcaster_origin:a.initialLoggingMetaData.coreVideoPlayerMetaData.broadcasterOrigin,browser_tab_id:c("getVideoBrowserTabId")(),caption_state:n(m,h),current_playback_speed:l?I:null,current_viewability_percentage:F,dash_perf_logging_enabled:e.coreVideoPlayerMetaData.VideoPlayerShakaPerformanceLoggerClass!=null&&e.coreVideoPlayerMetaData.VideoPlayerShakaPerformanceLoggerClass.isEnabled(),data_connection_quality:d("VideoPlayerConnectionQuality").evaluate(function(){return m.uncontrolledState.estimatedBandwidth}),dropped_frame_count:m.uncontrolledState.videoElementDroppedFrameCount,external_log_id:e.coreVideoPlayerMetaData.externalLogID,external_log_type:e.coreVideoPlayerMetaData.externalLogType,frame_events:A,interrupt_count:u,interrupt_time:t,is_abr_enabled:m.isAbrEnabled,is_fbms:m.uncontrolledState.isFBMS,is_predictive_playback:m.uncontrolledState.isPredictiveDash,is_sound_on:!m.controlledState.muted,is_live_video_rewound:m.controlledState.isLiveRewindActive,is_templated_manifest:G||H,last_viewability_percentage:j.lastLoggedViewabilityPercentage,playback_is_drm:Boolean(a.initialLoggingMetaData.coreVideoPlayerMetaData.graphQLVideoDRMInfo),playback_duration:m.uncontrolledState.videoElementDuration,playback_is_broadcast:a.initialLoggingMetaData.coreVideoPlayerMetaData.isVideoBroadcast,playback_is_live_streaming:a.initialLoggingMetaData.coreVideoPlayerMetaData.isLiveStreaming,player_format:E,player_instance_key:e.instanceKey,player_origin:e.coreVideoPlayerMetaData.playerOriginOverride,player_state:z(m),player_suborigin:e.coreVideoPlayerMetaData.subOrigin,player_version:m.playerVersion,representation_id:m.uncontrolledState.videoRepresentationID,source_VPL_LOGGING_HACK:e.coreVideoPlayerMetaData.source_VPL_LOGGING_HACK,stall_count:q,stall_count_200_ms:r,stall_time:p,streaming_format:m.controlledState.streamingFormat,total_frame_count:m.uncontrolledState.videoElementTotalFrameCount,tracking_data_encrypted:a.initialLoggingMetaData.trackingDataEncrypted,tracking_nodes:a.initialLoggingMetaData.trackingNodes,v2_heart_beat:c("gkx")("1434599")&&h==="heart_beat"?!0:null,video_bandwidth:m.uncontrolledState.estimatedBandwidth,video_buffer_end_position:m.uncontrolledState.videoElementLastBufferEndPosition,video_id:e.coreVideoPlayerMetaData.videoFBID,video_last_start_time_position:f,video_play_reason:m.controlledState.lastPlayReason,video_player_height:(J=e.dimensions)==null?void 0:J.height,video_player_width:(K=e.dimensions)==null?void 0:K.width,video_time_position:m.uncontrolledState.videoElementPlayheadPosition,web_client_revision:c("SiteData").client_revision};C={event_seq_num:++j.vplEventSequenceNumber,seq_num:o.has(h)?++j.sequenceNumber:null,time_ms:Date.now()};var M={};b.forEach(function(a,b){M[b]=a});A=e.coreVideoPlayerMetaData.additionalLogData;u=babelHelpers["extends"]({},A,M);t=babelHelpers["extends"]({},u,L,i,C);H=(G=j.initialSuborigin)!=null?G:e.coreVideoPlayerMetaData.subOrigin;q=(E=t.source_VPL_LOGGING_HACK)!=null?E:H;p=(r=e.coreVideoPlayerMetaData.initialTracePolicy)!=null?r:e.coreVideoPlayerMetaData.routeTracePolicy;f={eventType:h,logData:t,routeTracePolicy:p,source_VPL_LOGGING_HACK:q};g.push(f);v(k,m,h);j.initialSuborigin==null&&H!=null&&(j.initialSuborigin=H);j.lastLoggedFullscreenState=D;j.lastLoggedPlaybackSpeed=I;h==="viewability_changed"&&(j.lastLoggedViewabilityPercentage=F)}var D={};function E(a,b,c){C({eventType:"requested_playing",logDataOverrides:babelHelpers["extends"]({},c,A()),prevState:a,state:b});j.hasPendingRequestedPlaying=!0;j.canLogPausedOrFinishedPlaying=!0;return D}function F(a,b,c){if(!j.canLogPausedOrFinishedPlaying)return D;else if(j.hasPendingRequestedPlaying){G(a,b,c);j.canLogPausedOrFinishedPlaying=!1;j.hasPendingRequestedPlaying=!1;return D}else{C({eventType:"paused",logDataOverrides:c,prevState:a,state:b});j.canLogPausedOrFinishedPlaying=!1;j.hasPendingRequestedPlaying=!1;return D}}function G(a,b,c){C({eventType:"cancelled_requested_playing",logDataOverrides:babelHelpers["extends"]({},c,A()),prevState:a,state:b});return D}function H(a,b,c){if(c.type==="dom_event_play_promise_rejected"&&j.hasPendingRequestedPlaying){c=c.payload.playPromiseRejectionReason;if(c!=null&&c.name==="NotAllowedError"){G(a,b,{debug_reason:"not_allowed"});return D}else return D}else return D}function I(a,b,c){if((c.type==="controller_play_requested"||c.type==="dom_event_play"&&!j.shouldIgnoreDomPlay)&&a.controlledState.playbackState!==b.controlledState.playbackState){c=b.uncontrolledState.liveTraceContext;c=c?{live_trace_source_id:c.sourceId,live_trace_stream_id:c.streamId,live_trace_stream_type:c.streamType}:null;E(a,b,c);return D}else return D}function J(a,b,c){if(a.controlledState.playbackState==="stalling"&&b.controlledState.playbackState==="playing"&&j.canLogPlayingEvent){C({eventType:j.hasLoggedStartedPlaying?"unpaused":"started_playing",prevState:a,state:b});j.hasLoggedStartedPlaying=!0;j.canLogPlayingEvent=!1;j.hasPendingRequestedPlaying=!1;return D}else return D}function K(a,b,d){var e=b.controlledState.playbackState,f=a.controlledState.playbackState;if(d.type==="controller_scrub_begin_requested"&&!a.controlledState.scrubbing&&e!=="paused"&&e!=="ended"){F(a,b);j.isLoggingScrubbingSequence=!0;return D}else if(!a.controlledState.seeking&&b.controlledState.seeking&&!j.isLoggingScrubbingSequence&&e!=="paused"&&e!=="ended"&&!j.hasPendingRequestedPlaying){F(a,b);j.shouldLogRequestedPlayingForScrub=!0;return D}else if(d.type==="controller_scrub_end_requested"&&a.controlledState.scrubbing&&e!=="paused"&&e!=="ended"){E(a,b,{video_time_position:d.payload.seekTargetPosition});return D}else if(a.controlledState.seeking&&!b.controlledState.seeking){d=b.uncontrolledState.videoElementPlayheadPosition;var g=a.controlledState.implementationSeekSourcePosition;(!c("gkx")("1482680")||g!=null&&d!=null&&Math.abs(g-d)>i)&&(j.shouldLogRequestedPlayingForScrub&&e!=="paused"&&e!=="ended"&&E(a,b),C({eventType:"scrubbed",prevState:a,state:b}),j.isLoggingScrubbingSequence=!1,j.shouldLogRequestedPlayingForScrub=!1,f!=="paused"&&f!=="ended"&&(j.canLogPlayingEvent=!0));return D}else return D}function L(a,b,c){if(a.controlledState.playbackState!==b.controlledState.playbackState&&b.controlledState.playbackState==="ended"&&j.canLogPausedOrFinishedPlaying){C({eventType:"finished_playing",prevState:a,state:b});j.canLogPausedOrFinishedPlaying=!1;return D}else return D}function M(a,b,c){if((c.type==="controller_pause_requested"||c.type==="dom_event_pause"&&!j.shouldIgnoreDomPause)&&a.controlledState.playbackState!==b.controlledState.playbackState){F(a,b);return D}else return D}function N(a,b,d){var e=b.controlledState.playbackState;if(e!=="paused"&&e!=="ended"){c("gkx")("1469813")&&d.type==="implementation_video_node_unmounted"?F(a,a,{debug_reason:"unloaded"}):(d.type==="implementation_unmounted"||d.type==="implementation_engine_destroy_requested")&&F(a,b,{debug_reason:"unloaded"});return D}else return D}function O(a,b,e){e=b.controlledState.muted;var f=b.controlledState.volume,g=a.controlledState.muted,h=a.controlledState.volume;e=d("VideoPlayerMutedStateChange").getVideoPlayerMutedStateChange({currMuted:e,currVolume:f,prevMuted:g,prevVolume:h});g={current_volume:Math.round(f*100)};switch(e){case"muted":C({eventType:"muted",logDataOverrides:g,prevState:a,state:b});return D;case"unmuted":C({eventType:"unmuted",logDataOverrides:g,prevState:a,state:b});return D;case null:if(h<f){C({eventType:"volume_increase",logDataOverrides:g,prevState:a,state:b});return D}else if(h>f){C({eventType:"volume_decrease",logDataOverrides:g,prevState:a,state:b});return D}else return D;default:e;c("recoverableViolation")('Unexpected mutedStateChange "'+e+'"',"comet_video_player");return D}}function P(a,b,c){c=b.uncontrolledState.videoRepresentationID;var d=j.lastTrackedRepresentation,e=b.controlledState.playbackState,f=b.controlledState.seeking;if(!f&&e!=="paused"&&e!=="ended"&&d!=null&&d!==c){C({eventType:"representation_ended",logDataOverrides:{next_representation_id:c,representation_id:d},prevState:a,state:b});j.lastTrackedRepresentation=c;q("quality_change");return D}else if(d==null&&d!==c){j.lastTrackedRepresentation=c;return D}else return D}function Q(a,b){var d=a.controlledState.error;return{currentVideo:{audioStreamId:a.uncontrolledState.audioRepresentationID,dashAudioFormat:void 0,hasHD:void 0,hasRateLimit:void 0,hasSubtitles:a.controlledState.captionsLoaded,isDrm:Boolean(e.coreVideoPlayerMetaData.graphQLVideoDRMInfo),isHD:void 0,isLiveStream:e.coreVideoPlayerMetaData.isLiveStreaming,isRateLimited:void 0,liveManifestUrl:void 0,projection:void 0,resourceUrl:void 0,streamId:a.uncontrolledState.videoRepresentationID,streamType:a.controlledState.streamingFormat,tagHD:void 0,tagSD:void 0,videoID:e.coreVideoPlayerMetaData.videoFBID},player:{canPlayType:c("mapObject")(c("VideoMimeTypes"),k),dimensions:e.dimensions?{height:e.dimensions.height,width:e.dimensions.width}:null,droppedFrames:a.uncontrolledState.videoElementDroppedFrameCount,inPlayStallCount:void 0,inPlayStallTime:void 0,initializationTime:void 0,initializationTimestamp:void 0,interruptCount:void 0,interruptTime:void 0,lastError:d,loggedError:j.lastLoggedError,stack:d==null?void 0:d.stack,stallCount:j.stallCount,stallTime:j.stallDuration,state:z(a),totalFrames:a.uncontrolledState.videoElementTotalFrameCount,version:a.playerVersion,videoSource:void 0,viewabilityPercentage:a.uncontrolledState.viewabilityPercentage},playerStateMachine:{action:b,state:a}}}function R(a,b,d){var e=b.controlledState.error;if(e!=null&&e!==j.lastLoggedError&&e.errorCode!=="410"){var f=e.errorDescription,g=e.errorName,h=e.errorType,i=e.url,k=e.errorCode==null||e.errorCode===""?g:e.errorCode;d=Q(b,d);C({eventType:"error",logDataOverrides:babelHelpers["extends"]({},c("gkx")("1565232")?A():null,{error:g,error_code:k,error_description:f,error_domain:g,error_type:h,error_user_info:JSON.stringify(d),resource_url:i}),prevState:a,state:b});j.lastLoggedError=e}return D}function S(a,b,c){if(!l)return D;var d=b.uncontrolledState.videoElementPlaybackRate;c.type==="dom_event_ratechange"&&j.lastLoggedPlaybackSpeed!=null&&d!==0&&d!==j.lastLoggedPlaybackSpeed&&C({eventType:"playback_speed_changed",prevState:a,state:b});return D}function T(a,b,c){c=b.controlledState.playbackState;c==="paused"||c==="ended"?j.nextHeartbeatTime=null:c!=="stalling"&&j.nextHeartbeatTime==null&&(j.nextHeartbeatTime=Date.now()+h);var d=j.nextHeartbeatTime;if(d!=null){var e=Date.now();e>=d&&(c!=="stalling"&&C({eventType:"heart_beat",prevState:a,state:b}),j.nextHeartbeatTime=e+h)}return D}function U(a,b,c){if(c.type==="implementation_mounted"){C({eventType:"player_loaded",prevState:a,state:b});return D}else return D}function V(a,b,c){C({eventType:c?"entered_fs":"exited_fs",prevState:a,state:b})}function W(a,b,c){c=e.coreVideoPlayerMetaData.playerFormat;f.coreVideoPlayerMetaData.playerFormat!==c&&C({eventType:"player_format_changed",prevState:a,state:b});return D}function X(a,b,c){if(c.type==="dom_event_timeupdate"){c=j.nextPlayedThreeSecondsPlayheadPosition;if(c!=null){var d=b.uncontrolledState;d=d.videoElementPlayheadPosition;d!=null&&c<=d&&(C({eventType:"played_for_three_seconds",prevState:a,state:b}),j.nextPlayedThreeSecondsPlayheadPosition=null)}}return D}function Y(a,b,c){if(c.type!=="notify_fullscreen_changed")return D;c=j.lastLoggedFullscreenState;var d=b.uncontrolledState.isFullscreen;if(c!==!0&&d===!0){V(a,b,d);return D}else if(c===!0&&d===!1){V(a,b,d);return D}else return D}function Z(a,b,d){d=e.coreVideoPlayerMetaData.adClientToken;if((d==null||d==="")&&c("gkx")("1401747"))return D;d=b.controlledState.playbackState;var f=j.lastLoggedViewabilityPercentage,g=b.uncontrolledState.viewabilityPercentage;if(d!=="paused"&&d!=="ended"&&f!=null&&f!==g){C({eventType:"viewability_changed",prevState:a,state:b});return D}else return D}function $(a,b,c){if(c.type==="controller_set_captions_visible_requested"){C({eventType:"caption_change",prevState:a,state:b});return D}else return D}function aa(a){f=e;if(a.type==="notify_logging_metadata_change"){a=a.payload.loggingMetaData;e=a}}return{addDebugSubscriber:function(a){return p(a)},consumeLoggerEvents:function(){var a=g.splice(0);return a},getLoggerState:function(){return j},handleStateMachine:function(a,b,c){aa(c);var d=b.controlledState.playbackState;u(a,b);t(a,b);var e=[W,Y,Z,H,I,K,J,L,M,O,N,U,$,P,R,T,S,X];e.forEach(function(d){d(a,b,c)});(d==="paused"||d==="ended")&&(j.canLogPlayingEvent=!0);c.type==="controller_pause_requested"&&(j.hasPausedOnce=!0,j.shouldIgnoreDomPause=!0);c.type==="controller_play_requested"&&(j.hasPausedOnce=!0,j.shouldIgnoreDomPlay=!0);c.type==="dom_event_pause"&&(j.shouldIgnoreDomPause=!1);c.type==="dom_event_play"&&(j.shouldIgnoreDomPlay=!1,j.lastLoggedViewabilityPercentage=b.uncontrolledState.viewabilityPercentage)},logVPLEvent:function(a){var b=a.eventType,c=a.logDataOverrides;a=a.state;C({eventType:b,logDataOverrides:c,prevState:a,state:a})},setAdditionalLogData:function(a,c){b.set(a,c)}}}g.HEARTBEAT_INTERVAL=h;g.createVideoPlayerImplementationStateMachineLogger=a}),98);
__d("convertToViewabilityPercentage",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a>=.99)return 100;else if(a>=.75)return 75;else if(a>=.5)return 50;else if(a>=.25)return 25;else if(a>=0)return 0;else return-2}f["default"]=a}),66);
__d("VideoPlayerImplementationStateMachineStateUncontrolledState",["convertToViewabilityPercentage","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.engineExtrasAPI,d=a.fullscreenControllerRef,e=a.videoElementAPI,f=a.videoLiveTraceRef;a=a.videoPlayerPassiveViewabilityInfoRef;f=f.current;if(e==null){var g={audioRepresentationID:void 0,clockTimestamp:Date.now(),currentPlayingVideoQuality:void 0,estimatedBandwidth:void 0,isFBIsLiveTemplated:void 0,isFBMS:void 0,isFBWasLive:void 0,isFullscreen:d.current?d.current.getIsFullscreen():void 0,isPredictiveDash:void 0,liveTraceContext:f?f.getLiveTraceContext():void 0,videoElementDebugCurrentSrc:void 0,videoElementDebugSrc:void 0,videoElementDroppedFrameCount:void 0,videoElementDuration:void 0,videoElementEnded:void 0,videoElementError:void 0,videoElementLastBufferEndPosition:void 0,videoElementMuted:void 0,videoElementNetworkState:void 0,videoElementPaused:void 0,videoElementPlaybackRate:void 0,videoElementPlayheadPosition:void 0,videoElementReadyState:void 0,videoElementTotalFrameCount:void 0,videoElementVolume:void 0,videoRepresentationID:void 0,viewabilityPercentage:void 0};return g}g=e.getPlayheadPosition();a=a&&a.current;a=a&&a.getCurrent();d={audioRepresentationID:b?b.getAudioRepresentationIDAtTime(g):void 0,clockTimestamp:Date.now(),currentPlayingVideoQuality:b?b.getCurrentPlayingVideoQuality():void 0,estimatedBandwidth:b?b.getEstimatedBandwidth():void 0,isFBIsLiveTemplated:b?b.isFBIsLiveTemplated():void 0,isFBMS:b?b.isFBMS():void 0,isFBWasLive:b?b.isFBWasLive():void 0,isFullscreen:d.current?d.current.getIsFullscreen():void 0,isPredictiveDash:b?b.isPredictiveDash():void 0,liveTraceContext:f?f.getLiveTraceContext():void 0,videoElementDebugCurrentSrc:c("gkx")("1526990")?(d=e.getUnderlyingVideoElement())==null?void 0:d.currentSrc:void 0,videoElementDebugSrc:c("gkx")("1526990")?(f=e.getUnderlyingVideoElement())==null?void 0:f.src:void 0,videoElementDroppedFrameCount:e.getDroppedFrameCount(),videoElementDuration:e.getDuration(),videoElementEnded:e.getEnded(),videoElementError:e.getError(),videoElementLastBufferEndPosition:e.getLastBufferEndPosition(),videoElementMuted:e.getMuted(),videoElementNetworkState:e.getNetworkState(),videoElementPaused:e.getPaused(),videoElementPlaybackRate:e.getPlaybackRate(),videoElementPlayheadPosition:g,videoElementReadyState:e.getReadyState(),videoElementTotalFrameCount:e.getTotalFrameCount(),videoElementVolume:e.getVolume(),videoRepresentationID:b?b.getVideoRepresentationIDAtTime(g):void 0,viewabilityPercentage:a?c("convertToViewabilityPercentage")(a.visiblePercentage):void 0};return d}g.createVideoPlayerImplementationStateMachineStateUncontrolledState=a}),98);
__d("VideoPlayerImplementationStateMachineState",["VideoPlayerImplementationStateMachineStateUncontrolledState"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.alwaysShowCaptions,c=a.areCaptionsAutogenerated,e=a.captionDisplayStyle,f=a.dimensions,g=a.isAbrEnabled,h=a.playerImplementationName,i=a.playerVersion;a=a.streamingFormat;var j=!0,k=1,l=d("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState({engineExtrasAPI:null,fullscreenControllerRef:{current:null},videoElementAPI:null,videoLiveTraceRef:{current:null},videoPlayerPassiveViewabilityInfoRef:{current:null}});return{controlledState:{activeCaptions:null,activeEmsgBoxes:[],availableQualities:[],bufferingDetected:!1,captionDisplayStyle:e,captionsLoaded:!1,captionsVisible:b,dimensions:f,emsgBoxes:[],emsgObserverTokens:new Set(),error:null,hasPlayEverBeenRequested:!1,hostCallPlayIDLast:null,hostCallQueue:[],implementationSeekSourcePosition:null,inbandCaptionsAutogenerated:c,isLiveRewindActive:!1,lastBufferingType:null,lastMuteReason:null,lastPauseReason:null,lastPausedTimeMs:0,lastPlayReason:null,lastPlayedTimeMs:0,latencyLevel:"normal",loopCount:0,loopCurrent:0,muted:j,playbackState:"paused",scrubbing:!1,seekTargetPosition:null,seekableRanges:null,seeking:!1,selectedVideoQuality:"notselected",streamEnded:!1,streamInterrupted:!1,streamingFormat:a,targetAudioQuality:"",targetPlaybackRate:1,targetVideoQuality:"",videoProjection:null,volume:k,waitingForDomPlaying:!1,waitingForDomTimeUpdateAfterSeeked:!1,watchTimeMs:0},isAbrEnabled:g,playerImplementationName:h,playerVersion:i,uncontrolledState:l}}g.createVideoPlayerImplementationStateMachineInitialState=a}),98);
__d("VideoPlayerODS",["ODS","Random"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c){d("Random").coinflip(c)&&d("ODS").bumpEntityKey(2079,a,b,c)};g.bumpEntityKey=a}),98);
__d("VideoPlayerImplementationEngineAPI",["ErrorMetadata","FBLogger","NetworkStatus","PlaybackSpeedExperiments","RunComet","SubscriptionsHandler","VideoPlayerBanzaiLogFlusher","VideoPlayerCaptionsController","VideoPlayerImplementationErrors","VideoPlayerImplementationStateMachine","VideoPlayerImplementationStateMachineHostCallQueue","VideoPlayerImplementationStateMachineLogger","VideoPlayerImplementationStateMachineState","VideoPlayerImplementationStateMachineStateUncontrolledState","VideoPlayerODS","clearTimeout","cr:683059","deepEquals","err","gkx","killswitch","orEmptyArray","qex","react","recoverableViolation","removeFromArray","setTimeout","unrecoverableViolation","useConcurrentAutoplayManagementAPI","useStable"],(function(a,b,c,d,e,f,g){"use strict";f=d("react");var h=f.useEffect,i=f.useRef,j=f.useState,k=(f=c("qex")._("233"))!=null?f:6e4,l=function(){function a(a){var b=a.pauseRequestCallbacks,c=a.playRequestCallbacks,d=a.scrubBeginRequestCallbacks;a=a.scrubEndRequestCallbacks;this.$1=c;this.$2=b;this.$3=d;this.$4=a}var b=a.prototype;b.playRequest=function(a){var b=this;this.$1.push(a);return function(){c("removeFromArray")(b.$1,a)}};b.pauseRequest=function(a){var b=this;this.$2.push(a);return function(){c("removeFromArray")(b.$2,a)}};b.scrubBeginRequest=function(a){var b=this;this.$3.push(a);return function(){c("removeFromArray")(b.$3,a)}};b.scrubEndRequest=function(a){var b=this;this.$4.push(a);return function(){c("removeFromArray")(b.$4,a)}};return a}();function m(a){var b=a.concurrentAutoplayManagementAPI,d=a.debugAPI,e=a.fullscreenControllerRef,f=a.getCurrentExposedState,g=a.getCurrentIsFullscreen,h=a.getCurrentLiveRewindPlayheadPosition,i=a.getCurrentPlayheadPosition,j=a.loggerAPI,k=a.pauseImpl,m=a.playImpl,n=a.registerEmsgObserverImpl,o=a.scrubBeginImpl,p=a.scrubEndImpl,q=a.seekImpl,r=a.selectVideoQualityImpl,s=a.setCaptionsDisplayStyleImpl,t=a.setCaptionsVisibleImpl,u=a.setIsLiveRewindActiveImpl,v=a.setLatencyLevelImpl,w=a.setMutedImpl,x=a.setPlaybackRateImpl,y=a.setVolumeImpl,z=a.subscribers,A=a.unregisterEmsgObserverImpl,B=a.videoElementAPIRef,C=new Set(),D=!1,E=null,F=[],G=[],H=[],I=[],J=new l({pauseRequestCallbacks:G,playRequestCallbacks:F,scrubBeginRequestCallbacks:H,scrubEndRequestCallbacks:I}),K={freeze:function(){if(!f().paused)throw c("unrecoverableViolation")("Video player must be paused before the controller freeze","comet_video_player");var a={};try{var b=!1;C.size===0&&(b=!0,E={exposedState:f(),isFullscreen:g(),liveRewindPlayheadPosition:h(),playheadPosition:i()});C.add(a);b&&(D=!0,z.forEach(function(a){a()}))}finally{D=!1}return a},isFrozen:function(){return E!=null},unfreeze:function(a){if(!C.has(a))throw c("unrecoverableViolation")("Video player controller unfreeze token not found","comet_video_player");C["delete"](a);C.size===0&&(E=null,z.forEach(function(a){a()}))}},L=babelHelpers["extends"]({},b,K,j,{debugAPI:d,getCurrentState:function(){return E!=null?E.exposedState:f()},getIsFullscreen:function(){return E!=null?E.isFullscreen:g()},getLiveRewindPlayheadPosition:function(){return E!=null?E.liveRewindPlayheadPosition:h()},getPlayheadPosition:function(){return E!=null?E.playheadPosition:i()},internal_getVideoElement:function(){var a=B.current;if(a!=null){a=a.getUnderlyingVideoElement();return a}return null},observeOn:function(){return J},pause:function(a){if(K.isFrozen())return;G.forEach(function(b){return b(a)});k(a)},play:function(a){if(K.isFrozen())return;F.forEach(function(b){return b(a)});m(a)},registerEmsgObserver:function(){var a={};n(a);return a},requestSetIsFullscreen:function(a){if(K.isFrozen())return;var b=e.current;b&&b.requestSetIsFullscreen(a)},scrollIntoView:function(a){var b=L.internal_getVideoElement();b&&b.scrollIntoView(a)},scrubBegin:function(){if(K.isFrozen())return;H.forEach(function(a){return a()});o()},scrubEnd:function(a){if(K.isFrozen())return;I.forEach(function(b){return b(a)});p(a)},seek:function(a){if(K.isFrozen())return;q(a)},selectVideoQuality:function(a){if(K.isFrozen())return;r(a)},setCaptionsDisplayStyle:function(a){if(K.isFrozen())return;s(a)},setCaptionsVisible:function(a){if(K.isFrozen())return;t(a)},setIsLiveRewindActive:function(a){if(K.isFrozen())return;u(a)},setLatencyLevel:function(a){if(K.isFrozen())return;v(a)},setMuted:function(a,b){if(K.isFrozen())return;w(a,b)},setPlaybackRate:function(a){if(K.isFrozen())return;x(a)},setVolume:function(a){if(K.isFrozen())return;y(a)},subscribe:function(a){var b=function(){if(K.isFrozen()&&!D)return;a()},d=e.current,f=d?d.subscribe(b):null;z.push(b);return{remove:function(){f&&f.remove(),c("removeFromArray")(z,b)}}},unregisterEmsgObserver:function(a){A(a)},videoElementAPIRef:B});return L}function n(a){var b=a.concurrentAutoplayManagementAPI,d=a.createExposedState,e=a.debugAPI,f=a.fullscreenControllerRef,g=a.logger,h=a.machine,i=a.subscribers,j=a.videoElementAPIRef;a={setAdditionalLogData:function(a,b){g.setAdditionalLogData(a,b)}};return m({concurrentAutoplayManagementAPI:b,debugAPI:e,fullscreenControllerRef:f,getCurrentExposedState:function(){return d(h.getCurrentState())},getCurrentIsFullscreen:function(){var a=f.current;return a?a.getIsFullscreen():!1},getCurrentLiveRewindPlayheadPosition:function(){var a=h.getCurrentState();a=a.controlledState;var b=a.isLiveRewindActive,c=a.seekableRanges;a=a.seekTargetPosition;if(!b||a==null)return null;c=(b=c==null?void 0:c.end(0))!=null?b:0;return a-c},getCurrentPlayheadPosition:function(){var a,b=0;return(a=(a=c("gkx")("3464")?(a=j.current)==null?void 0:a.getPlayheadPosition():void 0)!=null?a:h.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?a:b},loggerAPI:a,pauseImpl:function(a){h.dispatch({payload:{reason:a},type:"controller_pause_requested"})},playImpl:function(a){h.dispatch({payload:{reason:a},type:"controller_play_requested"})},registerEmsgObserverImpl:function(a){h.dispatch({payload:{token:a},type:"register_emsg_observer"})},scrubBeginImpl:function(){h.dispatch({type:"controller_scrub_begin_requested"})},scrubEndImpl:function(a){h.dispatch({payload:{seekTargetPosition:a},type:"controller_scrub_end_requested"})},seekImpl:function(a){h.dispatch({payload:{seekTargetPosition:a},type:"controller_seek_requested"})},selectVideoQualityImpl:function(a){h.dispatch({payload:{selectedVideoQuality:a},type:"controller_quality_requested"})},setCaptionsDisplayStyleImpl:function(a){h.dispatch({payload:{captionDisplayStyle:a},type:"controller_set_caption_display_style_requested"})},setCaptionsVisibleImpl:function(a){h.dispatch({payload:{captionsVisible:a},type:"controller_set_captions_visible_requested"})},setIsLiveRewindActiveImpl:function(a){h.dispatch({payload:{isLiveRewindActive:a},type:"controller_set_is_live_rewind_active_requested"})},setLatencyLevelImpl:function(a){h.dispatch({payload:{latencyLevel:a},type:"controller_set_latency_level_requested"})},setMutedImpl:function(a,b){h.dispatch({payload:{muted:a,reason:b},type:"controller_muted_requested"})},setPlaybackRateImpl:function(a){h.dispatch({payload:{playbackRate:a},type:"controller_set_playback_rate"})},setVolumeImpl:function(a){h.dispatch({payload:{volume:a},type:"controller_volume_requested"})},subscribers:i,unregisterEmsgObserverImpl:function(a){h.dispatch({payload:{token:a},type:"unregister_emsg_observer"})},videoElementAPIRef:j})}function o(a){a=a.current;if(a==null)throw c("unrecoverableViolation")("Attempted to access VideoElementAPI while it is not available.","comet_video_player");return a}function p(a){var e=a.alwaysShowCaptions,f=a.areCaptionsAutogenerated,g=a.captionDisplayStyle,h=a.captionsControllerRef,i=a.debugLogId,j=a.dimensions,l=a.engineExtrasAPI,m=a.engineMetadata,n=a.fullscreenControllerRef,p=a.handleFatalError,r=a.handleStateMachine,s=a.videoElementAPIRef,t=a.videoLiveTraceRef,u=a.videoPlayerPassiveViewabilityInfoRef;function v(a){d("VideoPlayerImplementationStateMachineHostCallQueue").applyOrQueueHostCall({engineExtrasAPI:l,hostCall:a,machine:y,videoElementAPI:s.current})}var w=null,x=null;a=[function(a,c,d){b("cr:683059")&&d.type==="implementation_host_call_applied"&&d.payload.hostCall.type==="host_call_play"&&c.controlledState.lastPlayReason==="autoplay_initiated"?b("cr:683059").addFirstMarkerPoint("firstVideoAutoplayStalling"):b("cr:683059")&&c.controlledState.playbackState!==a.controlledState.playbackState&&c.controlledState.playbackState==="playing"&&c.controlledState.lastPlayReason==="autoplay_initiated"&&b("cr:683059").addFirstMarkerPoint("firstVideoAutoplayPlaying");return!0},function(a,b,c){r(a,b,c);return!0},function(a,b,e){if(c("gkx")("1633455")&&(a.controlledState.streamInterrupted===!1&&b.controlledState.streamInterrupted===!0||a.controlledState.streamInterrupted===!0&&b.controlledState.streamInterrupted===!1)){a=b.controlledState;b=a.bufferingDetected;var f=a.lastBufferingType,g=a.streamInterrupted;a=a.targetPlaybackRate;g?(b&&y.dispatch({type:"buffering_end_requested"}),v({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:e.type},type:"host_call_set_playback_rate"})):(v({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:a,reason:e.type},type:"host_call_set_playback_rate"}),b&&y.dispatch({payload:{bufferingType:f||"in_play"},type:"buffering_begin_requested"}))}return!0},function(a,b,e){if(a.controlledState.bufferingDetected===!1&&b.controlledState.bufferingDetected===!0||a.controlledState.bufferingDetected===!0&&b.controlledState.bufferingDetected===!1){w!==null&&(c("clearTimeout")(w),w=null);if(b.controlledState.bufferingDetected&&(!c("gkx")("1633455")||!b.controlledState.streamInterrupted)){e=function a(){w=null;if(c("gkx")("1849507")&&!c("NetworkStatus").isOnline())w=c("setTimeout")(a,g);else{var b=d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError("BUFFERING_TIMEOUT",c("err")("The video has been in a buffering state for over "+g+" ms."),"buffering_timeout");x&&(x.log(),x=null);y.dispatch({payload:{fatalError:b},type:"implementation_fatal_error"});b=l.getPerfLoggerProvider();b==null?void 0:b.getOperationLogger("buffering_timeout").setType(f).log()}};var f=(a=b.controlledState.lastBufferingType)!=null?a:"in_play";a=(a=c("qex")._("241"))!=null?a:k;var g=f==="in_play"?a:k;w=c("setTimeout")(e,g);a=l.getPerfLoggerProvider();x=a?a.getOperationLogger("buffering").setType(f).start():null}else!b.controlledState.bufferingDetected&&x!=null&&(x.log(),x=null)}return!0},function(a,b,d){if(!(d.type==="implementation_engine_destroy_requested"))return!0;w!==null&&c("clearTimeout")(w);w=null;return!1},function(a,b,c){if(!(c.type==="implementation_engine_initialized"))return!0;a=o(s);c=c.type;d("VideoPlayerImplementationStateMachineHostCallQueue").flushHostCallQueue({engineExtrasAPI:l,machine:y,reason:c,state:b,videoElementAPI:a});return!1},function(a,b,c){if(!(c.type==="dom_event_ended"))return!0;a=b.controlledState;(a.loopCount>0&&a.loopCurrent<a.loopCount||a.loopCount===-1)&&y.dispatch({payload:{reason:"loop_initiated"},type:"controller_play_requested"});return!1},function(a,b,c){if(!(c.type==="controller_pause_requested"))return!0;a=b.controlledState.playbackState;if(!(a==="paused"))return!1;v({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type},type:"host_call_pause"});return!1},function(a,b,c){if(!(c.type==="controller_play_requested"))return!0;a=b.controlledState.playbackState;if(!(a==="stalling"))return!1;v({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type},type:"host_call_play"});return!1},function(a,b,c){if(!(c.type==="controller_seek_requested"))return!0;a=b.controlledState;b=a.seeking;a=a.seekTargetPosition;b&&a!=null&&v({payload:{currentTime:a,hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type},type:"host_call_set_current_time"});return!1},function(a,b,c){if(!(c.type==="controller_muted_requested"))return!0;a=b.controlledState.muted;if(!(a===c.payload.muted))return!1;v({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),muted:a,reason:c.type},type:"host_call_set_muted"});return!1},function(a,b,c){if(!(c.type==="controller_scrub_begin_requested"))return!0;v({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(!(c.type==="controller_scrub_end_requested"))return!0;a=b.controlledState;b=a.seeking;var e=a.seekTargetPosition;a=a.targetPlaybackRate;b&&e!=null?(v({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:a,reason:c.type+":seek"},type:"host_call_set_playback_rate"}),v({payload:{currentTime:e,hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type+":seek"},type:"host_call_set_current_time"})):v({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:a,reason:c.type+":cancel"},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(!(c.type==="buffering_begin_requested"))return!0;v({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(!(c.type==="controller_set_playback_rate"))return!0;v({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:c.payload.playbackRate,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(!(c.type==="buffering_end_requested"))return!0;v({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:b.controlledState.targetPlaybackRate,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(!(c.type==="controller_volume_requested"))return!0;v({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type,volume:b.controlledState.volume},type:"host_call_set_volume"});return!1},function(a,b,c){if(!(c.type==="controller_quality_requested"))return!0;v({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type,selectedVideoQuality:b.controlledState.selectedVideoQuality},type:"host_call_set_video_quality"});return!1},function(a,b,c){if(!(c.type==="controller_set_latency_level_requested"||c.type==="implementation_set_latency_level_requested"))return!0;v({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),latencyLevel:c.payload.latencyLevel,reason:c.type},type:"host_call_set_latency_level"});return!1},function(a,b,c){if(!(c.type==="dom_event_timeupdate"||c.type==="captions_loaded"))return!0;c=h.current;var e=b.controlledState.captionsVisible,f=s.current;f=f?f.getPlayheadPosition():0;if(d("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&b.controlledState.isLiveRewindActive){var g=b.controlledState.seekableRanges;g=g!=null?(g=g.end(g.length()-1))!=null?g:0:0;f>=g&&y.dispatch({payload:{isLiveRewindActive:!1},type:"controller_set_is_live_rewind_active_requested"})}if(c&&e&&b.controlledState.captionsLoaded){g=c.handleTimeUpdate(f);e=a.controlledState.activeCaptions;q(e,g)&&y.dispatch({payload:{activeCaptions:g},type:"controller_set_active_captions_requested"})}b=t.current;b!=null&&b.onUpdateStatus({position:f});return!1},function(a,b,c){if(!(c.type==="cea608_bytes_received"))return!0;a=h.current;if(a){b=c.payload;c=b.timescale;b=b.videoBytes;a.handleCea608BytesReceived({timescale:c,videoBytes:b})}return!1},function(a,b,c){if(!(c.type==="controller_set_is_live_rewind_active_requested"))return!0;l.setEnableLiveheadCatchup(!c.payload.isLiveRewindActive);!!d("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&!c.payload.isLiveRewindActive&&y.dispatch({payload:{playbackRate:1},type:"controller_set_playback_rate"});return!1}];var y=d("VideoPlayerImplementationStateMachine").createVideoPlayerImplementationStateMachineWithStateTransitionHandlers({collectUncontrolledState:function(){var a=s.current;return d("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState({engineExtrasAPI:l,fullscreenControllerRef:n,videoElementAPI:a,videoLiveTraceRef:t,videoPlayerPassiveViewabilityInfoRef:u})},debugLogId:i,initialState:d("VideoPlayerImplementationStateMachineState").createVideoPlayerImplementationStateMachineInitialState({alwaysShowCaptions:e,areCaptionsAutogenerated:f,captionDisplayStyle:g,dimensions:j,isAbrEnabled:m.isAbrEnabled,playerImplementationName:m.playerImplementationName,playerVersion:m.playerVersion,streamingFormat:m.streamingFormat}),onFatalError:p,stateTransitionHandlers:a});return y}function q(a,b){if(a===null&&b===null)return!1;if(a===null||b===null)return!0;var d=c("orEmptyArray")(b.rows);b=c("orEmptyArray")(a.rows);return b.length!==d.length||b.some(function(a,b){return a!==d[b]})}function r(a,b,c,d){a!==b.current&&(c.current&&(c.current.remove(),c.current=null),b.current=a),b.current&&!c.current&&(c.current=b.current.subscribe(function(){d.dispatch({type:"notify_fullscreen_changed"})}))}function s(a,b,c,d){a!==b.current&&(c.current&&(c.current.remove(),c.current=null),b.current=a),b.current&&!c.current&&(c.current=b.current.subscribe(function(){d.dispatch({type:"notify_viewability_changed"})}))}function t(a){var b=a.engineMetadata;a=a.state;var c=a.controlledState,d=c.activeCaptions,e=c.activeEmsgBoxes,f=c.availableQualities,g=c.captionDisplayStyle,h=c.captionsLoaded,i=c.captionsVisible,j=c.error,k=c.hasPlayEverBeenRequested,l=c.inbandCaptionsAutogenerated,m=c.isLiveRewindActive,n=c.lastMuteReason,o=c.lastPauseReason,p=c.lastPlayedTimeMs,q=c.lastPlayReason,r=c.latencyLevel,s=c.loopCount,t=c.loopCurrent,u=c.muted,v=c.playbackState,w=c.seekableRanges,x=c.seeking,y=c.seekTargetPosition,z=c.selectedVideoQuality,A=c.streamInterrupted,B=c.targetAudioQuality,C=c.targetPlaybackRate,D=c.targetVideoQuality,E=c.videoProjection,F=c.volume;c=c.watchTimeMs;var G=a.uncontrolledState,H=G.currentPlayingVideoQuality,I=G.videoElementDuration;G=G.videoElementLastBufferEndPosition;var J=v==="ended",K=v==="paused"||J,L=v==="playing",M=v==="inPlayStalling";v=v==="stalling"||M;G={activeCaptions:d,activeEmsgBoxes:e,availableVideoQualities:f,bufferEnd:(d=G)!=null?d:0,captionDisplayStyle:g,captionsLoaded:h,captionsVisible:i,currentVideoQuality:(e=H)!=null?e:"",duration:(f=I)!=null?f:0,ended:J,error:j,hasPlayEverBeenRequested:k,inPlayStalling:M,inbandCaptionsAutogenerated:l,isAbrEnabled:b.isAbrEnabled,isExternalMedia:b.isExternalMedia,isLiveRewindActive:m,lastMuteReason:n,lastPauseReason:o,lastPlayReason:q,lastPlayedTimeMs:p,latencyLevel:r,loopCount:s,loopCurrent:t,muted:u,paused:K,playerImplementationName:a.playerImplementationName,playerVersion:a.playerVersion,playing:L,seekTargetPosition:y,seekableRanges:w,seeking:x,selectedVideoQuality:z,stalling:v,streamInterrupted:A,targetAudioQuality:B,targetPlaybackRate:C,targetVideoQuality:D,videoProjection:E,volume:F,watchTimeMs:c};return G}function a(a){var b,e=a.createDebugAPI,f=a.createVideoPlayerError,g=a.debugLog;g=a.debugLogId;var h=a.destroyEngineParts,i=a.engineExtrasAPI,j=a.engineMetadata,k=a.handleFatalError,l=a.handleVideoElementMounted,m=a.handleVideoElementUnmounted,o=a.handleVideoInfoChange,q=a.initialProps,u=a.setExposedStateInReact,v=d("VideoPlayerImplementationStateMachineLogger").createVideoPlayerImplementationStateMachineLogger({debugLogId:g,initialLoggingMetaData:q.loggingMetaData}),w=new(c("VideoPlayerBanzaiLogFlusher"))(v),x={current:(a=q.videoPlayerPassiveViewabilityInfo)!=null?a:null},y={current:(a=q.fullscreenController)!=null?a:null},z={current:null},A=q.videoLiveTraceRef;a=d("useConcurrentAutoplayManagementAPI").createConcurrentAutoplayManagementAPI();var B=[],C=function(){B.forEach(function(a){a()}),q.disableLogging?w.discardLogsWithoutFlushing():w.flushLogs()},D={current:null},E={current:{inbandCaptionsAutogeneratedFromManifest:!1,inbandCaptionsExpectedFromManifest:!1,inbandCaptionsExpectedFromProps:q.inbandCaptionsExpected,sideLoadCaptionsExpectedFromProps:q.sideLoadCaptionsExpected,sideLoadCaptionsUrlFromProps:(b=q.captionsUrl)!=null?b:null}},F={current:null},G={current:null},H=new(c("SubscriptionsHandler"))(),I="before_mounted";function J(){return I==="mounted"}var K={current:null},L=function(a){a=t({engineMetadata:j,state:a});return a},M={current:null},N={current:null},O=function(a){if(J()){if(a===M.current)return;var b=L(a);if(N.current!=null&&c("deepEquals")(N.current,b))return;M.current=a;N.current=b;u(b)}};b=function(a,b,c){v.handleStateMachine(a,b,c),O(b),C()};var P=function(a,b){},Q=function(a){P(a,"state_machine_fatal_error")},R=p({alwaysShowCaptions:Boolean(q.alwaysShowCaptions),areCaptionsAutogenerated:Boolean(q.areCaptionsAutogenerated),captionDisplayStyle:q.captionDisplayStyle,captionsControllerRef:z,debugLogId:g,dimensions:q.dimensions,engineExtrasAPI:i,engineMetadata:j,fullscreenControllerRef:y,handleFatalError:Q,handleStateMachine:b,videoElementAPIRef:K,videoLiveTraceRef:A,videoPlayerPassiveViewabilityInfoRef:x}),S=!1,T=function(a){var b=D.current!=null,d=K.current!=null;H.release();R.dispatch({payload:{reason:a,videoElementAPIExisted:d,videoElementExisted:b},type:"implementation_engine_destroy_requested"});try{c("gkx")("1494163")?h(["destroyEngine("+a+")"]):S||(S=!0,h(["destroyEngine("+a+")"]))}catch(e){if(c("gkx")("1494163"))try{c("FBLogger")("comet_video_player").catching(e).warn("Error thrown by destroyEngineParts: %s %s",e.message,JSON.stringify({playerImplementationName:j.playerImplementationName,reason:a,videoElementAPIExisted:d,videoElementExisted:b}))}catch(a){}}var e=z.current;e!=null&&(R.getCurrentState().controlledState.captionsLoaded&&R.dispatch({type:"captions_unloaded"}),z.current=null,e.destroy());r(null,y,F,R);s(null,x,G,R);R.dispatch({payload:{reason:a,videoElementAPIExisted:d,videoElementExisted:b},type:"implementation_engine_destroyed"})};P=function(a,b){a=f(a,b);R.dispatch({payload:{fatalError:a},type:"implementation_fatal_error"});T("implementation_fatal_error");k(a)};function U(a){return a.sideLoadCaptionsExpectedFromProps&&a.sideLoadCaptionsUrlFromProps!==null}function V(a){return a.inbandCaptionsExpectedFromProps&&((a=a.inbandCaptionsExpectedFromManifest)!=null?a:!1)}function W(a){return(a=a.inbandCaptionsAutogeneratedFromManifest)!=null?a:!1}var X=function(a){var b=U(a),c=V(a),e=W(a),f=z.current;e!==W(E.current)&&R.dispatch({payload:{inbandCaptionsAutogenerated:e},type:"inband_captions_autogenerated_changed"});f!=null?c!==V(E.current)&&(f.updateInbandCaptionsExpected(c),!c&&R.getCurrentState().controlledState.captionsLoaded&&R.dispatch({type:"captions_unloaded"})):(b||c)&&f==null&&(z.current=d("VideoPlayerCaptionsController").createCaptionsController({captionsUrl:b?a.sideLoadCaptionsUrlFromProps:null,inbandCaptionsExpected:c,onCaptionsLoaded:function(){R.getCurrentState().controlledState.captionsLoaded||R.dispatch({type:"captions_loaded"})}}));E.current=a},Y=function(a){i!=null&&a&&a.width>0&&a.height>0&&(i.setDimensions(a),R.dispatch({payload:{dimensions:{height:a.height,width:a.width}},type:"player_dimensions_changed"}))},Z=function(a){a!==R.getCurrentState().controlledState.loopCount&&R.dispatch({payload:{loopCount:a},type:"loop_count_change_requested"})},aa=function(a){"srcObject"in a&&(a.srcObject=null)},$=function(a,b){if(D.current===a)return;if(!J()&&c("gkx")("1405244"))return;if(!J()){var e=function(a){switch(a){case"unmounted":return"EngineAPI.handleVideoElement.unmounted";case"before_mounted":return"EngineAPI.handleVideoElement.before_mounted";case"mounted":return null;default:a;return null}}(I);e&&d("VideoPlayerODS").bumpEntityKey("comet_video_player",e,1)}a!=null&&D.current!=null&&D.current!==a&&c("recoverableViolation")("The video element was recreated","comet_video_player");e=D.current;e&&aa(e);D.current=a;c("gkx")("1494163")&&(a==null&&(K.current=null));D.current!=null?(R.dispatch({type:"implementation_video_node_mounted"}),l([].concat(b,["handleVideoElement(non-null)"]))):(R.dispatch({type:"implementation_video_node_unmounted"}),m([].concat(b,["handleVideoElement(null)"])))};g=q.loggingMetaData.instanceKey;Q=function(a){var b;if(!J())return;r((b=a.fullscreenController)!=null?b:null,y,F,R);s((b=a.videoPlayerPassiveViewabilityInfo)!=null?b:null,x,G,R);if(!o(a)){b={inbandCaptionsAutogeneratedFromManifest:E.current.inbandCaptionsAutogeneratedFromManifest,inbandCaptionsExpectedFromManifest:E.current.inbandCaptionsExpectedFromManifest,inbandCaptionsExpectedFromProps:a.inbandCaptionsExpected,sideLoadCaptionsExpectedFromProps:a.sideLoadCaptionsExpected,sideLoadCaptionsUrlFromProps:(b=a.captionsUrl)!=null?b:null};X(b);Y(a.dimensions);Z((b=a.loopCount)!=null?b:0)}R.dispatch({payload:{loggingMetaData:a.loggingMetaData},type:"notify_logging_metadata_change"})};b=function(){if(I!=="before_mounted"){var a=function(a){switch(a){case"before_mounted":return null;case"unmounted":return"EngineAPI.handleReactMount.unmounted";case"mounted":return"EngineAPI.handleReactMount.mounted";default:a;return null}}(I);a&&d("VideoPlayerODS").bumpEntityKey("comet_video_player",a,1)}J()||(I="mounted",H.addSubscriptions(d("RunComet").onUnload(function(){T("page_unload")})),R.dispatch({type:"implementation_mounted"}),l(["handleReactMount"]))};g=function(){if(!J()){var a=function(a){switch(a){case"unmounted":return"EngineAPI.handleReactUnmount.unmounted";case"before_mounted":return"EngineAPI.handleReactUnmount.before_mounted";case"mounted":return null;default:a;return null}}(I);a&&d("VideoPlayerODS").bumpEntityKey("comet_video_player",a,1)}J()&&(I="unmounted",R.dispatch({payload:{reason:"react_effect_cleanup"},type:"implementation_unmounted"}),T("implementation_unmounted:react_effect_cleanup"))};a=n({concurrentAutoplayManagementAPI:a,createExposedState:L,debugAPI:e({getVideoElementAPI:function(){return K.current},logger:v}),fullscreenControllerRef:y,logger:v,machine:R,subscribers:B,videoElementAPIRef:K});e=d("VideoPlayerImplementationStateMachine").createReactVideoElementCallbacksForStateMachine(R,$);var ba=L(R.getInitialState());b={destroy:T,handleReactMount:b,handleReactPropsChanged:Q,handleReactUnmount:g,implementationController:a,initialExposedState:ba,logFlusher:w,machine:R,notifySubscribers:C,videoElementCallbacks:e,videoElementRefCallback:function(a){$(a,["videoElementRefCallback"])}};return{engine:b,getCaptionsInfo:function(){return E.current},getVideoElement:function(){return D.current},getVideoLiveTrace:function(){return A.current},handleCaptionsInfoChange:X,handleFatalImplementationError:P,logger:v,machine:R,videoElementAPIRef:K}}function u(a,b){var d,e=new Error(a.errorDescription);e.errorName=a.errorName;e.type="error";a.stack!=null&&a.stack!==""&&(e.stack=a.stack);var f=new(c("ErrorMetadata"))();f.addEntries(["COMET_VIDEO","ERROR_LOCATION",a.errorLocation],["COMET_VIDEO","ERROR_CODE",(d=a.errorCode)!=null?d:""],["COMET_VIDEO","ERROR_URL",(d=a.url)!=null?d:""]);b!=null&&f.addEntry("COMET_VIDEO","VIDEO_ID",b);d=a.originalError;d!=null&&(typeof d==="string"?f.addEntry("COMET_VIDEO","ORIGINAL_ERROR",d):d instanceof Error&&d.message!=null&&f.addEntry("COMET_VIDEO","ORIGINAL_ERROR",d.message));e.metadata=f;return e}function e(a,b){var d=j(null),e=d[0],f=d[1],g=i(!1),k=i(null);d=j(null);var l=d[0],m=d[1];h(function(){l||(k.current=null)},[l]);var n=i(a),o=i(b),p=c("useStable")(function(){return o.current({debugLogId:String(n.current.loggingMetaData.instanceKey),handleFatalError:function(a){if(g.current&&c("gkx")("1722590"))return;c("gkx")("1444664")?k.current||(k.current=a,m(a)):m(a)},initialProps:n.current,setExposedStateInReact:f})});b=(d=e)!=null?d:p.initialExposedState;d=(e=b.error)!=null?e:l;if(d!=null){if(c("killswitch")("COMET_VIDEO_ERROR_DEAGGREGATION"))throw c("unrecoverableViolation")(d.errorName+": "+d.errorDescription,"comet_video_player",{error:d.originalError instanceof Error?d.originalError:void 0});e=a.VideoPlayerShakaPerformanceLoggerClass;e&&(c("gkx")("2007883")||c("qex")._("185"))&&e.flushQueuedLogs();throw u(d,n.current.videoFBID)}h(function(){p.handleReactMount();return function(){g.current=!0,p.handleReactUnmount()}},[p]);var q=i(null);h(function(){a!==q.current&&p.handleReactPropsChanged(a),q.current=a});return[b,p]}g.internal_createVideoPlayerImplementationControllerImpl=m;g.internal_createVideoPlayerImplementationEngineStateMachineWithEffects=p;g.internal_createVideoPlayerImplementationExposedStateFromStateMachineState=t;g.createVideoPlayerImplementationEngine=a;g.useVideoPlayerImplementationEngine=e}),98);
__d("VideoPlayerImplementationEngineVideoElementAPI",["Promise","VideoPlaybackQuality","VideoPlayerOzWWWGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return isNaN(a)?0:a}function i(a){return h(a.duration)}function j(a){a=a.buffered;return a.length>0?a.end(a.length-1):0}function k(a){return h(a.currentTime)}function l(a){return a.buffered.length===0?0:a.buffered.start(0)}function a(a,e){var f=e!==!0,g=null,h=function(b){f?b==null||b===""?a.removeAttribute("src"):a.setAttribute("src",b):g=b};return{getCanPlayPromise:function(){return new(b("Promise"))(function(b,c){a.readyState===4?b():a.addEventListener("canplay",function(){return b()})})},getDOMLoadedMetadataPromise:function(){return new(b("Promise"))(function(b,c){a.addEventListener("loadedmetadata",function(){return b()})})},getDroppedFrameCount:function(){return d("VideoPlaybackQuality").getDroppedFrames(a)},getDuration:function(){return i(a)},getEnded:function(){return a.ended},getError:function(){return a.error},getLastBufferEndPosition:function(){return j(a)},getMuted:function(){return a.muted},getNetworkState:function(){return a.networkState},getPaused:function(){return a.paused},getPlaybackRate:function(){return a.playbackRate},getPlayheadPosition:function(){return k(a)},getReadyState:function(){return a.readyState},getTotalFrameCount:function(){return d("VideoPlaybackQuality").getTotalFrames(a)},getUnderlyingVideoElement:function(){return a},getVolume:function(){return a.volume},pause:function(){a.pause()},play:function(){f||(f=!0,h(g),g=null);var c=a.play();c=c&&typeof c.then==="function"?b("Promise").resolve(c):null;return c},setDuration:function(b){a.duration=b},setMuted:function(b){a.muted=b},setPlaybackRate:function(b){a.playbackRate=b},setPlayheadPosition:function(b){var d=b;if(b===0){b=c("VideoPlayerOzWWWGlobalConfig").getNumber("clamp_seek_to_first_buffer_range_epsilon",0);if(b>0){var e=l(a);e>0&&e<=b&&(d=e)}}a.currentTime=d},setSrc:h,setVolume:function(b){a.volume=b}}}g.getDurationFromVideoElement=i;g.getLastBufferEndPositionFromVideoElement=j;g.getPlayheadPositionFromVideoElement=k;g.createVideoPlayerImplementationEngineVideoElementAPI=a}),98);
__d("VideoPlayerImplementationReactVideoElement.react",["gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.alt,d=a.implementationController,e=a.implementationExposedState,f=a.renderWithVideoImplementationStates,g=a.src,i=a.videoElementCallbacks;a=a.videoElementRefCallback;var j=e.hasPlayEverBeenRequested,k=e.isExternalMedia;j=k&&!j?null:g;g=k&&c("gkx")("2449")?babelHelpers["extends"]({crossOrigin:"anonymous"},i):babelHelpers["extends"]({},i);i=h.jsxs(h.Fragment,{children:[h.jsx("video",babelHelpers["extends"]({"aria-label":(k=b)!=null?k:void 0,className:"k4urcfbm datstx6m a8c37x1j",controls:!1,muted:!0,playsInline:!0},g,{ref:a,src:j})),f({implementationController:d,videoState:e})]});return i}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerProgressiveImplementationData",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.hdSrc,c=a.hdSrcPreferred,d=a.isExternalMedia;a=a.sdSrc;return a==null?null:{hdSrc:b,hdSrcPreferred:c,isExternalMedia:d,sdSrc:a}}f.makeProgressiveImplementationData=a}),66);
__d("VideoPlayerProgressiveImplementationEngineExtrasAPI",["orEmptyArray"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a!==null&&a.indexOf(".m3u8")!==-1}function a(a){var b=a.getPlayingVideoInfo;a=a.setUserSelectedVideoQuality;a={getApproximateFBLSToPlayerDisplayLatency:function(){return null},getAudioRepresentationIDAtTime:function(a){return null},getAvailableVideoQualities:function(){var a;return c("orEmptyArray")((a=b())==null?void 0:a.availableQualities)},getCurrentAudioRepresentation:function(){return null},getCurrentPlayingVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.targetQuality)!=null?a:""},getCurrentTargetVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.targetQuality)!=null?a:""},getCurrentVideoRepresentation:function(){return null},getEstimatedBandwidth:function(){return null},getInbandCaptionsAutogeneratedFromManifest:function(){return!1},getInbandCaptionsExpectedFromManifest:function(){return!1},getPerfLoggerProvider:function(){return null},getStreamType:function(){var a=b();a=a==null?"progressive":h(a.hdSrc)||h(a.sdSrc)?"hls":"progressive";return a},getUserSelectedVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.selectedQuality)!=null?a:"notselected"},getVideoProjectionType:function(){return"cubemap"},getVideoRepresentationIDAtTime:function(a){return"oep_hd"},getVideoRepresentations:function(){return null},isDrm:function(){var a;return((a=b())==null?void 0:a.graphQLVideoDRMInfo)!=null},isFBIsLiveTemplated:function(){return!1},isFBMS:function(){return!1},isFBWasLive:function(){return!1},isPredictiveDash:function(){return!1},setDimensions:function(a){},setEnableLiveheadCatchup:function(){},setLatencyLevel:function(){},setUserSelectedVideoQuality:a};return a}g.createVideoPlayerProgressiveImplementationEngineExtrasAPI=a}),98);
__d("VideoPlayerProgressiveImplementationEngineUtils",[],(function(a,b,c,d,e,f){"use strict";var g="hd",h="sd";function a(a){var b=[];a.sdSrc!=null&&b.push(h);a.hdSrc!=null&&b.push(g);var c=a.hdSrcPreferred&&a.hdSrc!=null?g:h;return babelHelpers["extends"]({},a,{availableQualities:b,playingQuality:null,playingSrc:null,selectedQuality:c,targetQuality:c,targetSrc:null})}function b(a,b){var c=a.hdSrc,d=a.sdSrc,e,f;b==="notselected"||b==="auto"?(e=d!=null?h:c!=null?g:h,f=d!=null?d:c!=null?c:null):b===g&&c!=null?(e=g,f=c):b===h&&d!=null?(e=h,f=d):(e=h,f=null);f===""&&(f=null);return babelHelpers["extends"]({},a,{selectedQuality:b,targetQuality:e,targetSrc:f})}function c(a,b,c){return babelHelpers["extends"]({},a,{playingQuality:b,playingSrc:c})}f.createResolvedVideoInfoProgressive=a;f.updatePlayingVideoInfoProgressiveWithUserSelectedQuality=b;f.updatePlayingVideoInfoProgressiveWithCurrentPlayingQuality=c}),66);
__d("VideoPlayerProgressiveImplementationEngine",["FBLogger","UserAgent","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerODS","VideoPlayerProgressiveImplementationEngineExtrasAPI","VideoPlayerProgressiveImplementationEngineUtils","cr:1473550","cr:1512856","cr:1680308","emptyFunction","gkx","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=c("emptyFunction");function i(a,b){return d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError("PROGRESSIVE_JAVASCRIPT_NATIVE",a,b)}function a(a){var e=a.debugLogId,f=a.handleFatalError,g=a.initialProps;a=a.setExposedStateInReact;var j={current:null},k={current:null},l={current:null},m={current:null},n=function(){var a=m.current;a!=null&&(m.current=null,a())},o=function(a){n();var e=w();if(e==null)throw c("unrecoverableViolation")("Need videoElement in startSwitchingSource","comet_video_player");if(b("cr:1512856")==null)throw c("unrecoverableViolation")("Need SourceSwitcher in startSwitchingSource","comet_video_player");m.current=b("cr:1512856").startSwitchingVideoElementSource({getShouldBePlaying:function(){return z.getCurrentState().controlledState.playbackState==="playing"||z.getCurrentState().controlledState.playbackState==="stalling"},onSourceSwitchCancelled:function(){z.dispatch({type:"buffering_end_requested"})},onSourceSwitchFailed:function(a){c("FBLogger")("comet_video_player").catching(a).warn("Progressive source switch failed: %s",String(a)),z.dispatch({type:"buffering_end_requested"})},onSourceSwitchStarted:function(){z.dispatch({payload:{bufferingType:"in_play"},type:"buffering_begin_requested"})},onSourceSwitchSucceeded:function(){var a=l.current;a!=null&&a.targetQuality!=null&&(l.current=d("VideoPlayerProgressiveImplementationEngineUtils").updatePlayingVideoInfoProgressiveWithCurrentPlayingQuality(a,a.targetQuality,a.targetSrc));z.dispatch({type:"buffering_end_requested"})},targetSrc:a,videoElement:e})},p={current:null},q=function(){var a=w(),e=k.current;if(a==null||e==null)return;try{var f,h=e.graphQLVideoDRMInfo,i=e.videoFBID;f=h?(f=h.fairplayCert)!=null?f:null:null;b("cr:1680308")&&(p.current=h&&f!=null&&i!=null?new(b("cr:1680308"))(f,a,i,h.videoLicenseUriMap):null);var j=d("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(a,g.isExternalMedia);A.current=j;l.current=e;f=v();x({inbandCaptionsAutogeneratedFromManifest:t.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:t.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:f==null?void 0:f.inbandCaptionsExpectedFromProps,sideLoadCaptionsExpectedFromProps:f==null?void 0:f.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:f==null?void 0:f.sideLoadCaptionsUrlFromProps});z.dispatch({payload:{availableQualities:t.getAvailableVideoQualities(),selectedVideoQuality:t.getUserSelectedVideoQuality(),streamingFormat:t.getStreamType(),targetVideoQuality:t.getCurrentTargetVideoQuality(),videoProjection:t.getVideoProjectionType()},type:"implementation_engine_initialized"});i=function(){j.setPlayheadPosition(g.startTimestamp)};c("UserAgent").isBrowser("IE11")?c("promiseDone")(j.getDOMLoadedMetadataPromise().then(i)):i()}catch(a){y(a,"progressive_player_create_exception")}},r=function(a,b){if(b==null)return!0;else if(a.videoFBID!==b.videoFBID){var c=14;d("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.video_fbid_changed",c);return!1}else if(a.hdSrc!==b.hdSrc||a.sdSrc!==b.sdSrc){c=14;d("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.src_changed",c);return!1}else return!1},s=function(a){var b;b={graphQLVideoDRMInfo:(b=a.graphQLVideoDRMInfo)!=null?b:null,hdSrc:a.hdSrc===""?null:(b=a.hdSrc)!=null?b:null,hdSrcPreferred:a.hdSrcPreferred,sdSrc:a.sdSrc===""?null:(b=a.sdSrc)!=null?b:null,videoFBID:a.videoFBID};if(!r(b,j.current))return!1;if(b.hdSrc==null&&b.sdSrc==null)throw c("unrecoverableViolation")("Empty hdSrc and sdSrc","comet_video_player");j.current=b;k.current=d("VideoPlayerProgressiveImplementationEngineUtils").createResolvedVideoInfoProgressive(b);q();return!0},t=d("VideoPlayerProgressiveImplementationEngineExtrasAPI").createVideoPlayerProgressiveImplementationEngineExtrasAPI({getPlayingVideoInfo:function(){return l.current},setUserSelectedVideoQuality:function(a){var b=l.current;if(!b)throw c("unrecoverableViolation")("Attempt to switch quality when playingVideoInfo does not exist","comet_video_player");var e=A.current;if(!e)throw c("unrecoverableViolation")("Attempt to switch quality when videoElementAPI does not exist","comet_video_player");var f=b.targetQuality,g=b.targetSrc;l.current=d("VideoPlayerProgressiveImplementationEngineUtils").updatePlayingVideoInfoProgressiveWithUserSelectedQuality(b,a);b=l.current;a=b.targetQuality;b=b.targetSrc;if(c("gkx")("1467411"))b!==g&&(b==null?(n(),e.setSrc(null)):o(b)),f!=null&&a!==f&&a!=null&&z.dispatch({payload:{targetVideoQuality:a},type:"representation_changed"});else{e.setSrc(b);if(b!=null){f=(g=z.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?g:0;f>0&&e.setPlayheadPosition(f);z.getCurrentState().controlledState.playbackState==="playing"&&e.play();z.dispatch({payload:{targetVideoQuality:t.getCurrentTargetVideoQuality()},type:"representation_changed"})}}}}),u=function(){p.current&&(p.current.destroy(),p.current=null)};e=d("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({createDebugAPI:function(a){var c=a.getVideoElementAPI;a=a.logger;return b("cr:1473550")?b("cr:1473550").createVideoPlayerImplementationDebugAPI({engineExtrasAPI:t,getVideoElementAPI:c,logger:a}):null},createVideoPlayerError:i,debugLog:h,debugLogId:e,destroyEngineParts:function(){if(c("gkx")("1467411")){n();var a=A.current;a&&a.setSrc(null);l.current=null}u()},engineExtrasAPI:t,engineMetadata:{isAbrEnabled:!1,isExternalMedia:g.isExternalMedia,playerImplementationName:"progressive_v2",playerVersion:"comet_progressive",streamingFormat:"progressive"},handleFatalError:f,handleVideoElementMounted:q,handleVideoElementUnmounted:function(){c("gkx")("1467411")&&n()},handleVideoInfoChange:s,initialProps:g,setExposedStateInReact:a});f=e.engine;var v=e.getCaptionsInfo,w=e.getVideoElement,x=e.handleCaptionsInfoChange,y=e.handleFatalImplementationError,z=e.machine,A=e.videoElementAPIRef;return f}g.createVideoPlayerProgressiveImplementationEngine=a}),98);
__d("VideoPlayerProgressiveImplementationV2.react",["VideoPlayerImplementationEngineAPI","VideoPlayerImplementationReactVideoElement.react","VideoPlayerProgressiveImplementationEngine","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=d("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(a,d("VideoPlayerProgressiveImplementationEngine").createVideoPlayerProgressiveImplementationEngine),e=b[0];b=b[1];return h.jsx(c("VideoPlayerImplementationReactVideoElement.react"),{alt:a.alt,implementationController:b.implementationController,implementationExposedState:e,renderWithVideoImplementationStates:a.renderWithVideoImplementationStates,videoElementCallbacks:b.videoElementCallbacks,videoElementRefCallback:b.videoElementRefCallback})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometVideoPlayerInstreamAdsFeedContextCardContext",["react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=d("react").useContext,i=b.createContext(null);function a(){return h(i)}g.CometVideoPlayerInstreamAdsFeedContextCardContext=i;g.useCometVideoPlayerInstreamAdsFeedContextCardContext=a}),98);